import{d as ft,r as Tn,a as s4,b as l4,c as Cr,i as Eo,e as Ad,f as u4,g as YA,o as Xi,h as bt,j as Er,k as oa,l as Id,m as KA,u as bu,n as rx,T as nx,p as Ze,q as yt,s as Hr,t as Bc,v as Mr,w as sa,x as JA,_ as Dr,y as c4,z as nt,A as h4,B as f4,C as Ia,D as QA,E as lg,F as Zm,G as A0,H as ug,I as eI,J as d4,K as ix,L as us,M as Ai,N as Wr,O as Zn,P as Za,Q as Tr,R as Wt,S as Md,U as Sn,V as zn,W as I0,X as p4,Y as m4,Z as xv,$ as bv,a0 as tI,a1 as v4,a2 as g4,a3 as b2,a4 as _4,a5 as rI,a6 as nI,a7 as y4,a8 as x4,a9 as b4,aa as w4,ab as S4,ac as T4}from"./framework-041070b5.js";const E4="modulepreload",C4=function(e){return"/"+e},w2={},Le=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=C4(o),o in w2)return;w2[o]=!0;const u=o.endsWith(".css"),a=u?'[rel="stylesheet"]':"";if(!!n)for(let v=i.length-1;v>=0;v--){const _=i[v];if(_.href===o&&(!u||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":E4,u||(p.as="script",p.crossOrigin=""),p.href=o,document.head.appendChild(p),u)return new Promise((v,_)=>{p.addEventListener("load",v),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},A4={"v-8daa1a0e":()=>Le(()=>import("./index.html-61570f8a.js"),[]).then(({data:e})=>e),"v-74bc627b":()=>Le(()=>import("./index.html-eb18c019.js"),[]).then(({data:e})=>e),"v-08ae5eba":()=>Le(()=>import("./2018-2019.html-6df7b75f.js"),[]).then(({data:e})=>e),"v-93cfbde4":()=>Le(()=>import("./2019-2020.html-4ce2d375.js"),[]).then(({data:e})=>e),"v-f917537a":()=>Le(()=>import("./2020-2021.html-93c2659b.js"),[]).then(({data:e})=>e),"v-1a0de1a3":()=>Le(()=>import("./2021-2022.html-0c8f639e.js"),[]).then(({data:e})=>e),"v-190ab309":()=>Le(()=>import("./2021fall.html-fecf308b.js"),[]).then(({data:e})=>e),"v-9eb125fa":()=>Le(()=>import("./2022-2023.html-c6606309.js"),[]).then(({data:e})=>e),"v-96167c50":()=>Le(()=>import("./index.html-9c74c25a.js"),[]).then(({data:e})=>e),"v-96536bf0":()=>Le(()=>import("./index.html-d45c193f.js"),[]).then(({data:e})=>e),"v-dbd38712":()=>Le(()=>import("./index.html-f6e4f59a.js"),[]).then(({data:e})=>e),"v-c73889da":()=>Le(()=>import("./index.html-bca1b7e0.js"),[]).then(({data:e})=>e),"v-2c5c0e04":()=>Le(()=>import("./building-11-elevator.html-41e8732d.js"),[]).then(({data:e})=>e),"v-104cfa63":()=>Le(()=>import("./2021.html-ab8984b0.js"),[]).then(({data:e})=>e),"v-780207b9":()=>Le(()=>import("./index.html-0db73764.js"),[]).then(({data:e})=>e),"v-14e6315a":()=>Le(()=>import("./index.html-edcdf602.js"),[]).then(({data:e})=>e),"v-42f2be94":()=>Le(()=>import("./vehicle-charger.html-a72444cb.js"),[]).then(({data:e})=>e),"v-ed48bdf8":()=>Le(()=>import("./index.html-834a4f2f.js"),[]).then(({data:e})=>e),"v-f4bc5604":()=>Le(()=>import("./index.html-eb5540a3.js"),[]).then(({data:e})=>e),"v-1500d063":()=>Le(()=>import("./index.html-6ebee453.js"),[]).then(({data:e})=>e),"v-014445c8":()=>Le(()=>import("./index.html-f08a1eb2.js"),[]).then(({data:e})=>e),"v-461d4a7c":()=>Le(()=>import("./registered-organization-2019.html-980e7607.js"),[]).then(({data:e})=>e),"v-6ba7e826":()=>Le(()=>import("./registered-organization-2020.html-84bee617.js"),[]).then(({data:e})=>e),"v-6d5cc0c5":()=>Le(()=>import("./registered-organization-2021.html-f788e063.js"),[]).then(({data:e})=>e),"v-28ddfa13":()=>Le(()=>import("./index.html-1d0f9bc7.js"),[]).then(({data:e})=>e),"v-be92ea7e":()=>Le(()=>import("./index.html-449d2048.js"),[]).then(({data:e})=>e),"v-d7188082":()=>Le(()=>import("./index.html-65ef67dc.js"),[]).then(({data:e})=>e),"v-d1061704":()=>Le(()=>import("./paper-tools.html-60251304.js"),[]).then(({data:e})=>e),"v-4322d0a7":()=>Le(()=>import("./index.html-8deb1c72.js"),[]).then(({data:e})=>e),"v-69b23ddf":()=>Le(()=>import("./index.html-83cc8007.js"),[]).then(({data:e})=>e),"v-1678dd6f":()=>Le(()=>import("./bustimer-wx.html-71e1fc91.js"),[]).then(({data:e})=>e),"v-1630dfb5":()=>Le(()=>import("./bustimer.html-491ded91.js"),[]).then(({data:e})=>e),"v-6a28f6e0":()=>Le(()=>import("./holiday.html-154443ae.js"),[]).then(({data:e})=>e),"v-48975204":()=>Le(()=>import("./redirect.html-d18ba873.js"),[]).then(({data:e})=>e),"v-8059a7a6":()=>Le(()=>import("./workday.html-2d182c51.js"),[]).then(({data:e})=>e),"v-22cd7d0c":()=>Le(()=>import("./index.html-64466982.js"),[]).then(({data:e})=>e),"v-0e92d420":()=>Le(()=>import("./index.html-75b00be9.js"),[]).then(({data:e})=>e),"v-2b8cac58":()=>Le(()=>import("./新生攻略之宿舍生活篇.html-0d2fe2da.js"),[]).then(({data:e})=>e),"v-66965350":()=>Le(()=>import("./新生攻略之校内介绍篇.html-72f9af6d.js"),[]).then(({data:e})=>e),"v-66317da4":()=>Le(()=>import("./新生攻略之社团篇.html-c33ad481.js"),[]).then(({data:e})=>e),"v-5c3fcdf6":()=>Le(()=>import("./index.html-9b12143b.js"),[]).then(({data:e})=>e),"v-04710004":()=>Le(()=>import("./index.html-6e033e10.js"),[]).then(({data:e})=>e),"v-5589dd0c":()=>Le(()=>import("./dorm-floor-plan.html-6ee8bfb0.js"),[]).then(({data:e})=>e),"v-d42194b6":()=>Le(()=>import("./index.html-f8e292f5.js"),[]).then(({data:e})=>e),"v-20383a78":()=>Le(()=>import("./index.html-bf6a4e46.js"),[]).then(({data:e})=>e),"v-42c1fa44":()=>Le(()=>import("./index.html-a7f6b4a6.js"),[]).then(({data:e})=>e),"v-76cff034":()=>Le(()=>import("./index.html-e5b751d4.js"),[]).then(({data:e})=>e),"v-ac3449b2":()=>Le(()=>import("./send-receive-email-by-proxy.html-ea93bfb5.js"),[]).then(({data:e})=>e),"v-29860ed0":()=>Le(()=>import("./index.html-19231713.js"),[]).then(({data:e})=>e),"v-622da02f":()=>Le(()=>import("./index.html-46ffb0d9.js"),[]).then(({data:e})=>e),"v-5e590ec6":()=>Le(()=>import("./index.html-55df6efe.js"),[]).then(({data:e})=>e),"v-1fa222d4":()=>Le(()=>import("./index.html-9536c6ab.js"),[]).then(({data:e})=>e),"v-48519846":()=>Le(()=>import("./index.html-3e960530.js"),[]).then(({data:e})=>e),"v-369295b4":()=>Le(()=>import("./index.html-552b04b5.js"),[]).then(({data:e})=>e),"v-3692bb1f":()=>Le(()=>import("./index.html-9fe9badf.js"),[]).then(({data:e})=>e),"v-425958ce":()=>Le(()=>import("./index.html-bb1c0a7a.js"),[]).then(({data:e})=>e),"v-3692ee77":()=>Le(()=>import("./index.html-f923fcd8.js"),[]).then(({data:e})=>e),"v-2686552a":()=>Le(()=>import("./index.html-2f188677.js"),[]).then(({data:e})=>e),"v-45d74ec0":()=>Le(()=>import("./index.html-14741737.js"),[]).then(({data:e})=>e),"v-772a5784":()=>Le(()=>import("./index.html-789f2b28.js"),[]).then(({data:e})=>e),"v-8460eeb8":()=>Le(()=>import("./advice-on-study.html-ef8bfd6e.js"),[]).then(({data:e})=>e),"v-435bd49a":()=>Le(()=>import("./info-on-study.html-25641cb9.js"),[]).then(({data:e})=>e),"v-6323734e":()=>Le(()=>import("./新生攻略之学习篇.html-85ec4859.js"),[]).then(({data:e})=>e),"v-5eb748bf":()=>Le(()=>import("./innovative-project.html-d71eddfd.js"),[]).then(({data:e})=>e),"v-2a23f022":()=>Le(()=>import("./index.html-454a6b7e.js"),[]).then(({data:e})=>e),"v-66061b92":()=>Le(()=>import("./index.html-75885907.js"),[]).then(({data:e})=>e),"v-89ac2bec":()=>Le(()=>import("./index.html-10468cac.js"),[]).then(({data:e})=>e),"v-1549b190":()=>Le(()=>import("./index.html-5a2e0f63.js"),[]).then(({data:e})=>e),"v-9e1961f8":()=>Le(()=>import("./index.html-67d10bc8.js"),[]).then(({data:e})=>e),"v-6bba5e58":()=>Le(()=>import("./index.html-db81381a.js"),[]).then(({data:e})=>e),"v-83a77034":()=>Le(()=>import("./index.html-b292bf67.js"),[]).then(({data:e})=>e),"v-296d1d15":()=>Le(()=>import("./index.html-0f8514a5.js"),[]).then(({data:e})=>e),"v-fb711be8":()=>Le(()=>import("./index.html-252b8cfb.js"),[]).then(({data:e})=>e),"v-3706649a":()=>Le(()=>import("./404.html-f9875e7b.js"),[]).then(({data:e})=>e)},I4=JSON.parse(`{"base":"/","lang":"en-US","title":"","description":"","head":[["link",{"rel":"icon","href":"/logo-assets/touch/homescreen192.png"}],["meta",{"name":"theme-color","content":"#49BF7C"}],["link",{"rel":"manifest","href":"/manifest.webmanifest"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:type","content":"article"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:image","content":"https://mirrors.sustech.edu.cn/git/sustech-online/sustech-online-ng/-/raw/master/docs/assets/og-image.png"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:article:author","content":"sustech.online"}],["meta",{"name":"apple-mobile-web-app-capable","content":"yes"}],["meta",{"name":"apple-mobile-web-app-status-bar-style","content":"black"}],["link",{"rel":"apple-touch-icon","href":"/logo-assets/touch/homescreen168.png"}],["meta",{"name":"msapplication-TileImage","content":"/logo-assets/touch/homescreen144.png"}],["meta",{"name":"msapplication-TileColor","content":"#49BF7C"}],["meta",{"name":"google-site-verification","content":"Av-srANCmFA_yZ8Iasa1yQsIPJCF_zlP5AoD35m6_Ww"}],["script",{"async":true,"src":"https://googletagmanager.com/gtag/js?id=G-1BQBXDGY3R"}],["script",{},"\\n                        window.dataLayer = window.dataLayer || [];\\n                        function gtag(){dataLayer.push(arguments);}\\n                        gtag('js', new Date());\\n                        gtag('config', 'G-1BQBXDGY3R');\\n                        "],["script",{"src":"/wx_helper.js"}],["script",{"src":"https://res.wx.qq.com/open/js/jweixin-1.6.0.js"}],["script",{"src":"https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"}],["script",{"src":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"}],["script",{"src":"https://lib.baomitu.com/datatables/1.10.21/js/jquery.dataTables.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/datatables/1.10.21/css/jquery.dataTables.min.css"}]],"locales":{"/":{"title":"南科手册","lang":"zh-CN","description":"Online manual for sustecher"}}}`),iI={"v-8daa1a0e":ft(()=>Le(()=>import("./index.html-10f83785.js"),["assets/index.html-10f83785.js","assets/framework-041070b5.js"])),"v-74bc627b":ft(()=>Le(()=>import("./index.html-2bd4247f.js"),["assets/index.html-2bd4247f.js","assets/framework-041070b5.js"])),"v-08ae5eba":ft(()=>Le(()=>import("./2018-2019.html-a0acd972.js"),["assets/2018-2019.html-a0acd972.js","assets/framework-041070b5.js"])),"v-93cfbde4":ft(()=>Le(()=>import("./2019-2020.html-d03696ce.js"),["assets/2019-2020.html-d03696ce.js","assets/framework-041070b5.js"])),"v-f917537a":ft(()=>Le(()=>import("./2020-2021.html-81ca4653.js"),["assets/2020-2021.html-81ca4653.js","assets/framework-041070b5.js"])),"v-1a0de1a3":ft(()=>Le(()=>import("./2021-2022.html-c2555ded.js"),["assets/2021-2022.html-c2555ded.js","assets/framework-041070b5.js"])),"v-190ab309":ft(()=>Le(()=>import("./2021fall.html-99d32251.js"),["assets/2021fall.html-99d32251.js","assets/framework-041070b5.js"])),"v-9eb125fa":ft(()=>Le(()=>import("./2022-2023.html-10c48653.js"),["assets/2022-2023.html-10c48653.js","assets/22-23-spring-0b3d9f4c.js","assets/framework-041070b5.js"])),"v-96167c50":ft(()=>Le(()=>import("./index.html-343df302.js"),["assets/index.html-343df302.js","assets/22-23-spring-0b3d9f4c.js","assets/framework-041070b5.js"])),"v-96536bf0":ft(()=>Le(()=>import("./index.html-acb07f8c.js"),["assets/index.html-acb07f8c.js","assets/framework-041070b5.js"])),"v-dbd38712":ft(()=>Le(()=>import("./index.html-4fd0d5f7.js"),["assets/index.html-4fd0d5f7.js","assets/framework-041070b5.js"])),"v-c73889da":ft(()=>Le(()=>import("./index.html-e3cd062a.js"),["assets/index.html-e3cd062a.js","assets/framework-041070b5.js"])),"v-2c5c0e04":ft(()=>Le(()=>import("./building-11-elevator.html-d9a83fc9.js"),["assets/building-11-elevator.html-d9a83fc9.js","assets/framework-041070b5.js"])),"v-104cfa63":ft(()=>Le(()=>import("./2021.html-3441a7e6.js"),["assets/2021.html-3441a7e6.js","assets/framework-041070b5.js"])),"v-780207b9":ft(()=>Le(()=>import("./index.html-720d21f2.js"),["assets/index.html-720d21f2.js","assets/framework-041070b5.js"])),"v-14e6315a":ft(()=>Le(()=>import("./index.html-6751da86.js"),["assets/index.html-6751da86.js","assets/framework-041070b5.js"])),"v-42f2be94":ft(()=>Le(()=>import("./vehicle-charger.html-a77d3d1d.js"),["assets/vehicle-charger.html-a77d3d1d.js","assets/framework-041070b5.js"])),"v-ed48bdf8":ft(()=>Le(()=>import("./index.html-2f4d5bff.js"),["assets/index.html-2f4d5bff.js","assets/framework-041070b5.js"])),"v-f4bc5604":ft(()=>Le(()=>import("./index.html-f5d44b5e.js"),["assets/index.html-f5d44b5e.js","assets/framework-041070b5.js"])),"v-1500d063":ft(()=>Le(()=>import("./index.html-b1403eaa.js"),["assets/index.html-b1403eaa.js","assets/framework-041070b5.js"])),"v-014445c8":ft(()=>Le(()=>import("./index.html-23b45cc9.js"),["assets/index.html-23b45cc9.js","assets/framework-041070b5.js"])),"v-461d4a7c":ft(()=>Le(()=>import("./registered-organization-2019.html-c93b4635.js"),["assets/registered-organization-2019.html-c93b4635.js","assets/framework-041070b5.js"])),"v-6ba7e826":ft(()=>Le(()=>import("./registered-organization-2020.html-1c882dee.js"),["assets/registered-organization-2020.html-1c882dee.js","assets/framework-041070b5.js"])),"v-6d5cc0c5":ft(()=>Le(()=>import("./registered-organization-2021.html-9c8cf859.js"),["assets/registered-organization-2021.html-9c8cf859.js","assets/framework-041070b5.js"])),"v-28ddfa13":ft(()=>Le(()=>import("./index.html-8e530066.js"),["assets/index.html-8e530066.js","assets/framework-041070b5.js"])),"v-be92ea7e":ft(()=>Le(()=>import("./index.html-24e5f7a6.js"),["assets/index.html-24e5f7a6.js","assets/framework-041070b5.js"])),"v-d7188082":ft(()=>Le(()=>import("./index.html-035ce58e.js"),["assets/index.html-035ce58e.js","assets/framework-041070b5.js"])),"v-d1061704":ft(()=>Le(()=>import("./paper-tools.html-58c7f510.js"),["assets/paper-tools.html-58c7f510.js","assets/framework-041070b5.js"])),"v-4322d0a7":ft(()=>Le(()=>import("./index.html-afb7e45d.js"),["assets/index.html-afb7e45d.js","assets/1-ba814636.js","assets/framework-041070b5.js"])),"v-69b23ddf":ft(()=>Le(()=>import("./index.html-cc1bd7fa.js"),["assets/index.html-cc1bd7fa.js","assets/1-ba814636.js","assets/framework-041070b5.js"])),"v-1678dd6f":ft(()=>Le(()=>import("./bustimer-wx.html-f68adf3d.js"),["assets/bustimer-wx.html-f68adf3d.js","assets/busline2-c318b2e1.js","assets/framework-041070b5.js"])),"v-1630dfb5":ft(()=>Le(()=>import("./bustimer.html-39a9c596.js"),["assets/bustimer.html-39a9c596.js","assets/busline2-c318b2e1.js","assets/framework-041070b5.js"])),"v-6a28f6e0":ft(()=>Le(()=>import("./holiday.html-fd8a50d5.js"),["assets/holiday.html-fd8a50d5.js","assets/busline2-c318b2e1.js","assets/framework-041070b5.js"])),"v-48975204":ft(()=>Le(()=>import("./redirect.html-eb6b9478.js"),["assets/redirect.html-eb6b9478.js","assets/framework-041070b5.js"])),"v-8059a7a6":ft(()=>Le(()=>import("./workday.html-33030d7a.js"),["assets/workday.html-33030d7a.js","assets/busline2-c318b2e1.js","assets/framework-041070b5.js"])),"v-22cd7d0c":ft(()=>Le(()=>import("./index.html-9c10bcf9.js"),["assets/index.html-9c10bcf9.js","assets/framework-041070b5.js"])),"v-0e92d420":ft(()=>Le(()=>import("./index.html-d16a711f.js"),["assets/index.html-d16a711f.js","assets/framework-041070b5.js"])),"v-2b8cac58":ft(()=>Le(()=>import("./新生攻略之宿舍生活篇.html-bc5b94ec.js"),["assets/新生攻略之宿舍生活篇.html-bc5b94ec.js","assets/framework-041070b5.js"])),"v-66965350":ft(()=>Le(()=>import("./新生攻略之校内介绍篇.html-218b2203.js"),["assets/新生攻略之校内介绍篇.html-218b2203.js","assets/framework-041070b5.js"])),"v-66317da4":ft(()=>Le(()=>import("./新生攻略之社团篇.html-1202ca31.js"),["assets/新生攻略之社团篇.html-1202ca31.js","assets/framework-041070b5.js"])),"v-5c3fcdf6":ft(()=>Le(()=>import("./index.html-b124683d.js"),["assets/index.html-b124683d.js","assets/framework-041070b5.js"])),"v-04710004":ft(()=>Le(()=>import("./index.html-255aaf2e.js"),["assets/index.html-255aaf2e.js","assets/framework-041070b5.js"])),"v-5589dd0c":ft(()=>Le(()=>import("./dorm-floor-plan.html-e6a6cacc.js"),["assets/dorm-floor-plan.html-e6a6cacc.js","assets/framework-041070b5.js"])),"v-d42194b6":ft(()=>Le(()=>import("./index.html-f894a611.js"),["assets/index.html-f894a611.js","assets/framework-041070b5.js"])),"v-20383a78":ft(()=>Le(()=>import("./index.html-56821e73.js"),["assets/index.html-56821e73.js","assets/framework-041070b5.js"])),"v-42c1fa44":ft(()=>Le(()=>import("./index.html-892dabed.js"),["assets/index.html-892dabed.js","assets/framework-041070b5.js"])),"v-76cff034":ft(()=>Le(()=>import("./index.html-ba9e12a6.js"),["assets/index.html-ba9e12a6.js","assets/framework-041070b5.js"])),"v-ac3449b2":ft(()=>Le(()=>import("./send-receive-email-by-proxy.html-3abdb0c8.js"),["assets/send-receive-email-by-proxy.html-3abdb0c8.js","assets/framework-041070b5.js"])),"v-29860ed0":ft(()=>Le(()=>import("./index.html-7687b7b1.js"),["assets/index.html-7687b7b1.js","assets/framework-041070b5.js"])),"v-622da02f":ft(()=>Le(()=>import("./index.html-924c5c83.js"),["assets/index.html-924c5c83.js","assets/framework-041070b5.js"])),"v-5e590ec6":ft(()=>Le(()=>import("./index.html-254a208c.js"),["assets/index.html-254a208c.js","assets/framework-041070b5.js"])),"v-1fa222d4":ft(()=>Le(()=>import("./index.html-129026c8.js"),["assets/index.html-129026c8.js","assets/framework-041070b5.js"])),"v-48519846":ft(()=>Le(()=>import("./index.html-e172776c.js"),["assets/index.html-e172776c.js","assets/framework-041070b5.js"])),"v-369295b4":ft(()=>Le(()=>import("./index.html-5fbb9f81.js"),["assets/index.html-5fbb9f81.js","assets/framework-041070b5.js"])),"v-3692bb1f":ft(()=>Le(()=>import("./index.html-a25ba8bf.js"),["assets/index.html-a25ba8bf.js","assets/framework-041070b5.js"])),"v-425958ce":ft(()=>Le(()=>import("./index.html-65676bd3.js"),["assets/index.html-65676bd3.js","assets/framework-041070b5.js"])),"v-3692ee77":ft(()=>Le(()=>import("./index.html-4f35b9a5.js"),["assets/index.html-4f35b9a5.js","assets/framework-041070b5.js"])),"v-2686552a":ft(()=>Le(()=>import("./index.html-819943ef.js"),["assets/index.html-819943ef.js","assets/framework-041070b5.js"])),"v-45d74ec0":ft(()=>Le(()=>import("./index.html-d7b819bb.js"),["assets/index.html-d7b819bb.js","assets/framework-041070b5.js"])),"v-772a5784":ft(()=>Le(()=>import("./index.html-0cd9a46c.js"),["assets/index.html-0cd9a46c.js","assets/framework-041070b5.js"])),"v-8460eeb8":ft(()=>Le(()=>import("./advice-on-study.html-941802ec.js"),["assets/advice-on-study.html-941802ec.js","assets/framework-041070b5.js"])),"v-435bd49a":ft(()=>Le(()=>import("./info-on-study.html-dd7bee1a.js"),["assets/info-on-study.html-dd7bee1a.js","assets/framework-041070b5.js"])),"v-6323734e":ft(()=>Le(()=>import("./新生攻略之学习篇.html-22b0c462.js"),["assets/新生攻略之学习篇.html-22b0c462.js","assets/framework-041070b5.js"])),"v-5eb748bf":ft(()=>Le(()=>import("./innovative-project.html-fa07be00.js"),["assets/innovative-project.html-fa07be00.js","assets/framework-041070b5.js"])),"v-2a23f022":ft(()=>Le(()=>import("./index.html-f62fb2e4.js"),["assets/index.html-f62fb2e4.js","assets/framework-041070b5.js"])),"v-66061b92":ft(()=>Le(()=>import("./index.html-7f51c40a.js"),["assets/index.html-7f51c40a.js","assets/framework-041070b5.js"])),"v-89ac2bec":ft(()=>Le(()=>import("./index.html-6f4b644b.js"),["assets/index.html-6f4b644b.js","assets/framework-041070b5.js"])),"v-1549b190":ft(()=>Le(()=>import("./index.html-7489fdb3.js"),["assets/index.html-7489fdb3.js","assets/framework-041070b5.js"])),"v-9e1961f8":ft(()=>Le(()=>import("./index.html-a844acc7.js"),["assets/index.html-a844acc7.js","assets/framework-041070b5.js"])),"v-6bba5e58":ft(()=>Le(()=>import("./index.html-2439d81b.js"),["assets/index.html-2439d81b.js","assets/framework-041070b5.js"])),"v-83a77034":ft(()=>Le(()=>import("./index.html-bc4137d1.js"),["assets/index.html-bc4137d1.js","assets/framework-041070b5.js"])),"v-296d1d15":ft(()=>Le(()=>import("./index.html-79437800.js"),["assets/index.html-79437800.js","assets/framework-041070b5.js"])),"v-fb711be8":ft(()=>Le(()=>import("./index.html-1d8c7f1b.js"),["assets/index.html-1d8c7f1b.js","assets/framework-041070b5.js"])),"v-3706649a":ft(()=>Le(()=>import("./404.html-01e15ee4.js"),["assets/404.html-01e15ee4.js","assets/framework-041070b5.js"]))};var M4=Symbol(""),P4=Tn(A4),aI=s4({key:"",path:"",title:"",lang:"",frontmatter:{},headers:[]}),Hs=Tn(aI),Ks=()=>Hs,oI=Symbol(""),rs=()=>{const e=oa(oI);if(!e)throw new Error("usePageFrontmatter() is called without provider.");return e},sI=Symbol(""),D4=()=>{const e=oa(sI);if(!e)throw new Error("usePageHead() is called without provider.");return e},k4=Symbol(""),lI=Symbol(""),uI=()=>{const e=oa(lI);if(!e)throw new Error("usePageLang() is called without provider.");return e},cI=Symbol(""),L4=()=>{const e=oa(cI);if(!e)throw new Error("usePageLayout() is called without provider.");return e},ax=Symbol(""),Pd=()=>{const e=oa(ax);if(!e)throw new Error("useRouteLocale() is called without provider.");return e},wc=Tn(I4),O4=()=>wc,hI=Symbol(""),ox=()=>{const e=oa(hI);if(!e)throw new Error("useSiteLocaleData() is called without provider.");return e},R4=Symbol(""),z4="Layout",B4="NotFound",Yo=l4({resolveLayouts:e=>e.reduce((t,r)=>({...t,...r.layouts}),{}),resolvePageData:async e=>{const t=P4.value[e];return await(t==null?void 0:t())??aI},resolvePageFrontmatter:e=>e.frontmatter,resolvePageHead:(e,t,r)=>{const n=Eo(t.description)?t.description:r.description,i=[...Ad(t.head)?t.head:[],...r.head,["title",{},e],["meta",{name:"description",content:n}]];return u4(i)},resolvePageHeadTitle:(e,t)=>[e.title,t.title].filter(r=>!!r).join(" | "),resolvePageLang:e=>e.lang||"en",resolvePageLayout:(e,t)=>{let r;if(e.path){const n=e.frontmatter.layout;Eo(n)?r=n:r=z4}else r=B4;return t[r]},resolveRouteLocale:(e,t)=>YA(e,t),resolveSiteLocaleData:(e,t)=>({...e,...e.locales[t]})}),sx=Cr({name:"ClientOnly",setup(e,t){const r=Tn(!1);return Xi(()=>{r.value=!0}),()=>{var n,i;return r.value?(i=(n=t.slots).default)==null?void 0:i.call(n):null}}}),F4=Cr({name:"Content",props:{pageKey:{type:String,required:!1,default:""}},setup(e){const t=Ks(),r=bt(()=>iI[e.pageKey||t.value.key]);return()=>r.value?Er(r.value):Er("div","404 Not Found")}}),Ka=(e={})=>e,cg=e=>Id(e)?e:`/${KA(e)}`;function lx(e,t,r){var n,i,o;t===void 0&&(t=50),r===void 0&&(r={});var u=(n=r.isImmediate)!=null&&n,a=(i=r.callback)!=null&&i,f=r.maxWait,p=Date.now(),v=[];function _(){if(f!==void 0){var S=Date.now()-p;if(S+t>=f)return f-S}return t}var y=function(){var S=[].slice.call(arguments),A=this;return new Promise(function(I,M){var k=u&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,p=Date.now(),!u){var z=e.apply(A,S);a&&a(z),v.forEach(function(V){return(0,V.resolve)(z)}),v=[]}},_()),k){var L=e.apply(A,S);return a&&a(L),I(L)}v.push({resolve:I,reject:M})})};return y.cancel=function(S){o!==void 0&&clearTimeout(o),v.forEach(function(A){return(0,A.reject)(S)}),v=[]},y}const N4=({headerLinkSelector:e,headerAnchorSelector:t,delay:r,offset:n=5})=>{const i=bu(),u=lx(()=>{var I,M;const a=Math.max(window.scrollY,document.documentElement.scrollTop,document.body.scrollTop);if(Math.abs(a-0)<n){S2(i,"");return}const p=window.innerHeight+a,v=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),_=Math.abs(v-p)<n,y=Array.from(document.querySelectorAll(e)),A=Array.from(document.querySelectorAll(t)).filter(k=>y.some(L=>L.hash===k.hash));for(let k=0;k<A.length;k++){const L=A[k],z=A[k+1],V=a>=(((I=L.parentElement)==null?void 0:I.offsetTop)??0)-n,H=!z||a<(((M=z.parentElement)==null?void 0:M.offsetTop)??0)-n;if(!(V&&H))continue;const ee=decodeURIComponent(i.currentRoute.value.hash),Y=decodeURIComponent(L.hash);if(ee===Y)return;if(_){for(let ae=k+1;ae<A.length;ae++)if(ee===decodeURIComponent(A[ae].hash))return}S2(i,Y);return}},r);Xi(()=>{window.addEventListener("scroll",u)}),rx(()=>{window.removeEventListener("scroll",u)})},S2=async(e,t)=>{const{scrollBehavior:r}=e.options;e.options.scrollBehavior=void 0,await e.replace({query:e.currentRoute.value.query,hash:t,force:!0}).finally(()=>e.options.scrollBehavior=r)},V4="a.sidebar-item",U4=".header-anchor",$4=300,j4=5,G4=Ka({setup(){N4({headerLinkSelector:V4,headerAnchorSelector:U4,delay:$4,offset:j4})}}),T2=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,H4=()=>window.scrollTo({top:0,behavior:"smooth"});const q4=Cr({name:"BackToTop",setup(){const e=Tn(0),t=bt(()=>e.value>300),r=lx(()=>{e.value=T2()},100);Xi(()=>{e.value=T2(),window.addEventListener("scroll",()=>r())});const n=Er("div",{class:"back-to-top",onClick:H4});return()=>Er(nx,{name:"back-to-top"},()=>t.value?n:null)}}),W4=Ka({rootComponents:[q4]});const Z4=Er("svg",{class:"external-link-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[Er("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),Er("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),X4=Cr({name:"ExternalLinkIcon",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(e){const t=Pd(),r=bt(()=>e.locales[t.value]??{openInNewWindow:"open in new window"});return()=>Er("span",[Z4,Er("span",{class:"external-link-icon-sr-only"},r.value.openInNewWindow)])}}),Y4={"/":{openInNewWindow:"在新窗口打开"}},K4=Ka({enhance({app:e}){e.component("ExternalLinkIcon",Er(X4,{locales:Y4}))}});/*! medium-zoom 1.0.8 | MIT License | https://github.com/francoischalifour/medium-zoom */var iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yp=function(t){return t.tagName==="IMG"},J4=function(t){return NodeList.prototype.isPrototypeOf(t)},Xm=function(t){return t&&t.nodeType===1},E2=function(t){var r=t.currentSrc||t.src;return r.substr(-4).toLowerCase()===".svg"},C2=function(t){try{return Array.isArray(t)?t.filter(Yp):J4(t)?[].slice.call(t).filter(Yp):Xm(t)?[t].filter(Yp):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(Yp):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},Q4=function(t){var r=document.createElement("div");return r.classList.add("medium-zoom-overlay"),r.style.background=t,r},eO=function(t){var r=t.getBoundingClientRect(),n=r.top,i=r.left,o=r.width,u=r.height,a=t.cloneNode(),f=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,p=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return a.removeAttribute("id"),a.style.position="absolute",a.style.top=n+f+"px",a.style.left=i+p+"px",a.style.width=o+"px",a.style.height=u+"px",a.style.transform="",a},tc=function(t,r){var n=iu({bubbles:!1,cancelable:!1,detail:void 0},r);if(typeof window.CustomEvent=="function")return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i},tO=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=window.Promise||function(ye){function ve(){}ye(ve,ve)},i=function(ye){var ve=ye.target;if(ve===ae){A();return}z.indexOf(ve)!==-1&&I({target:ve})},o=function(){if(!(H||!Y.original)){var ye=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(Z-ye)>ee.scrollOffset&&setTimeout(A,150)}},u=function(ye){var ve=ye.key||ye.keyCode;(ve==="Escape"||ve==="Esc"||ve===27)&&A()},a=function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=ye;if(ye.background&&(ae.style.background=ye.background),ye.container&&ye.container instanceof Object&&(ve.container=iu({},ee.container,ye.container)),ye.template){var Pe=Xm(ye.template)?ye.template:document.querySelector(ye.template);ve.template=Pe}return ee=iu({},ee,ve),z.forEach(function($e){$e.dispatchEvent(tc("medium-zoom:update",{detail:{zoom:le}}))}),le},f=function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e(iu({},ee,ye))},p=function(){for(var ye=arguments.length,ve=Array(ye),Pe=0;Pe<ye;Pe++)ve[Pe]=arguments[Pe];var $e=ve.reduce(function(Ce,at){return[].concat(Ce,C2(at))},[]);return $e.filter(function(Ce){return z.indexOf(Ce)===-1}).forEach(function(Ce){z.push(Ce),Ce.classList.add("medium-zoom-image")}),V.forEach(function(Ce){var at=Ce.type,st=Ce.listener,xt=Ce.options;$e.forEach(function(St){St.addEventListener(at,st,xt)})}),le},v=function(){for(var ye=arguments.length,ve=Array(ye),Pe=0;Pe<ye;Pe++)ve[Pe]=arguments[Pe];Y.zoomed&&A();var $e=ve.length>0?ve.reduce(function(Ce,at){return[].concat(Ce,C2(at))},[]):z;return $e.forEach(function(Ce){Ce.classList.remove("medium-zoom-image"),Ce.dispatchEvent(tc("medium-zoom:detach",{detail:{zoom:le}}))}),z=z.filter(function(Ce){return $e.indexOf(Ce)===-1}),le},_=function(ye,ve){var Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return z.forEach(function($e){$e.addEventListener("medium-zoom:"+ye,ve,Pe)}),V.push({type:"medium-zoom:"+ye,listener:ve,options:Pe}),le},y=function(ye,ve){var Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return z.forEach(function($e){$e.removeEventListener("medium-zoom:"+ye,ve,Pe)}),V=V.filter(function($e){return!($e.type==="medium-zoom:"+ye&&$e.listener.toString()===ve.toString())}),le},S=function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=ye.target,Pe=function(){var Ce={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},at=void 0,st=void 0;if(ee.container)if(ee.container instanceof Object)Ce=iu({},Ce,ee.container),at=Ce.width-Ce.left-Ce.right-ee.margin*2,st=Ce.height-Ce.top-Ce.bottom-ee.margin*2;else{var xt=Xm(ee.container)?ee.container:document.querySelector(ee.container),St=xt.getBoundingClientRect(),Xt=St.width,Dt=St.height,Br=St.left,cr=St.top;Ce=iu({},Ce,{width:Xt,height:Dt,left:Br,top:cr})}at=at||Ce.width-ee.margin*2,st=st||Ce.height-ee.margin*2;var vr=Y.zoomedHd||Y.original,Fr=E2(vr)?at:vr.naturalWidth||at,Ur=E2(vr)?st:vr.naturalHeight||st,gr=vr.getBoundingClientRect(),Yt=gr.top,_r=gr.left,At=gr.width,kt=gr.height,Tt=Math.min(Math.max(At,Fr),at)/At,zt=Math.min(Math.max(kt,Ur),st)/kt,hr=Math.min(Tt,zt),yr=(-_r+(at-At)/2+ee.margin+Ce.left)/hr,cn=(-Yt+(st-kt)/2+ee.margin+Ce.top)/hr,lr="scale("+hr+") translate3d("+yr+"px, "+cn+"px, 0)";Y.zoomed.style.transform=lr,Y.zoomedHd&&(Y.zoomedHd.style.transform=lr)};return new n(function($e){if(ve&&z.indexOf(ve)===-1){$e(le);return}var Ce=function Xt(){H=!1,Y.zoomed.removeEventListener("transitionend",Xt),Y.original.dispatchEvent(tc("medium-zoom:opened",{detail:{zoom:le}})),$e(le)};if(Y.zoomed){$e(le);return}if(ve)Y.original=ve;else if(z.length>0){var at=z;Y.original=at[0]}else{$e(le);return}if(Y.original.dispatchEvent(tc("medium-zoom:open",{detail:{zoom:le}})),Z=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,H=!0,Y.zoomed=eO(Y.original),document.body.appendChild(ae),ee.template){var st=Xm(ee.template)?ee.template:document.querySelector(ee.template);Y.template=document.createElement("div"),Y.template.appendChild(st.content.cloneNode(!0)),document.body.appendChild(Y.template)}if(Y.original.parentElement&&Y.original.parentElement.tagName==="PICTURE"&&Y.original.currentSrc&&(Y.zoomed.src=Y.original.currentSrc),document.body.appendChild(Y.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),Y.original.classList.add("medium-zoom-image--hidden"),Y.zoomed.classList.add("medium-zoom-image--opened"),Y.zoomed.addEventListener("click",A),Y.zoomed.addEventListener("transitionend",Ce),Y.original.getAttribute("data-zoom-src")){Y.zoomedHd=Y.zoomed.cloneNode(),Y.zoomedHd.removeAttribute("srcset"),Y.zoomedHd.removeAttribute("sizes"),Y.zoomedHd.removeAttribute("loading"),Y.zoomedHd.src=Y.zoomed.getAttribute("data-zoom-src"),Y.zoomedHd.onerror=function(){clearInterval(xt),console.warn("Unable to reach the zoom image target "+Y.zoomedHd.src),Y.zoomedHd=null,Pe()};var xt=setInterval(function(){Y.zoomedHd.complete&&(clearInterval(xt),Y.zoomedHd.classList.add("medium-zoom-image--opened"),Y.zoomedHd.addEventListener("click",A),document.body.appendChild(Y.zoomedHd),Pe())},10)}else if(Y.original.hasAttribute("srcset")){Y.zoomedHd=Y.zoomed.cloneNode(),Y.zoomedHd.removeAttribute("sizes"),Y.zoomedHd.removeAttribute("loading");var St=Y.zoomedHd.addEventListener("load",function(){Y.zoomedHd.removeEventListener("load",St),Y.zoomedHd.classList.add("medium-zoom-image--opened"),Y.zoomedHd.addEventListener("click",A),document.body.appendChild(Y.zoomedHd),Pe()})}else Pe()})},A=function(){return new n(function(ye){if(H||!Y.original){ye(le);return}var ve=function Pe(){Y.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(Y.zoomed),Y.zoomedHd&&document.body.removeChild(Y.zoomedHd),document.body.removeChild(ae),Y.zoomed.classList.remove("medium-zoom-image--opened"),Y.template&&document.body.removeChild(Y.template),H=!1,Y.zoomed.removeEventListener("transitionend",Pe),Y.original.dispatchEvent(tc("medium-zoom:closed",{detail:{zoom:le}})),Y.original=null,Y.zoomed=null,Y.zoomedHd=null,Y.template=null,ye(le)};H=!0,document.body.classList.remove("medium-zoom--opened"),Y.zoomed.style.transform="",Y.zoomedHd&&(Y.zoomedHd.style.transform=""),Y.template&&(Y.template.style.transition="opacity 150ms",Y.template.style.opacity=0),Y.original.dispatchEvent(tc("medium-zoom:close",{detail:{zoom:le}})),Y.zoomed.addEventListener("transitionend",ve)})},I=function(){var ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ve=ye.target;return Y.original?A():S({target:ve})},M=function(){return ee},k=function(){return z},L=function(){return Y.original},z=[],V=[],H=!1,Z=0,ee=r,Y={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?ee=t:(t||typeof t=="string")&&p(t),ee=iu({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},ee);var ae=Q4(ee.background);document.addEventListener("click",i),document.addEventListener("keyup",u),document.addEventListener("scroll",o),window.addEventListener("resize",A);var le={open:S,close:A,toggle:I,update:a,clone:f,attach:p,detach:v,on:_,off:y,getOptions:M,getImages:k,getZoomedImage:L};return le};function rO(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var nO=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";rO(nO);const iO=tO,aO=Symbol("mediumZoom");const oO=".theme-default-content > img, .theme-default-content :not(a) > img",sO={},lO=300,uO=Ka({enhance({app:e,router:t}){const r=iO(sO);r.refresh=(n=oO)=>{r.detach(),r.attach(n)},e.provide(aO,r),t.afterEach(()=>{setTimeout(()=>r.refresh(),lO)})}});/**
 * NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT
 */const wr={settings:{minimum:.08,easing:"ease",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"></div>'},status:null,set:e=>{const t=wr.isStarted();e=W_(e,wr.settings.minimum,1),wr.status=e===1?null:e;const r=wr.render(!t),n=r.querySelector(wr.settings.barSelector),i=wr.settings.speed,o=wr.settings.easing;return r.offsetWidth,cO(u=>{Kp(n,{transform:"translate3d("+A2(e)+"%,0,0)",transition:"all "+i+"ms "+o}),e===1?(Kp(r,{transition:"none",opacity:"1"}),r.offsetWidth,setTimeout(function(){Kp(r,{transition:"all "+i+"ms linear",opacity:"0"}),setTimeout(function(){wr.remove(),u()},i)},i)):setTimeout(()=>u(),i)}),wr},isStarted:()=>typeof wr.status=="number",start:()=>{wr.status||wr.set(0);const e=()=>{setTimeout(()=>{wr.status&&(wr.trickle(),e())},wr.settings.trickleSpeed)};return wr.settings.trickle&&e(),wr},done:e=>!e&&!wr.status?wr:wr.inc(.3+.5*Math.random()).set(1),inc:e=>{let t=wr.status;return t?(typeof e!="number"&&(e=(1-t)*W_(Math.random()*t,.1,.95)),t=W_(t+e,0,.994),wr.set(t)):wr.start()},trickle:()=>wr.inc(Math.random()*wr.settings.trickleRate),render:e=>{if(wr.isRendered())return document.getElementById("nprogress");I2(document.documentElement,"nprogress-busy");const t=document.createElement("div");t.id="nprogress",t.innerHTML=wr.settings.template;const r=t.querySelector(wr.settings.barSelector),n=e?"-100":A2(wr.status||0),i=document.querySelector(wr.settings.parent);return Kp(r,{transition:"all 0 linear",transform:"translate3d("+n+"%,0,0)"}),i!==document.body&&I2(i,"nprogress-custom-parent"),i==null||i.appendChild(t),t},remove:()=>{M2(document.documentElement,"nprogress-busy"),M2(document.querySelector(wr.settings.parent),"nprogress-custom-parent");const e=document.getElementById("nprogress");e&&hO(e)},isRendered:()=>!!document.getElementById("nprogress")},W_=(e,t,r)=>e<t?t:e>r?r:e,A2=e=>(-1+e)*100,cO=function(){const e=[];function t(){const r=e.shift();r&&r(t)}return function(r){e.push(r),e.length===1&&t()}}(),Kp=function(){const e=["Webkit","O","Moz","ms"],t={};function r(u){return u.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,f){return f.toUpperCase()})}function n(u){const a=document.body.style;if(u in a)return u;let f=e.length;const p=u.charAt(0).toUpperCase()+u.slice(1);let v;for(;f--;)if(v=e[f]+p,v in a)return v;return u}function i(u){return u=r(u),t[u]||(t[u]=n(u))}function o(u,a,f){a=i(a),u.style[a]=f}return function(u,a){for(const f in a){const p=a[f];p!==void 0&&Object.prototype.hasOwnProperty.call(a,f)&&o(u,f,p)}}}(),fI=(e,t)=>(typeof e=="string"?e:ux(e)).indexOf(" "+t+" ")>=0,I2=(e,t)=>{const r=ux(e),n=r+t;fI(r,t)||(e.className=n.substring(1))},M2=(e,t)=>{const r=ux(e);if(!fI(e,t))return;const n=r.replace(" "+t+" "," ");e.className=n.substring(1,n.length-1)},ux=e=>(" "+(e.className||"")+" ").replace(/\s+/gi," "),hO=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)};const fO=()=>{Xi(()=>{const e=bu(),t=new Set;t.add(e.currentRoute.value.path),e.beforeEach(r=>{t.has(r.path)||wr.start()}),e.afterEach(r=>{t.add(r.path),wr.done()})})},dO=Ka({setup(){fO()}}),pO=JSON.parse('{"navbar":[{"text":"主页","link":"/"},{"text":"快讯网","link":"https://daily.sustech.online/"},{"text":"小程序","link":"/miniapp/"},{"text":"关于","link":"/about/"},{"text":"站点帮助","link":"/site-help/"}],"repo":"sustech-cra/sustech-online-ng","repoLabel":"在Github上查看","docsRepo":"sustech-cra/sustech-online-ng","docsDir":"docs","editLinkText":"一起完善这本手册！","lastUpdatedText":"上次更新","contributorsText":"贡献者","editLink":true,"docsBranch":"master","tip":"提示","warning":"注意","danger":"警告","notFound":["这里什么都没有","我们怎么到这来了？","这是一个 404 页面","看起来我们进入了错误的链接"],"backToHome":"返回首页","openInNewWindow":"在新窗口打开","toggleColorMode":"切换夜间模式","toggleSidebar":"切换侧边栏","sidebarDepth":2,"sidebar":["/","/facility/","/contact/","/calendar/","/service/","/life/","/study/","/organizations/","/media/",{"text":"🚄交通","link":"/transport/","children":[{"text":"🚌新版巴士时刻表","link":"/transport/bustimer.md","children":[]},{"text":"🚌校园巴士-工作日","link":"/transport/workday.md","children":[]},{"text":"🚌校园巴士-节假日","link":"/transport/holiday.md","children":[]},{"text":"周围交通","link":"/transport/","children":[]}]},"/surroundings/"],"locales":{"/":{"selectLanguageName":"English"}},"colorMode":"auto","colorModeSwitch":true,"logo":null,"selectLanguageText":"Languages","selectLanguageAriaLabel":"Select language","lastUpdated":true,"contributors":true}'),mO=Tn(pO),vO=()=>mO,dI=Symbol(""),gO=()=>{const e=oa(dI);if(!e)throw new Error("useThemeLocaleData() is called without provider.");return e},_O=(e,t)=>{var r;return{...e,...(r=e.locales)==null?void 0:r[t]}},yO=Ka({enhance({app:e}){const t=vO(),r=e._context.provides[ax],n=bt(()=>_O(t.value,r.value));e.provide(dI,n),Object.defineProperties(e.config.globalProperties,{$theme:{get(){return t.value}},$themeLocale:{get(){return n.value}}})}}),xO=Cr({__name:"Badge",props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(e){return(t,r)=>(Ze(),yt("span",{class:sa(["badge",e.type]),style:JA({verticalAlign:e.vertical})},[Hr(t.$slots,"default",{},()=>[Bc(Mr(e.text),1)])],6))}}),bO=Dr(xO,[["__file","Badge.vue"]]),wO=Cr({name:"CodeGroup",setup(e,{slots:t}){const r=Tn(-1),n=Tn([]),i=(a=r.value)=>{a<n.value.length-1?r.value=a+1:r.value=0,n.value[r.value].focus()},o=(a=r.value)=>{a>0?r.value=a-1:r.value=n.value.length-1,n.value[r.value].focus()},u=(a,f)=>{a.key===" "||a.key==="Enter"?(a.preventDefault(),r.value=f):a.key==="ArrowRight"?(a.preventDefault(),i(f)):a.key==="ArrowLeft"&&(a.preventDefault(),o(f))};return()=>{var f;const a=(((f=t.default)==null?void 0:f.call(t))||[]).filter(p=>p.type.name==="CodeGroupItem").map(p=>(p.props===null&&(p.props={}),p));return a.length===0?null:(r.value<0||r.value>a.length-1?(r.value=a.findIndex(p=>p.props.active===""||p.props.active===!0),r.value===-1&&(r.value=0)):a.forEach((p,v)=>{p.props.active=v===r.value}),Er("div",{class:"code-group"},[Er("div",{class:"code-group__nav"},Er("ul",{class:"code-group__ul"},a.map((p,v)=>{const _=v===r.value;return Er("li",{class:"code-group__li"},Er("button",{ref:y=>{y&&(n.value[v]=y)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":_},ariaPressed:_,ariaExpanded:_,onClick:()=>r.value=v,onKeydown:y=>u(y,v)},p.props.title))}))),a]))}}}),SO=["aria-selected"],TO=Cr({name:"CodeGroupItem"}),EO=Cr({...TO,props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup(e){return(t,r)=>(Ze(),yt("div",{class:sa(["code-group-item",{"code-group-item__active":e.active}]),"aria-selected":e.active},[Hr(t.$slots,"default")],10,SO))}}),CO=Dr(EO,[["__file","CodeGroupItem.vue"]]);var P2;const pI=typeof window<"u",AO=e=>typeof e=="function",IO=e=>typeof e=="string",MO=()=>{};pI&&((P2=window==null?void 0:window.navigator)!=null&&P2.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function wv(e){return typeof e=="function"?e():nt(e)}function PO(e,t){function r(...n){return new Promise((i,o)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(i).catch(o)})}return r}const mI=e=>e();function DO(e=mI){const t=Tn(!0);function r(){t.value=!1}function n(){t.value=!0}return{isActive:t,pause:r,resume:n,eventFilter:(...o)=>{t.value&&e(...o)}}}function kO(e){return e}function vI(e){return h4()?(f4(e),!0):!1}function LO(e){return typeof e=="function"?bt(e):Tn(e)}function OO(e,t=!0){QA()?Xi(e):t?e():lg(e)}function RO(e=!1,t={}){const{truthyValue:r=!0,falsyValue:n=!1}=t,i=c4(e),o=Tn(e);function u(a){if(arguments.length)return o.value=a,o.value;{const f=wv(r);return o.value=o.value===f?wv(n):f,o.value}}return i?u:[o,u]}var D2=Object.getOwnPropertySymbols,zO=Object.prototype.hasOwnProperty,BO=Object.prototype.propertyIsEnumerable,FO=(e,t)=>{var r={};for(var n in e)zO.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&D2)for(var n of D2(e))t.indexOf(n)<0&&BO.call(e,n)&&(r[n]=e[n]);return r};function NO(e,t,r={}){const n=r,{eventFilter:i=mI}=n,o=FO(n,["eventFilter"]);return Ia(e,PO(i,t),o)}var VO=Object.defineProperty,UO=Object.defineProperties,$O=Object.getOwnPropertyDescriptors,Sv=Object.getOwnPropertySymbols,gI=Object.prototype.hasOwnProperty,_I=Object.prototype.propertyIsEnumerable,k2=(e,t,r)=>t in e?VO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,jO=(e,t)=>{for(var r in t||(t={}))gI.call(t,r)&&k2(e,r,t[r]);if(Sv)for(var r of Sv(t))_I.call(t,r)&&k2(e,r,t[r]);return e},GO=(e,t)=>UO(e,$O(t)),HO=(e,t)=>{var r={};for(var n in e)gI.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Sv)for(var n of Sv(e))t.indexOf(n)<0&&_I.call(e,n)&&(r[n]=e[n]);return r};function qO(e,t,r={}){const n=r,{eventFilter:i}=n,o=HO(n,["eventFilter"]),{eventFilter:u,pause:a,resume:f,isActive:p}=DO(i);return{stop:NO(e,t,GO(jO({},o),{eventFilter:u})),pause:a,resume:f,isActive:p}}function WO(e){var t;const r=wv(e);return(t=r==null?void 0:r.$el)!=null?t:r}const Tv=pI?window:void 0;function ZO(...e){let t,r,n,i;if(IO(e[0])||Array.isArray(e[0])?([r,n,i]=e,t=Tv):[t,r,n,i]=e,!t)return MO;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const o=[],u=()=>{o.forEach(v=>v()),o.length=0},a=(v,_,y)=>(v.addEventListener(_,y,i),()=>v.removeEventListener(_,y,i)),f=Ia(()=>WO(t),v=>{u(),v&&o.push(...r.flatMap(_=>n.map(y=>a(v,_,y))))},{immediate:!0,flush:"post"}),p=()=>{f(),u()};return vI(p),p}function XO(e,t=!1){const r=Tn(),n=()=>r.value=Boolean(e());return n(),OO(n,t),r}function YO(e,t={}){const{window:r=Tv}=t,n=XO(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let i;const o=Tn(!1),u=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",a):i.removeListener(a))},a=()=>{n.value&&(u(),i=r.matchMedia(LO(e).value),o.value=i.matches,"addEventListener"in i?i.addEventListener("change",a):i.addListener(a))};return A0(a),vI(()=>u()),o}const M0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},P0="__vueuse_ssr_handlers__";M0[P0]=M0[P0]||{};const KO=M0[P0];function JO(e,t){return KO[e]||t}function QO(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var eR=Object.defineProperty,L2=Object.getOwnPropertySymbols,tR=Object.prototype.hasOwnProperty,rR=Object.prototype.propertyIsEnumerable,O2=(e,t,r)=>t in e?eR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R2=(e,t)=>{for(var r in t||(t={}))tR.call(t,r)&&O2(e,r,t[r]);if(L2)for(var r of L2(t))rR.call(t,r)&&O2(e,r,t[r]);return e};const nR={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}};function iR(e,t,r,n={}){var i;const{flush:o="pre",deep:u=!0,listenToStorageChanges:a=!0,writeDefaults:f=!0,mergeDefaults:p=!1,shallow:v,window:_=Tv,eventFilter:y,onError:S=ee=>{console.error(ee)}}=n,A=(v?Zm:Tn)(t);if(!r)try{r=JO("getDefaultStorage",()=>{var ee;return(ee=Tv)==null?void 0:ee.localStorage})()}catch(ee){S(ee)}if(!r)return A;const I=wv(t),M=QO(I),k=(i=n.serializer)!=null?i:nR[M],{pause:L,resume:z}=qO(A,()=>V(A.value),{flush:o,deep:u,eventFilter:y});return _&&a&&ZO(_,"storage",Z),Z(),A;function V(ee){try{if(ee==null)r.removeItem(e);else{const Y=k.write(ee),ae=r.getItem(e);ae!==Y&&(r.setItem(e,Y),_&&(_==null||_.dispatchEvent(new StorageEvent("storage",{key:e,oldValue:ae,newValue:Y,storageArea:r}))))}}catch(Y){S(Y)}}function H(ee){const Y=ee?ee.newValue:r.getItem(e);if(Y==null)return f&&I!==null&&r.setItem(e,k.write(I)),I;if(!ee&&p){const ae=k.read(Y);return AO(p)?p(ae,I):M==="object"&&!Array.isArray(ae)?R2(R2({},I),ae):ae}else return typeof Y!="string"?Y:k.read(Y)}function Z(ee){if(!(ee&&ee.storageArea!==r)){if(ee&&ee.key==null){A.value=I;return}if(!(ee&&ee.key!==e)){L();try{A.value=H(ee)}catch(Y){S(Y)}finally{ee?lg(z):z()}}}}}function aR(e){return YO("(prefers-color-scheme: dark)",e)}var z2;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(z2||(z2={}));var oR=Object.defineProperty,B2=Object.getOwnPropertySymbols,sR=Object.prototype.hasOwnProperty,lR=Object.prototype.propertyIsEnumerable,F2=(e,t,r)=>t in e?oR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uR=(e,t)=>{for(var r in t||(t={}))sR.call(t,r)&&F2(e,r,t[r]);if(B2)for(var r of B2(t))lR.call(t,r)&&F2(e,r,t[r]);return e};const cR={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};uR({linear:kO},cR);const Ii=()=>gO(),yI=Symbol(""),cx=()=>{const e=oa(yI);if(!e)throw new Error("useDarkMode() is called without provider.");return e},hR=()=>{const e=Ii(),t=aR(),r=iR("vuepress-color-scheme",e.value.colorMode),n=bt({get(){return e.value.colorModeSwitch?r.value==="auto"?t.value:r.value==="dark":e.value.colorMode==="dark"},set(i){i===t.value?r.value="auto":r.value=i?"dark":"light"}});ug(yI,n),fR(n)},fR=e=>{const t=(r=e.value)=>{const n=window==null?void 0:window.document.querySelector("html");n==null||n.classList.toggle("dark",r)};Xi(()=>{Ia(e,t,{immediate:!0})}),eI(()=>t())},xI=(...e)=>{const r=bu().resolve(...e),n=r.matched[r.matched.length-1];if(!(n!=null&&n.redirect))return r;const{redirect:i}=n,o=d4(i)?i(r):i,u=Eo(o)?{path:o}:o;return xI({hash:r.hash,query:r.query,params:r.params,...u})},hx=e=>{const t=xI(encodeURI(e));return{text:t.meta.title||e,link:t.name==="404"?e:t.fullPath}};let Z_=null,tf=null;const dR={wait:()=>Z_,pending:()=>{Z_=new Promise(e=>tf=e)},resolve:()=>{tf==null||tf(),Z_=null,tf=null}},bI=()=>dR,wI=Symbol("sidebarItems"),fx=()=>{const e=oa(wI);if(!e)throw new Error("useSidebarItems() is called without provider.");return e},pR=()=>{const e=Ii(),t=rs(),r=bt(()=>mR(t.value,e.value));ug(wI,r)},mR=(e,t)=>{const r=e.sidebar??t.sidebar??"auto",n=e.sidebarDepth??t.sidebarDepth??2;return e.home||r===!1?[]:r==="auto"?gR(n):Ad(r)?SI(r,n):ix(r)?_R(r,n):[]},vR=(e,t)=>({text:e.title,link:e.link,children:dx(e.children,t)}),dx=(e,t)=>t>0?e.map(r=>vR(r,t-1)):[],gR=e=>{const t=Ks();return[{text:t.value.title,children:dx(t.value.headers,e)}]},SI=(e,t)=>{const r=us(),n=Ks(),i=o=>{var a;let u;if(Eo(o)?u=hx(o):u=o,u.children)return{...u,children:u.children.map(f=>i(f))};if(u.link===r.path){const f=((a=n.value.headers[0])==null?void 0:a.level)===1?n.value.headers[0].children:n.value.headers;return{...u,children:dx(f,t)}}return u};return e.map(o=>i(o))},_R=(e,t)=>{const r=us(),n=YA(e,r.path),i=e[n]??[];return SI(i,t)},yR={},xR={class:"theme-default-content"};function bR(e,t){const r=Ai("Content");return Ze(),yt("div",xR,[Wr(r)])}const wR=Dr(yR,[["render",bR],["__file","HomeContent.vue"]]),SR={key:0,class:"features"},TR=Cr({__name:"HomeFeatures",setup(e){const t=rs(),r=bt(()=>Ad(t.value.features)?t.value.features:[]);return(n,i)=>nt(r).length?(Ze(),yt("div",SR,[(Ze(!0),yt(Zn,null,Za(nt(r),o=>(Ze(),yt("div",{key:o.title,class:"feature"},[Wt("h2",null,Mr(o.title),1),Wt("p",null,Mr(o.details),1)]))),128))])):Tr("v-if",!0)}}),ER=Dr(TR,[["__file","HomeFeatures.vue"]]),CR=["innerHTML"],AR=["textContent"],IR=Cr({__name:"HomeFooter",setup(e){const t=rs(),r=bt(()=>t.value.footer),n=bt(()=>t.value.footerHtml);return(i,o)=>nt(r)?(Ze(),yt(Zn,{key:0},[Tr(" eslint-disable-next-line vue/no-v-html "),nt(n)?(Ze(),yt("div",{key:0,class:"footer",innerHTML:nt(r)},null,8,CR)):(Ze(),yt("div",{key:1,class:"footer",textContent:Mr(nt(r))},null,8,AR))],64)):Tr("v-if",!0)}}),MR=Dr(IR,[["__file","HomeFooter.vue"]]),PR=["href","rel","target","aria-label"],DR=Cr({inheritAttrs:!1}),kR=Cr({...DR,__name:"AutoLink",props:{item:{type:Object,required:!0}},setup(e){const t=e,r=us(),n=O4(),{item:i}=Md(t),o=bt(()=>Id(i.value.link)),u=bt(()=>p4(i.value.link)||m4(i.value.link)),a=bt(()=>{if(!u.value){if(i.value.target)return i.value.target;if(o.value)return"_blank"}}),f=bt(()=>a.value==="_blank"),p=bt(()=>!o.value&&!u.value&&!f.value),v=bt(()=>{if(!u.value){if(i.value.rel)return i.value.rel;if(f.value)return"noopener noreferrer"}}),_=bt(()=>i.value.ariaLabel||i.value.text),y=bt(()=>{const I=Object.keys(n.value.locales);return I.length?!I.some(M=>M===i.value.link):i.value.link!=="/"}),S=bt(()=>y.value?r.path.startsWith(i.value.link):!1),A=bt(()=>p.value?i.value.activeMatch?new RegExp(i.value.activeMatch).test(r.path):S.value:!1);return(I,M)=>{const k=Ai("RouterLink"),L=Ai("AutoLinkExternalIcon");return nt(p)?(Ze(),Sn(k,I0({key:0,class:{"router-link-active":nt(A)},to:nt(i).link,"aria-label":nt(_)},I.$attrs),{default:zn(()=>[Hr(I.$slots,"before"),Bc(" "+Mr(nt(i).text)+" ",1),Hr(I.$slots,"after")]),_:3},16,["class","to","aria-label"])):(Ze(),yt("a",I0({key:1,class:"external-link",href:nt(i).link,rel:nt(v),target:nt(a),"aria-label":nt(_)},I.$attrs),[Hr(I.$slots,"before"),Bc(" "+Mr(nt(i).text)+" ",1),nt(f)?(Ze(),Sn(L,{key:0})):Tr("v-if",!0),Hr(I.$slots,"after")],16,PR))}}}),ns=Dr(kR,[["__file","AutoLink.vue"]]),LR={class:"hero"},OR={key:0,id:"main-title"},RR={key:1,class:"description"},zR={key:2,class:"actions"},BR=Cr({__name:"HomeHero",setup(e){const t=rs(),r=ox(),n=cx(),i=bt(()=>n.value&&t.value.heroImageDark!==void 0?t.value.heroImageDark:t.value.heroImage),o=bt(()=>t.value.heroAlt||a.value||"hero"),u=bt(()=>t.value.heroHeight||280),a=bt(()=>t.value.heroText===null?null:t.value.heroText||r.value.title||"Hello"),f=bt(()=>t.value.tagline===null?null:t.value.tagline||r.value.description||"Welcome to your VuePress site"),p=bt(()=>Ad(t.value.actions)?t.value.actions.map(({text:_,link:y,type:S="primary"})=>({text:_,link:y,type:S})):[]),v=()=>{if(!i.value)return null;const _=Er("img",{src:cg(i.value),alt:o.value,height:u.value});return t.value.heroImageDark===void 0?_:Er(sx,()=>_)};return(_,y)=>(Ze(),yt("header",LR,[Wr(v),nt(a)?(Ze(),yt("h1",OR,Mr(nt(a)),1)):Tr("v-if",!0),nt(f)?(Ze(),yt("p",RR,Mr(nt(f)),1)):Tr("v-if",!0),nt(p).length?(Ze(),yt("p",zR,[(Ze(!0),yt(Zn,null,Za(nt(p),S=>(Ze(),Sn(ns,{key:S.text,class:sa(["action-button",[S.type]]),item:S},null,8,["class","item"]))),128))])):Tr("v-if",!0)]))}}),FR=Dr(BR,[["__file","HomeHero.vue"]]),NR={class:"home"},VR=Cr({__name:"Home",setup(e){return(t,r)=>(Ze(),yt("main",NR,[Wr(FR),Wr(ER),Wr(wR),Wr(MR)]))}}),UR=Dr(VR,[["__file","Home.vue"]]),$R=Cr({__name:"NavbarBrand",setup(e){const t=Pd(),r=ox(),n=Ii(),i=cx(),o=bt(()=>n.value.home||t.value),u=bt(()=>r.value.title),a=bt(()=>i.value&&n.value.logoDark!==void 0?n.value.logoDark:n.value.logo),f=()=>{if(!a.value)return null;const p=Er("img",{class:"logo",src:cg(a.value),alt:u.value});return n.value.logoDark===void 0?p:Er(sx,()=>p)};return(p,v)=>{const _=Ai("RouterLink");return Ze(),Sn(_,{to:nt(o)},{default:zn(()=>[Wr(f),nt(u)?(Ze(),yt("span",{key:0,class:sa(["site-name",{"can-hide":nt(a)}])},Mr(nt(u)),3)):Tr("v-if",!0)]),_:1},8,["to"])}}}),jR=Dr($R,[["__file","NavbarBrand.vue"]]),GR=Cr({__name:"DropdownTransition",setup(e){const t=n=>{n.style.height=n.scrollHeight+"px"},r=n=>{n.style.height=""};return(n,i)=>(Ze(),Sn(nx,{name:"dropdown",onEnter:t,onAfterEnter:r,onBeforeLeave:t},{default:zn(()=>[Hr(n.$slots,"default")]),_:3}))}}),TI=Dr(GR,[["__file","DropdownTransition.vue"]]),HR=["aria-label"],qR={class:"title"},WR=Wt("span",{class:"arrow down"},null,-1),ZR=["aria-label"],XR={class:"title"},YR={class:"navbar-dropdown"},KR={class:"navbar-dropdown-subtitle"},JR={key:1},QR={class:"navbar-dropdown-subitem-wrapper"},e6=Cr({__name:"NavbarDropdown",props:{item:{type:Object,required:!0}},setup(e){const t=e,{item:r}=Md(t),n=bt(()=>r.value.ariaLabel||r.value.text),i=Tn(!1),o=us();Ia(()=>o.path,()=>{i.value=!1});const u=f=>{f.detail===0?i.value=!i.value:i.value=!1},a=(f,p)=>p[p.length-1]===f;return(f,p)=>(Ze(),yt("div",{class:sa(["navbar-dropdown-wrapper",{open:i.value}])},[Wt("button",{class:"navbar-dropdown-title",type:"button","aria-label":nt(n),onClick:u},[Wt("span",qR,Mr(nt(r).text),1),WR],8,HR),Wt("button",{class:"navbar-dropdown-title-mobile",type:"button","aria-label":nt(n),onClick:p[0]||(p[0]=v=>i.value=!i.value)},[Wt("span",XR,Mr(nt(r).text),1),Wt("span",{class:sa(["arrow",i.value?"down":"right"])},null,2)],8,ZR),Wr(TI,null,{default:zn(()=>[xv(Wt("ul",YR,[(Ze(!0),yt(Zn,null,Za(nt(r).children,v=>(Ze(),yt("li",{key:v.text,class:"navbar-dropdown-item"},[v.children?(Ze(),yt(Zn,{key:0},[Wt("h4",KR,[v.link?(Ze(),Sn(ns,{key:0,item:v,onFocusout:_=>a(v,nt(r).children)&&v.children.length===0&&(i.value=!1)},null,8,["item","onFocusout"])):(Ze(),yt("span",JR,Mr(v.text),1))]),Wt("ul",QR,[(Ze(!0),yt(Zn,null,Za(v.children,_=>(Ze(),yt("li",{key:_.link,class:"navbar-dropdown-subitem"},[Wr(ns,{item:_,onFocusout:y=>a(_,v.children)&&a(v,nt(r).children)&&(i.value=!1)},null,8,["item","onFocusout"])]))),128))])],64)):(Ze(),Sn(ns,{key:1,item:v,onFocusout:_=>a(v,nt(r).children)&&(i.value=!1)},null,8,["item","onFocusout"]))]))),128))],512),[[bv,i.value]])]),_:1})],2))}}),t6=Dr(e6,[["__file","NavbarDropdown.vue"]]),N2=e=>decodeURI(e).replace(/#.*$/,"").replace(/(index)?\.(md|html)$/,""),r6=(e,t)=>{if(t.hash===e)return!0;const r=N2(t.path),n=N2(e);return r===n},EI=(e,t)=>e.link&&r6(e.link,t)?!0:e.children?e.children.some(r=>EI(r,t)):!1,CI=e=>!Id(e)||/github\.com/.test(e)?"GitHub":/bitbucket\.org/.test(e)?"Bitbucket":/gitlab\.com/.test(e)?"GitLab":/gitee\.com/.test(e)?"Gitee":null,n6={GitHub:":repo/edit/:branch/:path",GitLab:":repo/-/edit/:branch/:path",Gitee:":repo/edit/:branch/:path",Bitbucket:":repo/src/:branch/:path?mode=edit&spa=0&at=:branch&fileviewer=file-view-default"},i6=({docsRepo:e,editLinkPattern:t})=>{if(t)return t;const r=CI(e);return r!==null?n6[r]:null},a6=({docsRepo:e,docsBranch:t,docsDir:r,filePathRelative:n,editLinkPattern:i})=>{if(!n)return null;const o=i6({docsRepo:e,editLinkPattern:i});return o?o.replace(/:repo/,Id(e)?e:`https://github.com/${e}`).replace(/:branch/,t).replace(/:path/,KA(`${tI(r)}/${n}`)):null},o6={key:0,class:"navbar-items"},s6=Cr({__name:"NavbarItems",setup(e){const t=()=>{const v=bu(),_=Pd(),y=ox(),S=Ii();return bt(()=>{const A=Object.keys(y.value.locales);if(A.length<2)return[];const I=v.currentRoute.value.path,M=v.currentRoute.value.fullPath;return[{text:S.value.selectLanguageText??"unknown language",ariaLabel:S.value.selectLanguageAriaLabel??S.value.selectLanguageText??"unknown language",children:A.map(L=>{var Y,ae;const z=((Y=y.value.locales)==null?void 0:Y[L])??{},V=((ae=S.value.locales)==null?void 0:ae[L])??{},H=`${z.lang}`,Z=V.selectLanguageName??H;let ee;if(H===y.value.lang)ee=M;else{const le=I.replace(_.value,L);v.getRoutes().some(pe=>pe.path===le)?ee=M.replace(I,le):ee=V.home??L}return{text:Z,link:ee}})}]})},r=()=>{const v=Ii(),_=bt(()=>v.value.repo),y=bt(()=>_.value?CI(_.value):null),S=bt(()=>_.value&&!Id(_.value)?`https://github.com/${_.value}`:_.value),A=bt(()=>S.value?v.value.repoLabel?v.value.repoLabel:y.value===null?"Source":y.value:null);return bt(()=>!S.value||!A.value?[]:[{text:A.value,link:S.value}])},n=v=>Eo(v)?hx(v):v.children?{...v,children:v.children.map(n)}:v,i=()=>{const v=Ii();return bt(()=>(v.value.navbar||[]).map(n))},o=Tn(!1),u=i(),a=t(),f=r(),p=bt(()=>[...u.value,...a.value,...f.value]);return Xi(()=>{const _=()=>{window.innerWidth<719?o.value=!0:o.value=!1};_(),window.addEventListener("resize",_,!1),window.addEventListener("orientationchange",_,!1)}),(v,_)=>nt(p).length?(Ze(),yt("nav",o6,[(Ze(!0),yt(Zn,null,Za(nt(p),y=>(Ze(),yt("div",{key:y.text,class:"navbar-item"},[y.children?(Ze(),Sn(t6,{key:0,item:y,class:sa(o.value?"mobile":"")},null,8,["item","class"])):(Ze(),Sn(ns,{key:1,item:y},null,8,["item"]))]))),128))])):Tr("v-if",!0)}}),AI=Dr(s6,[["__file","NavbarItems.vue"]]),l6=["title"],u6={class:"icon",focusable:"false",viewBox:"0 0 32 32"},c6=v4('<path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path>',9),h6=[c6],f6={class:"icon",focusable:"false",viewBox:"0 0 32 32"},d6=Wt("path",{d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z",fill:"currentColor"},null,-1),p6=[d6],m6=Cr({__name:"ToggleColorModeButton",setup(e){const t=Ii(),r=cx(),n=()=>{r.value=!r.value};return(i,o)=>(Ze(),yt("button",{class:"toggle-color-mode-button",title:nt(t).toggleColorMode,onClick:n},[xv((Ze(),yt("svg",u6,h6,512)),[[bv,!nt(r)]]),xv((Ze(),yt("svg",f6,p6,512)),[[bv,nt(r)]])],8,l6))}}),v6=Dr(m6,[["__file","ToggleColorModeButton.vue"]]),g6=["title"],_6=Wt("div",{class:"icon","aria-hidden":"true"},[Wt("span"),Wt("span"),Wt("span")],-1),y6=[_6],x6=Cr({__name:"ToggleSidebarButton",emits:["toggle"],setup(e){const t=Ii();return(r,n)=>(Ze(),yt("div",{class:"toggle-sidebar-button",title:nt(t).toggleSidebar,"aria-expanded":"false",role:"button",tabindex:"0",onClick:n[0]||(n[0]=i=>r.$emit("toggle"))},y6,8,g6))}}),b6=Dr(x6,[["__file","ToggleSidebarButton.vue"]]),w6=Cr({__name:"Navbar",emits:["toggle-sidebar"],setup(e){const t=Ii(),r=Tn(null),n=Tn(null),i=Tn(0),o=bt(()=>i.value?{maxWidth:i.value+"px"}:{});Xi(()=>{const f=u(r.value,"paddingLeft")+u(r.value,"paddingRight"),p=()=>{var v;window.innerWidth<719?i.value=0:i.value=r.value.offsetWidth-f-(((v=n.value)==null?void 0:v.offsetWidth)||0)};p(),window.addEventListener("resize",p,!1),window.addEventListener("orientationchange",p,!1)});function u(a,f){var _,y,S;const p=(S=(y=(_=a==null?void 0:a.ownerDocument)==null?void 0:_.defaultView)==null?void 0:y.getComputedStyle(a,null))==null?void 0:S[f],v=Number.parseInt(p,10);return Number.isNaN(v)?0:v}return(a,f)=>{const p=Ai("NavbarSearch");return Ze(),yt("header",{ref_key:"navbar",ref:r,class:"navbar"},[Wr(b6,{onToggle:f[0]||(f[0]=v=>a.$emit("toggle-sidebar"))}),Wt("span",{ref_key:"navbarBrand",ref:n},[Wr(jR)],512),Wt("div",{class:"navbar-items-wrapper",style:JA(nt(o))},[Hr(a.$slots,"before"),Wr(AI,{class:"can-hide"}),Hr(a.$slots,"after"),nt(t).colorModeSwitch?(Ze(),Sn(v6,{key:0})):Tr("v-if",!0),Wr(p)],4)],512)}}}),S6=Dr(w6,[["__file","Navbar.vue"]]),T6={class:"page-meta"},E6={key:0,class:"meta-item edit-link"},C6={key:1,class:"meta-item last-updated"},A6={class:"meta-item-label"},I6={class:"meta-item-info"},M6={key:2,class:"meta-item contributors"},P6={class:"meta-item-label"},D6={class:"meta-item-info"},k6=["title"],L6=Cr({__name:"PageMeta",setup(e){const t=()=>{const f=Ii(),p=Ks(),v=rs();return bt(()=>{if(!(v.value.editLink??f.value.editLink??!0))return null;const{repo:y,docsRepo:S=y,docsBranch:A="main",docsDir:I="",editLinkText:M}=f.value;if(!S)return null;const k=a6({docsRepo:S,docsBranch:A,docsDir:I,filePathRelative:p.value.filePathRelative,editLinkPattern:v.value.editLinkPattern??f.value.editLinkPattern});return k?{text:M??"Edit this page",link:k}:null})},r=()=>{const f=Ii(),p=Ks(),v=rs();return bt(()=>{var S,A;return!(v.value.lastUpdated??f.value.lastUpdated??!0)||!((S=p.value.git)!=null&&S.updatedTime)?null:new Date((A=p.value.git)==null?void 0:A.updatedTime).toLocaleString()})},n=()=>{const f=Ii(),p=Ks(),v=rs();return bt(()=>{var y;return v.value.contributors??f.value.contributors??!0?((y=p.value.git)==null?void 0:y.contributors)??null:null})},i=Ii(),o=t(),u=r(),a=n();return(f,p)=>{const v=Ai("ClientOnly");return Ze(),yt("footer",T6,[nt(o)?(Ze(),yt("div",E6,[Wr(ns,{class:"meta-item-label",item:nt(o)},null,8,["item"])])):Tr("v-if",!0),nt(u)?(Ze(),yt("div",C6,[Wt("span",A6,Mr(nt(i).lastUpdatedText)+": ",1),Wr(v,null,{default:zn(()=>[Wt("span",I6,Mr(nt(u)),1)]),_:1})])):Tr("v-if",!0),nt(a)&&nt(a).length?(Ze(),yt("div",M6,[Wt("span",P6,Mr(nt(i).contributorsText)+": ",1),Wt("span",D6,[(Ze(!0),yt(Zn,null,Za(nt(a),(_,y)=>(Ze(),yt(Zn,{key:y},[Wt("span",{class:"contributor",title:`email: ${_.email}`},Mr(_.name),9,k6),y!==nt(a).length-1?(Ze(),yt(Zn,{key:0},[Bc(", ")],64)):Tr("v-if",!0)],64))),128))])])):Tr("v-if",!0)])}}}),O6=Dr(L6,[["__file","PageMeta.vue"]]),R6={key:0,class:"page-nav"},z6={class:"inner"},B6={key:0,class:"prev"},F6={key:1,class:"next"},N6=Cr({__name:"PageNav",setup(e){const t=f=>f===!1?null:Eo(f)?hx(f):ix(f)?f:!1,r=(f,p,v)=>{const _=f.findIndex(y=>y.link===p);if(_!==-1){const y=f[_+v];return y!=null&&y.link?y:null}for(const y of f)if(y.children){const S=r(y.children,p,v);if(S)return S}return null},n=rs(),i=fx(),o=us(),u=bt(()=>{const f=t(n.value.prev);return f!==!1?f:r(i.value,o.path,-1)}),a=bt(()=>{const f=t(n.value.next);return f!==!1?f:r(i.value,o.path,1)});return(f,p)=>nt(u)||nt(a)?(Ze(),yt("nav",R6,[Wt("p",z6,[nt(u)?(Ze(),yt("span",B6,[Wr(ns,{item:nt(u)},null,8,["item"])])):Tr("v-if",!0),nt(a)?(Ze(),yt("span",F6,[Wr(ns,{item:nt(a)},null,8,["item"])])):Tr("v-if",!0)])])):Tr("v-if",!0)}}),V6=Dr(N6,[["__file","PageNav.vue"]]),U6={class:"page"},$6={class:"theme-default-content"},j6=Cr({__name:"Page",setup(e){return(t,r)=>{const n=Ai("Content");return Ze(),yt("main",U6,[Hr(t.$slots,"top"),Wt("div",$6,[Hr(t.$slots,"content-top"),Wr(n),Hr(t.$slots,"content-bottom")]),Wr(O6),Wr(V6),Hr(t.$slots,"bottom")])}}}),G6=Dr(j6,[["__file","Page.vue"]]),H6=["onKeydown"],q6={class:"sidebar-item-children"},W6=Cr({__name:"SidebarItem",props:{item:{type:Object,required:!0},depth:{type:Number,required:!1,default:0}},setup(e){const t=e,{item:r,depth:n}=Md(t),i=us(),o=bu(),u=bt(()=>EI(r.value,i)),a=bt(()=>({"sidebar-item":!0,"sidebar-heading":n.value===0,active:u.value,collapsible:r.value.collapsible})),f=bt(()=>r.value.collapsible?u.value:!0),[p,v]=RO(f.value),_=S=>{r.value.collapsible&&(S.preventDefault(),v())},y=o.afterEach(S=>{lg(()=>{p.value=f.value})});return rx(()=>{y()}),(S,A)=>{var M;const I=Ai("SidebarItem",!0);return Ze(),yt("li",null,[nt(r).link?(Ze(),Sn(ns,{key:0,class:sa(nt(a)),item:nt(r)},null,8,["class","item"])):(Ze(),yt("p",{key:1,tabindex:"0",class:sa(nt(a)),onClick:_,onKeydown:g4(_,["enter"])},[Bc(Mr(nt(r).text)+" ",1),nt(r).collapsible?(Ze(),yt("span",{key:0,class:sa(["arrow",nt(p)?"down":"right"])},null,2)):Tr("v-if",!0)],42,H6)),(M=nt(r).children)!=null&&M.length?(Ze(),Sn(TI,{key:2},{default:zn(()=>[xv(Wt("ul",q6,[(Ze(!0),yt(Zn,null,Za(nt(r).children,k=>(Ze(),Sn(I,{key:`${nt(n)}${k.text}${k.link}`,item:k,depth:nt(n)+1},null,8,["item","depth"]))),128))],512),[[bv,nt(p)]])]),_:1})):Tr("v-if",!0)])}}}),Z6=Dr(W6,[["__file","SidebarItem.vue"]]),X6={key:0,class:"sidebar-items"},Y6=Cr({__name:"SidebarItems",setup(e){const t=us(),r=fx();return Xi(()=>{Ia(()=>t.hash,n=>{const i=document.querySelector(".sidebar");if(!i)return;const o=document.querySelector(`.sidebar a.sidebar-item[href="${t.path}${n}"]`);if(!o)return;const{top:u,height:a}=i.getBoundingClientRect(),{top:f,height:p}=o.getBoundingClientRect();f<u?o.scrollIntoView(!0):f+p>u+a&&o.scrollIntoView(!1)})}),(n,i)=>nt(r).length?(Ze(),yt("ul",X6,[(Ze(!0),yt(Zn,null,Za(nt(r),o=>(Ze(),Sn(Z6,{key:`${o.text}${o.link}`,item:o},null,8,["item"]))),128))])):Tr("v-if",!0)}}),K6=Dr(Y6,[["__file","SidebarItems.vue"]]),J6={class:"sidebar"},Q6=Cr({__name:"Sidebar",setup(e){return(t,r)=>(Ze(),yt("aside",J6,[Wr(AI),Hr(t.$slots,"top"),Wr(K6),Hr(t.$slots,"bottom")]))}}),ez=Dr(Q6,[["__file","Sidebar.vue"]]),tz=Cr({__name:"Layout",setup(e){const t=Ks(),r=rs(),n=Ii(),i=bt(()=>r.value.navbar!==!1&&n.value.navbar!==!1),o=fx(),u=Tn(!1),a=M=>{u.value=typeof M=="boolean"?M:!u.value},f={x:0,y:0},p=M=>{f.x=M.changedTouches[0].clientX,f.y=M.changedTouches[0].clientY},v=M=>{const k=M.changedTouches[0].clientX-f.x,L=M.changedTouches[0].clientY-f.y;Math.abs(k)>Math.abs(L)&&Math.abs(k)>40&&(k>0&&f.x<=80?a(!0):a(!1))},_=bt(()=>[{"no-navbar":!i.value,"no-sidebar":!o.value.length,"sidebar-open":u.value},r.value.pageClass]);let y;Xi(()=>{y=bu().afterEach(()=>{a(!1)})}),eI(()=>{y()});const S=bI(),A=S.resolve,I=S.pending;return(M,k)=>(Ze(),yt("div",{class:sa(["theme-container",nt(_)]),onTouchstart:p,onTouchend:v},[Hr(M.$slots,"navbar",{},()=>[nt(i)?(Ze(),Sn(S6,{key:0,onToggleSidebar:a},{before:zn(()=>[Hr(M.$slots,"navbar-before")]),after:zn(()=>[Hr(M.$slots,"navbar-after")]),_:3})):Tr("v-if",!0)]),Wt("div",{class:"sidebar-mask",onClick:k[0]||(k[0]=L=>a(!1))}),Hr(M.$slots,"sidebar",{},()=>[Wr(ez,null,{top:zn(()=>[Hr(M.$slots,"sidebar-top")]),bottom:zn(()=>[Hr(M.$slots,"sidebar-bottom")]),_:3})]),Hr(M.$slots,"page",{},()=>[nt(r).home?(Ze(),Sn(UR,{key:0})):(Ze(),Sn(nx,{key:1,name:"fade-slide-y",mode:"out-in",onBeforeEnter:nt(A),onBeforeLeave:nt(I)},{default:zn(()=>[(Ze(),Sn(G6,{key:nt(t).path},{top:zn(()=>[Hr(M.$slots,"page-top")]),"content-top":zn(()=>[Hr(M.$slots,"page-content-top")]),"content-bottom":zn(()=>[Hr(M.$slots,"page-content-bottom")]),bottom:zn(()=>[Hr(M.$slots,"page-bottom")]),_:3}))]),_:3},8,["onBeforeEnter","onBeforeLeave"]))])],34))}}),rz=Dr(tz,[["__file","Layout.vue"]]),nz={class:"theme-container"},iz={class:"page"},az={class:"theme-default-content"},oz=Wt("h1",null,"404",-1),sz=Cr({__name:"NotFound",setup(e){const t=Pd(),r=Ii(),n=r.value.notFound??["Not Found"],i=()=>n[Math.floor(Math.random()*n.length)],o=r.value.home??t.value,u=r.value.backToHome??"Back to home";return(a,f)=>{const p=Ai("RouterLink");return Ze(),yt("div",nz,[Wt("main",iz,[Wt("div",az,[oz,Wt("blockquote",null,Mr(i()),1),Wr(p,{to:nt(o)},{default:zn(()=>[Bc(Mr(nt(u)),1)]),_:1},8,["to"])])])])}}}),lz=Dr(sz,[["__file","NotFound.vue"]]);const uz=Ka({enhance({app:e,router:t}){e.component("Badge",bO),e.component("CodeGroup",wO),e.component("CodeGroupItem",CO),e.component("AutoLinkExternalIcon",()=>{const n=e.component("ExternalLinkIcon");return n?Er(n):null}),e.component("NavbarSearch",()=>{const n=e.component("Docsearch")||e.component("SearchBox");return n?Er(n):null});const r=t.options.scrollBehavior;t.options.scrollBehavior=async(...n)=>(await bI().wait(),r(...n))},setup(){hR(),pR()},layouts:{Layout:rz,NotFound:lz}});/*! @docsearch/js 3.3.1 | MIT License | © Algolia, Inc. and contributors | https://docsearch.algolia.com */function V2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(r),!0).forEach(function(n){cz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function td(e){return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}function cz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D0(){return D0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D0.apply(this,arguments)}function hz(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ev(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var o,u,a=[],f=!0,p=!1;try{for(i=i.call(r);!(f=(o=i.next()).done)&&(a.push(o.value),!n||a.length!==n);f=!0);}catch(v){p=!0,u=v}finally{try{f||i.return==null||i.return()}finally{if(p)throw u}}return a}}(e,t)||II(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Cv(e){return function(t){if(Array.isArray(t))return k0(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||II(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function II(e,t){if(e){if(typeof e=="string")return k0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k0(e,t):void 0}}function k0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ot,Ff,MI,U2,PI,Av={},px=[],fz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Qo(e,t){for(var r in t)e[r]=t[r];return e}function DI(e){var t=e.parentNode;t&&t.removeChild(e)}function bo(e,t,r){var n,i,o,u=arguments,a={};for(o in t)o=="key"?n=t[o]:o=="ref"?i=t[o]:a[o]=t[o];if(arguments.length>3)for(r=[r],o=3;o<arguments.length;o++)r.push(u[o]);if(r!=null&&(a.children=r),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return Nf(e,a,n,i,null)}function Nf(e,t,r,n,i){var o={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++Ot.__v};return Ot.vnode!=null&&Ot.vnode(o),o}function el(e){return e.children}function Co(e,t){this.props=e,this.context=t}function rd(e,t){if(t==null)return e.__?rd(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?rd(e):null}function kI(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return kI(e)}}function L0(e){(!e.__d&&(e.__d=!0)&&Ff.push(e)&&!Iv.__r++||U2!==Ot.debounceRendering)&&((U2=Ot.debounceRendering)||MI)(Iv)}function Iv(){for(var e;Iv.__r=Ff.length;)e=Ff.sort(function(t,r){return t.__v.__b-r.__v.__b}),Ff=[],e.some(function(t){var r,n,i,o,u,a;t.__d&&(u=(o=(r=t).__v).__e,(a=r.__P)&&(n=[],(i=Qo({},o)).__v=o.__v+1,mx(a,o,i,r.__n,a.ownerSVGElement!==void 0,o.__h!=null?[u]:null,n,u??rd(o),o.__h),zI(n,o),o.__e!=u&&kI(o)))})}function LI(e,t,r,n,i,o,u,a,f,p){var v,_,y,S,A,I,M,k=n&&n.__k||px,L=k.length;for(r.__k=[],v=0;v<t.length;v++)if((S=r.__k[v]=(S=t[v])==null||typeof S=="boolean"?null:typeof S=="string"||typeof S=="number"?Nf(null,S,null,null,S):Array.isArray(S)?Nf(el,{children:S},null,null,null):S.__b>0?Nf(S.type,S.props,S.key,null,S.__v):S)!=null){if(S.__=r,S.__b=r.__b+1,(y=k[v])===null||y&&S.key==y.key&&S.type===y.type)k[v]=void 0;else for(_=0;_<L;_++){if((y=k[_])&&S.key==y.key&&S.type===y.type){k[_]=void 0;break}y=null}mx(e,S,y=y||Av,i,o,u,a,f,p),A=S.__e,(_=S.ref)&&y.ref!=_&&(M||(M=[]),y.ref&&M.push(y.ref,null,S),M.push(_,S.__c||A,S)),A!=null?(I==null&&(I=A),typeof S.type=="function"&&S.__k!=null&&S.__k===y.__k?S.__d=f=OI(S,f,e):f=RI(e,S,y,k,A,f),p||r.type!=="option"?typeof r.type=="function"&&(r.__d=f):e.value=""):f&&y.__e==f&&f.parentNode!=e&&(f=rd(y))}for(r.__e=I,v=L;v--;)k[v]!=null&&(typeof r.type=="function"&&k[v].__e!=null&&k[v].__e==r.__d&&(r.__d=rd(n,v+1)),FI(k[v],k[v]));if(M)for(v=0;v<M.length;v++)BI(M[v],M[++v],M[++v])}function OI(e,t,r){var n,i;for(n=0;n<e.__k.length;n++)(i=e.__k[n])&&(i.__=e,t=typeof i.type=="function"?OI(i,t,r):RI(r,i,i,e.__k,i.__e,t));return t}function is(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(r){is(r,t)}):t.push(e)),t}function RI(e,t,r,n,i,o){var u,a,f;if(t.__d!==void 0)u=t.__d,t.__d=void 0;else if(r==null||i!=o||i.parentNode==null)e:if(o==null||o.parentNode!==e)e.appendChild(i),u=null;else{for(a=o,f=0;(a=a.nextSibling)&&f<n.length;f+=2)if(a==i)break e;e.insertBefore(i,o),u=o}return u!==void 0?u:i.nextSibling}function $2(e,t,r){t[0]==="-"?e.setProperty(t,r):e[t]=r==null?"":typeof r!="number"||fz.test(t)?r:r+"px"}function Jp(e,t,r,n,i){var o;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||$2(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||$2(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=r,r?n||e.addEventListener(t,o?G2:j2,o):e.removeEventListener(t,o?G2:j2,o);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="download"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r!=null&&(r!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,r):e.removeAttribute(t))}}function j2(e){this.l[e.type+!1](Ot.event?Ot.event(e):e)}function G2(e){this.l[e.type+!0](Ot.event?Ot.event(e):e)}function mx(e,t,r,n,i,o,u,a,f){var p,v,_,y,S,A,I,M,k,L,z,V=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(f=r.__h,a=t.__e=r.__e,t.__h=null,o=[a]),(p=Ot.__b)&&p(t);try{e:if(typeof V=="function"){if(M=t.props,k=(p=V.contextType)&&n[p.__c],L=p?k?k.props.value:p.__:n,r.__c?I=(v=t.__c=r.__c).__=v.__E:("prototype"in V&&V.prototype.render?t.__c=v=new V(M,L):(t.__c=v=new Co(M,L),v.constructor=V,v.render=pz),k&&k.sub(v),v.props=M,v.state||(v.state={}),v.context=L,v.__n=n,_=v.__d=!0,v.__h=[]),v.__s==null&&(v.__s=v.state),V.getDerivedStateFromProps!=null&&(v.__s==v.state&&(v.__s=Qo({},v.__s)),Qo(v.__s,V.getDerivedStateFromProps(M,v.__s))),y=v.props,S=v.state,_)V.getDerivedStateFromProps==null&&v.componentWillMount!=null&&v.componentWillMount(),v.componentDidMount!=null&&v.__h.push(v.componentDidMount);else{if(V.getDerivedStateFromProps==null&&M!==y&&v.componentWillReceiveProps!=null&&v.componentWillReceiveProps(M,L),!v.__e&&v.shouldComponentUpdate!=null&&v.shouldComponentUpdate(M,v.__s,L)===!1||t.__v===r.__v){v.props=M,v.state=v.__s,t.__v!==r.__v&&(v.__d=!1),v.__v=t,t.__e=r.__e,t.__k=r.__k,v.__h.length&&u.push(v);break e}v.componentWillUpdate!=null&&v.componentWillUpdate(M,v.__s,L),v.componentDidUpdate!=null&&v.__h.push(function(){v.componentDidUpdate(y,S,A)})}v.context=L,v.props=M,v.state=v.__s,(p=Ot.__r)&&p(t),v.__d=!1,v.__v=t,v.__P=e,p=v.render(v.props,v.state,v.context),v.state=v.__s,v.getChildContext!=null&&(n=Qo(Qo({},n),v.getChildContext())),_||v.getSnapshotBeforeUpdate==null||(A=v.getSnapshotBeforeUpdate(y,S)),z=p!=null&&p.type===el&&p.key==null?p.props.children:p,LI(e,Array.isArray(z)?z:[z],t,r,n,i,o,u,a,f),v.base=t.__e,t.__h=null,v.__h.length&&u.push(v),I&&(v.__E=v.__=null),v.__e=!1}else o==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=dz(r.__e,t,r,n,i,o,u,f);(p=Ot.diffed)&&p(t)}catch(H){t.__v=null,(f||o!=null)&&(t.__e=a,t.__h=!!f,o[o.indexOf(a)]=null),Ot.__e(H,t,r)}}function zI(e,t){Ot.__c&&Ot.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){Ot.__e(n,r.__v)}})}function dz(e,t,r,n,i,o,u,a){var f,p,v,_,y=r.props,S=t.props,A=t.type,I=0;if(A==="svg"&&(i=!0),o!=null){for(;I<o.length;I++)if((f=o[I])&&(f===e||(A?f.localName==A:f.nodeType==3))){e=f,o[I]=null;break}}if(e==null){if(A===null)return document.createTextNode(S);e=i?document.createElementNS("http://www.w3.org/2000/svg",A):document.createElement(A,S.is&&S),o=null,a=!1}if(A===null)y===S||a&&e.data===S||(e.data=S);else{if(o=o&&px.slice.call(e.childNodes),p=(y=r.props||Av).dangerouslySetInnerHTML,v=S.dangerouslySetInnerHTML,!a){if(o!=null)for(y={},_=0;_<e.attributes.length;_++)y[e.attributes[_].name]=e.attributes[_].value;(v||p)&&(v&&(p&&v.__html==p.__html||v.__html===e.innerHTML)||(e.innerHTML=v&&v.__html||""))}if(function(M,k,L,z,V){var H;for(H in L)H==="children"||H==="key"||H in k||Jp(M,H,null,L[H],z);for(H in k)V&&typeof k[H]!="function"||H==="children"||H==="key"||H==="value"||H==="checked"||L[H]===k[H]||Jp(M,H,k[H],L[H],z)}(e,S,y,i,a),v)t.__k=[];else if(I=t.props.children,LI(e,Array.isArray(I)?I:[I],t,r,n,i&&A!=="foreignObject",o,u,e.firstChild,a),o!=null)for(I=o.length;I--;)o[I]!=null&&DI(o[I]);a||("value"in S&&(I=S.value)!==void 0&&(I!==e.value||A==="progress"&&!I)&&Jp(e,"value",I,y.value,!1),"checked"in S&&(I=S.checked)!==void 0&&I!==e.checked&&Jp(e,"checked",I,y.checked,!1))}return e}function BI(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){Ot.__e(n,r)}}function FI(e,t,r){var n,i,o;if(Ot.unmount&&Ot.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||BI(n,null,t)),r||typeof e.type=="function"||(r=(i=e.__e)!=null),e.__e=e.__d=void 0,(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(u){Ot.__e(u,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&FI(n[o],t,r);i!=null&&DI(i)}function pz(e,t,r){return this.constructor(e,r)}function nd(e,t,r){var n,i,o;Ot.__&&Ot.__(e,t),i=(n=typeof r=="function")?null:r&&r.__k||t.__k,o=[],mx(t,e=(!n&&r||t).__k=bo(el,null,[e]),i||Av,Av,t.ownerSVGElement!==void 0,!n&&r?[r]:i?null:t.firstChild?px.slice.call(t.childNodes):null,o,!n&&r?r:i?i.__e:t.firstChild,n),zI(o,e)}function NI(e,t){nd(e,t,NI)}function mz(e,t,r){var n,i,o,u=arguments,a=Qo({},e.props);for(o in t)o=="key"?n=t[o]:o=="ref"?i=t[o]:a[o]=t[o];if(arguments.length>3)for(r=[r],o=3;o<arguments.length;o++)r.push(u[o]);return r!=null&&(a.children=r),Nf(e.type,a,n||e.key,i||e.ref,null)}Ot={__e:function(e,t){for(var r,n,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((n=r.constructor)&&n.getDerivedStateFromError!=null&&(r.setState(n.getDerivedStateFromError(e)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e),i=r.__d),i)return r.__E=r}catch(o){e=o}throw e},__v:0},Co.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Qo({},this.state),typeof e=="function"&&(e=e(Qo({},r),this.props)),e&&Qo(r,e),e!=null&&this.__v&&(t&&this.__h.push(t),L0(this))},Co.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),L0(this))},Co.prototype.render=el,Ff=[],MI=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Iv.__r=0,PI=0;var Wc,Di,H2,Pc=0,O0=[],q2=Ot.__b,W2=Ot.__r,Z2=Ot.diffed,X2=Ot.__c,Y2=Ot.unmount;function Dd(e,t){Ot.__h&&Ot.__h(Di,e,Pc||t),Pc=0;var r=Di.__H||(Di.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function VI(e){return Pc=1,UI(jI,e)}function UI(e,t,r){var n=Dd(Wc++,2);return n.t=e,n.__c||(n.__=[r?r(t):jI(void 0,t),function(i){var o=n.t(n.__[0],i);n.__[0]!==o&&(n.__=[o,n.__[1]],n.__c.setState({}))}],n.__c=Di),n.__}function $I(e,t){var r=Dd(Wc++,3);!Ot.__s&&vx(r.__H,t)&&(r.__=e,r.__H=t,Di.__H.__h.push(r))}function K2(e,t){var r=Dd(Wc++,4);!Ot.__s&&vx(r.__H,t)&&(r.__=e,r.__H=t,Di.__h.push(r))}function X_(e,t){var r=Dd(Wc++,7);return vx(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function vz(){O0.forEach(function(e){if(e.__P)try{e.__H.__h.forEach(Ym),e.__H.__h.forEach(R0),e.__H.__h=[]}catch(t){e.__H.__h=[],Ot.__e(t,e.__v)}}),O0=[]}Ot.__b=function(e){Di=null,q2&&q2(e)},Ot.__r=function(e){W2&&W2(e),Wc=0;var t=(Di=e.__c).__H;t&&(t.__h.forEach(Ym),t.__h.forEach(R0),t.__h=[])},Ot.diffed=function(e){Z2&&Z2(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(O0.push(t)!==1&&H2===Ot.requestAnimationFrame||((H2=Ot.requestAnimationFrame)||function(r){var n,i=function(){clearTimeout(o),J2&&cancelAnimationFrame(n),setTimeout(r)},o=setTimeout(i,100);J2&&(n=requestAnimationFrame(i))})(vz)),Di=void 0},Ot.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Ym),r.__h=r.__h.filter(function(n){return!n.__||R0(n)})}catch(n){t.some(function(i){i.__h&&(i.__h=[])}),t=[],Ot.__e(n,r.__v)}}),X2&&X2(e,t)},Ot.unmount=function(e){Y2&&Y2(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(Ym)}catch(r){Ot.__e(r,t.__v)}};var J2=typeof requestAnimationFrame=="function";function Ym(e){var t=Di;typeof e.__c=="function"&&e.__c(),Di=t}function R0(e){var t=Di;e.__c=e.__(),Di=t}function vx(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function jI(e,t){return typeof t=="function"?t(e):t}function GI(e,t){for(var r in t)e[r]=t[r];return e}function z0(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function B0(e){this.props=e}(B0.prototype=new Co).isPureReactComponent=!0,B0.prototype.shouldComponentUpdate=function(e,t){return z0(this.props,e)||z0(this.state,t)};var Q2=Ot.__b;Ot.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Q2&&Q2(e)};var gz=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911,eS=function(e,t){return e==null?null:is(is(e).map(t))},_z={map:eS,forEach:eS,count:function(e){return e?is(e).length:0},only:function(e){var t=is(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:is},yz=Ot.__e;function Km(){this.__u=0,this.t=null,this.__b=null}function HI(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function If(){this.u=null,this.o=null}Ot.__e=function(e,t,r){if(e.then){for(var n,i=t;i=i.__;)if((n=i.__c)&&n.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),n.__c(e,t)}yz(e,t,r)},(Km.prototype=new Co).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var i=HI(n.__v),o=!1,u=function(){o||(o=!0,r.componentWillUnmount=r.__c,i?i(a):a())};r.__c=r.componentWillUnmount,r.componentWillUnmount=function(){u(),r.__c&&r.__c()};var a=function(){if(!--n.__u){if(n.state.__e){var p=n.state.__e;n.__v.__k[0]=function _(y,S,A){return y&&(y.__v=null,y.__k=y.__k&&y.__k.map(function(I){return _(I,S,A)}),y.__c&&y.__c.__P===S&&(y.__e&&A.insertBefore(y.__e,y.__d),y.__c.__e=!0,y.__c.__P=A)),y}(p,p.__c.__P,p.__c.__O)}var v;for(n.setState({__e:n.__b=null});v=n.t.pop();)v.forceUpdate()}},f=t.__h===!0;n.__u++||f||n.setState({__e:n.__b=n.__v.__k[0]}),e.then(u,u)},Km.prototype.componentWillUnmount=function(){this.t=[]},Km.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=function o(u,a,f){return u&&(u.__c&&u.__c.__H&&(u.__c.__H.__.forEach(function(p){typeof p.__c=="function"&&p.__c()}),u.__c.__H=null),(u=GI({},u)).__c!=null&&(u.__c.__P===f&&(u.__c.__P=a),u.__c=null),u.__k=u.__k&&u.__k.map(function(p){return o(p,a,f)})),u}(this.__b,r,n.__O=n.__P)}this.__b=null}var i=t.__e&&bo(el,null,e.fallback);return i&&(i.__h=null),[bo(el,null,t.__e?null:e.children),i]};var tS=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};function xz(e){return this.getChildContext=function(){return e.context},e.children}function bz(e){var t=this,r=e.i;t.componentWillUnmount=function(){nd(null,t.l),t.l=null,t.i=null},t.i&&t.i!==r&&t.componentWillUnmount(),e.__v?(t.l||(t.i=r,t.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),nd(bo(xz,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function qI(e,t){return bo(bz,{__v:e,i:t})}(If.prototype=new Co).__e=function(e){var t=this,r=HI(t.__v),n=t.o.get(e);return n[0]++,function(i){var o=function(){t.props.revealOrder?(n.push(i),tS(t,e,n)):i()};r?r(o):o()}},If.prototype.render=function(e){this.u=null,this.o=new Map;var t=is(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},If.prototype.componentDidUpdate=If.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){tS(e,r,t)})};var WI=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,wz=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Sz=function(e){return(typeof Symbol<"u"&&td(Symbol())=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};function ZI(e,t,r){return t.__k==null&&(t.textContent=""),nd(e,t),typeof r=="function"&&r(),e?e.__c:null}Co.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Co.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var rS=Ot.event;function Tz(){}function Ez(){return this.cancelBubble}function Cz(){return this.defaultPrevented}Ot.event=function(e){return rS&&(e=rS(e)),e.persist=Tz,e.isPropagationStopped=Ez,e.isDefaultPrevented=Cz,e.nativeEvent=e};var XI,nS={configurable:!0,get:function(){return this.class}},iS=Ot.vnode;Ot.vnode=function(e){var t=e.type,r=e.props,n=r;if(typeof t=="string"){for(var i in n={},r){var o=r[i];i==="value"&&"defaultValue"in r&&o==null||(i==="defaultValue"&&"value"in r&&r.value==null?i="value":i==="download"&&o===!0?o="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!Sz(r.type)?i="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():wz.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():o===null&&(o=void 0),n[i]=o)}t=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=is(r.children).forEach(function(u){u.props.selected=n.value.indexOf(u.props.value)!=-1})),t=="select"&&n.defaultValue!=null&&(n.value=is(r.children).forEach(function(u){u.props.selected=n.multiple?n.defaultValue.indexOf(u.props.value)!=-1:n.defaultValue==u.props.value})),e.props=n}t&&r.class!=r.className&&(nS.enumerable="className"in r,r.className!=null&&(n.class=r.className),Object.defineProperty(n,"className",nS)),e.$$typeof=WI,iS&&iS(e)};var aS=Ot.__r;Ot.__r=function(e){aS&&aS(e),XI=e.__c};var Az={ReactCurrentDispatcher:{current:{readContext:function(e){return XI.__n[e.__c].props.value}}}};(typeof performance>"u"?"undefined":td(performance))=="object"&&typeof performance.now=="function"&&performance.now.bind(performance);function oS(e){return!!e&&e.$$typeof===WI}var _e={useState:VI,useReducer:UI,useEffect:$I,useLayoutEffect:K2,useRef:function(e){return Pc=5,X_(function(){return{current:e}},[])},useImperativeHandle:function(e,t,r){Pc=6,K2(function(){typeof e=="function"?e(t()):e&&(e.current=t())},r==null?r:r.concat(e))},useMemo:X_,useCallback:function(e,t){return Pc=8,X_(function(){return e},t)},useContext:function(e){var t=Di.context[e.__c],r=Dd(Wc++,9);return r.__c=e,t?(r.__==null&&(r.__=!0,t.sub(Di)),t.props.value):e.__},useDebugValue:function(e,t){Ot.useDebugValue&&Ot.useDebugValue(t?t(e):e)},version:"16.8.0",Children:_z,render:ZI,hydrate:function(e,t,r){return NI(e,t),typeof r=="function"&&r(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(nd(null,e),!0)},createPortal:qI,createElement:bo,createContext:function(e,t){var r={__c:t="__cC"+PI++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,o;return this.getChildContext||(i=[],(o={})[t]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(u){this.props.value!==u.value&&i.some(L0)},this.sub=function(u){i.push(u);var a=u.componentWillUnmount;u.componentWillUnmount=function(){i.splice(i.indexOf(u),1),a&&a.call(u)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r},createFactory:function(e){return bo.bind(null,e)},cloneElement:function(e){return oS(e)?mz.apply(null,arguments):e},createRef:function(){return{current:null}},Fragment:el,isValidElement:oS,findDOMNode:function(e){return e&&(e.base||e.nodeType===1&&e)||null},Component:Co,PureComponent:B0,memo:function(e,t){function r(i){var o=this.props.ref,u=o==i.ref;return!u&&o&&(o.call?o(null):o.current=null),t?!t(this.props,i)||!u:z0(this.props,i)}function n(i){return this.shouldComponentUpdate=r,bo(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n},forwardRef:function(e){function t(r,n){var i=GI({},r);return delete i.ref,e(i,(n=r.ref||n)&&(td(n)!="object"||"current"in n)?n:null)}return t.$$typeof=gz,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t},unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:el,Suspense:Km,SuspenseList:If,lazy:function(e){var t,r,n;function i(o){if(t||(t=e()).then(function(u){r=u.default||u},function(u){n=u}),n)throw n;if(!r)throw t;return bo(r,o)}return i.displayName="Lazy",i.__f=!0,i},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Az};function Iz(){return _e.createElement("svg",{width:"15",height:"15",className:"DocSearch-Control-Key-Icon"},_e.createElement("path",{d:"M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953",strokeWidth:"1.2",stroke:"currentColor",fill:"none",strokeLinecap:"square"}))}function YI(){return _e.createElement("svg",{width:"20",height:"20",className:"DocSearch-Search-Icon",viewBox:"0 0 20 20"},_e.createElement("path",{d:"M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}var Mz=["translations"];function F0(){return F0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(this,arguments)}function Pz(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var o,u,a=[],f=!0,p=!1;try{for(i=i.call(r);!(f=(o=i.next()).done)&&(a.push(o.value),!n||a.length!==n);f=!0);}catch(v){p=!0,u=v}finally{try{f||i.return==null||i.return()}finally{if(p)throw u}}return a}}(e,t)||function(r,n){if(r){if(typeof r=="string")return sS(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return sS(r,n)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dz(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var kz=_e.forwardRef(function(e,t){var r=e.translations,n=r===void 0?{}:r,i=Dz(e,Mz),o=n.buttonText,u=o===void 0?"Search":o,a=n.buttonAriaLabel,f=a===void 0?"Search":a,p=Pz(VI(null),2),v=p[0],_=p[1];return $I(function(){typeof navigator<"u"&&(/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?_("⌘"):_("Ctrl"))},[]),_e.createElement("button",F0({type:"button",className:"DocSearch DocSearch-Button","aria-label":f},i,{ref:t}),_e.createElement("span",{className:"DocSearch-Button-Container"},_e.createElement(YI,null),_e.createElement("span",{className:"DocSearch-Button-Placeholder"},u)),_e.createElement("span",{className:"DocSearch-Button-Keys"},v!==null&&_e.createElement(_e.Fragment,null,_e.createElement("kbd",{className:"DocSearch-Button-Key"},v==="Ctrl"?_e.createElement(Iz,null):v),_e.createElement("kbd",{className:"DocSearch-Button-Key"},"K"))))});function id(e){return e.reduce(function(t,r){return t.concat(r)},[])}var Lz=0;function N0(e){return e.collections.length===0?0:e.collections.reduce(function(t,r){return t+r.items.length},0)}var KI=function(){},Oz=[{segment:"autocomplete-core",version:"1.7.2"}];function Jm(e,t){var r=t;return{then:function(n,i){return Jm(e.then(Qp(n,r,e),Qp(i,r,e)),r)},catch:function(n){return Jm(e.catch(Qp(n,r,e)),r)},finally:function(n){return n&&r.onCancelList.push(n),Jm(e.finally(Qp(n&&function(){return r.onCancelList=[],n()},r,e)),r)},cancel:function(){r.isCanceled=!0;var n=r.onCancelList;r.onCancelList=[],n.forEach(function(i){i()})},isCanceled:function(){return r.isCanceled===!0}}}function lS(e){return Jm(e,{isCanceled:!1,onCancelList:[]})}function Qp(e,t,r){return e?function(n){return t.isCanceled?n:e(n)}:r}function uS(e,t,r,n){if(!r)return null;if(e<0&&(t===null||n!==null&&t===0))return r+e;var i=(t===null?-1:t)+e;return i<=-1||i>=r?n===null?null:0:i}function cS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zz(e,t){var r=[];return Promise.resolve(e(t)).then(function(n){return Promise.all(n.filter(function(i){return Boolean(i)}).map(function(i){if(i.sourceId,r.includes(i.sourceId))throw new Error("[Autocomplete] The `sourceId` ".concat(JSON.stringify(i.sourceId)," is not unique."));r.push(i.sourceId);var o=function(u){for(var a=1;a<arguments.length;a++){var f=arguments[a]!=null?arguments[a]:{};a%2?cS(Object(f),!0).forEach(function(p){Rz(u,p,f[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):cS(Object(f)).forEach(function(p){Object.defineProperty(u,p,Object.getOwnPropertyDescriptor(f,p))})}return u}({getItemInputValue:function(u){return u.state.query},getItemUrl:function(){},onSelect:function(u){(0,u.setIsOpen)(!1)},onActive:KI},i);return Promise.resolve(o)}))})}function Sc(e){var t=function(i){var o=i.collections.map(function(u){return u.items.length}).reduce(function(u,a,f){var p=(u[f-1]||0)+a;return u.push(p),u},[]).reduce(function(u,a){return a<=i.activeItemId?u+1:u},0);return i.collections[o]}(e);if(!t)return null;var r=t.items[function(i){for(var o=i.state,u=i.collection,a=!1,f=0,p=0;a===!1;){var v=o.collections[f];if(v===u){a=!0;break}p+=v.items.length,f++}return o.activeItemId-p}({state:e,collection:t})],n=t.source;return{item:r,itemInputValue:n.getItemInputValue({item:r,state:e}),itemUrl:n.getItemUrl({item:r,state:e}),source:n}}var Bz=/((gt|sm)-|galaxy nexus)|samsung[- ]/i;function hS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function em(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(r),!0).forEach(function(n){Fz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vz(e,t,r){var n,i=t.initialState;return{getState:function(){return i},dispatch:function(o,u){var a=function(f){for(var p=1;p<arguments.length;p++){var v=arguments[p]!=null?arguments[p]:{};p%2?fS(Object(v),!0).forEach(function(_){Nz(f,_,v[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(v)):fS(Object(v)).forEach(function(_){Object.defineProperty(f,_,Object.getOwnPropertyDescriptor(v,_))})}return f}({},i);i=e(i,{type:o,props:t,payload:u}),r({state:i,prevState:a})},pendingRequests:(n=[],{add:function(o){return n.push(o),o.finally(function(){n=n.filter(function(u){return u!==o})})},cancelAll:function(){n.forEach(function(o){return o.cancel()})},isEmpty:function(){return n.length===0}})}}function dS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dS(Object(r),!0).forEach(function(n){Uz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $z(e){return function(t){if(Array.isArray(t))return Y_(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(t){if(typeof t=="string")return Y_(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y_(t,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Y_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(r),!0).forEach(function(n){jz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(r),!0).forEach(function(n){JI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gz(e){return function(t){if(Array.isArray(t))return K_(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(t){if(typeof t=="string")return K_(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K_(t,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function K_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vS(Object(r),!0).forEach(function(n){Hz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nm(e){return Boolean(e.execute)}function qz(e,t){return r=e,Boolean(r==null?void 0:r.execute)?gS(gS({},e),{},{requests:e.queries.map(function(n){return{query:n,sourceId:t,transformResponse:e.transformResponse}})}):{items:e,sourceId:t};var r}function Wz(e){var t=e.reduce(function(r,n){if(!nm(n))return r.push(n),r;var i=n.searchClient,o=n.execute,u=n.requesterId,a=n.requests,f=r.find(function(_){return nm(n)&&nm(_)&&_.searchClient===i&&Boolean(u)&&_.requesterId===u});if(f){var p;(p=f.items).push.apply(p,Gz(a))}else{var v={execute:o,requesterId:u,items:a,searchClient:i};r.push(v)}return r},[]).map(function(r){if(!nm(r))return Promise.resolve(r);var n=r,i=n.execute,o=n.items;return i({searchClient:n.searchClient,requests:o})});return Promise.all(t).then(function(r){return id(r)})}function Zz(e,t){return t.map(function(r){var n=e.filter(function(a){return a.sourceId===r.sourceId}),i=n.map(function(a){return a.items}),o=n[0].transformResponse,u=o?o(function(a){var f=a.map(function(p){var v;return em(em({},p),{},{hits:(v=p.hits)===null||v===void 0?void 0:v.map(function(_){return em(em({},_),{},{__autocomplete_indexName:p.index,__autocomplete_queryID:p.queryID})})})});return{results:f,hits:f.map(function(p){return p.hits}).filter(Boolean),facetHits:f.map(function(p){var v;return(v=p.facetHits)===null||v===void 0?void 0:v.map(function(_){return{label:_.value,count:_.count,_highlightResult:{label:{value:_.highlighted}}}})}).filter(Boolean)}}(i)):i;return u.every(Boolean),'The `getItems` function from source "'.concat(r.sourceId,'" must return an array of items but returned ').concat(JSON.stringify(void 0),`.

Did you forget to return items?

See: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems`),{source:r,items:u}})}var Xz=["event","nextState","props","query","refresh","store"];function _S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_S(Object(r),!0).forEach(function(n){Yz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kz(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var yS,J_,im,nf=null,xS=(yS=-1,J_=-1,im=void 0,function(e){var t=++yS;return Promise.resolve(e).then(function(r){return im&&t<J_?im:(J_=t,im=r,r)})});function _c(e){var t=e.event,r=e.nextState,n=r===void 0?{}:r,i=e.props,o=e.query,u=e.refresh,a=e.store,f=Kz(e,Xz);nf&&i.environment.clearTimeout(nf);var p=f.setCollections,v=f.setIsOpen,_=f.setQuery,y=f.setActiveItemId,S=f.setStatus;if(_(o),y(i.defaultActiveItemId),!o&&i.openOnFocus===!1){var A,I=a.getState().collections.map(function(L){return rf(rf({},L),{},{items:[]})});S("idle"),p(I),v((A=n.isOpen)!==null&&A!==void 0?A:i.shouldPanelOpen({state:a.getState()}));var M=lS(xS(I).then(function(){return Promise.resolve()}));return a.pendingRequests.add(M)}S("loading"),nf=i.environment.setTimeout(function(){S("stalled")},i.stallThreshold);var k=lS(xS(i.getSources(rf({query:o,refresh:u,state:a.getState()},f)).then(function(L){return Promise.all(L.map(function(z){return Promise.resolve(z.getItems(rf({query:o,refresh:u,state:a.getState()},f))).then(function(V){return qz(V,z.sourceId)})})).then(Wz).then(function(z){return Zz(z,L)}).then(function(z){return function(V){var H=V.collections,Z=V.props,ee=V.state,Y=H.reduce(function(ae,le){return rm(rm({},ae),{},JI({},le.source.sourceId,rm(rm({},le.source),{},{getItems:function(){return id(le.items)}})))},{});return id(Z.reshape({sources:Object.values(Y),sourcesBySourceId:Y,state:ee})).filter(Boolean).map(function(ae){return{source:ae,items:ae.getItems()}})}({collections:z,props:i,state:a.getState()})})}))).then(function(L){var z;S("idle"),p(L);var V=i.shouldPanelOpen({state:a.getState()});v((z=n.isOpen)!==null&&z!==void 0?z:i.openOnFocus&&!o&&V||V);var H=Sc(a.getState());if(a.getState().activeItemId!==null&&H){var Z=H.item,ee=H.itemInputValue,Y=H.itemUrl,ae=H.source;ae.onActive(rf({event:t,item:Z,itemInputValue:ee,itemUrl:Y,refresh:u,source:ae,state:a.getState()},f))}}).finally(function(){S("idle"),nf&&i.environment.clearTimeout(nf)});return a.pendingRequests.add(k)}var Jz=["event","props","refresh","store"];function bS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bS(Object(r),!0).forEach(function(n){Qz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qz(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e9(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var t9=["props","refresh","store"],r9=["inputElement","formElement","panelElement"],n9=["inputElement"],i9=["inputElement","maxLength"],a9=["item","source"];function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function li(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wS(Object(r),!0).forEach(function(n){o9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function o9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function af(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function s9(e){var t=e.props,r=e.refresh,n=e.store,i=af(e,t9);return{getEnvironmentProps:function(o){var u=o.inputElement,a=o.formElement,f=o.panelElement;function p(v){!n.getState().isOpen&&n.pendingRequests.isEmpty()||v.target===u||[a,f].some(function(_){return y=_,S=v.target,y===S||y.contains(S);var y,S})===!1&&(n.dispatch("blur",null),t.debug||n.pendingRequests.cancelAll())}return li({onTouchStart:p,onMouseDown:p,onTouchMove:function(v){n.getState().isOpen!==!1&&u===t.environment.document.activeElement&&v.target!==u&&u.blur()}},af(o,r9))},getRootProps:function(o){return li({role:"combobox","aria-expanded":n.getState().isOpen,"aria-haspopup":"listbox","aria-owns":n.getState().isOpen?"".concat(t.id,"-list"):void 0,"aria-labelledby":"".concat(t.id,"-label")},o)},getFormProps:function(o){return o.inputElement,li({action:"",noValidate:!0,role:"search",onSubmit:function(u){var a;u.preventDefault(),t.onSubmit(li({event:u,refresh:r,state:n.getState()},i)),n.dispatch("submit",null),(a=o.inputElement)===null||a===void 0||a.blur()},onReset:function(u){var a;u.preventDefault(),t.onReset(li({event:u,refresh:r,state:n.getState()},i)),n.dispatch("reset",null),(a=o.inputElement)===null||a===void 0||a.focus()}},af(o,n9))},getLabelProps:function(o){return li({htmlFor:"".concat(t.id,"-input"),id:"".concat(t.id,"-label")},o)},getInputProps:function(o){var u;function a(I){(t.openOnFocus||Boolean(n.getState().query))&&_c(li({event:I,props:t,query:n.getState().completion||n.getState().query,refresh:r,store:n},i)),n.dispatch("focus",null)}var f=o||{},p=(f.inputElement,f.maxLength),v=p===void 0?512:p,_=af(f,i9),y=Sc(n.getState()),S=function(I){return Boolean(I&&I.match(Bz))}(((u=t.environment.navigator)===null||u===void 0?void 0:u.userAgent)||""),A=y!=null&&y.itemUrl&&!S?"go":"search";return li({"aria-autocomplete":"both","aria-activedescendant":n.getState().isOpen&&n.getState().activeItemId!==null?"".concat(t.id,"-item-").concat(n.getState().activeItemId):void 0,"aria-controls":n.getState().isOpen?"".concat(t.id,"-list"):void 0,"aria-labelledby":"".concat(t.id,"-label"),value:n.getState().completion||n.getState().query,id:"".concat(t.id,"-input"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",enterKeyHint:A,spellCheck:"false",autoFocus:t.autoFocus,placeholder:t.placeholder,maxLength:v,type:"search",onChange:function(I){_c(li({event:I,props:t,query:I.currentTarget.value.slice(0,v),refresh:r,store:n},i))},onKeyDown:function(I){(function(M){var k=M.event,L=M.props,z=M.refresh,V=M.store,H=e9(M,Jz);if(k.key==="ArrowUp"||k.key==="ArrowDown"){var Z=function(){var ve=L.environment.document.getElementById("".concat(L.id,"-item-").concat(V.getState().activeItemId));ve&&(ve.scrollIntoViewIfNeeded?ve.scrollIntoViewIfNeeded(!1):ve.scrollIntoView(!1))},ee=function(){var ve=Sc(V.getState());if(V.getState().activeItemId!==null&&ve){var Pe=ve.item,$e=ve.itemInputValue,Ce=ve.itemUrl,at=ve.source;at.onActive(Ll({event:k,item:Pe,itemInputValue:$e,itemUrl:Ce,refresh:z,source:at,state:V.getState()},H))}};k.preventDefault(),V.getState().isOpen===!1&&(L.openOnFocus||Boolean(V.getState().query))?_c(Ll({event:k,props:L,query:V.getState().query,refresh:z,store:V},H)).then(function(){V.dispatch(k.key,{nextActiveItemId:L.defaultActiveItemId}),ee(),setTimeout(Z,0)}):(V.dispatch(k.key,{}),ee(),Z())}else if(k.key==="Escape")k.preventDefault(),V.dispatch(k.key,null),V.pendingRequests.cancelAll();else if(k.key==="Tab")V.dispatch("blur",null),V.pendingRequests.cancelAll();else if(k.key==="Enter"){if(V.getState().activeItemId===null||V.getState().collections.every(function(ve){return ve.items.length===0}))return void(L.debug||V.pendingRequests.cancelAll());k.preventDefault();var Y=Sc(V.getState()),ae=Y.item,le=Y.itemInputValue,pe=Y.itemUrl,ye=Y.source;if(k.metaKey||k.ctrlKey)pe!==void 0&&(ye.onSelect(Ll({event:k,item:ae,itemInputValue:le,itemUrl:pe,refresh:z,source:ye,state:V.getState()},H)),L.navigator.navigateNewTab({itemUrl:pe,item:ae,state:V.getState()}));else if(k.shiftKey)pe!==void 0&&(ye.onSelect(Ll({event:k,item:ae,itemInputValue:le,itemUrl:pe,refresh:z,source:ye,state:V.getState()},H)),L.navigator.navigateNewWindow({itemUrl:pe,item:ae,state:V.getState()}));else if(!k.altKey){if(pe!==void 0)return ye.onSelect(Ll({event:k,item:ae,itemInputValue:le,itemUrl:pe,refresh:z,source:ye,state:V.getState()},H)),void L.navigator.navigate({itemUrl:pe,item:ae,state:V.getState()});_c(Ll({event:k,nextState:{isOpen:!1},props:L,query:le,refresh:z,store:V},H)).then(function(){ye.onSelect(Ll({event:k,item:ae,itemInputValue:le,itemUrl:pe,refresh:z,source:ye,state:V.getState()},H))})}}})(li({event:I,props:t,refresh:r,store:n},i))},onFocus:a,onBlur:KI,onClick:function(I){o.inputElement!==t.environment.document.activeElement||n.getState().isOpen||a(I)}},_)},getPanelProps:function(o){return li({onMouseDown:function(u){u.preventDefault()},onMouseLeave:function(){n.dispatch("mouseleave",null)}},o)},getListProps:function(o){return li({role:"listbox","aria-labelledby":"".concat(t.id,"-label"),id:"".concat(t.id,"-list")},o)},getItemProps:function(o){var u=o.item,a=o.source,f=af(o,a9);return li({id:"".concat(t.id,"-item-").concat(u.__autocomplete_id),role:"option","aria-selected":n.getState().activeItemId===u.__autocomplete_id,onMouseMove:function(p){if(u.__autocomplete_id!==n.getState().activeItemId){n.dispatch("mousemove",u.__autocomplete_id);var v=Sc(n.getState());if(n.getState().activeItemId!==null&&v){var _=v.item,y=v.itemInputValue,S=v.itemUrl,A=v.source;A.onActive(li({event:p,item:_,itemInputValue:y,itemUrl:S,refresh:r,source:A,state:n.getState()},i))}}},onMouseDown:function(p){p.preventDefault()},onClick:function(p){var v=a.getItemInputValue({item:u,state:n.getState()}),_=a.getItemUrl({item:u,state:n.getState()});(_?Promise.resolve():_c(li({event:p,nextState:{isOpen:!1},props:t,query:v,refresh:r,store:n},i))).then(function(){a.onSelect(li({event:p,item:u,itemInputValue:v,itemUrl:_,refresh:r,source:a,state:n.getState()},i))})}},f)}}}function SS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function l9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(r),!0).forEach(function(n){QI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u9(e){var t,r,n,i,o=e.plugins,u=e.options,a=(t=(((r=u.__autocomplete_metadata)===null||r===void 0?void 0:r.userAgents)||[])[0])===null||t===void 0?void 0:t.segment,f=a?QI({},a,Object.keys(((n=u.__autocomplete_metadata)===null||n===void 0?void 0:n.options)||{})):{};return{plugins:o.map(function(p){return{name:p.name,options:Object.keys(p.__autocomplete_pluginOptions||[])}}),options:l9({"autocomplete-core":Object.keys(u)},f),ua:Oz.concat(((i=u.__autocomplete_metadata)===null||i===void 0?void 0:i.userAgents)||[])}}function TS(e){var t,r=e.state;return r.isOpen===!1||r.activeItemId===null?null:((t=Sc(r))===null||t===void 0?void 0:t.itemInputValue)||null}function ES(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(r),!0).forEach(function(n){c9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ES(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h9=function(e,t){switch(t.type){case"setActiveItemId":case"mousemove":return ur(ur({},e),{},{activeItemId:t.payload});case"setQuery":return ur(ur({},e),{},{query:t.payload,completion:null});case"setCollections":return ur(ur({},e),{},{collections:t.payload});case"setIsOpen":return ur(ur({},e),{},{isOpen:t.payload});case"setStatus":return ur(ur({},e),{},{status:t.payload});case"setContext":return ur(ur({},e),{},{context:ur(ur({},e.context),t.payload)});case"ArrowDown":var r=ur(ur({},e),{},{activeItemId:t.payload.hasOwnProperty("nextActiveItemId")?t.payload.nextActiveItemId:uS(1,e.activeItemId,N0(e),t.props.defaultActiveItemId)});return ur(ur({},r),{},{completion:TS({state:r})});case"ArrowUp":var n=ur(ur({},e),{},{activeItemId:uS(-1,e.activeItemId,N0(e),t.props.defaultActiveItemId)});return ur(ur({},n),{},{completion:TS({state:n})});case"Escape":return e.isOpen?ur(ur({},e),{},{activeItemId:null,isOpen:!1,completion:null}):ur(ur({},e),{},{activeItemId:null,query:"",status:"idle",collections:[]});case"submit":return ur(ur({},e),{},{activeItemId:null,isOpen:!1,status:"idle"});case"reset":return ur(ur({},e),{},{activeItemId:t.props.openOnFocus===!0?t.props.defaultActiveItemId:null,status:"idle",query:""});case"focus":return ur(ur({},e),{},{activeItemId:t.props.defaultActiveItemId,isOpen:(t.props.openOnFocus||Boolean(e.query))&&t.props.shouldPanelOpen({state:e})});case"blur":return t.props.debug?e:ur(ur({},e),{},{isOpen:!1,activeItemId:null});case"mouseleave":return ur(ur({},e),{},{activeItemId:t.props.defaultActiveItemId});default:return"The reducer action ".concat(JSON.stringify(t.type)," is not supported."),e}};function CS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CS(Object(r),!0).forEach(function(n){f9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d9(e){var t=[],r=function(a,f){var p,v=typeof window<"u"?window:{},_=a.plugins||[];return rc(rc({debug:!1,openOnFocus:!1,placeholder:"",autoFocus:!1,defaultActiveItemId:null,stallThreshold:300,environment:v,shouldPanelOpen:function(y){return N0(y.state)>0},reshape:function(y){return y.sources}},a),{},{id:(p=a.id)!==null&&p!==void 0?p:"autocomplete-".concat(Lz++),plugins:_,initialState:rc({activeItemId:null,query:"",completion:null,collections:[],isOpen:!1,status:"idle",context:{}},a.initialState),onStateChange:function(y){var S;(S=a.onStateChange)===null||S===void 0||S.call(a,y),_.forEach(function(A){var I;return(I=A.onStateChange)===null||I===void 0?void 0:I.call(A,y)})},onSubmit:function(y){var S;(S=a.onSubmit)===null||S===void 0||S.call(a,y),_.forEach(function(A){var I;return(I=A.onSubmit)===null||I===void 0?void 0:I.call(A,y)})},onReset:function(y){var S;(S=a.onReset)===null||S===void 0||S.call(a,y),_.forEach(function(A){var I;return(I=A.onReset)===null||I===void 0?void 0:I.call(A,y)})},getSources:function(y){return Promise.all([].concat($z(_.map(function(S){return S.getSources})),[a.getSources]).filter(Boolean).map(function(S){return zz(S,y)})).then(function(S){return id(S)}).then(function(S){return S.map(function(A){return rc(rc({},A),{},{onSelect:function(I){A.onSelect(I),f.forEach(function(M){var k;return(k=M.onSelect)===null||k===void 0?void 0:k.call(M,I)})},onActive:function(I){A.onActive(I),f.forEach(function(M){var k;return(k=M.onActive)===null||k===void 0?void 0:k.call(M,I)})}})})})},navigator:rc({navigate:function(y){var S=y.itemUrl;v.location.assign(S)},navigateNewTab:function(y){var S=y.itemUrl,A=v.open(S,"_blank","noopener");A==null||A.focus()},navigateNewWindow:function(y){var S=y.itemUrl;v.open(S,"_blank","noopener")}},a.navigator)})}(e,t),n=Vz(h9,r,function(a){var f=a.prevState,p=a.state;r.onStateChange(Ol({prevState:f,state:p,refresh:u},i))}),i=function(a){var f=a.store;return{setActiveItemId:function(p){f.dispatch("setActiveItemId",p)},setQuery:function(p){f.dispatch("setQuery",p)},setCollections:function(p){var v=0,_=p.map(function(y){return tm(tm({},y),{},{items:id(y.items).map(function(S){return tm(tm({},S),{},{__autocomplete_id:v++})})})});f.dispatch("setCollections",_)},setIsOpen:function(p){f.dispatch("setIsOpen",p)},setStatus:function(p){f.dispatch("setStatus",p)},setContext:function(p){f.dispatch("setContext",p)}}}({store:n}),o=s9(Ol({props:r,refresh:u,store:n},i));function u(){return _c(Ol({event:new Event("input"),nextState:{isOpen:n.getState().isOpen},props:r,query:n.getState().query,refresh:u,store:n},i))}return r.plugins.forEach(function(a){var f;return(f=a.subscribe)===null||f===void 0?void 0:f.call(a,Ol(Ol({},i),{},{refresh:u,onSelect:function(p){t.push({onSelect:p})},onActive:function(p){t.push({onActive:p})}}))}),function(a){var f,p,v=a.metadata,_=a.environment;if(!((f=_.navigator)===null||f===void 0||(p=f.userAgent)===null||p===void 0)&&p.includes("Algolia Crawler")){var y=_.document.createElement("meta"),S=_.document.querySelector("head");y.name="algolia:metadata",setTimeout(function(){y.content=JSON.stringify(v),S.appendChild(y)},0)}}({metadata:u9({plugins:r.plugins,options:e}),environment:r.environment}),Ol(Ol({refresh:u},o),i)}function p9(e){var t=e.translations,r=(t===void 0?{}:t).searchByText,n=r===void 0?"Search by":r;return _e.createElement("a",{href:"https://www.algolia.com/ref/docsearch/?utm_source=".concat(window.location.hostname,"&utm_medium=referral&utm_content=powered_by&utm_campaign=docsearch"),target:"_blank",rel:"noopener noreferrer"},_e.createElement("span",{className:"DocSearch-Label"},n),_e.createElement("svg",{width:"77",height:"19","aria-label":"Algolia",role:"img",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2196.2 500"},_e.createElement("defs",null,_e.createElement("style",null,".cls-1,.cls-2{fill:#003dff;}.cls-2{fill-rule:evenodd;}")),_e.createElement("path",{className:"cls-2",d:"M1070.38,275.3V5.91c0-3.63-3.24-6.39-6.82-5.83l-50.46,7.94c-2.87,.45-4.99,2.93-4.99,5.84l.17,273.22c0,12.92,0,92.7,95.97,95.49,3.33,.1,6.09-2.58,6.09-5.91v-40.78c0-2.96-2.19-5.51-5.12-5.84-34.85-4.01-34.85-47.57-34.85-54.72Z"}),_e.createElement("rect",{className:"cls-1",x:"1845.88",y:"104.73",width:"62.58",height:"277.9",rx:"5.9",ry:"5.9"}),_e.createElement("path",{className:"cls-2",d:"M1851.78,71.38h50.77c3.26,0,5.9-2.64,5.9-5.9V5.9c0-3.62-3.24-6.39-6.82-5.83l-50.77,7.95c-2.87,.45-4.99,2.92-4.99,5.83v51.62c0,3.26,2.64,5.9,5.9,5.9Z"}),_e.createElement("path",{className:"cls-2",d:"M1764.03,275.3V5.91c0-3.63-3.24-6.39-6.82-5.83l-50.46,7.94c-2.87,.45-4.99,2.93-4.99,5.84l.17,273.22c0,12.92,0,92.7,95.97,95.49,3.33,.1,6.09-2.58,6.09-5.91v-40.78c0-2.96-2.19-5.51-5.12-5.84-34.85-4.01-34.85-47.57-34.85-54.72Z"}),_e.createElement("path",{className:"cls-2",d:"M1631.95,142.72c-11.14-12.25-24.83-21.65-40.78-28.31-15.92-6.53-33.26-9.85-52.07-9.85-18.78,0-36.15,3.17-51.92,9.85-15.59,6.66-29.29,16.05-40.76,28.31-11.47,12.23-20.38,26.87-26.76,44.03-6.38,17.17-9.24,37.37-9.24,58.36,0,20.99,3.19,36.87,9.55,54.21,6.38,17.32,15.14,32.11,26.45,44.36,11.29,12.23,24.83,21.62,40.6,28.46,15.77,6.83,40.12,10.33,52.4,10.48,12.25,0,36.78-3.82,52.7-10.48,15.92-6.68,29.46-16.23,40.78-28.46,11.29-12.25,20.05-27.04,26.25-44.36,6.22-17.34,9.24-33.22,9.24-54.21,0-20.99-3.34-41.19-10.03-58.36-6.38-17.17-15.14-31.8-26.43-44.03Zm-44.43,163.75c-11.47,15.75-27.56,23.7-48.09,23.7-20.55,0-36.63-7.8-48.1-23.7-11.47-15.75-17.21-34.01-17.21-61.2,0-26.89,5.59-49.14,17.06-64.87,11.45-15.75,27.54-23.52,48.07-23.52,20.55,0,36.63,7.78,48.09,23.52,11.47,15.57,17.36,37.98,17.36,64.87,0,27.19-5.72,45.3-17.19,61.2Z"}),_e.createElement("path",{className:"cls-2",d:"M894.42,104.73h-49.33c-48.36,0-90.91,25.48-115.75,64.1-14.52,22.58-22.99,49.63-22.99,78.73,0,44.89,20.13,84.92,51.59,111.1,2.93,2.6,6.05,4.98,9.31,7.14,12.86,8.49,28.11,13.47,44.52,13.47,1.23,0,2.46-.03,3.68-.09,.36-.02,.71-.05,1.07-.07,.87-.05,1.75-.11,2.62-.2,.34-.03,.68-.08,1.02-.12,.91-.1,1.82-.21,2.73-.34,.21-.03,.42-.07,.63-.1,32.89-5.07,61.56-30.82,70.9-62.81v57.83c0,3.26,2.64,5.9,5.9,5.9h50.42c3.26,0,5.9-2.64,5.9-5.9V110.63c0-3.26-2.64-5.9-5.9-5.9h-56.32Zm0,206.92c-12.2,10.16-27.97,13.98-44.84,15.12-.16,.01-.33,.03-.49,.04-1.12,.07-2.24,.1-3.36,.1-42.24,0-77.12-35.89-77.12-79.37,0-10.25,1.96-20.01,5.42-28.98,11.22-29.12,38.77-49.74,71.06-49.74h49.33v142.83Z"}),_e.createElement("path",{className:"cls-2",d:"M2133.97,104.73h-49.33c-48.36,0-90.91,25.48-115.75,64.1-14.52,22.58-22.99,49.63-22.99,78.73,0,44.89,20.13,84.92,51.59,111.1,2.93,2.6,6.05,4.98,9.31,7.14,12.86,8.49,28.11,13.47,44.52,13.47,1.23,0,2.46-.03,3.68-.09,.36-.02,.71-.05,1.07-.07,.87-.05,1.75-.11,2.62-.2,.34-.03,.68-.08,1.02-.12,.91-.1,1.82-.21,2.73-.34,.21-.03,.42-.07,.63-.1,32.89-5.07,61.56-30.82,70.9-62.81v57.83c0,3.26,2.64,5.9,5.9,5.9h50.42c3.26,0,5.9-2.64,5.9-5.9V110.63c0-3.26-2.64-5.9-5.9-5.9h-56.32Zm0,206.92c-12.2,10.16-27.97,13.98-44.84,15.12-.16,.01-.33,.03-.49,.04-1.12,.07-2.24,.1-3.36,.1-42.24,0-77.12-35.89-77.12-79.37,0-10.25,1.96-20.01,5.42-28.98,11.22-29.12,38.77-49.74,71.06-49.74h49.33v142.83Z"}),_e.createElement("path",{className:"cls-2",d:"M1314.05,104.73h-49.33c-48.36,0-90.91,25.48-115.75,64.1-11.79,18.34-19.6,39.64-22.11,62.59-.58,5.3-.88,10.68-.88,16.14s.31,11.15,.93,16.59c4.28,38.09,23.14,71.61,50.66,94.52,2.93,2.6,6.05,4.98,9.31,7.14,12.86,8.49,28.11,13.47,44.52,13.47h0c17.99,0,34.61-5.93,48.16-15.97,16.29-11.58,28.88-28.54,34.48-47.75v50.26h-.11v11.08c0,21.84-5.71,38.27-17.34,49.36-11.61,11.08-31.04,16.63-58.25,16.63-11.12,0-28.79-.59-46.6-2.41-2.83-.29-5.46,1.5-6.27,4.22l-12.78,43.11c-1.02,3.46,1.27,7.02,4.83,7.53,21.52,3.08,42.52,4.68,54.65,4.68,48.91,0,85.16-10.75,108.89-32.21,21.48-19.41,33.15-48.89,35.2-88.52V110.63c0-3.26-2.64-5.9-5.9-5.9h-56.32Zm0,64.1s.65,139.13,0,143.36c-12.08,9.77-27.11,13.59-43.49,14.7-.16,.01-.33,.03-.49,.04-1.12,.07-2.24,.1-3.36,.1-1.32,0-2.63-.03-3.94-.1-40.41-2.11-74.52-37.26-74.52-79.38,0-10.25,1.96-20.01,5.42-28.98,11.22-29.12,38.77-49.74,71.06-49.74h49.33Z"}),_e.createElement("path",{className:"cls-1",d:"M249.83,0C113.3,0,2,110.09,.03,246.16c-2,138.19,110.12,252.7,248.33,253.5,42.68,.25,83.79-10.19,120.3-30.03,3.56-1.93,4.11-6.83,1.08-9.51l-23.38-20.72c-4.75-4.21-11.51-5.4-17.36-2.92-25.48,10.84-53.17,16.38-81.71,16.03-111.68-1.37-201.91-94.29-200.13-205.96,1.76-110.26,92-199.41,202.67-199.41h202.69V407.41l-115-102.18c-3.72-3.31-9.42-2.66-12.42,1.31-18.46,24.44-48.53,39.64-81.93,37.34-46.33-3.2-83.87-40.5-87.34-86.81-4.15-55.24,39.63-101.52,94-101.52,49.18,0,89.68,37.85,93.91,85.95,.38,4.28,2.31,8.27,5.52,11.12l29.95,26.55c3.4,3.01,8.79,1.17,9.63-3.3,2.16-11.55,2.92-23.58,2.07-35.92-4.82-70.34-61.8-126.93-132.17-131.26-80.68-4.97-148.13,58.14-150.27,137.25-2.09,77.1,61.08,143.56,138.19,145.26,32.19,.71,62.03-9.41,86.14-26.95l150.26,133.2c6.44,5.71,16.61,1.14,16.61-7.47V9.48C499.66,4.25,495.42,0,490.18,0H249.83Z"})))}function am(e){return _e.createElement("svg",{width:"15",height:"15","aria-label":e.ariaLabel,role:"img"},_e.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"},e.children))}function m9(e){var t=e.translations,r=t===void 0?{}:t,n=r.selectText,i=n===void 0?"to select":n,o=r.selectKeyAriaLabel,u=o===void 0?"Enter key":o,a=r.navigateText,f=a===void 0?"to navigate":a,p=r.navigateUpKeyAriaLabel,v=p===void 0?"Arrow up":p,_=r.navigateDownKeyAriaLabel,y=_===void 0?"Arrow down":_,S=r.closeText,A=S===void 0?"to close":S,I=r.closeKeyAriaLabel,M=I===void 0?"Escape key":I,k=r.searchByText,L=k===void 0?"Search by":k;return _e.createElement(_e.Fragment,null,_e.createElement("div",{className:"DocSearch-Logo"},_e.createElement(p9,{translations:{searchByText:L}})),_e.createElement("ul",{className:"DocSearch-Commands"},_e.createElement("li",null,_e.createElement("kbd",{className:"DocSearch-Commands-Key"},_e.createElement(am,{ariaLabel:u},_e.createElement("path",{d:"M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"}))),_e.createElement("span",{className:"DocSearch-Label"},i)),_e.createElement("li",null,_e.createElement("kbd",{className:"DocSearch-Commands-Key"},_e.createElement(am,{ariaLabel:y},_e.createElement("path",{d:"M7.5 3.5v8M10.5 8.5l-3 3-3-3"}))),_e.createElement("kbd",{className:"DocSearch-Commands-Key"},_e.createElement(am,{ariaLabel:v},_e.createElement("path",{d:"M7.5 11.5v-8M10.5 6.5l-3-3-3 3"}))),_e.createElement("span",{className:"DocSearch-Label"},f)),_e.createElement("li",null,_e.createElement("kbd",{className:"DocSearch-Commands-Key"},_e.createElement(am,{ariaLabel:M},_e.createElement("path",{d:"M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"}))),_e.createElement("span",{className:"DocSearch-Label"},A))))}function v9(e){var t=e.hit,r=e.children;return _e.createElement("a",{href:t.url},r)}function g9(){return _e.createElement("svg",{viewBox:"0 0 38 38",stroke:"currentColor",strokeOpacity:".5"},_e.createElement("g",{fill:"none",fillRule:"evenodd"},_e.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},_e.createElement("circle",{strokeOpacity:".3",cx:"18",cy:"18",r:"18"}),_e.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},_e.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))}function _9(){return _e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},_e.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("path",{d:"M3.18 6.6a8.23 8.23 0 1112.93 9.94h0a8.23 8.23 0 01-11.63 0"}),_e.createElement("path",{d:"M6.44 7.25H2.55V3.36M10.45 6v5.6M10.45 11.6L13 13"})))}function V0(){return _e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},_e.createElement("path",{d:"M10 10l5.09-5.09L10 10l5.09 5.09L10 10zm0 0L4.91 4.91 10 10l-5.09 5.09L10 10z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function y9(){return _e.createElement("svg",{className:"DocSearch-Hit-Select-Icon",width:"20",height:"20",viewBox:"0 0 20 20"},_e.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("path",{d:"M18 3v4c0 2-2 4-4 4H2"}),_e.createElement("path",{d:"M8 17l-6-6 6-6"})))}var x9=function(){return _e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},_e.createElement("path",{d:"M17 6v12c0 .52-.2 1-1 1H4c-.7 0-1-.33-1-1V2c0-.55.42-1 1-1h8l5 5zM14 8h-3.13c-.51 0-.87-.34-.87-.87V4",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))};function b9(e){switch(e.type){case"lvl1":return _e.createElement(x9,null);case"content":return _e.createElement(S9,null);default:return _e.createElement(w9,null)}}function w9(){return _e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},_e.createElement("path",{d:"M13 13h4-4V8H7v5h6v4-4H7V8H3h4V3v5h6V3v5h4-4v5zm-6 0v4-4H3h4z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function S9(){return _e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},_e.createElement("path",{d:"M17 5H3h14zm0 5H3h14zm0 5H3h14z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function AS(){return _e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},_e.createElement("path",{d:"M10 14.2L5 17l1-5.6-4-4 5.5-.7 2.5-5 2.5 5 5.6.8-4 4 .9 5.5z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function T9(){return _e.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("path",{d:"M19 4.8a16 16 0 00-2-1.2m-3.3-1.2A16 16 0 001.1 4.7M16.7 8a12 12 0 00-2.8-1.4M10 6a12 12 0 00-6.7 2M12.3 14.7a4 4 0 00-4.5 0M14.5 11.4A8 8 0 0010 10M3 16L18 2M10 18h0"}))}function E9(){return _e.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},_e.createElement("path",{d:"M15.5 4.8c2 3 1.7 7-1 9.7h0l4.3 4.3-4.3-4.3a7.8 7.8 0 01-9.8 1m-2.2-2.2A7.8 7.8 0 0113.2 2.4M2 18L18 2"}))}function C9(e){var t=e.translations,r=t===void 0?{}:t,n=r.titleText,i=n===void 0?"Unable to fetch results":n,o=r.helpText,u=o===void 0?"You might want to check your network connection.":o;return _e.createElement("div",{className:"DocSearch-ErrorScreen"},_e.createElement("div",{className:"DocSearch-Screen-Icon"},_e.createElement(T9,null)),_e.createElement("p",{className:"DocSearch-Title"},i),_e.createElement("p",{className:"DocSearch-Help"},u))}var A9=["translations"];function I9(e){return function(t){if(Array.isArray(t))return Q_(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(t){if(typeof t=="string")return Q_(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q_(t,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Q_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M9(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function P9(e){var t=e.translations,r=t===void 0?{}:t,n=M9(e,A9),i=r.noResultsText,o=i===void 0?"No results for":i,u=r.suggestedQueryText,a=u===void 0?"Try searching for":u,f=r.reportMissingResultsText,p=f===void 0?"Believe this query should return results?":f,v=r.reportMissingResultsLinkText,_=v===void 0?"Let us know.":v,y=n.state.context.searchSuggestions;return _e.createElement("div",{className:"DocSearch-NoResults"},_e.createElement("div",{className:"DocSearch-Screen-Icon"},_e.createElement(E9,null)),_e.createElement("p",{className:"DocSearch-Title"},o,' "',_e.createElement("strong",null,n.state.query),'"'),y&&y.length>0&&_e.createElement("div",{className:"DocSearch-NoResults-Prefill-List"},_e.createElement("p",{className:"DocSearch-Help"},a,":"),_e.createElement("ul",null,y.slice(0,3).reduce(function(S,A){return[].concat(I9(S),[_e.createElement("li",{key:A},_e.createElement("button",{className:"DocSearch-Prefill",key:A,type:"button",onClick:function(){n.setQuery(A.toLowerCase()+" "),n.refresh(),n.inputRef.current.focus()}},A))])},[]))),n.getMissingResultsUrl&&_e.createElement("p",{className:"DocSearch-Help"},"".concat(p," "),_e.createElement("a",{href:n.getMissingResultsUrl({query:n.state.query}),target:"_blank",rel:"noopener noreferrer"},_)))}var D9=["hit","attribute","tagName"];function IS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(r),!0).forEach(function(n){k9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L9(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function PS(e,t){return t.split(".").reduce(function(r,n){return r!=null&&r[n]?r[n]:null},e)}function nc(e){var t=e.hit,r=e.attribute,n=e.tagName;return bo(n===void 0?"span":n,MS(MS({},L9(e,D9)),{},{dangerouslySetInnerHTML:{__html:PS(t,"_snippetResult.".concat(r,".value"))||PS(t,r)}}))}function DS(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var o,u,a=[],f=!0,p=!1;try{for(i=i.call(r);!(f=(o=i.next()).done)&&(a.push(o.value),!n||a.length!==n);f=!0);}catch(v){p=!0,u=v}finally{try{f||i.return==null||i.return()}finally{if(p)throw u}}return a}}(e,t)||function(r,n){if(r){if(typeof r=="string")return kS(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kS(r,n)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mv(){return Mv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mv.apply(this,arguments)}function U0(e){return e.collection&&e.collection.items.length!==0?_e.createElement("section",{className:"DocSearch-Hits"},_e.createElement("div",{className:"DocSearch-Hit-source"},e.title),_e.createElement("ul",e.getListProps(),e.collection.items.map(function(t,r){return _e.createElement(O9,Mv({key:[e.title,t.objectID].join(":"),item:t,index:r},e))}))):null}function O9(e){var t=e.item,r=e.index,n=e.renderIcon,i=e.renderAction,o=e.getItemProps,u=e.onItemClick,a=e.collection,f=e.hitComponent,p=DS(_e.useState(!1),2),v=p[0],_=p[1],y=DS(_e.useState(!1),2),S=y[0],A=y[1],I=_e.useRef(null),M=f;return _e.createElement("li",Mv({className:["DocSearch-Hit",t.__docsearch_parent&&"DocSearch-Hit--Child",v&&"DocSearch-Hit--deleting",S&&"DocSearch-Hit--favoriting"].filter(Boolean).join(" "),onTransitionEnd:function(){I.current&&I.current()}},o({item:t,source:a.source,onClick:function(){u(t)}})),_e.createElement(M,{hit:t},_e.createElement("div",{className:"DocSearch-Hit-Container"},n({item:t,index:r}),t.hierarchy[t.type]&&t.type==="lvl1"&&_e.createElement("div",{className:"DocSearch-Hit-content-wrapper"},_e.createElement(nc,{className:"DocSearch-Hit-title",hit:t,attribute:"hierarchy.lvl1"}),t.content&&_e.createElement(nc,{className:"DocSearch-Hit-path",hit:t,attribute:"content"})),t.hierarchy[t.type]&&(t.type==="lvl2"||t.type==="lvl3"||t.type==="lvl4"||t.type==="lvl5"||t.type==="lvl6")&&_e.createElement("div",{className:"DocSearch-Hit-content-wrapper"},_e.createElement(nc,{className:"DocSearch-Hit-title",hit:t,attribute:"hierarchy.".concat(t.type)}),_e.createElement(nc,{className:"DocSearch-Hit-path",hit:t,attribute:"hierarchy.lvl1"})),t.type==="content"&&_e.createElement("div",{className:"DocSearch-Hit-content-wrapper"},_e.createElement(nc,{className:"DocSearch-Hit-title",hit:t,attribute:"content"}),_e.createElement(nc,{className:"DocSearch-Hit-path",hit:t,attribute:"hierarchy.lvl1"})),i({item:t,runDeleteTransition:function(k){_(!0),I.current=k},runFavoriteTransition:function(k){A(!0),I.current=k}}))))}function LS(e,t){return e.reduce(function(r,n){var i=t(n);return r.hasOwnProperty(i)||(r[i]=[]),r[i].length<5&&r[i].push(n),r},{})}function OS(e){return e}function R9(){}var eM=/(<mark>|<\/mark>)/g,z9=RegExp(eM.source);function tM(e){var t,r,n,i,o,u=e;if(!u.__docsearch_parent&&!e._highlightResult)return e.hierarchy.lvl0;var a=((u.__docsearch_parent?(t=u.__docsearch_parent)===null||t===void 0||(r=t._highlightResult)===null||r===void 0||(n=r.hierarchy)===null||n===void 0?void 0:n.lvl0:(i=e._highlightResult)===null||i===void 0||(o=i.hierarchy)===null||o===void 0?void 0:o.lvl0)||{}).value;return a&&z9.test(a)?a.replace(eM,""):a}function $0(){return $0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$0.apply(this,arguments)}function B9(e){return _e.createElement("div",{className:"DocSearch-Dropdown-Container"},e.state.collections.map(function(t){if(t.items.length===0)return null;var r=tM(t.items[0]);return _e.createElement(U0,$0({},e,{key:t.source.sourceId,title:r,collection:t,renderIcon:function(n){var i,o=n.item,u=n.index;return _e.createElement(_e.Fragment,null,o.__docsearch_parent&&_e.createElement("svg",{className:"DocSearch-Hit-Tree",viewBox:"0 0 24 54"},_e.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},o.__docsearch_parent!==((i=t.items[u+1])===null||i===void 0?void 0:i.__docsearch_parent)?_e.createElement("path",{d:"M8 6v21M20 27H8.3"}):_e.createElement("path",{d:"M8 6v42M20 27H8.3"}))),_e.createElement("div",{className:"DocSearch-Hit-icon"},_e.createElement(b9,{type:o.type})))},renderAction:function(){return _e.createElement("div",{className:"DocSearch-Hit-action"},_e.createElement(y9,null))}}))}),e.resultsFooterComponent&&_e.createElement("section",{className:"DocSearch-HitsFooter"},_e.createElement(e.resultsFooterComponent,{state:e.state})))}var F9=["translations"];function Pv(){return Pv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pv.apply(this,arguments)}function N9(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function V9(e){var t=e.translations,r=t===void 0?{}:t,n=N9(e,F9),i=r.recentSearchesTitle,o=i===void 0?"Recent":i,u=r.noRecentSearchesText,a=u===void 0?"No recent searches":u,f=r.saveRecentSearchButtonTitle,p=f===void 0?"Save this search":f,v=r.removeRecentSearchButtonTitle,_=v===void 0?"Remove this search from history":v,y=r.favoriteSearchesTitle,S=y===void 0?"Favorite":y,A=r.removeFavoriteSearchButtonTitle,I=A===void 0?"Remove this search from favorites":A;return n.state.status==="idle"&&n.hasCollections===!1?n.disableUserPersonalization?null:_e.createElement("div",{className:"DocSearch-StartScreen"},_e.createElement("p",{className:"DocSearch-Help"},a)):n.hasCollections===!1?null:_e.createElement("div",{className:"DocSearch-Dropdown-Container"},_e.createElement(U0,Pv({},n,{title:o,collection:n.state.collections[0],renderIcon:function(){return _e.createElement("div",{className:"DocSearch-Hit-icon"},_e.createElement(_9,null))},renderAction:function(M){var k=M.item,L=M.runFavoriteTransition,z=M.runDeleteTransition;return _e.createElement(_e.Fragment,null,_e.createElement("div",{className:"DocSearch-Hit-action"},_e.createElement("button",{className:"DocSearch-Hit-action-button",title:p,type:"submit",onClick:function(V){V.preventDefault(),V.stopPropagation(),L(function(){n.favoriteSearches.add(k),n.recentSearches.remove(k),n.refresh()})}},_e.createElement(AS,null))),_e.createElement("div",{className:"DocSearch-Hit-action"},_e.createElement("button",{className:"DocSearch-Hit-action-button",title:_,type:"submit",onClick:function(V){V.preventDefault(),V.stopPropagation(),z(function(){n.recentSearches.remove(k),n.refresh()})}},_e.createElement(V0,null))))}})),_e.createElement(U0,Pv({},n,{title:S,collection:n.state.collections[1],renderIcon:function(){return _e.createElement("div",{className:"DocSearch-Hit-icon"},_e.createElement(AS,null))},renderAction:function(M){var k=M.item,L=M.runDeleteTransition;return _e.createElement("div",{className:"DocSearch-Hit-action"},_e.createElement("button",{className:"DocSearch-Hit-action-button",title:I,type:"submit",onClick:function(z){z.preventDefault(),z.stopPropagation(),L(function(){n.favoriteSearches.remove(k),n.refresh()})}},_e.createElement(V0,null)))}})))}var U9=["translations"];function Dv(){return Dv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dv.apply(this,arguments)}function $9(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var j9=_e.memo(function(e){var t=e.translations,r=t===void 0?{}:t,n=$9(e,U9);if(n.state.status==="error")return _e.createElement(C9,{translations:r==null?void 0:r.errorScreen});var i=n.state.collections.some(function(o){return o.items.length>0});return n.state.query?i===!1?_e.createElement(P9,Dv({},n,{translations:r==null?void 0:r.noResultsScreen})):_e.createElement(B9,n):_e.createElement(V9,Dv({},n,{hasCollections:i,translations:r==null?void 0:r.startScreen}))},function(e,t){return t.state.status==="loading"||t.state.status==="stalled"}),G9=["translations"];function kv(){return kv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kv.apply(this,arguments)}function H9(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function q9(e){var t=e.translations,r=t===void 0?{}:t,n=H9(e,G9),i=r.resetButtonTitle,o=i===void 0?"Clear the query":i,u=r.resetButtonAriaLabel,a=u===void 0?"Clear the query":u,f=r.cancelButtonText,p=f===void 0?"Cancel":f,v=r.cancelButtonAriaLabel,_=v===void 0?"Cancel":v,y=n.getFormProps({inputElement:n.inputRef.current}).onReset;return _e.useEffect(function(){n.autoFocus&&n.inputRef.current&&n.inputRef.current.focus()},[n.autoFocus,n.inputRef]),_e.useEffect(function(){n.isFromSelection&&n.inputRef.current&&n.inputRef.current.select()},[n.isFromSelection,n.inputRef]),_e.createElement(_e.Fragment,null,_e.createElement("form",{className:"DocSearch-Form",onSubmit:function(S){S.preventDefault()},onReset:y},_e.createElement("label",kv({className:"DocSearch-MagnifierLabel"},n.getLabelProps()),_e.createElement(YI,null)),_e.createElement("div",{className:"DocSearch-LoadingIndicator"},_e.createElement(g9,null)),_e.createElement("input",kv({className:"DocSearch-Input",ref:n.inputRef},n.getInputProps({inputElement:n.inputRef.current,autoFocus:n.autoFocus,maxLength:64}))),_e.createElement("button",{type:"reset",title:o,className:"DocSearch-Reset","aria-label":a,hidden:!n.state.query},_e.createElement(V0,null))),_e.createElement("button",{className:"DocSearch-Cancel",type:"reset","aria-label":_,onClick:n.onClose},p))}var W9=["_highlightResult","_snippetResult"];function Z9(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function X9(e){return function(){var t="__TEST_KEY__";try{return localStorage.setItem(t,""),localStorage.removeItem(t),!0}catch{return!1}}()===!1?{setItem:function(){},getItem:function(){return[]}}:{setItem:function(t){return window.localStorage.setItem(e,JSON.stringify(t))},getItem:function(){var t=window.localStorage.getItem(e);return t?JSON.parse(t):[]}}}function RS(e){var t=e.key,r=e.limit,n=r===void 0?5:r,i=X9(t),o=i.getItem().slice(0,n);return{add:function(u){var a=u,f=(a._highlightResult,a._snippetResult,Z9(a,W9)),p=o.findIndex(function(v){return v.objectID===f.objectID});p>-1&&o.splice(p,1),o.unshift(f),o=o.slice(0,n),i.setItem(o)},remove:function(u){o=o.filter(function(a){return a.objectID!==u.objectID}),i.setItem(o)},getAll:function(){return o}}}var Y9=["facetName","facetQuery"];function K9(e){var t,r="algoliasearch-client-js-".concat(e.key),n=function(){return t===void 0&&(t=e.localStorage||window.localStorage),t},i=function(){return JSON.parse(n().getItem(r)||"{}")};return{get:function(o,u){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){var f=JSON.stringify(o),p=i()[f];return Promise.all([p||u(),p!==void 0])}).then(function(f){var p=Ev(f,2),v=p[0],_=p[1];return Promise.all([v,_||a.miss(v)])}).then(function(f){return Ev(f,1)[0]})},set:function(o,u){return Promise.resolve().then(function(){var a=i();return a[JSON.stringify(o)]=u,n().setItem(r,JSON.stringify(a)),u})},delete:function(o){return Promise.resolve().then(function(){var u=i();delete u[JSON.stringify(o)],n().setItem(r,JSON.stringify(u))})},clear:function(){return Promise.resolve().then(function(){n().removeItem(r)})}}}function Mf(e){var t=Cv(e.caches),r=t.shift();return r===void 0?{get:function(n,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return i().then(function(u){return Promise.all([u,o.miss(u)])}).then(function(u){return Ev(u,1)[0]})},set:function(n,i){return Promise.resolve(i)},delete:function(n){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(n,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(n,i,o).catch(function(){return Mf({caches:t}).get(n,i,o)})},set:function(n,i){return r.set(n,i).catch(function(){return Mf({caches:t}).set(n,i)})},delete:function(n){return r.delete(n).catch(function(){return Mf({caches:t}).delete(n)})},clear:function(){return r.clear().catch(function(){return Mf({caches:t}).clear()})}}}function ey(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},o=JSON.stringify(r);if(o in t)return Promise.resolve(e.serializable?JSON.parse(t[o]):t[o]);var u=n(),a=i&&i.miss||function(){return Promise.resolve()};return u.then(function(f){return a(f)}).then(function(){return u})},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(r){return delete t[JSON.stringify(r)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function J9(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function rM(e,t){return t&&Object.keys(t).forEach(function(r){e[r]=t[r](e)}),e}function hg(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=0;return e.replace(/%s/g,function(){return encodeURIComponent(r[i++])})}var Qm={WithinQueryParameters:0,WithinHeaders:1};function zS(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach(function(i){["timeout","headers","queryParameters","data","cacheable"].indexOf(i)===-1&&(n[i]=r[i])}),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var Tc={Read:1,Write:2,Any:3},nM=1,Q9=2,iM=3;function aM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nM;return Rr(Rr({},e),{},{status:t,lastUpdate:Date.now()})}function oM(e){return typeof e=="string"?{protocol:"https",url:e,accept:Tc.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||Tc.Any}}var BS="GET",fg="POST";function eB(e,t){return Promise.all(t.map(function(r){return e.get(r,function(){return Promise.resolve(aM(r))})})).then(function(r){var n=r.filter(function(u){return function(a){return a.status===nM||Date.now()-a.lastUpdate>12e4}(u)}),i=r.filter(function(u){return function(a){return a.status===iM&&Date.now()-a.lastUpdate<=12e4}(u)}),o=[].concat(Cv(n),Cv(i));return{getTimeout:function(u,a){return(i.length===0&&u===0?1:i.length+3+u)*a},statelessHosts:o.length>0?o.map(function(u){return oM(u)}):t}})}function FS(e,t,r,n){var i=[],o=function(y,S){if(!(y.method===BS||y.data===void 0&&S.data===void 0)){var A=Array.isArray(y.data)?y.data:Rr(Rr({},y.data),S.data);return JSON.stringify(A)}}(r,n),u=function(y,S){var A=Rr(Rr({},y.headers),S.headers),I={};return Object.keys(A).forEach(function(M){var k=A[M];I[M.toLowerCase()]=k}),I}(e,n),a=r.method,f=r.method!==BS?{}:Rr(Rr({},r.data),n.data),p=Rr(Rr(Rr({"x-algolia-agent":e.userAgent.value},e.queryParameters),f),n.queryParameters),v=0,_=function y(S,A){var I=S.pop();if(I===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:NS(i)};var M={data:o,headers:u,method:a,url:rB(I,r.path,p),connectTimeout:A(v,e.timeouts.connect),responseTimeout:A(v,n.timeout)},k=function(z){var V={request:M,response:z,host:I,triesLeft:S.length};return i.push(V),V},L={onSucess:function(z){return function(V){try{return JSON.parse(V.content)}catch(H){throw function(Z,ee){return{name:"DeserializationError",message:Z,response:ee}}(H.message,V)}}(z)},onRetry:function(z){var V=k(z);return z.isTimedOut&&v++,Promise.all([e.logger.info("Retryable failure",lM(V)),e.hostsCache.set(I,aM(I,z.isTimedOut?iM:Q9))]).then(function(){return y(S,A)})},onFail:function(z){throw k(z),function(V,H){var Z=V.content,ee=V.status,Y=Z;try{Y=JSON.parse(Z).message}catch{}return function(ae,le,pe){return{name:"ApiError",message:ae,status:le,transporterStackTrace:pe}}(Y,ee,H)}(z,NS(i))}};return e.requester.send(M).then(function(z){return function(V,H){return function(Z){var ee=Z.status;return Z.isTimedOut||function(Y){var ae=Y.isTimedOut,le=Y.status;return!ae&&~~le==0}(Z)||~~(ee/100)!=2&&~~(ee/100)!=4}(V)?H.onRetry(V):~~(V.status/100)==2?H.onSucess(V):H.onFail(V)}(z,L)})};return eB(e.hostsCache,t).then(function(y){return _(Cv(y.statelessHosts).reverse(),y.getTimeout)})}function tB(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(r){var n="; ".concat(r.segment).concat(r.version!==void 0?" (".concat(r.version,")"):"");return t.value.indexOf(n)===-1&&(t.value="".concat(t.value).concat(n)),t}};return t}function rB(e,t,r){var n=sM(r),i="".concat(e.protocol,"://").concat(e.url,"/").concat(t.charAt(0)==="/"?t.substr(1):t);return n.length&&(i+="?".concat(n)),i}function sM(e){return Object.keys(e).map(function(t){return hg("%s=%s",t,(r=e[t],Object.prototype.toString.call(r)==="[object Object]"||Object.prototype.toString.call(r)==="[object Array]"?JSON.stringify(e[t]):e[t]));var r}).join("&")}function NS(e){return e.map(function(t){return lM(t)})}function lM(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return Rr(Rr({},e),{},{request:Rr(Rr({},e.request),{},{headers:Rr(Rr({},e.request.headers),t)})})}var nB=function(e){var t=e.appId,r=function(o,u,a){var f={"x-algolia-api-key":a,"x-algolia-application-id":u};return{headers:function(){return o===Qm.WithinHeaders?f:{}},queryParameters:function(){return o===Qm.WithinQueryParameters?f:{}}}}(e.authMode!==void 0?e.authMode:Qm.WithinHeaders,t,e.apiKey),n=function(o){var u=o.hostsCache,a=o.logger,f=o.requester,p=o.requestsCache,v=o.responsesCache,_=o.timeouts,y=o.userAgent,S=o.hosts,A=o.queryParameters,I={hostsCache:u,logger:a,requester:f,requestsCache:p,responsesCache:v,timeouts:_,userAgent:y,headers:o.headers,queryParameters:A,hosts:S.map(function(M){return oM(M)}),read:function(M,k){var L=zS(k,I.timeouts.read),z=function(){return FS(I,I.hosts.filter(function(H){return(H.accept&Tc.Read)!=0}),M,L)};if((L.cacheable!==void 0?L.cacheable:M.cacheable)!==!0)return z();var V={request:M,mappedRequestOptions:L,transporter:{queryParameters:I.queryParameters,headers:I.headers}};return I.responsesCache.get(V,function(){return I.requestsCache.get(V,function(){return I.requestsCache.set(V,z()).then(function(H){return Promise.all([I.requestsCache.delete(V),H])},function(H){return Promise.all([I.requestsCache.delete(V),Promise.reject(H)])}).then(function(H){var Z=Ev(H,2);return Z[0],Z[1]})})},{miss:function(H){return I.responsesCache.set(V,H)}})},write:function(M,k){return FS(I,I.hosts.filter(function(L){return(L.accept&Tc.Write)!=0}),M,zS(k,I.timeouts.write))}};return I}(Rr(Rr({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:Tc.Read},{url:"".concat(t,".algolia.net"),accept:Tc.Write}].concat(J9([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:Rr(Rr(Rr({},r.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:Rr(Rr({},r.queryParameters()),e.queryParameters)})),i={transporter:n,appId:t,addAlgoliaAgent:function(o,u){n.userAgent.add({segment:o,version:u})},clearCache:function(){return Promise.all([n.requestsCache.clear(),n.responsesCache.clear()]).then(function(){})}};return rM(i,e.methods)},uM=function(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return rM(n,r.methods)}},VS=function(e){return function(t,r){var n=t.map(function(i){return Rr(Rr({},i),{},{params:sM(i.params||{})})});return e.transporter.read({method:fg,path:"1/indexes/*/queries",data:{requests:n},cacheable:!0},r)}},US=function(e){return function(t,r){return Promise.all(t.map(function(n){var i=n.params,o=i.facetName,u=i.facetQuery,a=hz(i,Y9);return uM(e)(n.indexName,{methods:{searchForFacetValues:cM}}).searchForFacetValues(o,u,Rr(Rr({},r),a))}))}},iB=function(e){return function(t,r,n){return e.transporter.read({method:fg,path:hg("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n)}},aB=function(e){return function(t,r){return e.transporter.read({method:fg,path:hg("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},r)}},cM=function(e){return function(t,r,n){return e.transporter.read({method:fg,path:hg("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},oB=1,sB=2,lB=3;function hM(e,t,r){var n,i={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(o){return new Promise(function(u){var a=new XMLHttpRequest;a.open(o.method,o.url,!0),Object.keys(o.headers).forEach(function(_){return a.setRequestHeader(_,o.headers[_])});var f,p=function(_,y){return setTimeout(function(){a.abort(),u({status:0,content:y,isTimedOut:!0})},1e3*_)},v=p(o.connectTimeout,"Connection timeout");a.onreadystatechange=function(){a.readyState>a.OPENED&&f===void 0&&(clearTimeout(v),f=p(o.responseTimeout,"Socket timeout"))},a.onerror=function(){a.status===0&&(clearTimeout(v),clearTimeout(f),u({content:a.responseText||"Network request failed",status:a.status,isTimedOut:!1}))},a.onload=function(){clearTimeout(v),clearTimeout(f),u({content:a.responseText,status:a.status,isTimedOut:!1})},a.send(o.data)})}},logger:(n=lB,{debug:function(o,u){return oB>=n&&console.debug(o,u),Promise.resolve()},info:function(o,u){return sB>=n&&console.info(o,u),Promise.resolve()},error:function(o,u){return console.error(o,u),Promise.resolve()}}),responsesCache:ey(),requestsCache:ey({serializable:!1}),hostsCache:Mf({caches:[K9({key:"".concat("4.8.5","-").concat(e)}),ey()]}),userAgent:tB("4.8.5").add({segment:"Browser",version:"lite"}),authMode:Qm.WithinQueryParameters};return nB(Rr(Rr(Rr({},i),r),{},{methods:{search:VS,searchForFacetValues:US,multipleQueries:VS,multipleSearchForFacetValues:US,initIndex:function(o){return function(u){return uM(o)(u,{methods:{search:aB,searchForFacetValues:cM,findAnswers:iB}})}}}}))}hM.version="4.8.5";var uB=["footer","searchBox"];function Vf(){return Vf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vf.apply(this,arguments)}function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ty(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(n){cB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cB(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hB(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var o,u,a=[],f=!0,p=!1;try{for(i=i.call(r);!(f=(o=i.next()).done)&&(a.push(o.value),!n||a.length!==n);f=!0);}catch(v){p=!0,u=v}finally{try{f||i.return==null||i.return()}finally{if(p)throw u}}return a}}(e,t)||function(r,n){if(r){if(typeof r=="string")return jS(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return jS(r,n)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fB(e,t){if(e==null)return{};var r,n,i=function(u,a){if(u==null)return{};var f,p,v={},_=Object.keys(u);for(p=0;p<_.length;p++)f=_[p],a.indexOf(f)>=0||(v[f]=u[f]);return v}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dB(e){var t=e.appId,r=e.apiKey,n=e.indexName,i=e.placeholder,o=i===void 0?"Search docs":i,u=e.searchParameters,a=e.onClose,f=a===void 0?R9:a,p=e.transformItems,v=p===void 0?OS:p,_=e.hitComponent,y=_===void 0?v9:_,S=e.resultsFooterComponent,A=S===void 0?function(){return null}:S,I=e.navigator,M=e.initialScrollY,k=M===void 0?0:M,L=e.transformSearchClient,z=L===void 0?OS:L,V=e.disableUserPersonalization,H=V!==void 0&&V,Z=e.initialQuery,ee=Z===void 0?"":Z,Y=e.translations,ae=Y===void 0?{}:Y,le=e.getMissingResultsUrl,pe=ae.footer,ye=ae.searchBox,ve=fB(ae,uB),Pe=hB(_e.useState({query:"",collections:[],completion:null,context:{},isOpen:!1,activeItemId:null,status:"idle"}),2),$e=Pe[0],Ce=Pe[1],at=_e.useRef(null),st=_e.useRef(null),xt=_e.useRef(null),St=_e.useRef(null),Xt=_e.useRef(null),Dt=_e.useRef(10),Br=_e.useRef(typeof window<"u"?window.getSelection().toString().slice(0,64):"").current,cr=_e.useRef(ee||Br).current,vr=function(Tt,zt,hr){return _e.useMemo(function(){var yr=hM(Tt,zt);return yr.addAlgoliaAgent("docsearch","3.3.1"),/docsearch.js \(.*\)/.test(yr.transporter.userAgent.value)===!1&&yr.addAlgoliaAgent("docsearch-react","3.3.1"),hr(yr)},[Tt,zt,hr])}(t,r,z),Fr=_e.useRef(RS({key:"__DOCSEARCH_FAVORITE_SEARCHES__".concat(n),limit:10})).current,Ur=_e.useRef(RS({key:"__DOCSEARCH_RECENT_SEARCHES__".concat(n),limit:Fr.getAll().length===0?7:4})).current,gr=_e.useCallback(function(Tt){if(!H){var zt=Tt.type==="content"?Tt.__docsearch_parent:Tt;zt&&Fr.getAll().findIndex(function(hr){return hr.objectID===zt.objectID})===-1&&Ur.add(zt)}},[Fr,Ur,H]),Yt=_e.useMemo(function(){return d9({id:"docsearch",defaultActiveItemId:0,placeholder:o,openOnFocus:!0,initialState:{query:cr,context:{searchSuggestions:[]}},navigator:I,onStateChange:function(Tt){Ce(Tt.state)},getSources:function(Tt){var zt=Tt.query,hr=Tt.state,yr=Tt.setContext,cn=Tt.setStatus;return zt?vr.search([{query:zt,indexName:n,params:ty({attributesToRetrieve:["hierarchy.lvl0","hierarchy.lvl1","hierarchy.lvl2","hierarchy.lvl3","hierarchy.lvl4","hierarchy.lvl5","hierarchy.lvl6","content","type","url"],attributesToSnippet:["hierarchy.lvl1:".concat(Dt.current),"hierarchy.lvl2:".concat(Dt.current),"hierarchy.lvl3:".concat(Dt.current),"hierarchy.lvl4:".concat(Dt.current),"hierarchy.lvl5:".concat(Dt.current),"hierarchy.lvl6:".concat(Dt.current),"content:".concat(Dt.current)],snippetEllipsisText:"…",highlightPreTag:"<mark>",highlightPostTag:"</mark>",hitsPerPage:20},u)}]).catch(function(lr){throw lr.name==="RetryError"&&cn("error"),lr}).then(function(lr){var Pt=lr.results[0],$r=Pt.hits,pi=Pt.nbHits,Oi=LS($r,function(La){return tM(La)});return hr.context.searchSuggestions.length<Object.keys(Oi).length&&yr({searchSuggestions:Object.keys(Oi)}),yr({nbHits:pi}),Object.values(Oi).map(function(La,Yi){return{sourceId:"hits".concat(Yi),onSelect:function(_n){var Ri=_n.item,Vn=_n.event;gr(Ri),Vn.shiftKey||Vn.ctrlKey||Vn.metaKey||f()},getItemUrl:function(_n){return _n.item.url},getItems:function(){return Object.values(LS(La,function(_n){return _n.hierarchy.lvl1})).map(v).map(function(_n){return _n.map(function(Ri){return ty(ty({},Ri),{},{__docsearch_parent:Ri.type!=="lvl1"&&_n.find(function(Vn){return Vn.type==="lvl1"&&Vn.hierarchy.lvl1===Ri.hierarchy.lvl1})})})}).flat()}}})}):H?[]:[{sourceId:"recentSearches",onSelect:function(lr){var Pt=lr.item,$r=lr.event;gr(Pt),$r.shiftKey||$r.ctrlKey||$r.metaKey||f()},getItemUrl:function(lr){return lr.item.url},getItems:function(){return Ur.getAll()}},{sourceId:"favoriteSearches",onSelect:function(lr){var Pt=lr.item,$r=lr.event;gr(Pt),$r.shiftKey||$r.ctrlKey||$r.metaKey||f()},getItemUrl:function(lr){return lr.item.url},getItems:function(){return Fr.getAll()}}]}})},[n,u,vr,f,Ur,Fr,gr,cr,o,I,v,H]),_r=Yt.getEnvironmentProps,At=Yt.getRootProps,kt=Yt.refresh;return function(Tt){var zt=Tt.getEnvironmentProps,hr=Tt.panelElement,yr=Tt.formElement,cn=Tt.inputElement;_e.useEffect(function(){if(hr&&yr&&cn){var lr=zt({panelElement:hr,formElement:yr,inputElement:cn}),Pt=lr.onTouchStart,$r=lr.onTouchMove;return window.addEventListener("touchstart",Pt),window.addEventListener("touchmove",$r),function(){window.removeEventListener("touchstart",Pt),window.removeEventListener("touchmove",$r)}}},[zt,hr,yr,cn])}({getEnvironmentProps:_r,panelElement:St.current,formElement:xt.current,inputElement:Xt.current}),function(Tt){var zt=Tt.container;_e.useEffect(function(){if(zt){var hr=zt.querySelectorAll("a[href]:not([disabled]), button:not([disabled]), input:not([disabled])"),yr=hr[0],cn=hr[hr.length-1];return zt.addEventListener("keydown",lr),function(){zt.removeEventListener("keydown",lr)}}function lr(Pt){Pt.key==="Tab"&&(Pt.shiftKey?document.activeElement===yr&&(Pt.preventDefault(),cn.focus()):document.activeElement===cn&&(Pt.preventDefault(),yr.focus()))}},[zt])}({container:at.current}),_e.useEffect(function(){return document.body.classList.add("DocSearch--active"),function(){var Tt,zt;document.body.classList.remove("DocSearch--active"),(Tt=(zt=window).scrollTo)===null||Tt===void 0||Tt.call(zt,0,k)}},[]),_e.useEffect(function(){window.matchMedia("(max-width: 768px)").matches&&(Dt.current=5)},[]),_e.useEffect(function(){St.current&&(St.current.scrollTop=0)},[$e.query]),_e.useEffect(function(){cr.length>0&&(kt(),Xt.current&&Xt.current.focus())},[cr,kt]),_e.useEffect(function(){function Tt(){if(st.current){var zt=.01*window.innerHeight;st.current.style.setProperty("--docsearch-vh","".concat(zt,"px"))}}return Tt(),window.addEventListener("resize",Tt),function(){window.removeEventListener("resize",Tt)}},[]),_e.createElement("div",Vf({ref:at},At({"aria-expanded":!0}),{className:["DocSearch","DocSearch-Container",$e.status==="stalled"&&"DocSearch-Container--Stalled",$e.status==="error"&&"DocSearch-Container--Errored"].filter(Boolean).join(" "),role:"button",tabIndex:0,onMouseDown:function(Tt){Tt.target===Tt.currentTarget&&f()}}),_e.createElement("div",{className:"DocSearch-Modal",ref:st},_e.createElement("header",{className:"DocSearch-SearchBar",ref:xt},_e.createElement(q9,Vf({},Yt,{state:$e,autoFocus:cr.length===0,inputRef:Xt,isFromSelection:Boolean(cr)&&cr===Br,translations:ye,onClose:f}))),_e.createElement("div",{className:"DocSearch-Dropdown",ref:St},_e.createElement(j9,Vf({},Yt,{indexName:n,state:$e,hitComponent:y,resultsFooterComponent:A,disableUserPersonalization:H,recentSearches:Ur,favoriteSearches:Fr,inputRef:Xt,translations:ve,getMissingResultsUrl:le,onItemClick:function(Tt){gr(Tt),f()}}))),_e.createElement("footer",{className:"DocSearch-Footer"},_e.createElement(m9,{translations:pe}))))}function j0(){return j0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(this,arguments)}function GS(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var o,u,a=[],f=!0,p=!1;try{for(i=i.call(r);!(f=(o=i.next()).done)&&(a.push(o.value),!n||a.length!==n);f=!0);}catch(v){p=!0,u=v}finally{try{f||i.return==null||i.return()}finally{if(p)throw u}}return a}}(e,t)||function(r,n){if(r){if(typeof r=="string")return HS(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return HS(r,n)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function HS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pB(e){var t,r,n=_e.useRef(null),i=GS(_e.useState(!1),2),o=i[0],u=i[1],a=GS(_e.useState((e==null?void 0:e.initialQuery)||void 0),2),f=a[0],p=a[1],v=_e.useCallback(function(){u(!0)},[u]),_=_e.useCallback(function(){u(!1)},[u]);return function(y){var S=y.isOpen,A=y.onOpen,I=y.onClose,M=y.onInput,k=y.searchButtonRef;_e.useEffect(function(){function L(z){(z.keyCode===27&&S||z.key.toLowerCase()==="k"&&(z.metaKey||z.ctrlKey)||!function(V){var H=V.target,Z=H.tagName;return H.isContentEditable||Z==="INPUT"||Z==="SELECT"||Z==="TEXTAREA"}(z)&&z.key==="/"&&!S)&&(z.preventDefault(),S?I():document.body.classList.contains("DocSearch--active")||document.body.classList.contains("DocSearch--active")||A()),k&&k.current===document.activeElement&&M&&/[a-zA-Z0-9]/.test(String.fromCharCode(z.keyCode))&&M(z)}return window.addEventListener("keydown",L),function(){window.removeEventListener("keydown",L)}},[S,A,I,M,k])}({isOpen:o,onOpen:v,onClose:_,onInput:_e.useCallback(function(y){u(!0),p(y.key)},[u,p]),searchButtonRef:n}),_e.createElement(_e.Fragment,null,_e.createElement(kz,{ref:n,translations:e==null||(t=e.translations)===null||t===void 0?void 0:t.button,onClick:v}),o&&qI(_e.createElement(dB,j0({},e,{initialScrollY:window.scrollY,initialQuery:f,translations:e==null||(r=e.translations)===null||r===void 0?void 0:r.modal,onClose:_})),document.body))}function mB(e){ZI(_e.createElement(pB,D0({},e,{transformSearchClient:function(t){return t.addAlgoliaAgent("docsearch.js","3.3.1"),e.transformSearchClient?e.transformSearchClient(t):t}})),function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return typeof t=="string"?r.document.querySelector(t):t}(e.container,e.environment))}const vB=e=>e.button===1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey,gB=()=>{const e=bu();return{hitComponent:({hit:t,children:r})=>({type:"a",ref:void 0,constructor:void 0,key:void 0,props:{href:t.url,onClick:n=>{vB(n)||(n.preventDefault(),e.push(b2(t.url,"/")))},children:r},__v:null}),navigator:{navigate:({itemUrl:t})=>{e.push(b2(t,"/"))}},transformSearchClient:t=>{const r=lx(t.search,500);return{...t,search:async(...n)=>r(...n)}}}};Le(()=>import("./style-e9220a04.js"),[]),Le(()=>import("./docsearch-1d421ddb.js"),[]);const _B=Cr({name:"Docsearch",props:{containerId:{type:String,required:!1,default:"docsearch-container"},options:{type:Object,required:!0}},setup(e){const t=Pd(),r=uI(),n=gB(),i=bt(()=>{var a;return{...e.options,...(a=e.options.locales)==null?void 0:a[t.value]}}),o=[],u=()=>{var f;const a=((f=i.value.searchParameters)==null?void 0:f.facetFilters)??[];o.splice(0,o.length,`lang:${r.value}`,...Ad(a)?a:[a]),mB({...n,...i.value,container:`#${e.containerId}`,searchParameters:{...i.value.searchParameters,facetFilters:o}})};return Xi(()=>{u(),Ia([t,i],([a,f],[p,v])=>{a!==p&&JSON.stringify(f)!==JSON.stringify(v)&&u()}),Ia(r,(a,f)=>{if(a!==f){const p=o.findIndex(v=>v===`lang:${f}`);p>-1&&o.splice(p,1,`lang:${a}`)}})}),()=>Er("div",{id:e.containerId})}}),yB={appId:"6KECEJUGJH",apiKey:"9a5c8aa7cb2d5d32ebd66790e1a84789",indexName:"sustech-online-keys",locales:{"/":{placeholder:"搜索手册",translations:{button:{buttonText:"搜索手册",buttonAriaLabel:"搜索手册"},modal:{searchBox:{resetButtonTitle:"清除查询条件",resetButtonAriaLabel:"清除查询条件",cancelButtonText:"取消",cancelButtonAriaLabel:"取消"},startScreen:{recentSearchesTitle:"搜索历史",noRecentSearchesText:"没有搜索历史",saveRecentSearchButtonTitle:"保存至搜索历史",removeRecentSearchButtonTitle:"从搜索历史中移除",favoriteSearchesTitle:"收藏",removeFavoriteSearchButtonTitle:"从收藏中移除"},errorScreen:{titleText:"无法获取结果",helpText:"你可能需要检查你的网络连接"},footer:{selectText:"选择",navigateText:"切换",closeText:"关闭",searchByText:"搜索提供者"},noResultsScreen:{noResultsText:"无法找到相关结果",suggestedQueryText:"你可以尝试查询",reportMissingResultsText:"你认为该查询应该有结果？",reportMissingResultsLinkText:"点击反馈"}}}}}},xB=Ka({enhance({app:e}){e.component("Docsearch",()=>Er(_B,{options:yB}))}});function bB(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}const wB=Symbol("pwaEvent"),SB="service-worker.js",TB=Ka({setup(){const e=(...r)=>console.log("[@vuepress/plugin-pwa]",...r),t=bB();ug(wB,t),Xi(async()=>{const{register:r}=await Le(()=>import("./index-70769223.js"),[]);r(cg(SB),{ready(n){e("Service worker is active."),t.emit("ready",n)},registered(n){e("Service worker has been registered."),t.emit("registered",n)},cached(n){e("Content has been cached for offline use."),t.emit("cached",n)},updatefound(n){e("New content is downloading."),t.emit("updatefound",n)},updated(n){e("New content is available, please refresh."),t.emit("updated",n)},offline(){e("No internet connection found. App is running in offline mode."),t.emit("offline")},error(n){e("Error during service worker registration:",n),t.emit("error",n)}})})}}),EB=(e,t,r)=>{const n=`#${e.slug}`,i=[t.linkClass];return t.linkActiveClass&&r.hash===n&&i.push(t.linkActiveClass),t.linkChildrenActiveClass&&e.children.some(o=>`#${o.slug}`===r.hash)&&i.push(t.linkChildrenActiveClass),t.linkTag==="RouterLink"?Er(_4,{to:n,class:i,ariaLabel:e.title},()=>e.title):Er("a",{href:n,class:i,ariaLabel:e.title},e.title)},fM=(e,t,r)=>e.length===0?[]:[Er("ul",{class:t.listClass},e.map(n=>Er("li",{class:t.itemClass},[EB(n,t,r),fM(n.children,t,r)])))],CB=Cr({name:"Toc",props:{headers:{type:Array,required:!1,default:null},options:{type:Object,required:!1,default:()=>({})}},setup(e){const{headers:t,options:r}=Md(e),n=us(),i=Ks(),o=bt(()=>{var f;const a=t.value||i.value.headers;return((f=a[0])==null?void 0:f.level)===1?a[0].children:a}),u=bt(()=>({containerTag:"nav",containerClass:"vuepress-toc",listClass:"vuepress-toc-list",itemClass:"vuepress-toc-item",linkTag:"RouterLink",linkClass:"vuepress-toc-link",linkActiveClass:"active",linkChildrenActiveClass:"active",...r.value}));return()=>{const a=fM(o.value,u.value,n);return u.value.containerTag?Er(u.value.containerTag,{class:u.value.containerClass},a):a}}}),AB={},IB=Ka({enhance({app:e}){e.component("Toc",t=>Er(CB,{headers:t.headers,options:{...AB,...t.options}}))}});function dM(e,t){return function(){return e.apply(t,arguments)}}const{toString:pM}=Object.prototype,{getPrototypeOf:gx}=Object,_x=(e=>t=>{const r=pM.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),cs=e=>(e=e.toLowerCase(),t=>_x(t)===e),dg=e=>t=>typeof t===e,{isArray:Zc}=Array,ad=dg("undefined");function MB(e){return e!==null&&!ad(e)&&e.constructor!==null&&!ad(e.constructor)&&vu(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const mM=cs("ArrayBuffer");function PB(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&mM(e.buffer),t}const DB=dg("string"),vu=dg("function"),vM=dg("number"),yx=e=>e!==null&&typeof e=="object",kB=e=>e===!0||e===!1,ev=e=>{if(_x(e)!=="object")return!1;const t=gx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},LB=cs("Date"),OB=cs("File"),RB=cs("Blob"),zB=cs("FileList"),BB=e=>yx(e)&&vu(e.pipe),FB=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||pM.call(e)===t||vu(e.toString)&&e.toString()===t)},NB=cs("URLSearchParams"),VB=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kd(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Zc(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),u=o.length;let a;for(n=0;n<u;n++)a=o[n],t.call(null,e[a],a,e)}}function gM(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const _M=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),yM=e=>!ad(e)&&e!==_M;function G0(){const{caseless:e}=yM(this)&&this||{},t={},r=(n,i)=>{const o=e&&gM(t,i)||i;ev(t[o])&&ev(n)?t[o]=G0(t[o],n):ev(n)?t[o]=G0({},n):Zc(n)?t[o]=n.slice():t[o]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&kd(arguments[n],r);return t}const UB=(e,t,r,{allOwnKeys:n}={})=>(kd(t,(i,o)=>{r&&vu(i)?e[o]=dM(i,r):e[o]=i},{allOwnKeys:n}),e),$B=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jB=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},GB=(e,t,r,n)=>{let i,o,u;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)u=i[o],(!n||n(u,e,t))&&!a[u]&&(t[u]=e[u],a[u]=!0);e=r!==!1&&gx(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},HB=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},qB=e=>{if(!e)return null;if(Zc(e))return e;let t=e.length;if(!vM(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},WB=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&gx(Uint8Array)),ZB=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},XB=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},YB=cs("HTMLFormElement"),KB=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),qS=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),JB=cs("RegExp"),xM=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};kd(r,(i,o)=>{t(i,o,e)!==!1&&(n[o]=i)}),Object.defineProperties(e,n)},QB=e=>{xM(e,(t,r)=>{if(vu(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(vu(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},e8=(e,t)=>{const r={},n=i=>{i.forEach(o=>{r[o]=!0})};return Zc(e)?n(e):n(String(e).split(t)),r},t8=()=>{},r8=(e,t)=>(e=+e,Number.isFinite(e)?e:t),n8=e=>{const t=new Array(10),r=(n,i)=>{if(yx(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const o=Zc(n)?[]:{};return kd(n,(u,a)=>{const f=r(u,i+1);!ad(f)&&(o[a]=f)}),t[i]=void 0,o}}return n};return r(e,0)},je={isArray:Zc,isArrayBuffer:mM,isBuffer:MB,isFormData:FB,isArrayBufferView:PB,isString:DB,isNumber:vM,isBoolean:kB,isObject:yx,isPlainObject:ev,isUndefined:ad,isDate:LB,isFile:OB,isBlob:RB,isRegExp:JB,isFunction:vu,isStream:BB,isURLSearchParams:NB,isTypedArray:WB,isFileList:zB,forEach:kd,merge:G0,extend:UB,trim:VB,stripBOM:$B,inherits:jB,toFlatObject:GB,kindOf:_x,kindOfTest:cs,endsWith:HB,toArray:qB,forEachEntry:ZB,matchAll:XB,isHTMLForm:YB,hasOwnProperty:qS,hasOwnProp:qS,reduceDescriptors:xM,freezeMethods:QB,toObjectSet:e8,toCamelCase:KB,noop:t8,toFiniteNumber:r8,findKey:gM,global:_M,isContextDefined:yM,toJSONObject:n8};function Sr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}je.inherits(Sr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:je.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const bM=Sr.prototype,wM={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{wM[e]={value:e}});Object.defineProperties(Sr,wM);Object.defineProperty(bM,"isAxiosError",{value:!0});Sr.from=(e,t,r,n,i,o)=>{const u=Object.create(bM);return je.toFlatObject(e,u,function(f){return f!==Error.prototype},a=>a!=="isAxiosError"),Sr.call(u,e.message,t,r,n,i),u.cause=e,u.name=e.name,o&&Object.assign(u,o),u};var SM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xx(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(t,i);return new o}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var i8=typeof self=="object"?self.FormData:window.FormData;const a8=i8;function H0(e){return je.isPlainObject(e)||je.isArray(e)}function TM(e){return je.endsWith(e,"[]")?e.slice(0,-2):e}function WS(e,t,r){return e?e.concat(t).map(function(i,o){return i=TM(i),!r&&o?"["+i+"]":i}).join(r?".":""):t}function o8(e){return je.isArray(e)&&!e.some(H0)}const s8=je.toFlatObject(je,{},null,function(t){return/^is[A-Z]/.test(t)});function l8(e){return e&&je.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function pg(e,t,r){if(!je.isObject(e))throw new TypeError("target must be an object");t=t||new(a8||FormData),r=je.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,M){return!je.isUndefined(M[I])});const n=r.metaTokens,i=r.visitor||v,o=r.dots,u=r.indexes,f=(r.Blob||typeof Blob<"u"&&Blob)&&l8(t);if(!je.isFunction(i))throw new TypeError("visitor must be a function");function p(A){if(A===null)return"";if(je.isDate(A))return A.toISOString();if(!f&&je.isBlob(A))throw new Sr("Blob is not supported. Use a Buffer instead.");return je.isArrayBuffer(A)||je.isTypedArray(A)?f&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function v(A,I,M){let k=A;if(A&&!M&&typeof A=="object"){if(je.endsWith(I,"{}"))I=n?I:I.slice(0,-2),A=JSON.stringify(A);else if(je.isArray(A)&&o8(A)||je.isFileList(A)||je.endsWith(I,"[]")&&(k=je.toArray(A)))return I=TM(I),k.forEach(function(z,V){!(je.isUndefined(z)||z===null)&&t.append(u===!0?WS([I],V,o):u===null?I:I+"[]",p(z))}),!1}return H0(A)?!0:(t.append(WS(M,I,o),p(A)),!1)}const _=[],y=Object.assign(s8,{defaultVisitor:v,convertValue:p,isVisitable:H0});function S(A,I){if(!je.isUndefined(A)){if(_.indexOf(A)!==-1)throw Error("Circular reference detected in "+I.join("."));_.push(A),je.forEach(A,function(k,L){(!(je.isUndefined(k)||k===null)&&i.call(t,k,je.isString(L)?L.trim():L,I,y))===!0&&S(k,I?I.concat(L):[L])}),_.pop()}}if(!je.isObject(e))throw new TypeError("data must be an object");return S(e),t}function ZS(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function bx(e,t){this._pairs=[],e&&pg(e,this,t)}const EM=bx.prototype;EM.append=function(t,r){this._pairs.push([t,r])};EM.toString=function(t){const r=t?function(n){return t.call(this,n,ZS)}:ZS;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function u8(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function CM(e,t,r){if(!t)return e;const n=r&&r.encode||u8,i=r&&r.serialize;let o;if(i?o=i(t,r):o=je.isURLSearchParams(t)?t.toString():new bx(t,r).toString(n),o){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class c8{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){je.forEach(this.handlers,function(n){n!==null&&t(n)})}}const XS=c8,AM={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},h8=typeof URLSearchParams<"u"?URLSearchParams:bx,f8=FormData,d8=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),p8=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),wo={isBrowser:!0,classes:{URLSearchParams:h8,FormData:f8,Blob},isStandardBrowserEnv:d8,isStandardBrowserWebWorkerEnv:p8,protocols:["http","https","file","blob","url","data"]};function m8(e,t){return pg(e,new wo.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,o){return wo.isNode&&je.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function v8(e){return je.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function g8(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}function IM(e){function t(r,n,i,o){let u=r[o++];const a=Number.isFinite(+u),f=o>=r.length;return u=!u&&je.isArray(i)?i.length:u,f?(je.hasOwnProp(i,u)?i[u]=[i[u],n]:i[u]=n,!a):((!i[u]||!je.isObject(i[u]))&&(i[u]=[]),t(r,n,i[u],o)&&je.isArray(i[u])&&(i[u]=g8(i[u])),!a)}if(je.isFormData(e)&&je.isFunction(e.entries)){const r={};return je.forEachEntry(e,(n,i)=>{t(v8(n),i,r,0)}),r}return null}const _8={"Content-Type":void 0};function y8(e,t,r){if(je.isString(e))try{return(t||JSON.parse)(e),je.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const mg={transitional:AM,adapter:["xhr","http"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,o=je.isObject(t);if(o&&je.isHTMLForm(t)&&(t=new FormData(t)),je.isFormData(t))return i&&i?JSON.stringify(IM(t)):t;if(je.isArrayBuffer(t)||je.isBuffer(t)||je.isStream(t)||je.isFile(t)||je.isBlob(t))return t;if(je.isArrayBufferView(t))return t.buffer;if(je.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return m8(t,this.formSerializer).toString();if((a=je.isFileList(t))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return pg(a?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||i?(r.setContentType("application/json",!1),y8(t)):t}],transformResponse:[function(t){const r=this.transitional||mg.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(t&&je.isString(t)&&(n&&!this.responseType||i)){const u=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(u)throw a.name==="SyntaxError"?Sr.from(a,Sr.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wo.classes.FormData,Blob:wo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};je.forEach(["delete","get","head"],function(t){mg.headers[t]={}});je.forEach(["post","put","patch"],function(t){mg.headers[t]=je.merge(_8)});const Sx=mg,x8=je.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),b8=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(u){i=u.indexOf(":"),r=u.substring(0,i).trim().toLowerCase(),n=u.substring(i+1).trim(),!(!r||t[r]&&x8[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},YS=Symbol("internals");function of(e){return e&&String(e).trim().toLowerCase()}function tv(e){return e===!1||e==null?e:je.isArray(e)?e.map(tv):String(e)}function w8(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}function S8(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function KS(e,t,r,n){if(je.isFunction(n))return n.call(this,t,r);if(je.isString(t)){if(je.isString(n))return t.indexOf(n)!==-1;if(je.isRegExp(n))return n.test(t)}}function T8(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function E8(e,t){const r=je.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,o,u){return this[n].call(this,t,i,o,u)},configurable:!0})})}class vg{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function o(a,f,p){const v=of(f);if(!v)throw new Error("header name must be a non-empty string");const _=je.findKey(i,v);(!_||i[_]===void 0||p===!0||p===void 0&&i[_]!==!1)&&(i[_||f]=tv(a))}const u=(a,f)=>je.forEach(a,(p,v)=>o(p,v,f));return je.isPlainObject(t)||t instanceof this.constructor?u(t,r):je.isString(t)&&(t=t.trim())&&!S8(t)?u(b8(t),r):t!=null&&o(r,t,n),this}get(t,r){if(t=of(t),t){const n=je.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return w8(i);if(je.isFunction(r))return r.call(this,i,n);if(je.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=of(t),t){const n=je.findKey(this,t);return!!(n&&(!r||KS(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function o(u){if(u=of(u),u){const a=je.findKey(n,u);a&&(!r||KS(n,n[a],a,r))&&(delete n[a],i=!0)}}return je.isArray(t)?t.forEach(o):o(t),i}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(t){const r=this,n={};return je.forEach(this,(i,o)=>{const u=je.findKey(n,o);if(u){r[u]=tv(i),delete r[o];return}const a=t?T8(o):String(o).trim();a!==o&&delete r[o],r[a]=tv(i),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return je.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&je.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[YS]=this[YS]={accessors:{}}).accessors,i=this.prototype;function o(u){const a=of(u);n[a]||(E8(i,u),n[a]=!0)}return je.isArray(t)?t.forEach(o):o(t),this}}vg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);je.freezeMethods(vg.prototype);je.freezeMethods(vg);const as=vg;function ry(e,t){const r=this||Sx,n=t||r,i=as.from(n.headers);let o=n.data;return je.forEach(e,function(a){o=a.call(r,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function MM(e){return!!(e&&e.__CANCEL__)}function Ld(e,t,r){Sr.call(this,e??"canceled",Sr.ERR_CANCELED,t,r),this.name="CanceledError"}je.inherits(Ld,Sr,{__CANCEL__:!0});const C8=null;function A8(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Sr("Request failed with status code "+r.status,[Sr.ERR_BAD_REQUEST,Sr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const I8=wo.isStandardBrowserEnv?function(){return{write:function(r,n,i,o,u,a){const f=[];f.push(r+"="+encodeURIComponent(n)),je.isNumber(i)&&f.push("expires="+new Date(i).toGMTString()),je.isString(o)&&f.push("path="+o),je.isString(u)&&f.push("domain="+u),a===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(r){const n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function M8(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function P8(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function PM(e,t){return e&&!M8(t)?P8(e,t):t}const D8=wo.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function i(o){let u=o;return t&&(r.setAttribute("href",u),u=r.href),r.setAttribute("href",u),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(u){const a=je.isString(u)?i(u):u;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function k8(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function L8(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,o=0,u;return t=t!==void 0?t:1e3,function(f){const p=Date.now(),v=n[o];u||(u=p),r[i]=f,n[i]=p;let _=o,y=0;for(;_!==i;)y+=r[_++],_=_%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),p-u<t)return;const S=v&&p-v;return S?Math.round(y*1e3/S):void 0}}function JS(e,t){let r=0;const n=L8(50,250);return i=>{const o=i.loaded,u=i.lengthComputable?i.total:void 0,a=o-r,f=n(a),p=o<=u;r=o;const v={loaded:o,total:u,progress:u?o/u:void 0,bytes:a,rate:f||void 0,estimated:f&&u&&p?(u-o)/f:void 0,event:i};v[t?"download":"upload"]=!0,e(v)}}const O8=typeof XMLHttpRequest<"u",R8=O8&&function(e){return new Promise(function(r,n){let i=e.data;const o=as.from(e.headers).normalize(),u=e.responseType;let a;function f(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}je.isFormData(i)&&(wo.isStandardBrowserEnv||wo.isStandardBrowserWebWorkerEnv)&&o.setContentType(!1);let p=new XMLHttpRequest;if(e.auth){const S=e.auth.username||"",A=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.set("Authorization","Basic "+btoa(S+":"+A))}const v=PM(e.baseURL,e.url);p.open(e.method.toUpperCase(),CM(v,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function _(){if(!p)return;const S=as.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),I={data:!u||u==="text"||u==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:S,config:e,request:p};A8(function(k){r(k),f()},function(k){n(k),f()},I),p=null}if("onloadend"in p?p.onloadend=_:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(_)},p.onabort=function(){p&&(n(new Sr("Request aborted",Sr.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new Sr("Network Error",Sr.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let A=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const I=e.transitional||AM;e.timeoutErrorMessage&&(A=e.timeoutErrorMessage),n(new Sr(A,I.clarifyTimeoutError?Sr.ETIMEDOUT:Sr.ECONNABORTED,e,p)),p=null},wo.isStandardBrowserEnv){const S=(e.withCredentials||D8(v))&&e.xsrfCookieName&&I8.read(e.xsrfCookieName);S&&o.set(e.xsrfHeaderName,S)}i===void 0&&o.setContentType(null),"setRequestHeader"in p&&je.forEach(o.toJSON(),function(A,I){p.setRequestHeader(I,A)}),je.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),u&&u!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",JS(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",JS(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=S=>{p&&(n(!S||S.type?new Ld(null,e,p):S),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const y=k8(v);if(y&&wo.protocols.indexOf(y)===-1){n(new Sr("Unsupported protocol "+y+":",Sr.ERR_BAD_REQUEST,e));return}p.send(i||null)})},rv={http:C8,xhr:R8};je.forEach(rv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const z8={getAdapter:e=>{e=je.isArray(e)?e:[e];const{length:t}=e;let r,n;for(let i=0;i<t&&(r=e[i],!(n=je.isString(r)?rv[r.toLowerCase()]:r));i++);if(!n)throw n===!1?new Sr(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(je.hasOwnProp(rv,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!je.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:rv};function ny(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ld(null,e)}function QS(e){return ny(e),e.headers=as.from(e.headers),e.data=ry.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),z8.getAdapter(e.adapter||Sx.adapter)(e).then(function(n){return ny(e),n.data=ry.call(e,e.transformResponse,n),n.headers=as.from(n.headers),n},function(n){return MM(n)||(ny(e),n&&n.response&&(n.response.data=ry.call(e,e.transformResponse,n.response),n.response.headers=as.from(n.response.headers))),Promise.reject(n)})}const eT=e=>e instanceof as?e.toJSON():e;function Fc(e,t){t=t||{};const r={};function n(p,v,_){return je.isPlainObject(p)&&je.isPlainObject(v)?je.merge.call({caseless:_},p,v):je.isPlainObject(v)?je.merge({},v):je.isArray(v)?v.slice():v}function i(p,v,_){if(je.isUndefined(v)){if(!je.isUndefined(p))return n(void 0,p,_)}else return n(p,v,_)}function o(p,v){if(!je.isUndefined(v))return n(void 0,v)}function u(p,v){if(je.isUndefined(v)){if(!je.isUndefined(p))return n(void 0,p)}else return n(void 0,v)}function a(p,v,_){if(_ in t)return n(p,v);if(_ in e)return n(void 0,p)}const f={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:a,headers:(p,v)=>i(eT(p),eT(v),!0)};return je.forEach(Object.keys(e).concat(Object.keys(t)),function(v){const _=f[v]||i,y=_(e[v],t[v],v);je.isUndefined(y)&&_!==a||(r[v]=y)}),r}const DM="1.2.2",Tx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Tx[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const tT={};Tx.transitional=function(t,r,n){function i(o,u){return"[Axios v"+DM+"] Transitional option '"+o+"'"+u+(n?". "+n:"")}return(o,u,a)=>{if(t===!1)throw new Sr(i(u," has been removed"+(r?" in "+r:"")),Sr.ERR_DEPRECATED);return r&&!tT[u]&&(tT[u]=!0,console.warn(i(u," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,u,a):!0}};function B8(e,t,r){if(typeof e!="object")throw new Sr("options must be an object",Sr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],u=t[o];if(u){const a=e[o],f=a===void 0||u(a,o,e);if(f!==!0)throw new Sr("option "+o+" must be "+f,Sr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Sr("Unknown option "+o,Sr.ERR_BAD_OPTION)}}const q0={assertOptions:B8,validators:Tx},Bs=q0.validators;class Lv{constructor(t){this.defaults=t,this.interceptors={request:new XS,response:new XS}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Fc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:o}=r;n!==void 0&&q0.assertOptions(n,{silentJSONParsing:Bs.transitional(Bs.boolean),forcedJSONParsing:Bs.transitional(Bs.boolean),clarifyTimeoutError:Bs.transitional(Bs.boolean)},!1),i!==void 0&&q0.assertOptions(i,{encode:Bs.function,serialize:Bs.function},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let u;u=o&&je.merge(o.common,o[r.method]),u&&je.forEach(["delete","get","head","post","put","patch","common"],A=>{delete o[A]}),r.headers=as.concat(u,o);const a=[];let f=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(r)===!1||(f=f&&I.synchronous,a.unshift(I.fulfilled,I.rejected))});const p=[];this.interceptors.response.forEach(function(I){p.push(I.fulfilled,I.rejected)});let v,_=0,y;if(!f){const A=[QS.bind(this),void 0];for(A.unshift.apply(A,a),A.push.apply(A,p),y=A.length,v=Promise.resolve(r);_<y;)v=v.then(A[_++],A[_++]);return v}y=a.length;let S=r;for(_=0;_<y;){const A=a[_++],I=a[_++];try{S=A(S)}catch(M){I.call(this,M);break}}try{v=QS.call(this,S)}catch(A){return Promise.reject(A)}for(_=0,y=p.length;_<y;)v=v.then(p[_++],p[_++]);return v}getUri(t){t=Fc(this.defaults,t);const r=PM(t.baseURL,t.url);return CM(r,t.params,t.paramsSerializer)}}je.forEach(["delete","get","head","options"],function(t){Lv.prototype[t]=function(r,n){return this.request(Fc(n||{},{method:t,url:r,data:(n||{}).data}))}});je.forEach(["post","put","patch"],function(t){function r(n){return function(o,u,a){return this.request(Fc(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:u}))}}Lv.prototype[t]=r(),Lv.prototype[t+"Form"]=r(!0)});const nv=Lv;class Ex{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(i=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](i);n._listeners=null}),this.promise.then=i=>{let o;const u=new Promise(a=>{n.subscribe(a),o=a}).then(i);return u.cancel=function(){n.unsubscribe(o)},u},t(function(o,u,a){n.reason||(n.reason=new Ld(o,u,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new Ex(function(i){t=i}),cancel:t}}}const F8=Ex;function N8(e){return function(r){return e.apply(null,r)}}function V8(e){return je.isObject(e)&&e.isAxiosError===!0}const W0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(W0).forEach(([e,t])=>{W0[t]=e});const U8=W0;function kM(e){const t=new nv(e),r=dM(nv.prototype.request,t);return je.extend(r,nv.prototype,t,{allOwnKeys:!0}),je.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return kM(Fc(e,i))},r}const Nn=kM(Sx);Nn.Axios=nv;Nn.CanceledError=Ld;Nn.CancelToken=F8;Nn.isCancel=MM;Nn.VERSION=DM;Nn.toFormData=pg;Nn.AxiosError=Sr;Nn.Cancel=Nn.CanceledError;Nn.all=function(t){return Promise.all(t)};Nn.spread=N8;Nn.isAxiosError=V8;Nn.mergeConfig=Fc;Nn.AxiosHeaders=as;Nn.formToJSON=e=>IM(je.isHTMLForm(e)?new FormData(e):e);Nn.HttpStatusCode=U8;Nn.default=Nn;const ji=Nn;function rT(e){let t=Math.abs(e),r=Math.floor(t/3600);t-=r*3600;let n=Math.floor(t/60);return t-=n*60,[r,n,t]}function nT(e){return e<10?"0"+e:e}const $8={props:{secondFromDispatch:{type:Number},stationEstimate:{type:String},startSecond:{type:Number}},computed:{timeToShow:function(){let e=rT(this.secondFromDispatch),t=e[2]>=30;return e[1]>0?[e[0]>0?e[0]+"时":"",e[1],"分",t?"半":""].join(""):t?"半分钟":"不到半分"},startTime:function(){let e=rT(this.startSecond);return["",nT(e[0]),":",nT(e[1])].join("")},isWaiting:function(){return this.secondFromDispatch<=0}}},j8={key:0};function G8(e,t,r,n,i,o){return r.secondFromDispatch?(Ze(),yt("tr",{key:0,class:sa(o.isWaiting?"bus-waiting":"bus-running")},[Wt("td",null,Mr(o.startTime),1),Wt("td",null,Mr(o.isWaiting?"距出发":"已出发"),1),Wt("td",null,Mr((o.isWaiting,""+o.timeToShow)),1),r.stationEstimate?(Ze(),yt("td",j8,Mr(r.stationEstimate),1)):Tr("v-if",!0)],2)):Tr("v-if",!0)}const H8=Dr($8,[["render",G8],["__scopeId","data-v-259a8620"],["__file","BusItem.vue"]]);function LM(e,t,r){return e*3600+t*60+r}function q8(e){let t=[];for(let r of e){let n=r.split(":"),i=LM(Number(n[0].trim()),Number(n[1].trim()),0);t.push(i)}return t.sort((r,n)=>r-n)}const W8={data(){return{secondFromZero:0,second:0,minute:0,hour:0,timeRangeAfterReach:3}},props:{times:{},stations:{},minuteOnRoad:{type:Number,default:20},timeRangeBeforeDispatch:{type:Number,default:60}},components:{BusItem:H8},mounted(){setInterval(()=>{this.tick()},1e3)},methods:{tick:function(){var e=new Date;this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds(),this.secondFromZero=LM(this.hour,this.minute,this.second)},formatNumber:function(e){return e<10?"0"+e:e},stationEstimate:function(e){if(!this.stationNames)return"null";if(e<=0)return this.stationNames[0];let t=this.stationNames.length;if(e>=this.minuteOnRoad*60)return this.stationNames[t-1];let r=e/60/this.minuteOnRoad,n="";for(let i in this.stationPositions)if(r<this.stationPositions[i]){n=this.stationNames[i];break}return n}},computed:{secondList:function(){return q8(this.times)},busToShow:function(){if(!this.secondList)return null;let e=[],t=[];for(let r of this.secondList){let n=this.secondFromZero-r;n<0&&n>-this.timeRangeBeforeDispatch*60&&t.push([n,r]),n>0&&n<(this.minuteOnRoad+this.timeRangeAfterReach)*60&&e.push([n,r])}return e.concat(t)},stationNames:function(){let e=[];for(let t of this.stations)e.push(t[0]);return e},stationPositions:function(){let e=[];for(let t of this.stations)e.push(t[1]);return e}}},Z8=e=>(rI("data-v-dc817d2c"),e=e(),nI(),e),X8={key:0,class:"bus-timer-tb"},Y8={colspan:"2"},K8={colspan:"2",style:{"text-align":"right"}},J8={key:0,colspan:"4"},Q8=Z8(()=>Wt("p",{class:"plus-note"},"* 站点估计仅供参考",-1));function eF(e,t,r,n,i,o){const u=Ai("bus-item");return Ze(),yt("div",null,[o.busToShow?(Ze(),yt("table",X8,[Wt("thead",null,[Wt("tr",null,[Wt("th",Y8,Mr(r.stations[0][0])+" > "+Mr(r.stations[r.stations.length-1][0]),1),Wt("th",K8,Mr(o.formatNumber(i.hour))+":"+Mr(o.formatNumber(i.minute))+":"+Mr(o.formatNumber(i.second)),1)]),(Ze(!0),yt(Zn,null,Za(o.busToShow,(a,f)=>(Ze(),Sn(u,{secondFromDispatch:a[0],stationEstimate:o.stationEstimate(a[0]),startSecond:a[1],key:f},null,8,["secondFromDispatch","stationEstimate","startSecond"]))),128)),Wt("tr",null,[Object.keys(o.busToShow).length==0?(Ze(),yt("td",J8," 短时间内没有班次了 ")):Tr("v-if",!0)])])])):Tr("v-if",!0),Q8])}const tF=Dr(W8,[["render",eF],["__scopeId","data-v-dc817d2c"],["__file","BusTimer.vue"]]);const rF={data(){return{keySelected:null}},props:{objs:{},initPos:{type:Number,default:0}},mounted(){this.select(Object.keys(this.objs)[this.initPos])},watch:{objs(e){for(let t in this.objs){this.keySelected=t;break}}},computed:{},methods:{select:function(e){this.keySelected=e}}},nF=["onClick"];function iF(e,t,r,n,i,o){return Ze(),yt(Zn,null,[(Ze(!0),yt(Zn,null,Za(r.objs,(u,a,f)=>(Ze(),yt("button",{key:f,onClick:p=>o.select(a),class:sa(a==i.keySelected?"selected":"unselected")},Mr(a),11,nF))),128)),Hr(e.$slots,"default",{selected:r.objs[i.keySelected]})],64)}const aF=Dr(rF,[["render",iF],["__file","ObjectSelector.vue"]]),oF={data(){return{data:null}},props:{path:{type:String}},watch:{path(e){if(e)return ji.get(e).then(t=>{this.data=t.data})}}};function sF(e,t,r,n,i,o){return Hr(e.$slots,"default",{data:i.data})}const lF=Dr(oF,[["render",sF],["__file","DataRequest.vue"]]);const uF={props:["data"]},cF={class:"cards"};function hF(e,t,r,n,i,o){return Ze(),yt("div",cF,[(Ze(!0),yt(Zn,null,Za(r.data,(u,a)=>(Ze(),yt("div",{key:a,class:"card"},Mr(u),1))),128))])}const fF=Dr(uF,[["render",hF],["__scopeId","data-v-00202de1"],["__file","GridList.vue"]]),dF={name:"BusTable",components:{BusTimer:tF,ObjectSelector:aF,DataRequest:lF,GridList:fF},mounted(){function e(t){var r={};for(let _=0;_<t.days.length;_++)r[t.days[_].date]=t.days[_].isOffDay;var n=new Date,i=new Intl.DateTimeFormat("en",{year:"numeric"}).format(n),o=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(n),u=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(n),a=`${i}-${o}-${u}`,f;if(r[a]==null){console.log("Not in GOV declaration");var p=n.getDay(),v=p==6||p==0;f=v}else console.log("In GOV declaration"),f=r[a];f?(console.log("节假日"),document.getElementById("bustable").getElementsByTagName("button")[1].click()):(console.log("工作日"),document.getElementById("bustable").getElementsByTagName("button")[0].click())}ji.get("/2023.json").then(t=>{e(t.data)})}},pF={id:"bustable"},mF=Wt("br",null,null,-1);function vF(e,t,r,n,i,o){const u=Ai("bus-timer"),a=Ai("grid-list"),f=Ai("data-request"),p=Ai("object-selector");return Ze(),yt("div",pF,[Wr(p,{objs:{"工作日 Workday":!0,"节假日 Holiday":!1}},{default:zn(v=>[mF,Wr(p,{objs:v.selected?{"Line 1 号线 │ 工学院方向 To COE":"/bus_times/one_down.json","Line 1 号线 │ 欣园方向 To Joy Highland":"/bus_times/one_up.json","Line 2 号线 │ 科研楼方向 To Research Building":"/bus_times/two_down.json","Line 2 号线 │ 欣园方向 To Joy Highland":"/bus_times/two_up.json"}:{"Line 1 号线 │ 工学院方向  To COE":"/bus_times/one_down_holiday.json","Line 1 号线 │ 欣园方向 To Joy Highland":"/bus_times/one_up_holiday.json"}},{default:zn(_=>[Wr(f,{path:_.selected},{default:zn(({data:y})=>[y?(Ze(),Sn(u,y4(I0({key:0},y)),null,16)):Tr("v-if",!0),y?(Ze(),Sn(a,{key:1,data:y.times},null,8,["data"])):Tr("v-if",!0)]),_:2},1032,["path"])]),_:2},1032,["objs"])]),_:1})])}const gF=Dr(dF,[["render",vF],["__file","BusTable.vue"]]);var Z0={},_F={get exports(){return Z0},set exports(e){Z0=e}};(function(e,t){(function(r,n){e.exports=n()})(SM,function(){var r,n,i;function o(a,f){if(!r)r=f;else if(!n)n=f;else{var p="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",v={};r(v),i=f(v),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([p],{type:"text/javascript"})))}}o(["exports"],function(a){var f=p;function p(c,s,h,m){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(m-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=h,this.p2y=m}function v(c,s,h,m){const b=new f(c,s,h,m);return function(T){return b.solve(T)}}p.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,m=0;m<8;m++){var b=this.sampleCurveX(h)-c;if(Math.abs(b)<s)return h;var T=this.sampleCurveDerivativeX(h);if(Math.abs(T)<1e-6)break;h-=b/T}var C=0,D=1;for(h=c,m=0;m<20&&(b=this.sampleCurveX(h),!(Math.abs(b-c)<s));m++)c>b?C=h:D=h,h=.5*(D-C)+C;return h},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};const _=v(.25,.1,.25,1);function y(c,s,h){return Math.min(h,Math.max(s,c))}function S(c,s,h){const m=h-s,b=((c-s)%m+m)%m+s;return b===s?h:b}function A(c,...s){for(const h of s)for(const m in h)c[m]=h[m];return c}let I=1;function M(c,s){c.forEach(h=>{s[h]&&(s[h]=s[h].bind(s))})}function k(c,s,h){const m={};for(const b in c)m[b]=s.call(h||this,c[b],b,c);return m}function L(c,s,h){const m={};for(const b in c)s.call(h||this,c[b],b,c)&&(m[b]=c[b]);return m}function z(c){return Array.isArray(c)?c.map(z):typeof c=="object"&&c?k(c,z):c}const V={};function H(c){V[c]||(typeof console<"u"&&console.warn(c),V[c]=!0)}function Z(c,s,h){return(h.y-c.y)*(s.x-c.x)>(s.y-c.y)*(h.x-c.x)}function ee(c){let s=0;for(let h,m,b=0,T=c.length,C=T-1;b<T;C=b++)h=c[b],m=c[C],s+=(m.x-h.x)*(h.y+m.y);return s}function Y(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ae(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,m,b,T)=>{const C=b||T;return s[m]=!C||C.toLowerCase(),""}),s["max-age"]){const h=parseInt(s["max-age"],10);isNaN(h)?delete s["max-age"]:s["max-age"]=h}return s}let le,pe,ye=null;function ve(c){if(ye==null){const s=c.navigator?c.navigator.userAgent:null;ye=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return ye}function Pe(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const $e={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const s=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(c,s=0){const h=window.document.createElement("canvas"),m=h.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return h.width=c.width,h.height=c.height,m.drawImage(c,0,0,c.width,c.height),m.getImageData(-s,-s,c.width+2*s,c.height+2*s)},resolveURL:c=>(le||(le=document.createElement("a")),le.href=c,le.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(pe==null&&(pe=matchMedia("(prefers-reduced-motion: reduce)")),pe.matches)}};var Ce=at;function at(c,s){this.x=c,this.y=s}at.prototype={clone:function(){return new at(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,h=c.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),h=Math.sin(c),m=h*this.x+s*this.y;return this.x=s*this.x-h*this.y,this.y=m,this},_rotateAround:function(c,s){var h=Math.cos(c),m=Math.sin(c),b=s.y+m*(this.x-s.x)+h*(this.y-s.y);return this.x=s.x+h*(this.x-s.x)-m*(this.y-s.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},at.convert=function(c){return c instanceof at?c:Array.isArray(c)?new at(c[0],c[1]):c};const st={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},xt="mapbox-tiles";let St,Xt,Dt=500,Br=50;function cr(){typeof caches>"u"||St||(St=caches.open(xt))}let vr=1/0;const Fr={supported:!1,testSupport:function(c){!Yt&&gr&&(_r?At(c):Ur=c)}};let Ur,gr,Yt=!1,_r=!1;function At(c){const s=c.createTexture();c.bindTexture(c.TEXTURE_2D,s);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,gr),c.isContextLost())return;Fr.supported=!0}catch{}c.deleteTexture(s),Yt=!0}typeof document<"u"&&(gr=document.createElement("img"),gr.onload=function(){Ur&&At(Ur),Ur=null,_r=!0},gr.onerror=function(){Yt=!0,Ur=null},gr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const kt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(kt);class Tt extends Error{constructor(s,h,m,b){super(`AJAXError: ${h} (${s}): ${m}`),this.status=s,this.statusText=h,this.url=m,this.body=b}}const zt=Y()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function hr(c,s){const h=new AbortController,m=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:zt(),signal:h.signal});let b=!1,T=!1;return c.type==="json"&&m.headers.set("Accept","application/json"),((C,D,O)=>{if(T)return;const F=Date.now();fetch(m).then($=>$.ok?((G,X,J)=>{(c.type==="arrayBuffer"?G.arrayBuffer():c.type==="json"?G.json():G.text()).then(Q=>{T||(X&&J&&function(he,ce,Ee){if(cr(),!St)return;const ke={status:ce.status,statusText:ce.statusText,headers:new Headers};ce.headers.forEach((Me,Ue)=>ke.headers.set(Ue,Me));const Te=ae(ce.headers.get("Cache-Control")||"");Te["no-store"]||(Te["max-age"]&&ke.headers.set("Expires",new Date(Ee+1e3*Te["max-age"]).toUTCString()),new Date(ke.headers.get("Expires")).getTime()-Ee<42e4||function(Me,Ue){if(Xt===void 0)try{new Response(new ReadableStream),Xt=!0}catch{Xt=!1}Xt?Ue(Me.body):Me.blob().then(Ue)}(ce,Me=>{const Ue=new Response(Me,ke);cr(),St&&St.then(Ve=>Ve.put(function(ct){const pt=ct.indexOf("?");return pt<0?ct:ct.slice(0,pt)}(he.url),Ue)).catch(Ve=>H(Ve.message))}))}(m,X,J),b=!0,s(null,Q,G.headers.get("Cache-Control"),G.headers.get("Expires")))}).catch(Q=>{T||s(new Error(Q.message))})})($,null,F):$.blob().then(G=>s(new Tt($.status,$.statusText,c.url,G)))).catch($=>{$.code!==20&&s(new Error($.message))})})(),{cancel:()=>{T=!0,b||h.abort()}}}const yr=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(Y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s);if(!Y()){const m=c.url.substring(0,c.url.indexOf("://"));return(st.REGISTERED_PROTOCOLS[m]||hr)(c,s)}}if(!(/^file:/.test(h=c.url)||/^file:/.test(zt())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return hr(c,s);if(Y()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s,void 0,!0)}var h;return function(m,b){const T=new XMLHttpRequest;T.open(m.method||"GET",m.url,!0),m.type==="arrayBuffer"&&(T.responseType="arraybuffer");for(const C in m.headers)T.setRequestHeader(C,m.headers[C]);return m.type==="json"&&(T.responseType="text",T.setRequestHeader("Accept","application/json")),T.withCredentials=m.credentials==="include",T.onerror=()=>{b(new Error(T.statusText))},T.onload=()=>{if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let C=T.response;if(m.type==="json")try{C=JSON.parse(T.response)}catch(D){return b(D)}b(null,C,T.getResponseHeader("Cache-Control"),T.getResponseHeader("Expires"))}else{const C=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});b(new Tt(T.status,T.statusText,m.url,C))}},T.send(m.body),{cancel:()=>T.abort()}}(c,s)},cn=function(c,s){return yr(A(c,{type:"arrayBuffer"}),s)};function lr(c){const s=window.document.createElement("a");return s.href=c,s.protocol===window.document.location.protocol&&s.host===window.document.location.host}const Pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let $r,pi;$r=[],pi=0;const Oi=function(c,s){if(Fr.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),pi>=st.MAX_PARALLEL_IMAGE_REQUESTS){const T={requestParameters:c,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return $r.push(T),T}pi++;let h=!1;const m=()=>{if(!h)for(h=!0,pi--;$r.length&&pi<st.MAX_PARALLEL_IMAGE_REQUESTS;){const T=$r.shift(),{requestParameters:C,callback:D,cancelled:O}=T;O||(T.cancel=Oi(C,D).cancel)}},b=cn(c,(T,C,D,O)=>{m(),T?s(T):C&&function(F,$){typeof createImageBitmap=="function"?function(G,X){const J=new Blob([new Uint8Array(G)],{type:"image/png"});createImageBitmap(J).then(Q=>{X(null,Q)}).catch(Q=>{X(new Error(`Could not load image because of ${Q.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(F,$):function(G,X){const J=new Image;J.onload=()=>{X(null,J),URL.revokeObjectURL(J.src),J.onload=null,window.requestAnimationFrame(()=>{J.src=Pt})},J.onerror=()=>X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Q=new Blob([new Uint8Array(G)],{type:"image/png"});J.src=G.byteLength?URL.createObjectURL(Q):Pt}(F,$)}(C,(F,$)=>{F!=null?s(F):$!=null&&s(null,$,{cacheControl:D,expires:O})})});return{cancel:()=>{b.cancel(),m()}}};function La(c,s,h){h[c]&&h[c].indexOf(s)!==-1||(h[c]=h[c]||[],h[c].push(s))}function Yi(c,s,h){if(h&&h[c]){const m=h[c].indexOf(s);m!==-1&&h[c].splice(m,1)}}class _n{constructor(s,h={}){A(this,h),this.type=s}}class Ri extends _n{constructor(s,h={}){super("error",A({error:s},h))}}class Vn{on(s,h){return this._listeners=this._listeners||{},La(s,h,this._listeners),this}off(s,h){return Yi(s,h,this._listeners),Yi(s,h,this._oneTimeListeners),this}once(s,h){return this._oneTimeListeners=this._oneTimeListeners||{},La(s,h,this._oneTimeListeners),this}fire(s,h){typeof s=="string"&&(s=new _n(s,h||{}));const m=s.type;if(this.listens(m)){s.target=this;const b=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const D of b)D.call(this,s);const T=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const D of T)Yi(m,D,this._oneTimeListeners),D.call(this,s);const C=this._eventedParent;C&&(A(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(s))}else s instanceof Ri&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,h){return this._eventedParent=s,this._eventedParentData=h,this}}var Ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Je{constructor(s,h,m,b){this.message=(s?`${s}: `:"")+m,b&&(this.identifier=b),h!=null&&h.__line__&&(this.line=h.__line__)}}function Po(c){const s=c.value;return s?[new Je(c.key,s,"constants have been deprecated as of v8")]:[]}function Ki(c,...s){for(const h of s)for(const m in h)c[m]=h[m];return c}function tr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function zi(c){if(Array.isArray(c))return c.map(zi);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const h in c)s[h]=zi(c[h]);return s}return tr(c)}class mi extends Error{constructor(s,h){super(h),this.message=h,this.key=s}}class vi{constructor(s,h=[]){this.parent=s,this.bindings={};for(const[m,b]of h)this.bindings[m]=b}concat(s){return new vi(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const eo={kind:"null"},Xe={kind:"number"},jt={kind:"string"},Ut={kind:"boolean"},Ln={kind:"color"},to={kind:"object"},Nt={kind:"value"},Oa={kind:"collator"},Cn={kind:"formatted"},vs={kind:"padding"},fn={kind:"resolvedImage"};function Xn(c,s){return{kind:"array",itemType:c,N:s}}function Ar(c){if(c.kind==="array"){const s=Ar(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const gs=[eo,Xe,jt,Ut,Ln,Cn,to,Xn(Nt),vs,fn];function ca(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!ca(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const h of gs)if(!ca(h,s))return null}}return`Expected ${Ar(c)} but found ${Ar(s)} instead.`}function Do(c,s){return s.some(h=>h.kind===c.kind)}function ko(c,s){return s.some(h=>h==="null"?c===null:h==="array"?Array.isArray(c):h==="object"?c&&!Array.isArray(c)&&typeof c=="object":h===typeof c)}var _s,Lo={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ne(c){return(c=Math.round(c))<0?0:c>255?255:c}function U(c){return ne(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function q(c){return(s=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:s>1?1:s;var s}function te(c,s,h){return h<0?h+=1:h>1&&(h-=1),6*h<1?c+(s-c)*h*6:2*h<1?s:3*h<2?c+(s-c)*(2/3-h)*6:c}try{_s={}.parseCSSColor=function(c){var s,h=c.replace(/ /g,"").toLowerCase();if(h in Lo)return Lo[h].slice();if(h[0]==="#")return h.length===4?(s=parseInt(h.substr(1),16))>=0&&s<=4095?[(3840&s)>>4|(3840&s)>>8,240&s|(240&s)>>4,15&s|(15&s)<<4,1]:null:h.length===7&&(s=parseInt(h.substr(1),16))>=0&&s<=16777215?[(16711680&s)>>16,(65280&s)>>8,255&s,1]:null;var m=h.indexOf("("),b=h.indexOf(")");if(m!==-1&&b+1===h.length){var T=h.substr(0,m),C=h.substr(m+1,b-(m+1)).split(","),D=1;switch(T){case"rgba":if(C.length!==4)return null;D=q(C.pop());case"rgb":return C.length!==3?null:[U(C[0]),U(C[1]),U(C[2]),D];case"hsla":if(C.length!==4)return null;D=q(C.pop());case"hsl":if(C.length!==3)return null;var O=(parseFloat(C[0])%360+360)%360/360,F=q(C[1]),$=q(C[2]),G=$<=.5?$*(F+1):$+F-$*F,X=2*$-G;return[ne(255*te(X,G,O+1/3)),ne(255*te(X,G,O)),ne(255*te(X,G,O-1/3)),D];default:return null}}return null}}catch{}class re{constructor(s,h,m,b=1){this.r=s,this.g=h,this.b=m,this.a=b}static parse(s){if(!s)return;if(s instanceof re)return s;if(typeof s!="string")return;const h=_s(s);return h?new re(h[0]/255*h[3],h[1]/255*h[3],h[2]/255*h[3],h[3]):void 0}toString(){const[s,h,m,b]=this.toArray();return`rgba(${Math.round(s)},${Math.round(h)},${Math.round(m)},${b})`}toArray(){const{r:s,g:h,b:m,a:b}=this;return b===0?[0,0,0,0]:[255*s/b,255*h/b,255*m/b,b]}}re.black=new re(0,0,0,1),re.white=new re(1,1,1,1),re.transparent=new re(0,0,0,0),re.red=new re(1,0,0,1);class fe{constructor(s,h,m){this.sensitivity=s?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,h){return this.collator.compare(s,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class xe{constructor(s,h,m,b,T){this.text=s,this.image=h,this.scale=m,this.fontStack=b,this.textColor=T}}class me{constructor(s){this.sections=s}static fromString(s){return new me([new xe(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof me?s:me.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class de{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof de)return s;if(typeof s=="number")return new de([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const h of s)if(typeof h!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new de(s)}}toString(){return JSON.stringify(this.values)}}class be{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new be({name:s,available:!1}):null}}function Re(c,s,h,m){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof h=="number"&&h>=0&&h<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,s,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,s,h,m]:[c,s,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ge(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof re||c instanceof fe||c instanceof me||c instanceof de||c instanceof be)return!0;if(Array.isArray(c)){for(const s of c)if(!Ge(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!Ge(c[s]))return!1;return!0}return!1}function Oe(c){if(c===null)return eo;if(typeof c=="string")return jt;if(typeof c=="boolean")return Ut;if(typeof c=="number")return Xe;if(c instanceof re)return Ln;if(c instanceof fe)return Oa;if(c instanceof me)return Cn;if(c instanceof de)return vs;if(c instanceof be)return fn;if(Array.isArray(c)){const s=c.length;let h;for(const m of c){const b=Oe(m);if(h){if(h===b)continue;h=Nt;break}h=b}return Xn(h||Nt,s)}return to}function dt(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof re||c instanceof me||c instanceof de||c instanceof be?c.toString():JSON.stringify(c)}class vt{constructor(s,h){this.type=s,this.value=h}static parse(s,h){if(s.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Ge(s[1]))return h.error("invalid value");const m=s[1];let b=Oe(m);const T=h.expectedType;return b.kind!=="array"||b.N!==0||!T||T.kind!=="array"||typeof T.N=="number"&&T.N!==0||(b=T),new vt(b,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class it{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const It={string:jt,number:Xe,boolean:Ut,object:to};class Lt{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let m,b=1;const T=s[0];if(T==="array"){let D,O;if(s.length>2){const F=s[1];if(typeof F!="string"||!(F in It)||F==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);D=It[F],b++}else D=Nt;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return h.error('The length argument to "array" must be a positive integer literal',2);O=s[2],b++}m=Xn(D,O)}else{if(!It[T])throw new Error(`Types doesn't contain name = ${T}`);m=It[T]}const C=[];for(;b<s.length;b++){const D=h.parse(s[b],b,Nt);if(!D)return null;C.push(D)}return new Lt(m,C)}evaluate(s){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(s);if(!ca(this.type,Oe(m)))return m;if(h===this.args.length-1)throw new it(`Expected value to be of type ${Ar(this.type)}, but found ${Ar(Oe(m))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const rr={"to-boolean":Ut,"to-color":Ln,"to-number":Xe,"to-string":jt};class Ft{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const m=s[0];if(!rr[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&s.length!==2)return h.error("Expected one argument.");const b=rr[m],T=[];for(let C=1;C<s.length;C++){const D=h.parse(s[C],C,Nt);if(!D)return null;T.push(D)}return new Ft(b,T)}evaluate(s){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(s));if(this.type.kind==="color"){let h,m;for(const b of this.args){if(h=b.evaluate(s),m=null,h instanceof re)return h;if(typeof h=="string"){const T=s.parseColor(h);if(T)return T}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Re(h[0],h[1],h[2],h[3]),!m))return new re(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new it(m||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="padding"){let h;for(const m of this.args){h=m.evaluate(s);const b=de.parse(h);if(b)return b}throw new it(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="number"){let h=null;for(const m of this.args){if(h=m.evaluate(s),h===null)return 0;const b=Number(h);if(!isNaN(b))return b}throw new it(`Could not convert ${JSON.stringify(h)} to number.`)}return this.type.kind==="formatted"?me.fromString(dt(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?be.fromString(dt(this.args[0].evaluate(s))):dt(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Gt=["Unknown","Point","LineString","Polygon"];class nr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Gt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let h=this._parseColorCache[s];return h||(h=this._parseColorCache[s]=re.parse(s)),h}}class kr{constructor(s,h,m,b){this.name=s,this.type=h,this._evaluate=m,this.args=b}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,h){const m=s[0],b=kr.definitions[m];if(!b)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(b)?b[0]:b.type,C=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,D=C.filter(([F])=>!Array.isArray(F)||F.length===s.length-1);let O=null;for(const[F,$]of D){O=new bs(h.registry,h.path,null,h.scope);const G=[];let X=!1;for(let J=1;J<s.length;J++){const Q=s[J],he=Array.isArray(F)?F[J-1]:F.type,ce=O.parse(Q,1+G.length,he);if(!ce){X=!0;break}G.push(ce)}if(!X)if(Array.isArray(F)&&F.length!==G.length)O.error(`Expected ${F.length} arguments, but found ${G.length} instead.`);else{for(let J=0;J<G.length;J++){const Q=Array.isArray(F)?F[J]:F.type,he=G[J];O.concat(J+1).checkSubtype(Q,he.type)}if(O.errors.length===0)return new kr(m,T,$,G)}}if(D.length===1)h.errors.push(...O.errors);else{const F=(D.length?D:C).map(([G])=>{return X=G,Array.isArray(X)?`(${X.map(Ar).join(", ")})`:`(${Ar(X.type)}...)`;var X}).join(" | "),$=[];for(let G=1;G<s.length;G++){const X=h.parse(s[G],1+$.length);if(!X)return null;$.push(Ar(X.type))}h.error(`Expected arguments of type ${F}, but found (${$.join(", ")}) instead.`)}return null}static register(s,h){kr.definitions=h;for(const m in h)s[m]=kr}}class An{constructor(s,h,m){this.type=Oa,this.locale=m,this.caseSensitive=s,this.diacriticSensitive=h}static parse(s,h){if(s.length!==2)return h.error("Expected one argument.");const m=s[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");const b=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Ut);if(!b)return null;const T=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Ut);if(!T)return null;let C=null;return m.locale&&(C=h.parse(m.locale,1,jt),!C)?null:new An(b,T,C)}evaluate(s){return new fe(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const Xr=8192;function Un(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function ys(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function il(c,s){const h=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,b=Math.pow(2,s.z);return[Math.round(h*b*Xr),Math.round(m*b*Xr)]}function Lr(c,s,h){const m=c[0]-s[0],b=c[1]-s[1],T=c[0]-h[0],C=c[1]-h[1];return m*C-T*b==0&&m*T<=0&&b*C<=0}function ih(c,s){let h=!1;for(let C=0,D=s.length;C<D;C++){const O=s[C];for(let F=0,$=O.length;F<$-1;F++){if(Lr(c,O[F],O[F+1]))return!1;(b=O[F])[1]>(m=c)[1]!=(T=O[F+1])[1]>m[1]&&m[0]<(T[0]-b[0])*(m[1]-b[1])/(T[1]-b[1])+b[0]&&(h=!h)}}var m,b,T;return h}function ah(c,s){for(let h=0;h<s.length;h++)if(ih(c,s[h]))return!0;return!1}function jd(c,s,h,m){const b=m[0]-h[0],T=m[1]-h[1],C=(c[0]-h[0])*T-b*(c[1]-h[1]),D=(s[0]-h[0])*T-b*(s[1]-h[1]);return C>0&&D<0||C<0&&D>0}function Gd(c,s,h){for(const F of h)for(let $=0;$<F.length-1;++$)if((D=[(C=F[$+1])[0]-(T=F[$])[0],C[1]-T[1]])[0]*(O=[(b=s)[0]-(m=c)[0],b[1]-m[1]])[1]-D[1]*O[0]!=0&&jd(m,b,T,C)&&jd(T,C,m,b))return!0;var m,b,T,C,D,O;return!1}function oh(c,s){for(let h=0;h<c.length;++h)if(!ih(c[h],s))return!1;for(let h=0;h<c.length-1;++h)if(Gd(c[h],c[h+1],s))return!1;return!0}function jg(c,s){for(let h=0;h<s.length;h++)if(oh(c,s[h]))return!0;return!1}function Eu(c,s,h){const m=[];for(let b=0;b<c.length;b++){const T=[];for(let C=0;C<c[b].length;C++){const D=il(c[b][C],h);Un(s,D),T.push(D)}m.push(T)}return m}function sh(c,s,h){const m=[];for(let b=0;b<c.length;b++){const T=Eu(c[b],s,h);m.push(T)}return m}function Hd(c,s,h,m){if(c[0]<h[0]||c[0]>h[2]){const b=.5*m;let T=c[0]-h[0]>b?-m:h[0]-c[0]>b?m:0;T===0&&(T=c[0]-h[2]>b?-m:h[2]-c[0]>b?m:0),c[0]+=T}Un(s,c)}function qd(c,s,h,m){const b=Math.pow(2,m.z)*Xr,T=[m.x*Xr,m.y*Xr],C=[];for(const D of c)for(const O of D){const F=[O.x+T[0],O.y+T[1]];Hd(F,s,h,b),C.push(F)}return C}function Wd(c,s,h,m){const b=Math.pow(2,m.z)*Xr,T=[m.x*Xr,m.y*Xr],C=[];for(const O of c){const F=[];for(const $ of O){const G=[$.x+T[0],$.y+T[1]];Un(s,G),F.push(G)}C.push(F)}if(s[2]-s[0]<=b/2){(D=s)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const O of C)for(const F of O)Hd(F,s,h,b)}var D;return C}class Oo{constructor(s,h){this.type=Ut,this.geojson=s,this.geometries=h}static parse(s,h){if(s.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Ge(s[1])){const m=s[1];if(m.type==="FeatureCollection")for(let b=0;b<m.features.length;++b){const T=m.features[b].geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new Oo(m,m.features[b].geometry)}else if(m.type==="Feature"){const b=m.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Oo(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Oo(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(h,m){const b=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],C=h.canonicalID();if(m.type==="Polygon"){const D=Eu(m.coordinates,T,C),O=qd(h.geometry(),b,T,C);if(!ys(b,T))return!1;for(const F of O)if(!ih(F,D))return!1}if(m.type==="MultiPolygon"){const D=sh(m.coordinates,T,C),O=qd(h.geometry(),b,T,C);if(!ys(b,T))return!1;for(const F of O)if(!ah(F,D))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(h,m){const b=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],C=h.canonicalID();if(m.type==="Polygon"){const D=Eu(m.coordinates,T,C),O=Wd(h.geometry(),b,T,C);if(!ys(b,T))return!1;for(const F of O)if(!oh(F,D))return!1}if(m.type==="MultiPolygon"){const D=sh(m.coordinates,T,C),O=Wd(h.geometry(),b,T,C);if(!ys(b,T))return!1;for(const F of O)if(!jg(F,D))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function al(c){if(c instanceof kr&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Oo)return!1;let s=!0;return c.eachChild(h=>{s&&!al(h)&&(s=!1)}),s}function xs(c){if(c instanceof kr&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(h=>{s&&!xs(h)&&(s=!1)}),s}function Cu(c,s){if(c instanceof kr&&s.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild(m=>{h&&!Cu(m,s)&&(h=!1)}),h}class Au{constructor(s,h){this.type=h.type,this.name=s,this.boundExpression=h}static parse(s,h){if(s.length!==2||typeof s[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const m=s[1];return h.scope.has(m)?new Au(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class bs{constructor(s,h=[],m,b=new vi,T=[]){this.registry=s,this.path=h,this.key=h.map(C=>`[${C}]`).join(""),this.scope=b,this.errors=T,this.expectedType=m}parse(s,h,m,b,T={}){return h?this.concat(h,m,b)._parse(s,T):this._parse(s,T)}_parse(s,h){function m(b,T,C){return C==="assert"?new Lt(T,[b]):C==="coerce"?new Ft(T,[b]):b}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=s[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[b];if(T){let C=T.parse(s,this);if(!C)return null;if(this.expectedType){const D=this.expectedType,O=C.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||O.kind!=="value")if(D.kind!=="color"&&D.kind!=="formatted"&&D.kind!=="resolvedImage"||O.kind!=="value"&&O.kind!=="string")if(D.kind!=="padding"||O.kind!=="value"&&O.kind!=="number"&&O.kind!=="array"){if(this.checkSubtype(D,O))return null}else C=m(C,D,h.typeAnnotation||"coerce");else C=m(C,D,h.typeAnnotation||"coerce");else C=m(C,D,h.typeAnnotation||"assert")}if(!(C instanceof vt)&&C.type.kind!=="resolvedImage"&&lh(C)){const D=new nr;try{C=new vt(C.type,C.evaluate(D))}catch(O){return this.error(O.message),null}}return C}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,h,m){const b=typeof s=="number"?this.path.concat(s):this.path,T=m?this.scope.concat(m):this.scope;return new bs(this.registry,b,h||null,T,this.errors)}error(s,...h){const m=`${this.key}${h.map(b=>`[${b}]`).join("")}`;this.errors.push(new mi(m,s))}checkSubtype(s,h){const m=ca(s,h);return m&&this.error(m),m}}function lh(c){if(c instanceof Au)return lh(c.boundExpression);if(c instanceof kr&&c.name==="error"||c instanceof An||c instanceof Oo)return!1;const s=c instanceof Ft||c instanceof Lt;let h=!0;return c.eachChild(m=>{h=s?h&&lh(m):h&&m instanceof vt}),!!h&&al(c)&&Cu(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Iu(c,s){const h=c.length-1;let m,b,T=0,C=h,D=0;for(;T<=C;)if(D=Math.floor((T+C)/2),m=c[D],b=c[D+1],m<=s){if(D===h||s<b)return D;T=D+1}else{if(!(m>s))throw new it("Input is not a number.");C=D-1}return 0}class ol{constructor(s,h,m){this.type=s,this.input=h,this.labels=[],this.outputs=[];for(const[b,T]of m)this.labels.push(b),this.outputs.push(T)}static parse(s,h){if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(s[1],1,Xe);if(!m)return null;const b=[];let T=null;h.expectedType&&h.expectedType.kind!=="value"&&(T=h.expectedType);for(let C=1;C<s.length;C+=2){const D=C===1?-1/0:s[C],O=s[C+1],F=C,$=C+1;if(typeof D!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(b.length&&b[b.length-1][0]>=D)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const G=h.parse(O,$,T);if(!G)return null;T=T||G.type,b.push([D,G])}return new ol(T,m,b)}evaluate(s){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(s);const b=this.input.evaluate(s);if(b<=h[0])return m[0].evaluate(s);const T=h.length;return b>=h[T-1]?m[T-1].evaluate(s):m[Iu(h,b)].evaluate(s)}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Yr(c,s,h){return c*(1-h)+s*h}var sl=Object.freeze({__proto__:null,number:Yr,color:function(c,s,h){return new re(Yr(c.r,s.r,h),Yr(c.g,s.g,h),Yr(c.b,s.b,h),Yr(c.a,s.a,h))},array:function(c,s,h){return c.map((m,b)=>Yr(m,s[b],h))},padding:function(c,s,h){const m=c.values,b=s.values;return new de([Yr(m[0],b[0],h),Yr(m[1],b[1],h),Yr(m[2],b[2],h),Yr(m[3],b[3],h)])}});const Zd=.95047,Xd=1.08883,uh=4/29,Mu=6/29,Yd=3*Mu*Mu,Gg=Math.PI/180,Hg=180/Math.PI;function ch(c){return c>.008856451679035631?Math.pow(c,1/3):c/Yd+uh}function hh(c){return c>Mu?c*c*c:Yd*(c-uh)}function fh(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function dh(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function fr(c){const s=dh(c.r),h=dh(c.g),m=dh(c.b),b=ch((.4124564*s+.3575761*h+.1804375*m)/Zd),T=ch((.2126729*s+.7151522*h+.072175*m)/1);return{l:116*T-16,a:500*(b-T),b:200*(T-ch((.0193339*s+.119192*h+.9503041*m)/Xd)),alpha:c.a}}function Kd(c){let s=(c.l+16)/116,h=isNaN(c.a)?s:s+c.a/500,m=isNaN(c.b)?s:s-c.b/200;return s=1*hh(s),h=Zd*hh(h),m=Xd*hh(m),new re(fh(3.2404542*h-1.5371385*s-.4985314*m),fh(-.969266*h+1.8760108*s+.041556*m),fh(.0556434*h-.2040259*s+1.0572252*m),c.alpha)}function qg(c,s,h){const m=s-c;return c+h*(m>180||m<-180?m-360*Math.round(m/360):m)}const ll={forward:fr,reverse:Kd,interpolate:function(c,s,h){return{l:Yr(c.l,s.l,h),a:Yr(c.a,s.a,h),b:Yr(c.b,s.b,h),alpha:Yr(c.alpha,s.alpha,h)}}},ul={forward:function(c){const{l:s,a:h,b:m}=fr(c),b=Math.atan2(m,h)*Hg;return{h:b<0?b+360:b,c:Math.sqrt(h*h+m*m),l:s,alpha:c.a}},reverse:function(c){const s=c.h*Gg,h=c.c;return Kd({l:c.l,a:Math.cos(s)*h,b:Math.sin(s)*h,alpha:c.alpha})},interpolate:function(c,s,h){return{h:qg(c.h,s.h,h),c:Yr(c.c,s.c,h),l:Yr(c.l,s.l,h),alpha:Yr(c.alpha,s.alpha,h)}}};var Jd=Object.freeze({__proto__:null,lab:ll,hcl:ul});class gi{constructor(s,h,m,b,T){this.type=s,this.operator=h,this.interpolation=m,this.input=b,this.labels=[],this.outputs=[];for(const[C,D]of T)this.labels.push(C),this.outputs.push(D)}static interpolationFactor(s,h,m,b){let T=0;if(s.name==="exponential")T=ph(h,s.base,m,b);else if(s.name==="linear")T=ph(h,1,m,b);else if(s.name==="cubic-bezier"){const C=s.controlPoints;T=new f(C[0],C[1],C[2],C[3]).solve(ph(h,1,m,b))}return T}static parse(s,h){let[m,b,T,...C]=s;if(!Array.isArray(b)||b.length===0)return h.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const F=b[1];if(typeof F!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:F}}else{if(b[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const F=b.slice(1);if(F.length!==4||F.some($=>typeof $!="number"||$<0||$>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:F}}}if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(T=h.parse(T,2,Xe),!T)return null;const D=[];let O=null;m==="interpolate-hcl"||m==="interpolate-lab"?O=Ln:h.expectedType&&h.expectedType.kind!=="value"&&(O=h.expectedType);for(let F=0;F<C.length;F+=2){const $=C[F],G=C[F+1],X=F+3,J=F+4;if(typeof $!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(D.length&&D[D.length-1][0]>=$)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const Q=h.parse(G,J,O);if(!Q)return null;O=O||Q.type,D.push([$,Q])}return O.kind==="number"||O.kind==="color"||O.kind==="padding"||O.kind==="array"&&O.itemType.kind==="number"&&typeof O.N=="number"?new gi(O,m,b,T,D):h.error(`Type ${Ar(O)} is not interpolatable.`)}evaluate(s){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(s);const b=this.input.evaluate(s);if(b<=h[0])return m[0].evaluate(s);const T=h.length;if(b>=h[T-1])return m[T-1].evaluate(s);const C=Iu(h,b),D=gi.interpolationFactor(this.interpolation,b,h[C],h[C+1]),O=m[C].evaluate(s),F=m[C+1].evaluate(s);return this.operator==="interpolate"?sl[this.type.kind.toLowerCase()](O,F,D):this.operator==="interpolate-hcl"?ul.reverse(ul.interpolate(ul.forward(O),ul.forward(F),D)):ll.reverse(ll.interpolate(ll.forward(O),ll.forward(F),D))}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function ph(c,s,h,m){const b=m-h,T=c-h;return b===0?0:s===1?T/b:(Math.pow(s,T)-1)/(Math.pow(s,b)-1)}class Pu{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expectected at least one argument.");let m=null;const b=h.expectedType;b&&b.kind!=="value"&&(m=b);const T=[];for(const D of s.slice(1)){const O=h.parse(D,1+T.length,m,void 0,{typeAnnotation:"omit"});if(!O)return null;m=m||O.type,T.push(O)}if(!m)throw new Error("No output type");const C=b&&T.some(D=>ca(b,D.type));return new Pu(C?Nt:m,T)}evaluate(s){let h,m=null,b=0;for(const T of this.args)if(b++,m=T.evaluate(s),m&&m instanceof be&&!m.available&&(h||(h=m.name),m=null,b===this.args.length&&(m=h)),m!==null)break;return m}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class Du{constructor(s,h){this.type=h.type,this.bindings=[].concat(s),this.result=h}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const h of this.bindings)s(h[1]);s(this.result)}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const m=[];for(let T=1;T<s.length-1;T+=2){const C=s[T];if(typeof C!="string")return h.error(`Expected string, but found ${typeof C} instead.`,T);if(/[^a-zA-Z0-9_]/.test(C))return h.error("Variable names must contain only alphanumeric characters or '_'.",T);const D=h.parse(s[T+1],T+1);if(!D)return null;m.push([C,D])}const b=h.parse(s[s.length-1],s.length-1,h.expectedType,m);return b?new Du(m,b):null}outputDefined(){return this.result.outputDefined()}}class mh{constructor(s,h,m){this.type=s,this.index=h,this.input=m}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Xe),b=h.parse(s[2],2,Xn(h.expectedType||Nt));return m&&b?new mh(b.type.itemType,m,b):null}evaluate(s){const h=this.index.evaluate(s),m=this.input.evaluate(s);if(h<0)throw new it(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new it(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new it(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class vh{constructor(s,h){this.type=Ut,this.needle=s,this.haystack=h}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Nt),b=h.parse(s[2],2,Nt);return m&&b?Do(m.type,[Ut,jt,Xe,eo,Nt])?new vh(m,b):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(m.type)} instead`):null}evaluate(s){const h=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!m)return!1;if(!ko(h,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(Oe(h))} instead.`);if(!ko(m,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${Ar(Oe(m))} instead.`);return m.indexOf(h)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class ku{constructor(s,h,m){this.type=Xe,this.needle=s,this.haystack=h,this.fromIndex=m}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Nt),b=h.parse(s[2],2,Nt);if(!m||!b)return null;if(!Do(m.type,[Ut,jt,Xe,eo,Nt]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(m.type)} instead`);if(s.length===4){const T=h.parse(s[3],3,Xe);return T?new ku(m,b,T):null}return new ku(m,b)}evaluate(s){const h=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!ko(h,["boolean","string","number","null"]))throw new it(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(Oe(h))} instead.`);if(!ko(m,["string","array"]))throw new it(`Expected second argument to be of type array or string, but found ${Ar(Oe(m))} instead.`);if(this.fromIndex){const b=this.fromIndex.evaluate(s);return m.indexOf(h,b)}return m.indexOf(h)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class gh{constructor(s,h,m,b,T,C){this.inputType=s,this.type=h,this.input=m,this.cases=b,this.outputs=T,this.otherwise=C}static parse(s,h){if(s.length<5)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return h.error("Expected an even number of arguments.");let m,b;h.expectedType&&h.expectedType.kind!=="value"&&(b=h.expectedType);const T={},C=[];for(let F=2;F<s.length-1;F+=2){let $=s[F];const G=s[F+1];Array.isArray($)||($=[$]);const X=h.concat(F);if($.length===0)return X.error("Expected at least one branch label.");for(const Q of $){if(typeof Q!="number"&&typeof Q!="string")return X.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return X.error("Numeric branch labels must be integer values.");if(m){if(X.checkSubtype(m,Oe(Q)))return null}else m=Oe(Q);if(T[String(Q)]!==void 0)return X.error("Branch labels must be unique.");T[String(Q)]=C.length}const J=h.parse(G,F,b);if(!J)return null;b=b||J.type,C.push(J)}const D=h.parse(s[1],1,Nt);if(!D)return null;const O=h.parse(s[s.length-1],s.length-1,b);return O?D.type.kind!=="value"&&h.concat(1).checkSubtype(m,D.type)?null:new gh(m,b,D,T,C,O):null}evaluate(s){const h=this.input.evaluate(s);return(Oe(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class _h{constructor(s,h,m){this.type=s,this.branches=h,this.otherwise=m}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);const b=[];for(let C=1;C<s.length-1;C+=2){const D=h.parse(s[C],C,Ut);if(!D)return null;const O=h.parse(s[C+1],C+1,m);if(!O)return null;b.push([D,O]),m=m||O.type}const T=h.parse(s[s.length-1],s.length-1,m);if(!T)return null;if(!m)throw new Error("Can't infer output type");return new _h(m,b,T)}evaluate(s){for(const[h,m]of this.branches)if(h.evaluate(s))return m.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[h,m]of this.branches)s(h),s(m);s(this.otherwise)}outputDefined(){return this.branches.every(([s,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Lu{constructor(s,h,m,b){this.type=s,this.input=h,this.beginIndex=m,this.endIndex=b}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Nt),b=h.parse(s[2],2,Xe);if(!m||!b)return null;if(!Do(m.type,[Xn(Nt),jt,Nt]))return h.error(`Expected first argument to be of type array or string, but found ${Ar(m.type)} instead`);if(s.length===4){const T=h.parse(s[3],3,Xe);return T?new Lu(m.type,m,b,T):null}return new Lu(m.type,m,b)}evaluate(s){const h=this.input.evaluate(s),m=this.beginIndex.evaluate(s);if(!ko(h,["string","array"]))throw new it(`Expected first argument to be of type array or string, but found ${Ar(Oe(h))} instead.`);if(this.endIndex){const b=this.endIndex.evaluate(s);return h.slice(m,b)}return h.slice(m)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Qd(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function ep(c,s,h,m){return m.compare(s,h)===0}function ws(c,s,h){const m=c!=="=="&&c!=="!=";return class OM{constructor(T,C,D){this.type=Ut,this.lhs=T,this.rhs=C,this.collator=D,this.hasUntypedArgument=T.type.kind==="value"||C.type.kind==="value"}static parse(T,C){if(T.length!==3&&T.length!==4)return C.error("Expected two or three arguments.");const D=T[0];let O=C.parse(T[1],1,Nt);if(!O)return null;if(!Qd(D,O.type))return C.concat(1).error(`"${D}" comparisons are not supported for type '${Ar(O.type)}'.`);let F=C.parse(T[2],2,Nt);if(!F)return null;if(!Qd(D,F.type))return C.concat(2).error(`"${D}" comparisons are not supported for type '${Ar(F.type)}'.`);if(O.type.kind!==F.type.kind&&O.type.kind!=="value"&&F.type.kind!=="value")return C.error(`Cannot compare types '${Ar(O.type)}' and '${Ar(F.type)}'.`);m&&(O.type.kind==="value"&&F.type.kind!=="value"?O=new Lt(F.type,[O]):O.type.kind!=="value"&&F.type.kind==="value"&&(F=new Lt(O.type,[F])));let $=null;if(T.length===4){if(O.type.kind!=="string"&&F.type.kind!=="string"&&O.type.kind!=="value"&&F.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if($=C.parse(T[3],3,Oa),!$)return null}return new OM(O,F,$)}evaluate(T){const C=this.lhs.evaluate(T),D=this.rhs.evaluate(T);if(m&&this.hasUntypedArgument){const O=Oe(C),F=Oe(D);if(O.kind!==F.kind||O.kind!=="string"&&O.kind!=="number")throw new it(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${O.kind}, ${F.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const O=Oe(C),F=Oe(D);if(O.kind!=="string"||F.kind!=="string")return s(T,C,D)}return this.collator?h(T,C,D,this.collator.evaluate(T)):s(T,C,D)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}}}const Wg=ws("==",function(c,s,h){return s===h},ep),Zg=ws("!=",function(c,s,h){return s!==h},function(c,s,h,m){return!ep(0,s,h,m)}),Xg=ws("<",function(c,s,h){return s<h},function(c,s,h,m){return m.compare(s,h)<0}),Yg=ws(">",function(c,s,h){return s>h},function(c,s,h,m){return m.compare(s,h)>0}),Kg=ws("<=",function(c,s,h){return s<=h},function(c,s,h,m){return m.compare(s,h)<=0}),Jg=ws(">=",function(c,s,h){return s>=h},function(c,s,h,m){return m.compare(s,h)>=0});class yh{constructor(s,h,m,b,T){this.type=jt,this.number=s,this.locale=h,this.currency=m,this.minFractionDigits=b,this.maxFractionDigits=T}static parse(s,h){if(s.length!==3)return h.error("Expected two arguments.");const m=h.parse(s[1],1,Xe);if(!m)return null;const b=s[2];if(typeof b!="object"||Array.isArray(b))return h.error("NumberFormat options argument must be an object.");let T=null;if(b.locale&&(T=h.parse(b.locale,1,jt),!T))return null;let C=null;if(b.currency&&(C=h.parse(b.currency,1,jt),!C))return null;let D=null;if(b["min-fraction-digits"]&&(D=h.parse(b["min-fraction-digits"],1,Xe),!D))return null;let O=null;return b["max-fraction-digits"]&&(O=h.parse(b["max-fraction-digits"],1,Xe),!O)?null:new yh(m,T,C,D,O)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Ou{constructor(s){this.type=Cn,this.sections=s}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const m=s[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");const b=[];let T=!1;for(let C=1;C<=s.length-1;++C){const D=s[C];if(T&&typeof D=="object"&&!Array.isArray(D)){T=!1;let O=null;if(D["font-scale"]&&(O=h.parse(D["font-scale"],1,Xe),!O))return null;let F=null;if(D["text-font"]&&(F=h.parse(D["text-font"],1,Xn(jt)),!F))return null;let $=null;if(D["text-color"]&&($=h.parse(D["text-color"],1,Ln),!$))return null;const G=b[b.length-1];G.scale=O,G.font=F,G.textColor=$}else{const O=h.parse(s[C],1,Nt);if(!O)return null;const F=O.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,b.push({content:O,scale:null,font:null,textColor:null})}}return new Ou(b)}evaluate(s){return new me(this.sections.map(h=>{const m=h.content.evaluate(s);return Oe(m)===fn?new xe("",m,null,null,null):new xe(dt(m),null,h.scale?h.scale.evaluate(s):null,h.font?h.font.evaluate(s).join(","):null,h.textColor?h.textColor.evaluate(s):null)}))}eachChild(s){for(const h of this.sections)s(h.content),h.scale&&s(h.scale),h.font&&s(h.font),h.textColor&&s(h.textColor)}outputDefined(){return!1}}class xh{constructor(s){this.type=fn,this.input=s}static parse(s,h){if(s.length!==2)return h.error("Expected two arguments.");const m=h.parse(s[1],1,jt);return m?new xh(m):h.error("No image name provided.")}evaluate(s){const h=this.input.evaluate(s),m=be.fromString(h);return m&&s.availableImages&&(m.available=s.availableImages.indexOf(h)>-1),m}eachChild(s){s(this.input)}outputDefined(){return!1}}class bh{constructor(s){this.type=Xe,this.input=s}static parse(s,h){if(s.length!==2)return h.error(`Expected 1 argument, but found ${s.length-1} instead.`);const m=h.parse(s[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Ar(m.type)} instead.`):new bh(m):null}evaluate(s){const h=this.input.evaluate(s);if(typeof h=="string"||Array.isArray(h))return h.length;throw new it(`Expected value to be of type string or array, but found ${Ar(Oe(h))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const Ss={"==":Wg,"!=":Zg,">":Yg,"<":Xg,">=":Jg,"<=":Kg,array:Lt,at:mh,boolean:Lt,case:_h,coalesce:Pu,collator:An,format:Ou,image:xh,in:vh,"index-of":ku,interpolate:gi,"interpolate-hcl":gi,"interpolate-lab":gi,length:bh,let:Du,literal:vt,match:gh,number:Lt,"number-format":yh,object:Lt,slice:Lu,step:ol,string:Lt,"to-boolean":Ft,"to-color":Ft,"to-number":Ft,"to-string":Ft,var:Au,within:Oo};function tp(c,[s,h,m,b]){s=s.evaluate(c),h=h.evaluate(c),m=m.evaluate(c);const T=b?b.evaluate(c):1,C=Re(s,h,m,T);if(C)throw new it(C);return new re(s/255*T,h/255*T,m/255*T,T)}function rp(c,s){return c in s}function Ru(c,s){const h=s[c];return h===void 0?null:h}function Ro(c){return{type:c}}function np(c){return{result:"success",value:c}}function Ts(c){return{result:"error",value:c}}function jr(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function ip(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Qt(c){return!!c.expression&&c.expression.interpolated}function dr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Nr(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function Kr(c){return c}function cl(c,s){const h=s.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",b=m||!(m||c.property!==void 0),T=c.type||(Qt(s)?"exponential":"interval");if(h||s.type==="padding"){const F=h?re.parse:de.parse;(c=Ki({},c)).stops&&(c.stops=c.stops.map($=>[$[0],F($[1])])),c.default=F(c.default?c.default:s.default)}if(c.colorSpace&&c.colorSpace!=="rgb"&&!Jd[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let C,D,O;if(T==="exponential")C=ap;else if(T==="interval")C=e_;else if(T==="categorical"){C=Qg,D=Object.create(null);for(const F of c.stops)D[F[0]]=F[1];O=typeof c.stops[0][0]}else{if(T!=="identity")throw new Error(`Unknown function type "${T}"`);C=t_}if(m){const F={},$=[];for(let J=0;J<c.stops.length;J++){const Q=c.stops[J],he=Q[0].zoom;F[he]===void 0&&(F[he]={zoom:he,type:c.type,property:c.property,default:c.default,stops:[]},$.push(he)),F[he].stops.push([Q[0].value,Q[1]])}const G=[];for(const J of $)G.push([F[J].zoom,cl(F[J],s)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:gi.interpolationFactor.bind(void 0,X),zoomStops:G.map(J=>J[0]),evaluate:({zoom:J},Q)=>ap({stops:G,base:c.base},s,J).evaluate(J,Q)}}if(b){const F=T==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:gi.interpolationFactor.bind(void 0,F),zoomStops:c.stops.map($=>$[0]),evaluate:({zoom:$})=>C(c,s,$,D,O)}}return{kind:"source",evaluate(F,$){const G=$&&$.properties?$.properties[c.property]:void 0;return G===void 0?Es(c.default,s.default):C(c,s,G,D,O)}}}function Es(c,s,h){return c!==void 0?c:s!==void 0?s:h!==void 0?h:void 0}function Qg(c,s,h,m,b){return Es(typeof h===b?m[h]:void 0,c.default,s.default)}function e_(c,s,h){if(dr(h)!=="number")return Es(c.default,s.default);const m=c.stops.length;if(m===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[m-1][0])return c.stops[m-1][1];const b=Iu(c.stops.map(T=>T[0]),h);return c.stops[b][1]}function ap(c,s,h){const m=c.base!==void 0?c.base:1;if(dr(h)!=="number")return Es(c.default,s.default);const b=c.stops.length;if(b===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[b-1][0])return c.stops[b-1][1];const T=Iu(c.stops.map($=>$[0]),h),C=function($,G,X,J){const Q=J-X,he=$-X;return Q===0?0:G===1?he/Q:(Math.pow(G,he)-1)/(Math.pow(G,Q)-1)}(h,m,c.stops[T][0],c.stops[T+1][0]),D=c.stops[T][1],O=c.stops[T+1][1];let F=sl[s.type]||Kr;if(c.colorSpace&&c.colorSpace!=="rgb"){const $=Jd[c.colorSpace];F=(G,X)=>$.reverse($.interpolate($.forward(G),$.forward(X),C))}return typeof D.evaluate=="function"?{evaluate(...$){const G=D.evaluate.apply(void 0,$),X=O.evaluate.apply(void 0,$);if(G!==void 0&&X!==void 0)return F(G,X,C)}}:F(D,O,C)}function t_(c,s,h){switch(s.type){case"color":h=re.parse(h);break;case"formatted":h=me.fromString(h.toString());break;case"resolvedImage":h=be.fromString(h.toString());break;case"padding":h=de.parse(h);break;default:dr(h)===s.type||s.type==="enum"&&s.values[h]||(h=void 0)}return Es(h,c.default,s.default)}kr.register(Ss,{error:[{kind:"error"},[jt],(c,[s])=>{throw new it(s.evaluate(c))}],typeof:[jt,[Nt],(c,[s])=>Ar(Oe(s.evaluate(c)))],"to-rgba":[Xn(Xe,4),[Ln],(c,[s])=>s.evaluate(c).toArray()],rgb:[Ln,[Xe,Xe,Xe],tp],rgba:[Ln,[Xe,Xe,Xe,Xe],tp],has:{type:Ut,overloads:[[[jt],(c,[s])=>rp(s.evaluate(c),c.properties())],[[jt,to],(c,[s,h])=>rp(s.evaluate(c),h.evaluate(c))]]},get:{type:Nt,overloads:[[[jt],(c,[s])=>Ru(s.evaluate(c),c.properties())],[[jt,to],(c,[s,h])=>Ru(s.evaluate(c),h.evaluate(c))]]},"feature-state":[Nt,[jt],(c,[s])=>Ru(s.evaluate(c),c.featureState||{})],properties:[to,[],c=>c.properties()],"geometry-type":[jt,[],c=>c.geometryType()],id:[Nt,[],c=>c.id()],zoom:[Xe,[],c=>c.globals.zoom],"heatmap-density":[Xe,[],c=>c.globals.heatmapDensity||0],"line-progress":[Xe,[],c=>c.globals.lineProgress||0],accumulated:[Nt,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Xe,Ro(Xe),(c,s)=>{let h=0;for(const m of s)h+=m.evaluate(c);return h}],"*":[Xe,Ro(Xe),(c,s)=>{let h=1;for(const m of s)h*=m.evaluate(c);return h}],"-":{type:Xe,overloads:[[[Xe,Xe],(c,[s,h])=>s.evaluate(c)-h.evaluate(c)],[[Xe],(c,[s])=>-s.evaluate(c)]]},"/":[Xe,[Xe,Xe],(c,[s,h])=>s.evaluate(c)/h.evaluate(c)],"%":[Xe,[Xe,Xe],(c,[s,h])=>s.evaluate(c)%h.evaluate(c)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(c,[s,h])=>Math.pow(s.evaluate(c),h.evaluate(c))],sqrt:[Xe,[Xe],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[Xe,[Xe],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[Xe,[Xe],(c,[s])=>Math.log(s.evaluate(c))],log2:[Xe,[Xe],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[Xe,[Xe],(c,[s])=>Math.sin(s.evaluate(c))],cos:[Xe,[Xe],(c,[s])=>Math.cos(s.evaluate(c))],tan:[Xe,[Xe],(c,[s])=>Math.tan(s.evaluate(c))],asin:[Xe,[Xe],(c,[s])=>Math.asin(s.evaluate(c))],acos:[Xe,[Xe],(c,[s])=>Math.acos(s.evaluate(c))],atan:[Xe,[Xe],(c,[s])=>Math.atan(s.evaluate(c))],min:[Xe,Ro(Xe),(c,s)=>Math.min(...s.map(h=>h.evaluate(c)))],max:[Xe,Ro(Xe),(c,s)=>Math.max(...s.map(h=>h.evaluate(c)))],abs:[Xe,[Xe],(c,[s])=>Math.abs(s.evaluate(c))],round:[Xe,[Xe],(c,[s])=>{const h=s.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[Xe,[Xe],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[Xe,[Xe],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[Ut,[jt,Nt],(c,[s,h])=>c.properties()[s.value]===h.value],"filter-id-==":[Ut,[Nt],(c,[s])=>c.id()===s.value],"filter-type-==":[Ut,[jt],(c,[s])=>c.geometryType()===s.value],"filter-<":[Ut,[jt,Nt],(c,[s,h])=>{const m=c.properties()[s.value],b=h.value;return typeof m==typeof b&&m<b}],"filter-id-<":[Ut,[Nt],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h<m}],"filter->":[Ut,[jt,Nt],(c,[s,h])=>{const m=c.properties()[s.value],b=h.value;return typeof m==typeof b&&m>b}],"filter-id->":[Ut,[Nt],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h>m}],"filter-<=":[Ut,[jt,Nt],(c,[s,h])=>{const m=c.properties()[s.value],b=h.value;return typeof m==typeof b&&m<=b}],"filter-id-<=":[Ut,[Nt],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h<=m}],"filter->=":[Ut,[jt,Nt],(c,[s,h])=>{const m=c.properties()[s.value],b=h.value;return typeof m==typeof b&&m>=b}],"filter-id->=":[Ut,[Nt],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h>=m}],"filter-has":[Ut,[Nt],(c,[s])=>s.value in c.properties()],"filter-has-id":[Ut,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Ut,[Xn(jt)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[Ut,[Xn(Nt)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[Ut,[jt,Xn(Nt)],(c,[s,h])=>h.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[Ut,[jt,Xn(Nt)],(c,[s,h])=>function(m,b,T,C){for(;T<=C;){const D=T+C>>1;if(b[D]===m)return!0;b[D]>m?C=D-1:T=D+1}return!1}(c.properties()[s.value],h.value,0,h.value.length-1)],all:{type:Ut,overloads:[[[Ut,Ut],(c,[s,h])=>s.evaluate(c)&&h.evaluate(c)],[Ro(Ut),(c,s)=>{for(const h of s)if(!h.evaluate(c))return!1;return!0}]]},any:{type:Ut,overloads:[[[Ut,Ut],(c,[s,h])=>s.evaluate(c)||h.evaluate(c)],[Ro(Ut),(c,s)=>{for(const h of s)if(h.evaluate(c))return!0;return!1}]]},"!":[Ut,[Ut],(c,[s])=>!s.evaluate(c)],"is-supported-script":[Ut,[jt],(c,[s])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(s.evaluate(c))}],upcase:[jt,[jt],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[jt,[jt],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[jt,Ro(Nt),(c,s)=>s.map(h=>dt(h.evaluate(c))).join("")],"resolved-locale":[jt,[Oa],(c,[s])=>s.evaluate(c).resolvedLocale()]});class zu{constructor(s,h){this.expression=s,this._warningHistory={},this._evaluator=new nr,this._defaultValue=h?function(m){return m.type==="color"&&Nr(m.default)?new re(0,0,0,0):m.type==="color"?re.parse(m.default)||null:m.type==="padding"?de.parse(m.default)||null:m.default===void 0?null:m.default}(h):null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(s,h,m,b,T,C){return this._evaluator.globals=s,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=b,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(s,h,m,b,T,C){this._evaluator.globals=s,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=b,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=C||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new it(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function hl(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Ss}function fl(c,s){const h=new bs(Ss,[],s?function(b){const T={color:Ln,string:jt,number:Xe,enum:jt,boolean:Ut,formatted:Cn,padding:vs,resolvedImage:fn};return b.type==="array"?Xn(T[b.value]||Nt,b.length):T[b.type]}(s):void 0),m=h.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?np(new zu(m,s)):Ts(h.errors)}class dl{constructor(s,h){this.kind=s,this._styleExpression=h,this.isStateDependent=s!=="constant"&&!xs(h.expression)}evaluateWithoutErrorHandling(s,h,m,b,T,C){return this._styleExpression.evaluateWithoutErrorHandling(s,h,m,b,T,C)}evaluate(s,h,m,b,T,C){return this._styleExpression.evaluate(s,h,m,b,T,C)}}class wh{constructor(s,h,m,b){this.kind=s,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=s!=="camera"&&!xs(h.expression),this.interpolationType=b}evaluateWithoutErrorHandling(s,h,m,b,T,C){return this._styleExpression.evaluateWithoutErrorHandling(s,h,m,b,T,C)}evaluate(s,h,m,b,T,C){return this._styleExpression.evaluate(s,h,m,b,T,C)}interpolationFactor(s,h,m){return this.interpolationType?gi.interpolationFactor(this.interpolationType,s,h,m):0}}function op(c,s){const h=fl(c,s);if(h.result==="error")return h;const m=h.value.expression,b=al(m);if(!b&&!jr(s))return Ts([new mi("","data expressions not supported")]);const T=Cu(m,["zoom"]);if(!T&&!ip(s))return Ts([new mi("","zoom expressions not supported")]);const C=Fu(m);return C||T?C instanceof mi?Ts([C]):C instanceof gi&&!Qt(s)?Ts([new mi("",'"interpolate" expressions cannot be used with this property')]):np(C?new wh(b?"camera":"composite",h.value,C.labels,C instanceof gi?C.interpolation:void 0):new dl(b?"constant":"source",h.value)):Ts([new mi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bu{constructor(s,h){this._parameters=s,this._specification=h,Ki(this,cl(this._parameters,this._specification))}static deserialize(s){return new Bu(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Fu(c){let s=null;if(c instanceof Du)s=Fu(c.result);else if(c instanceof Pu){for(const h of c.args)if(s=Fu(h),s)break}else(c instanceof ol||c instanceof gi)&&c.input instanceof kr&&c.input.name==="zoom"&&(s=c);return s instanceof mi||c.eachChild(h=>{const m=Fu(h);m instanceof mi?s=m:!s&&m?s=new mi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&m&&s!==m&&(s=new mi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function Ji(c){const s=c.key,h=c.value,m=c.valueSpec||{},b=c.objectElementValidators||{},T=c.style,C=c.styleSpec;let D=[];const O=dr(h);if(O!=="object")return[new Je(s,h,`object expected, ${O} found`)];for(const F in h){const $=F.split(".")[0],G=m[$]||m["*"];let X;if(b[$])X=b[$];else if(m[$])X=yi;else if(b["*"])X=b["*"];else{if(!m["*"]){D.push(new Je(s,h[F],`unknown property "${F}"`));continue}X=yi}D=D.concat(X({key:(s&&`${s}.`)+F,value:h[F],valueSpec:G,style:T,styleSpec:C,object:h,objectKey:F},h))}for(const F in m)b[F]||m[F].required&&m[F].default===void 0&&h[F]===void 0&&D.push(new Je(s,h,`missing required property "${F}"`));return D}function sp(c){const s=c.value,h=c.valueSpec,m=c.style,b=c.styleSpec,T=c.key,C=c.arrayElementValidator||yi;if(dr(s)!=="array")return[new Je(T,s,`array expected, ${dr(s)} found`)];if(h.length&&s.length!==h.length)return[new Je(T,s,`array length ${h.length} expected, length ${s.length} found`)];if(h["min-length"]&&s.length<h["min-length"])return[new Je(T,s,`array length at least ${h["min-length"]} expected, length ${s.length} found`)];let D={type:h.value,values:h.values};b.$version<7&&(D.function=h.function),dr(h.value)==="object"&&(D=h.value);let O=[];for(let F=0;F<s.length;F++)O=O.concat(C({array:s,arrayIndex:F,value:s[F],valueSpec:D,style:m,styleSpec:b,key:`${T}[${F}]`}));return O}function Sh(c){const s=c.key,h=c.value,m=c.valueSpec;let b=dr(h);return b==="number"&&h!=h&&(b="NaN"),b!=="number"?[new Je(s,h,`number expected, ${b} found`)]:"minimum"in m&&h<m.minimum?[new Je(s,h,`${h} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&h>m.maximum?[new Je(s,h,`${h} is greater than the maximum value ${m.maximum}`)]:[]}function lp(c){const s=c.valueSpec,h=tr(c.value.type);let m,b,T,C={};const D=h!=="categorical"&&c.value.property===void 0,O=!D,F=dr(c.value.stops)==="array"&&dr(c.value.stops[0])==="array"&&dr(c.value.stops[0][0])==="object",$=Ji({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(J){if(h==="identity")return[new Je(J.key,J.value,'identity function may not have a "stops" property')];let Q=[];const he=J.value;return Q=Q.concat(sp({key:J.key,value:he,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:G})),dr(he)==="array"&&he.length===0&&Q.push(new Je(J.key,he,"array must have at least one stop")),Q},default:function(J){return yi({key:J.key,value:J.value,valueSpec:s,style:J.style,styleSpec:J.styleSpec})}}});return h==="identity"&&D&&$.push(new Je(c.key,c.value,'missing required property "property"')),h==="identity"||c.value.stops||$.push(new Je(c.key,c.value,'missing required property "stops"')),h==="exponential"&&c.valueSpec.expression&&!Qt(c.valueSpec)&&$.push(new Je(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(O&&!jr(c.valueSpec)?$.push(new Je(c.key,c.value,"property functions not supported")):D&&!ip(c.valueSpec)&&$.push(new Je(c.key,c.value,"zoom functions not supported"))),h!=="categorical"&&!F||c.value.property!==void 0||$.push(new Je(c.key,c.value,'"property" property is required')),$;function G(J){let Q=[];const he=J.value,ce=J.key;if(dr(he)!=="array")return[new Je(ce,he,`array expected, ${dr(he)} found`)];if(he.length!==2)return[new Je(ce,he,`array length 2 expected, length ${he.length} found`)];if(F){if(dr(he[0])!=="object")return[new Je(ce,he,`object expected, ${dr(he[0])} found`)];if(he[0].zoom===void 0)return[new Je(ce,he,"object stop key must have zoom")];if(he[0].value===void 0)return[new Je(ce,he,"object stop key must have value")];if(T&&T>tr(he[0].zoom))return[new Je(ce,he[0].zoom,"stop zoom values must appear in ascending order")];tr(he[0].zoom)!==T&&(T=tr(he[0].zoom),b=void 0,C={}),Q=Q.concat(Ji({key:`${ce}[0]`,value:he[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Sh,value:X}}))}else Q=Q.concat(X({key:`${ce}[0]`,value:he[0],valueSpec:{},style:J.style,styleSpec:J.styleSpec},he));return hl(zi(he[1]))?Q.concat([new Je(`${ce}[1]`,he[1],"expressions are not allowed in function stops.")]):Q.concat(yi({key:`${ce}[1]`,value:he[1],valueSpec:s,style:J.style,styleSpec:J.styleSpec}))}function X(J,Q){const he=dr(J.value),ce=tr(J.value),Ee=J.value!==null?J.value:Q;if(m){if(he!==m)return[new Je(J.key,Ee,`${he} stop domain type must match previous stop domain type ${m}`)]}else m=he;if(he!=="number"&&he!=="string"&&he!=="boolean")return[new Je(J.key,Ee,"stop domain value must be a number, string, or boolean")];if(he!=="number"&&h!=="categorical"){let ke=`number expected, ${he} found`;return jr(s)&&h===void 0&&(ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Je(J.key,Ee,ke)]}return h!=="categorical"||he!=="number"||isFinite(ce)&&Math.floor(ce)===ce?h!=="categorical"&&he==="number"&&b!==void 0&&ce<b?[new Je(J.key,Ee,"stop domain values must appear in ascending order")]:(b=ce,h==="categorical"&&ce in C?[new Je(J.key,Ee,"stop domain values must be unique")]:(C[ce]=!0,[])):[new Je(J.key,Ee,`integer expected, found ${ce}`)]}}function zo(c){const s=(c.expressionContext==="property"?op:fl)(zi(c.value),c.valueSpec);if(s.result==="error")return s.value.map(m=>new Je(`${c.key}${m.key}`,c.value,m.message));const h=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!h.outputDefined())return[new Je(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!xs(h))return[new Je(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!xs(h))return[new Je(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Cu(h,["zoom","feature-state"]))return[new Je(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!al(h))return[new Je(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function pl(c){const s=c.key,h=c.value,m=c.valueSpec,b=[];return Array.isArray(m.values)?m.values.indexOf(tr(h))===-1&&b.push(new Je(s,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(m.values).indexOf(tr(h))===-1&&b.push(new Je(s,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),b}function Cs(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!Cs(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const r_={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nu(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Cs(c)||(c=ml(c));const s=fl(c,r_);if(s.result==="error")throw new Error(s.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,m,b)=>s.value.evaluate(h,m,{},b),needGeometry:cp(c)}}function up(c,s){return c<s?-1:c>s?1:0}function cp(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let s=1;s<c.length;s++)if(cp(c[s]))return!0;return!1}function ml(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?Th(c[1],c[2],"=="):s==="!="?As(Th(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?Th(c[1],c[2],s):s==="any"?(h=c.slice(1),["any"].concat(h.map(ml))):s==="all"?["all"].concat(c.slice(1).map(ml)):s==="none"?["all"].concat(c.slice(1).map(ml).map(As)):s==="in"?Vu(c[1],c.slice(2)):s==="!in"?As(Vu(c[1],c.slice(2))):s==="has"?vl(c[1]):s==="!has"?As(vl(c[1])):s!=="within"||c;var h}function Th(c,s,h){switch(c){case"$type":return[`filter-type-${h}`,s];case"$id":return[`filter-id-${h}`,s];default:return[`filter-${h}`,c,s]}}function Vu(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(h=>typeof h!=typeof s[0])?["filter-in-large",c,["literal",s.sort(up)]]:["filter-in-small",c,["literal",s]]}}function vl(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function As(c){return["!",c]}function gl(c){return Cs(zi(c.value))?zo(Ki({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):hp(c)}function hp(c){const s=c.value,h=c.key;if(dr(s)!=="array")return[new Je(h,s,`array expected, ${dr(s)} found`)];const m=c.styleSpec;let b,T=[];if(s.length<1)return[new Je(h,s,"filter array must have at least 1 element")];switch(T=T.concat(pl({key:`${h}[0]`,value:s[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),tr(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&tr(s[1])==="$type"&&T.push(new Je(h,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&T.push(new Je(h,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(b=dr(s[1]),b!=="string"&&T.push(new Je(`${h}[1]`,s[1],`string expected, ${b} found`)));for(let C=2;C<s.length;C++)b=dr(s[C]),tr(s[1])==="$type"?T=T.concat(pl({key:`${h}[${C}]`,value:s[C],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&T.push(new Je(`${h}[${C}]`,s[C],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let C=1;C<s.length;C++)T=T.concat(hp({key:`${h}[${C}]`,value:s[C],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":b=dr(s[1]),s.length!==2?T.push(new Je(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):b!=="string"&&T.push(new Je(`${h}[1]`,s[1],`string expected, ${b} found`));break;case"within":b=dr(s[1]),s.length!==2?T.push(new Je(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):b!=="object"&&T.push(new Je(`${h}[1]`,s[1],`object expected, ${b} found`))}return T}function _l(c,s){const h=c.key,m=c.style,b=c.styleSpec,T=c.value,C=c.objectKey,D=b[`${s}_${c.layerType}`];if(!D)return[];const O=C.match(/^(.*)-transition$/);if(s==="paint"&&O&&D[O[1]]&&D[O[1]].transition)return yi({key:h,value:T,valueSpec:b.transition,style:m,styleSpec:b});const F=c.valueSpec||D[C];if(!F)return[new Je(h,T,`unknown property "${C}"`)];let $;if(dr(T)==="string"&&jr(F)&&!F.tokens&&($=/^{([^}]+)}$/.exec(T)))return[new Je(h,T,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify($[1])} }\`.`)];const G=[];return c.layerType==="symbol"&&(C==="text-field"&&m&&!m.glyphs&&G.push(new Je(h,T,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&Nr(zi(T))&&tr(T.type)==="identity"&&G.push(new Je(h,T,'"text-font" does not support identity functions'))),G.concat(yi({key:c.key,value:T,valueSpec:F,style:m,styleSpec:b,expressionContext:"property",propertyType:s,propertyKey:C}))}function fp(c){return _l(c,"paint")}function dp(c){return _l(c,"layout")}function pp(c){let s=[];const h=c.value,m=c.key,b=c.style,T=c.styleSpec;h.type||h.ref||s.push(new Je(m,h,'either "type" or "ref" is required'));let C=tr(h.type);const D=tr(h.ref);if(h.id){const O=tr(h.id);for(let F=0;F<c.arrayIndex;F++){const $=b.layers[F];tr($.id)===O&&s.push(new Je(m,h.id,`duplicate layer id "${h.id}", previously used at line ${$.id.__line__}`))}}if("ref"in h){let O;["type","source","source-layer","filter","layout"].forEach(F=>{F in h&&s.push(new Je(m,h[F],`"${F}" is prohibited for ref layers`))}),b.layers.forEach(F=>{tr(F.id)===D&&(O=F)}),O?O.ref?s.push(new Je(m,h.ref,"ref cannot reference another ref layer")):C=tr(O.type):s.push(new Je(m,h.ref,`ref layer "${D}" not found`))}else if(C!=="background")if(h.source){const O=b.sources&&b.sources[h.source],F=O&&tr(O.type);O?F==="vector"&&C==="raster"?s.push(new Je(m,h.source,`layer "${h.id}" requires a raster source`)):F==="raster"&&C!=="raster"?s.push(new Je(m,h.source,`layer "${h.id}" requires a vector source`)):F!=="vector"||h["source-layer"]?F==="raster-dem"&&C!=="hillshade"?s.push(new Je(m,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!h.paint||!h.paint["line-gradient"]||F==="geojson"&&O.lineMetrics||s.push(new Je(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Je(m,h,`layer "${h.id}" must specify a "source-layer"`)):s.push(new Je(m,h.source,`source "${h.source}" not found`))}else s.push(new Je(m,h,'missing required property "source"'));return s=s.concat(Ji({key:m,value:h,valueSpec:T.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>yi({key:`${m}.type`,value:h.type,valueSpec:T.layer.type,style:c.style,styleSpec:c.styleSpec,object:h,objectKey:"type"}),filter:gl,layout:O=>Ji({layer:h,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":F=>dp(Ki({layerType:C},F))}}),paint:O=>Ji({layer:h,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,objectElementValidators:{"*":F=>fp(Ki({layerType:C},F))}})}})),s}function Is(c){const s=c.value,h=c.key,m=dr(s);return m!=="string"?[new Je(h,s,`string expected, ${m} found`)]:[]}const mp={promoteId:function({key:c,value:s}){if(dr(s)==="string")return Is({key:c,value:s});{const h=[];for(const m in s)h.push(...Is({key:`${c}.${m}`,value:s[m]}));return h}}};function yl(c){const s=c.value,h=c.key,m=c.styleSpec,b=c.style;if(!s.type)return[new Je(h,s,'"type" is required')];const T=tr(s.type);let C;switch(T){case"vector":case"raster":case"raster-dem":return C=Ji({key:h,value:s,valueSpec:m[`source_${T.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:mp}),C;case"geojson":if(C=Ji({key:h,value:s,valueSpec:m.source_geojson,style:b,styleSpec:m,objectElementValidators:mp}),s.cluster)for(const D in s.clusterProperties){const[O,F]=s.clusterProperties[D],$=typeof O=="string"?[O,["accumulated"],["get",D]]:O;C.push(...zo({key:`${h}.${D}.map`,value:F,expressionContext:"cluster-map"})),C.push(...zo({key:`${h}.${D}.reduce`,value:$,expressionContext:"cluster-reduce"}))}return C;case"video":return Ji({key:h,value:s,valueSpec:m.source_video,style:b,styleSpec:m});case"image":return Ji({key:h,value:s,valueSpec:m.source_image,style:b,styleSpec:m});case"canvas":return[new Je(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return pl({key:`${h}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:b,styleSpec:m})}}function xl(c){const s=c.value,h=c.styleSpec,m=h.light,b=c.style;let T=[];const C=dr(s);if(s===void 0)return T;if(C!=="object")return T=T.concat([new Je("light",s,`object expected, ${C} found`)]),T;for(const D in s){const O=D.match(/^(.*)-transition$/);T=T.concat(O&&m[O[1]]&&m[O[1]].transition?yi({key:D,value:s[D],valueSpec:h.transition,style:b,styleSpec:h}):m[D]?yi({key:D,value:s[D],valueSpec:m[D],style:b,styleSpec:h}):[new Je(D,s[D],`unknown property "${D}"`)])}return T}function _i(c){const s=c.value,h=c.styleSpec,m=h.terrain,b=c.style;let T=[];const C=dr(s);if(s===void 0)return T;if(C!=="object")return T=T.concat([new Je("terrain",s,`object expected, ${C} found`)]),T;for(const D in s)T=T.concat(m[D]?yi({key:D,value:s[D],valueSpec:m[D],style:b,styleSpec:h}):[new Je(D,s[D],`unknown property "${D}"`)]);return T}const bl={"*":()=>[],array:sp,boolean:function(c){const s=c.value,h=c.key,m=dr(s);return m!=="boolean"?[new Je(h,s,`boolean expected, ${m} found`)]:[]},number:Sh,color:function(c){const s=c.key,h=c.value,m=dr(h);return m!=="string"?[new Je(s,h,`color expected, ${m} found`)]:_s(h)===null?[new Je(s,h,`color expected, "${h}" found`)]:[]},constants:Po,enum:pl,filter:gl,function:lp,layer:pp,object:Ji,source:yl,light:xl,terrain:_i,string:Is,formatted:function(c){return Is(c).length===0?[]:zo(c)},resolvedImage:function(c){return Is(c).length===0?[]:zo(c)},padding:function(c){const s=c.key,h=c.value;if(dr(h)==="array"){if(h.length<1||h.length>4)return[new Je(s,h,`padding requires 1 to 4 values; ${h.length} values found`)];const m={type:"number"};let b=[];for(let T=0;T<h.length;T++)b=b.concat(yi({key:`${s}[${T}]`,value:h[T],valueSpec:m}));return b}return Sh({key:s,value:h,valueSpec:{}})}};function yi(c){const s=c.value,h=c.valueSpec,m=c.styleSpec;return h.expression&&Nr(tr(s))?lp(c):h.expression&&hl(zi(s))?zo(c):h.type&&bl[h.type]?bl[h.type](c):Ji(Ki({},c,{valueSpec:h.type?m[h.type]:h}))}function n_(c){const s=c.value,h=c.key,m=Is(c);return m.length||(s.indexOf("{fontstack}")===-1&&m.push(new Je(h,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&m.push(new Je(h,s,'"glyphs" url must include a "{range}" token'))),m}function ro(c,s=Ne){let h=[];return h=h.concat(yi({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,objectElementValidators:{glyphs:n_,"*":()=>[]}})),c.constants&&(h=h.concat(Po({key:"constants",value:c.constants,style:c,styleSpec:s}))),vp(h)}function vp(c){return[].concat(c).sort((s,h)=>s.line-h.line)}function Ra(c){return function(...s){return vp(c.apply(this,s))}}ro.source=Ra(yl),ro.light=Ra(xl),ro.terrain=Ra(_i),ro.layer=Ra(pp),ro.filter=Ra(gl),ro.paintProperty=Ra(fp),ro.layoutProperty=Ra(dp);const wl=ro,Eh=wl.light,i_=wl.paintProperty,a_=wl.layoutProperty;function Uu(c,s){let h=!1;if(s&&s.length)for(const m of s)c.fire(new Ri(new Error(m.message))),h=!0;return h}class Sl{constructor(s,h,m){const b=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const C=new Int32Array(this.arrayBuffer);s=C[0],this.d=(h=C[1])+2*(m=C[2]);for(let O=0;O<this.d*this.d;O++){const F=C[3+O],$=C[3+O+1];b.push(F===$?null:C.subarray(F,$))}const D=C[3+b.length+1];this.keys=C.subarray(C[3+b.length],D),this.bboxes=C.subarray(D),this.insert=this._insertReadonly}else{this.d=h+2*m;for(let C=0;C<this.d*this.d;C++)b.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=s,this.padding=m,this.scale=h/s,this.uid=0;const T=m/h*s;this.min=-T,this.max=s+T}insert(s,h,m,b,T){this._forEachCell(h,m,b,T,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(T)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,h,m,b,T,C){this.cells[T].push(C)}query(s,h,m,b,T){const C=this.min,D=this.max;if(s<=C&&h<=C&&D<=m&&D<=b&&!T)return Array.prototype.slice.call(this.keys);{const O=[];return this._forEachCell(s,h,m,b,this._queryCell,O,{},T),O}}_queryCell(s,h,m,b,T,C,D,O){const F=this.cells[T];if(F!==null){const $=this.keys,G=this.bboxes;for(let X=0;X<F.length;X++){const J=F[X];if(D[J]===void 0){const Q=4*J;(O?O(G[Q+0],G[Q+1],G[Q+2],G[Q+3]):s<=G[Q+2]&&h<=G[Q+3]&&m>=G[Q+0]&&b>=G[Q+1])?(D[J]=!0,C.push($[J])):D[J]=!1}}}}_forEachCell(s,h,m,b,T,C,D,O){const F=this._convertToCellCoord(s),$=this._convertToCellCoord(h),G=this._convertToCellCoord(m),X=this._convertToCellCoord(b);for(let J=F;J<=G;J++)for(let Q=$;Q<=X;Q++){const he=this.d*Q+J;if((!O||O(this._convertFromCellCoord(J),this._convertFromCellCoord(Q),this._convertFromCellCoord(J+1),this._convertFromCellCoord(Q+1)))&&T.call(this,s,h,m,b,he,C,D,O))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,h=3+this.cells.length+1+1;let m=0;for(let C=0;C<this.cells.length;C++)m+=this.cells[C].length;const b=new Int32Array(h+m+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let T=h;for(let C=0;C<s.length;C++){const D=s[C];b[3+C]=T,b.set(D,T),T+=D.length}return b[3+s.length]=T,b.set(this.keys,T),T+=this.keys.length,b[3+s.length+1]=T,b.set(this.bboxes,T),T+=this.bboxes.length,b.buffer}static serialize(s,h){const m=s.toArrayBuffer();return h&&h.push(m),{buffer:m}}static deserialize(s){return new Sl(s.buffer)}}const za={};function ht(c,s,h={}){if(za[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),za[c]={klass:s,omit:h.omit||[],shallow:h.shallow||[]}}ht("Object",Object),ht("TransferableGridIndex",Sl),ht("Color",re),ht("Error",Error),ht("AJAXError",Tt),ht("ResolvedImage",be),ht("StylePropertyFunction",Bu),ht("StyleExpression",zu,{omit:["_evaluator"]}),ht("ZoomDependentExpression",wh),ht("ZoomConstantExpression",dl),ht("CompoundExpression",kr,{omit:["_evaluate"]});for(const c in Ss)Ss[c]._classRegistryKey||ht(`Expression_${c}`,Ss[c]);function gp(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Bo(c,s){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(gp(c)||Pe(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const h=c;return s&&s.push(h.buffer),h}if(c instanceof ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const h=[];for(const m of c)h.push(Bo(m,s));return h}if(typeof c=="object"){const h=c.constructor,m=h._classRegistryKey;if(!m)throw new Error("can't serialize object of unregistered class");if(!za[m])throw new Error(`${m} is not registered.`);const b=h.serialize?h.serialize(c,s):{};if(h.serialize){if(s&&b===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const T in c){if(!c.hasOwnProperty(T)||za[m].omit.indexOf(T)>=0)continue;const C=c[T];b[T]=za[m].shallow.indexOf(T)>=0?C:Bo(C,s)}c instanceof Error&&(b.message=c.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(b.$name=m),b}throw new Error("can't serialize object of type "+typeof c)}function no(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||gp(c)||Pe(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(no);if(typeof c=="object"){const s=c.$name||"Object";if(!za[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:h}=za[s];if(!h)throw new Error(`can't deserialize unregistered class ${s}`);if(h.deserialize)return h.deserialize(c);const m=Object.create(h.prototype);for(const b of Object.keys(c)){if(b==="$name")continue;const T=c[b];m[b]=za[s].shallow.indexOf(b)>=0?T:no(T)}return m}throw new Error("can't deserialize object of type "+typeof c)}class Ch{constructor(){this.first=!0}update(s,h){const m=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=m,!0))}}const et={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function $u(c){for(const s of c)if(Ih(s.charCodeAt(0)))return!0;return!1}function o_(c){for(const s of c)if(!Ah(s.charCodeAt(0)))return!1;return!0}function Ah(c){return!(et.Arabic(c)||et["Arabic Supplement"](c)||et["Arabic Extended-A"](c)||et["Arabic Presentation Forms-A"](c)||et["Arabic Presentation Forms-B"](c))}function Ih(c){return!(c!==746&&c!==747&&(c<4352||!(et["Bopomofo Extended"](c)||et.Bopomofo(c)||et["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||et["CJK Compatibility Ideographs"](c)||et["CJK Compatibility"](c)||et["CJK Radicals Supplement"](c)||et["CJK Strokes"](c)||!(!et["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||et["CJK Unified Ideographs Extension A"](c)||et["CJK Unified Ideographs"](c)||et["Enclosed CJK Letters and Months"](c)||et["Hangul Compatibility Jamo"](c)||et["Hangul Jamo Extended-A"](c)||et["Hangul Jamo Extended-B"](c)||et["Hangul Jamo"](c)||et["Hangul Syllables"](c)||et.Hiragana(c)||et["Ideographic Description Characters"](c)||et.Kanbun(c)||et["Kangxi Radicals"](c)||et["Katakana Phonetic Extensions"](c)||et.Katakana(c)&&c!==12540||!(!et["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!et["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||et["Unified Canadian Aboriginal Syllabics"](c)||et["Unified Canadian Aboriginal Syllabics Extended"](c)||et["Vertical Forms"](c)||et["Yijing Hexagram Symbols"](c)||et["Yi Syllables"](c)||et["Yi Radicals"](c))))}function _p(c){return!(Ih(c)||function(s){return!!(et["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||et["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||et["Letterlike Symbols"](s)||et["Number Forms"](s)||et["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||et["Control Pictures"](s)&&s!==9251||et["Optical Character Recognition"](s)||et["Enclosed Alphanumerics"](s)||et["Geometric Shapes"](s)||et["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||et["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||et["CJK Symbols and Punctuation"](s)||et.Katakana(s)||et["Private Use Area"](s)||et["CJK Compatibility Forms"](s)||et["Small Form Variants"](s)||et["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}function yp(c){return c>=1424&&c<=2303||et["Arabic Presentation Forms-A"](c)||et["Arabic Presentation Forms-B"](c)}function s_(c,s){return!(!s&&yp(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||et.Khmer(c))}function xp(c){for(const s of c)if(yp(s.charCodeAt(0)))return!0;return!1}const Mh="deferred",Ph="loading",Dh="loaded";let kh=null,ni="unavailable",io=null;const bp=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(ni="error"),kh&&kh(c)};function Ms(){Lh.fire(new _n("pluginStateChange",{pluginStatus:ni,pluginURL:io}))}const Lh=new Vn,Tl=function(){return ni},wp=function(){if(ni!==Mh||!io)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ni=Ph,Ms(),io&&cn({url:io},c=>{c?bp(c):(ni=Dh,Ms())})},Bi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ni===Dh||Bi.applyArabicShaping!=null,isLoading:()=>ni===Ph,setState(c){if(!Y())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");ni=c.pluginStatus,io=c.pluginURL},isParsed(){if(!Y())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Bi.applyArabicShaping!=null&&Bi.processBidirectionalText!=null&&Bi.processStyledBidirectionalText!=null},getPluginURL(){if(!Y())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return io}};class Jr{constructor(s,h){this.zoom=s,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ch,this.transition={})}isSupportedScript(s){return function(h,m){for(const b of h)if(!s_(b.charCodeAt(0),m))return!1;return!0}(s,Bi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,h=s-Math.floor(s),m=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}}}class El{constructor(s,h){this.property=s,this.value=h,this.expression=function(m,b){if(Nr(m))return new Bu(m,b);if(hl(m)){const T=op(m,b);if(T.result==="error")throw new Error(T.value.map(C=>`${C.key}: ${C.message}`).join(", "));return T.value}{let T=m;return b.type==="color"&&typeof m=="string"?T=re.parse(m):b.type!=="padding"||typeof m!="number"&&!Array.isArray(m)||(T=de.parse(m)),{kind:"constant",evaluate:()=>T}}}(h===void 0?s.specification.default:h,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,h,m){return this.property.possiblyEvaluate(this,s,h,m)}}class ju{constructor(s){this.property=s,this.value=new El(s,void 0)}transitioned(s,h){return new Tp(this.property,this.value,h,A({},s.transition,this.transition),s.now)}untransitioned(){return new Tp(this.property,this.value,null,{},0)}}class Sp{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return z(this._values[s].value.value)}setValue(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new ju(this._values[s].property)),this._values[s].value=new El(this._values[s].property,h===null?void 0:z(h))}getTransition(s){return z(this._values[s].transition)}setTransition(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new ju(this._values[s].property)),this._values[s].transition=z(h)||void 0}serialize(){const s={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(s[h]=m);const b=this.getTransition(h);b!==void 0&&(s[`${h}-transition`]=b)}return s}transitioned(s,h){const m=new Ep(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].transitioned(s,h._values[b]);return m}untransitioned(){const s=new Ep(this._properties);for(const h of Object.keys(this._values))s._values[h]=this._values[h].untransitioned();return s}}class Tp{constructor(s,h,m,b,T){this.property=s,this.value=h,this.begin=T+b.delay||0,this.end=this.begin+b.duration||0,s.specification.transition&&(b.delay||b.duration)&&(this.prior=m)}possiblyEvaluate(s,h,m){const b=s.now||0,T=this.value.possiblyEvaluate(s,h,m),C=this.prior;if(C){if(b>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(b<this.begin)return C.possiblyEvaluate(s,h,m);{const D=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(s,h,m),T,function(O){if(O<=0)return 0;if(O>=1)return 1;const F=O*O,$=F*O;return 4*(O<.5?$:3*(O-F)+$-.75)}(D))}}return T}}class Ep{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,h,m){const b=new Cl(this._properties);for(const T of Object.keys(this._values))b._values[T]=this._values[T].possiblyEvaluate(s,h,m);return b}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class l_{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}getValue(s){return z(this._values[s].value)}setValue(s,h){this._values[s]=new El(this._values[s].property,h===null?void 0:z(h))}serialize(){const s={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(s[h]=m)}return s}possiblyEvaluate(s,h,m){const b=new Cl(this._properties);for(const T of Object.keys(this._values))b._values[T]=this._values[T].possiblyEvaluate(s,h,m);return b}}class ha{constructor(s,h,m){this.property=s,this.value=h,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,h,m,b){return this.property.evaluate(this.value,this.parameters,s,h,m,b)}}class Cl{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class gt{constructor(s){this.specification=s}possiblyEvaluate(s,h){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(h)}interpolate(s,h,m){const b=sl[this.specification.type];return b?b(s,h,m):s}}class Mt{constructor(s,h){this.specification=s,this.overrides=h}possiblyEvaluate(s,h,m,b){return new ha(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(h,null,{},m,b)}:s.expression,h)}interpolate(s,h,m){if(s.value.kind!=="constant"||h.value.kind!=="constant")return s;if(s.value.value===void 0||h.value.value===void 0)return new ha(this,{kind:"constant",value:void 0},s.parameters);const b=sl[this.specification.type];return b?new ha(this,{kind:"constant",value:b(s.value.value,h.value.value,m)},s.parameters):s}evaluate(s,h,m,b,T,C){return s.kind==="constant"?s.value:s.evaluate(h,m,b,T,C)}}class Ps extends Mt{possiblyEvaluate(s,h,m,b){if(s.value===void 0)return new ha(this,{kind:"constant",value:void 0},h);if(s.expression.kind==="constant"){const T=s.expression.evaluate(h,null,{},m,b),C=s.property.specification.type==="resolvedImage"&&typeof T!="string"?T.name:T,D=this._calculate(C,C,C,h);return new ha(this,{kind:"constant",value:D},h)}if(s.expression.kind==="camera"){const T=this._calculate(s.expression.evaluate({zoom:h.zoom-1}),s.expression.evaluate({zoom:h.zoom}),s.expression.evaluate({zoom:h.zoom+1}),h);return new ha(this,{kind:"constant",value:T},h)}return new ha(this,s.expression,h)}evaluate(s,h,m,b,T,C){if(s.kind==="source"){const D=s.evaluate(h,m,b,T,C);return this._calculate(D,D,D,h)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(h.zoom)-1},m,b),s.evaluate({zoom:Math.floor(h.zoom)},m,b),s.evaluate({zoom:Math.floor(h.zoom)+1},m,b),h):s.value}_calculate(s,h,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}}interpolate(s){return s}}class Oh{constructor(s){this.specification=s}possiblyEvaluate(s,h,m,b){if(s.value!==void 0){if(s.expression.kind==="constant"){const T=s.expression.evaluate(h,null,{},m,b);return this._calculate(T,T,T,h)}return this._calculate(s.expression.evaluate(new Jr(Math.floor(h.zoom-1),h)),s.expression.evaluate(new Jr(Math.floor(h.zoom),h)),s.expression.evaluate(new Jr(Math.floor(h.zoom+1),h)),h)}}_calculate(s,h,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}}interpolate(s){return s}}class ao{constructor(s){this.specification=s}possiblyEvaluate(s,h,m,b){return!!s.expression.evaluate(h,null,{},m,b)}interpolate(){return!1}}class On{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in s){const m=s[h];m.specification.overridable&&this.overridableProperties.push(h);const b=this.defaultPropertyValues[h]=new El(m,void 0),T=this.defaultTransitionablePropertyValues[h]=new ju(m);this.defaultTransitioningPropertyValues[h]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=b.possiblyEvaluate({})}}}ht("DataDrivenProperty",Mt),ht("DataConstantProperty",gt),ht("CrossFadedDataDrivenProperty",Ps),ht("CrossFadedProperty",Oh),ht("ColorRampProperty",ao);const oo="-transition";class fa extends Vn{constructor(s,h){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new l_(h.layout)),h.paint)){this._transitionablePaint=new Sp(h.paint);for(const m in s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(const m in s.layout)this.setLayoutProperty(m,s.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cl(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,h,m={}){h!=null&&this._validate(a_,`layers.${this.id}.layout.${s}`,s,h,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,h):this.visibility=h)}getPaintProperty(s){return s.endsWith(oo)?this._transitionablePaint.getTransition(s.slice(0,-oo.length)):this._transitionablePaint.getValue(s)}setPaintProperty(s,h,m={}){if(h!=null&&this._validate(i_,`layers.${this.id}.paint.${s}`,s,h,m))return!1;if(s.endsWith(oo))return this._transitionablePaint.setTransition(s.slice(0,-oo.length),h||void 0),!1;{const b=this._transitionablePaint._values[s],T=b.property.specification["property-type"]==="cross-faded-data-driven",C=b.value.isDataDriven(),D=b.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);const O=this._transitionablePaint._values[s].value;return O.isDataDriven()||C||T||this._handleOverridablePaintPropertyUpdate(s,D,O)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,h,m){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,h){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),L(s,(h,m)=>!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length))}_validate(s,h,m,b,T={}){return(!T||T.validate!==!1)&&Uu(this,s.call(wl,{key:h,layerType:this.type,objectKey:m,value:b,styleSpec:Ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const h=this.paint.get(s);if(h instanceof ha&&jr(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const Cp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class so{constructor(s,h){this._structArray=s,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class on{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,h){return s._trim(),h&&(s.isTransferred=!0,h.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const h=Object.create(this.prototype);return h.arrayBuffer=s.arrayBuffer,h.length=s.length,h.capacity=s.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function dn(c,s=1){let h=0,m=0;return{members:c.map(b=>{const T=Cp[b.type].BYTES_PER_ELEMENT,C=h=Rh(h,Math.max(s,T)),D=b.components||1;return m=Math.max(m,T),h+=T*D,{name:b.name,type:b.type,components:D,offset:C}}),size:Rh(h,Math.max(m,s)),alignment:s}}function Rh(c,s){return Math.ceil(c/s)*s}class Fo extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const b=2*s;return this.int16[b+0]=h,this.int16[b+1]=m,s}}Fo.prototype.bytesPerElement=4,ht("StructArrayLayout2i4",Fo);class x extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b){const T=this.length;return this.resize(T+1),this.emplace(T,s,h,m,b)}emplace(s,h,m,b,T){const C=4*s;return this.int16[C+0]=h,this.int16[C+1]=m,this.int16[C+2]=b,this.int16[C+3]=T,s}}x.prototype.bytesPerElement=8,ht("StructArrayLayout4i8",x);class l extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C){const D=this.length;return this.resize(D+1),this.emplace(D,s,h,m,b,T,C)}emplace(s,h,m,b,T,C,D){const O=6*s;return this.int16[O+0]=h,this.int16[O+1]=m,this.int16[O+2]=b,this.int16[O+3]=T,this.int16[O+4]=C,this.int16[O+5]=D,s}}l.prototype.bytesPerElement=12,ht("StructArrayLayout2i4i12",l);class d extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C){const D=this.length;return this.resize(D+1),this.emplace(D,s,h,m,b,T,C)}emplace(s,h,m,b,T,C,D){const O=4*s,F=8*s;return this.int16[O+0]=h,this.int16[O+1]=m,this.uint8[F+4]=b,this.uint8[F+5]=T,this.uint8[F+6]=C,this.uint8[F+7]=D,s}}d.prototype.bytesPerElement=8,ht("StructArrayLayout2i4ub8",d);class g extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const b=2*s;return this.float32[b+0]=h,this.float32[b+1]=m,s}}g.prototype.bytesPerElement=8,ht("StructArrayLayout2f8",g);class w extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,D,O,F,$){const G=this.length;return this.resize(G+1),this.emplace(G,s,h,m,b,T,C,D,O,F,$)}emplace(s,h,m,b,T,C,D,O,F,$,G){const X=10*s;return this.uint16[X+0]=h,this.uint16[X+1]=m,this.uint16[X+2]=b,this.uint16[X+3]=T,this.uint16[X+4]=C,this.uint16[X+5]=D,this.uint16[X+6]=O,this.uint16[X+7]=F,this.uint16[X+8]=$,this.uint16[X+9]=G,s}}w.prototype.bytesPerElement=20,ht("StructArrayLayout10ui20",w);class E extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,D,O,F,$,G,X){const J=this.length;return this.resize(J+1),this.emplace(J,s,h,m,b,T,C,D,O,F,$,G,X)}emplace(s,h,m,b,T,C,D,O,F,$,G,X,J){const Q=12*s;return this.int16[Q+0]=h,this.int16[Q+1]=m,this.int16[Q+2]=b,this.int16[Q+3]=T,this.uint16[Q+4]=C,this.uint16[Q+5]=D,this.uint16[Q+6]=O,this.uint16[Q+7]=F,this.int16[Q+8]=$,this.int16[Q+9]=G,this.int16[Q+10]=X,this.int16[Q+11]=J,s}}E.prototype.bytesPerElement=24,ht("StructArrayLayout4i4ui4i24",E);class P extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,s,h,m)}emplace(s,h,m,b){const T=3*s;return this.float32[T+0]=h,this.float32[T+1]=m,this.float32[T+2]=b,s}}P.prototype.bytesPerElement=12,ht("StructArrayLayout3f12",P);class R extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint32[1*s+0]=h,s}}R.prototype.bytesPerElement=4,ht("StructArrayLayout1ul4",R);class B extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,D,O,F){const $=this.length;return this.resize($+1),this.emplace($,s,h,m,b,T,C,D,O,F)}emplace(s,h,m,b,T,C,D,O,F,$){const G=10*s,X=5*s;return this.int16[G+0]=h,this.int16[G+1]=m,this.int16[G+2]=b,this.int16[G+3]=T,this.int16[G+4]=C,this.int16[G+5]=D,this.uint32[X+3]=O,this.uint16[G+8]=F,this.uint16[G+9]=$,s}}B.prototype.bytesPerElement=20,ht("StructArrayLayout6i1ul2ui20",B);class N extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C){const D=this.length;return this.resize(D+1),this.emplace(D,s,h,m,b,T,C)}emplace(s,h,m,b,T,C,D){const O=6*s;return this.int16[O+0]=h,this.int16[O+1]=m,this.int16[O+2]=b,this.int16[O+3]=T,this.int16[O+4]=C,this.int16[O+5]=D,s}}N.prototype.bytesPerElement=12,ht("StructArrayLayout2i2i2i12",N);class j extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T){const C=this.length;return this.resize(C+1),this.emplace(C,s,h,m,b,T)}emplace(s,h,m,b,T,C){const D=4*s,O=8*s;return this.float32[D+0]=h,this.float32[D+1]=m,this.float32[D+2]=b,this.int16[O+6]=T,this.int16[O+7]=C,s}}j.prototype.bytesPerElement=16,ht("StructArrayLayout2f1f2i16",j);class W extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,b){const T=this.length;return this.resize(T+1),this.emplace(T,s,h,m,b)}emplace(s,h,m,b,T){const C=12*s,D=3*s;return this.uint8[C+0]=h,this.uint8[C+1]=m,this.float32[D+1]=b,this.float32[D+2]=T,s}}W.prototype.bytesPerElement=12,ht("StructArrayLayout2ub2f12",W);class K extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,s,h,m)}emplace(s,h,m,b){const T=3*s;return this.uint16[T+0]=h,this.uint16[T+1]=m,this.uint16[T+2]=b,s}}K.prototype.bytesPerElement=6,ht("StructArrayLayout3ui6",K);class se extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,D,O,F,$,G,X,J,Q,he,ce,Ee){const ke=this.length;return this.resize(ke+1),this.emplace(ke,s,h,m,b,T,C,D,O,F,$,G,X,J,Q,he,ce,Ee)}emplace(s,h,m,b,T,C,D,O,F,$,G,X,J,Q,he,ce,Ee,ke){const Te=24*s,Me=12*s,Ue=48*s;return this.int16[Te+0]=h,this.int16[Te+1]=m,this.uint16[Te+2]=b,this.uint16[Te+3]=T,this.uint32[Me+2]=C,this.uint32[Me+3]=D,this.uint32[Me+4]=O,this.uint16[Te+10]=F,this.uint16[Te+11]=$,this.uint16[Te+12]=G,this.float32[Me+7]=X,this.float32[Me+8]=J,this.uint8[Ue+36]=Q,this.uint8[Ue+37]=he,this.uint8[Ue+38]=ce,this.uint32[Me+10]=Ee,this.int16[Te+22]=ke,s}}se.prototype.bytesPerElement=48,ht("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",se);class ie extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,D,O,F,$,G,X,J,Q,he,ce,Ee,ke,Te,Me,Ue,Ve,ct,pt,tt,Ke,We,rt){const Qe=this.length;return this.resize(Qe+1),this.emplace(Qe,s,h,m,b,T,C,D,O,F,$,G,X,J,Q,he,ce,Ee,ke,Te,Me,Ue,Ve,ct,pt,tt,Ke,We,rt)}emplace(s,h,m,b,T,C,D,O,F,$,G,X,J,Q,he,ce,Ee,ke,Te,Me,Ue,Ve,ct,pt,tt,Ke,We,rt,Qe){const qe=34*s,Ct=17*s;return this.int16[qe+0]=h,this.int16[qe+1]=m,this.int16[qe+2]=b,this.int16[qe+3]=T,this.int16[qe+4]=C,this.int16[qe+5]=D,this.int16[qe+6]=O,this.int16[qe+7]=F,this.uint16[qe+8]=$,this.uint16[qe+9]=G,this.uint16[qe+10]=X,this.uint16[qe+11]=J,this.uint16[qe+12]=Q,this.uint16[qe+13]=he,this.uint16[qe+14]=ce,this.uint16[qe+15]=Ee,this.uint16[qe+16]=ke,this.uint16[qe+17]=Te,this.uint16[qe+18]=Me,this.uint16[qe+19]=Ue,this.uint16[qe+20]=Ve,this.uint16[qe+21]=ct,this.uint16[qe+22]=pt,this.uint32[Ct+12]=tt,this.float32[Ct+13]=Ke,this.float32[Ct+14]=We,this.float32[Ct+15]=rt,this.float32[Ct+16]=Qe,s}}ie.prototype.bytesPerElement=68,ht("StructArrayLayout8i15ui1ul4f68",ie);class oe extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.float32[1*s+0]=h,s}}oe.prototype.bytesPerElement=4,ht("StructArrayLayout1f4",oe);class ge extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,s,h,m)}emplace(s,h,m,b){const T=3*s;return this.int16[T+0]=h,this.int16[T+1]=m,this.int16[T+2]=b,s}}ge.prototype.bytesPerElement=6,ht("StructArrayLayout3i6",ge);class Se extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,s,h,m)}emplace(s,h,m,b){const T=4*s;return this.uint32[2*s+0]=h,this.uint16[T+2]=m,this.uint16[T+3]=b,s}}Se.prototype.bytesPerElement=8,ht("StructArrayLayout1ul2ui8",Se);class Ae extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const b=2*s;return this.uint16[b+0]=h,this.uint16[b+1]=m,s}}Ae.prototype.bytesPerElement=4,ht("StructArrayLayout2ui4",Ae);class ue extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint16[1*s+0]=h,s}}ue.prototype.bytesPerElement=2,ht("StructArrayLayout1ui2",ue);class De extends on{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,b){const T=this.length;return this.resize(T+1),this.emplace(T,s,h,m,b)}emplace(s,h,m,b,T){const C=4*s;return this.float32[C+0]=h,this.float32[C+1]=m,this.float32[C+2]=b,this.float32[C+3]=T,s}}De.prototype.bytesPerElement=16,ht("StructArrayLayout4f16",De);class Ie extends so{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ce(this.anchorPointX,this.anchorPointY)}}Ie.prototype.size=20;class Be extends B{get(s){return new Ie(this,s)}}ht("CollisionBoxArray",Be);class Fe extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Fe.prototype.size=48;class He extends se{get(s){return new Fe(this,s)}}ht("PlacedSymbolArray",He);class ze extends so{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}ze.prototype.size=68;class ot extends ie{get(s){return new ze(this,s)}}ht("SymbolInstanceArray",ot);class Ye extends oe{getoffsetX(s){return this.float32[1*s+0]}}ht("GlyphOffsetArray",Ye);class ut extends ge{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}ht("SymbolLineVertexArray",ut);class $t extends so{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}$t.prototype.size=8;class Ht extends Se{get(s){return new $t(this,s)}}ht("FeatureIndexArray",Ht);class Et extends Fo{}class xr extends Fo{}class br extends Fo{}class er extends l{}class ir extends d{}class Ir extends g{}class In extends w{}class da extends E{}class Qi extends P{}class pa extends R{}class lo extends N{}class Fi extends W{}class ii extends K{}class Ba extends Ae{}const Gu=dn([{name:"a_pos",components:2,type:"Int16"}],4),{members:yn}=Gu;class Kt{constructor(s=[]){this.segments=s}prepareSegment(s,h,m,b){let T=this.segments[this.segments.length-1];return s>Kt.MAX_VERTEX_ARRAY_LENGTH&&H(`Max vertices per segment is ${Kt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!T||T.vertexLength+s>Kt.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==b)&&(T={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},b!==void 0&&(T.sortKey=b),this.segments.push(T)),T}get(){return this.segments}destroy(){for(const s of this.segments)for(const h in s.vaos)s.vaos[h].destroy()}static simpleSegment(s,h,m,b){return new Kt([{vertexOffset:s,primitiveOffset:h,vertexLength:m,primitiveLength:b,vaos:{},sortKey:0}])}}function pr(c,s){return 256*(c=y(Math.floor(c),0,255))+y(Math.floor(s),0,255)}Kt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ht("SegmentVector",Kt);const Mn=dn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Pn={exports:{}},Qr={exports:{}};Qr.exports=function(c,s){var h,m,b,T,C,D,O,F;for(m=c.length-(h=3&c.length),b=s,C=3432918353,D=461845907,F=0;F<m;)O=255&c.charCodeAt(F)|(255&c.charCodeAt(++F))<<8|(255&c.charCodeAt(++F))<<16|(255&c.charCodeAt(++F))<<24,++F,b=27492+(65535&(T=5*(65535&(b=(b^=O=(65535&(O=(O=(65535&O)*C+(((O>>>16)*C&65535)<<16)&4294967295)<<15|O>>>17))*D+(((O>>>16)*D&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(O=0,h){case 3:O^=(255&c.charCodeAt(F+2))<<16;case 2:O^=(255&c.charCodeAt(F+1))<<8;case 1:b^=O=(65535&(O=(O=(65535&(O^=255&c.charCodeAt(F)))*C+(((O>>>16)*C&65535)<<16)&4294967295)<<15|O>>>17))*D+(((O>>>16)*D&65535)<<16)&4294967295}return b^=c.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0};var Ni={exports:{}};Ni.exports=function(c,s){for(var h,m=c.length,b=s^m,T=0;m>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(T)|(255&c.charCodeAt(++T))<<8|(255&c.charCodeAt(++T))<<16|(255&c.charCodeAt(++T))<<24))+((1540483477*(h>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++T;switch(m){case 3:b^=(255&c.charCodeAt(T+2))<<16;case 2:b^=(255&c.charCodeAt(T+1))<<8;case 1:b=1540483477*(65535&(b^=255&c.charCodeAt(T)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0};var No=Qr.exports,zh=Ni.exports;Pn.exports=No,Pn.exports.murmur3=No,Pn.exports.murmur2=zh;class Ds{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,h,m,b){this.ids.push(Ap(s)),this.positions.push(h,m,b)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=Ap(s);let m=0,b=this.ids.length-1;for(;m<b;){const C=m+b>>1;this.ids[C]>=h?b=C:m=C+1}const T=[];for(;this.ids[m]===h;)T.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return T}static serialize(s,h){const m=new Float64Array(s.ids),b=new Uint32Array(s.positions);return Bh(m,b,0,m.length-1),h&&h.push(m.buffer,b.buffer),{ids:m,positions:b}}static deserialize(s){const h=new Ds;return h.ids=s.ids,h.positions=s.positions,h.indexed=!0,h}}function Ap(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Pn.exports(String(c))}function Bh(c,s,h,m){for(;h<m;){const b=c[h+m>>1];let T=h-1,C=m+1;for(;;){do T++;while(c[T]<b);do C--;while(c[C]>b);if(T>=C)break;uo(c,T,C),uo(s,3*T,3*C),uo(s,3*T+1,3*C+1),uo(s,3*T+2,3*C+2)}C-h<m-C?(Bh(c,s,h,C),h=C+1):(Bh(c,s,C+1,m),m=C)}}function uo(c,s,h){const m=c[s];c[s]=c[h],c[h]=m}ht("FeaturePositionMap",Ds);class Vo{constructor(s,h){this.gl=s.gl,this.location=h}}class Uo extends Vo{constructor(s,h){super(s,h),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Hu extends Vo{constructor(s,h){super(s,h),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class Qb extends Vo{constructor(s,h){super(s,h),this.current=re.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const yk=new Float32Array(16);function u_(c){return[pr(255*c.r,255*c.g),pr(255*c.b,255*c.a)]}class Fh{constructor(s,h,m){this.value=s,this.uniformNames=h.map(b=>`u_${b}`),this.type=m}setUniform(s,h,m){s.set(m.constantOr(this.value))}getBinding(s,h,m){return this.type==="color"?new Qb(s,h):new Uo(s,h)}}class qu{constructor(s,h){this.uniformNames=h.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=s.tlbr}setUniform(s,h,m,b){const T=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;T&&s.set(T)}getBinding(s,h,m){return m.substr(0,9)==="u_pattern"?new Hu(s,h):new Uo(s,h)}}class $o{constructor(s,h,m,b){this.expression=s,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(T=>({name:`a_${T}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(s,h,m,b,T){const C=this.paintVertexArray.length,D=this.expression.evaluate(new Jr(0),h,{},b,[],T);this.paintVertexArray.resize(s),this._setPaintValue(C,s,D)}updatePaintArray(s,h,m,b){const T=this.expression.evaluate({zoom:0},m,b);this._setPaintValue(s,h,T)}_setPaintValue(s,h,m){if(this.type==="color"){const b=u_(m);for(let T=s;T<h;T++)this.paintVertexArray.emplace(T,b[0],b[1])}else{for(let b=s;b<h;b++)this.paintVertexArray.emplace(b,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fa{constructor(s,h,m,b,T,C){this.expression=s,this.uniformNames=h.map(D=>`u_${D}_t`),this.type=m,this.useIntegerZoom=b,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=h.map(D=>({name:`a_${D}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(s,h,m,b,T){const C=this.expression.evaluate(new Jr(this.zoom),h,{},b,[],T),D=this.expression.evaluate(new Jr(this.zoom+1),h,{},b,[],T),O=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(O,s,C,D)}updatePaintArray(s,h,m,b){const T=this.expression.evaluate({zoom:this.zoom},m,b),C=this.expression.evaluate({zoom:this.zoom+1},m,b);this._setPaintValue(s,h,T,C)}_setPaintValue(s,h,m,b){if(this.type==="color"){const T=u_(m),C=u_(b);for(let D=s;D<h;D++)this.paintVertexArray.emplace(D,T[0],T[1],C[0],C[1])}else{for(let T=s;T<h;T++)this.paintVertexArray.emplace(T,m,b);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(b))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,h){const m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,b=y(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);s.set(b)}getBinding(s,h,m){return new Uo(s,h)}}class ks{constructor(s,h,m,b,T,C){this.expression=s,this.type=h,this.useIntegerZoom=m,this.zoom=b,this.layerId=C,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T}populatePaintArray(s,h,m){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(b,s,h.patterns&&h.patterns[this.layerId],m)}updatePaintArray(s,h,m,b,T){this._setPaintValues(s,h,m.patterns&&m.patterns[this.layerId],T)}_setPaintValues(s,h,m,b){if(!b||!m)return;const{min:T,mid:C,max:D}=m,O=b[T],F=b[C],$=b[D];if(O&&F&&$)for(let G=s;G<h;G++)this.zoomInPaintVertexArray.emplace(G,F.tl[0],F.tl[1],F.br[0],F.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],F.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,F.tl[0],F.tl[1],F.br[0],F.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],F.pixelRatio,$.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Mn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Mn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ew{constructor(s,h,m){this.binders={},this._buffers=[];const b=[];for(const T in s.paint._values){if(!m(T))continue;const C=s.paint.get(T);if(!(C instanceof ha&&jr(C.property.specification)))continue;const D=xk(T,s.type),O=C.value,F=C.property.specification.type,$=C.property.useIntegerZoom,G=C.property.specification["property-type"],X=G==="cross-faded"||G==="cross-faded-data-driven";if(O.kind==="constant")this.binders[T]=X?new qu(O.value,D):new Fh(O.value,D,F),b.push(`/u_${T}`);else if(O.kind==="source"||X){const J=tw(T,F,"source");this.binders[T]=X?new ks(O,F,$,h,J,s.id):new $o(O,D,F,J),b.push(`/a_${T}`)}else{const J=tw(T,F,"composite");this.binders[T]=new Fa(O,D,F,$,h,J),b.push(`/z_${T}`)}}this.cacheKey=b.sort().join("")}getMaxValue(s){const h=this.binders[s];return h instanceof $o||h instanceof Fa?h.maxValue:0}populatePaintArrays(s,h,m,b,T){for(const C in this.binders){const D=this.binders[C];(D instanceof $o||D instanceof Fa||D instanceof ks)&&D.populatePaintArray(s,h,m,b,T)}}setConstantPatternPositions(s,h){for(const m in this.binders){const b=this.binders[m];b instanceof qu&&b.setConstantPatternPositions(s,h)}}updatePaintArrays(s,h,m,b,T){let C=!1;for(const D in s){const O=h.getPositions(D);for(const F of O){const $=m.feature(F.index);for(const G in this.binders){const X=this.binders[G];if((X instanceof $o||X instanceof Fa||X instanceof ks)&&X.expression.isStateDependent===!0){const J=b.paint.get(G);X.expression=J.value,X.updatePaintArray(F.start,F.end,$,s[D],T),C=!0}}}}return C}defines(){const s=[];for(const h in this.binders){const m=this.binders[h];(m instanceof Fh||m instanceof qu)&&s.push(...m.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return s}getBinderAttributes(){const s=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof $o||m instanceof Fa)for(let b=0;b<m.paintVertexAttributes.length;b++)s.push(m.paintVertexAttributes[b].name);else if(m instanceof ks)for(let b=0;b<Mn.members.length;b++)s.push(Mn.members[b].name)}return s}getBinderUniforms(){const s=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof Fh||m instanceof qu||m instanceof Fa)for(const b of m.uniformNames)s.push(b)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,h){const m=[];for(const b in this.binders){const T=this.binders[b];if(T instanceof Fh||T instanceof qu||T instanceof Fa){for(const C of T.uniformNames)if(h[C]){const D=T.getBinding(s,h[C],C);m.push({name:C,property:b,binding:D})}}}return m}setUniforms(s,h,m,b){for(const{name:T,property:C,binding:D}of h)this.binders[C].setUniform(D,b,m.get(C),T)}updatePaintBuffers(s){this._buffers=[];for(const h in this.binders){const m=this.binders[h];if(s&&m instanceof ks){const b=s.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(m instanceof $o||m instanceof Fa)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(s){for(const h in this.binders){const m=this.binders[h];(m instanceof $o||m instanceof Fa||m instanceof ks)&&m.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const h=this.binders[s];(h instanceof $o||h instanceof Fa||h instanceof ks)&&h.destroy()}}}class Al{constructor(s,h,m=()=>!0){this.programConfigurations={};for(const b of s)this.programConfigurations[b.id]=new ew(b,h,m);this.needsUpload=!1,this._featureMap=new Ds,this._bufferOffset=0}populatePaintArrays(s,h,m,b,T,C){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(s,h,b,T,C);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,h,m,b){for(const T of m)this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(s,this._featureMap,h,T,b)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function xk(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function tw(c,s,h){const m={color:{source:g,composite:De},number:{source:oe,composite:g}},b=function(T){return{"line-pattern":{source:In,composite:In},"fill-pattern":{source:In,composite:In},"fill-extrusion-pattern":{source:In,composite:In}}[T]}(c);return b&&b[h]||m[s][h]}ht("ConstantBinder",Fh),ht("CrossFadedConstantBinder",qu),ht("SourceExpressionBinder",$o),ht("CrossFadedCompositeBinder",ks),ht("CompositeExpressionBinder",Fa),ht("ProgramConfiguration",ew,{omit:["_buffers"]}),ht("ProgramConfigurationSet",Al);var xn=8192;const c_=Math.pow(2,14)-1,rw=-c_-1;function Il(c){const s=xn/c.extent,h=c.loadGeometry();for(let m=0;m<h.length;m++){const b=h[m];for(let T=0;T<b.length;T++){const C=b[T],D=Math.round(C.x*s),O=Math.round(C.y*s);C.x=y(D,rw,c_),C.y=y(O,rw,c_),(D<C.x||D>C.x+1||O<C.y||O>C.y+1)&&H("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Ml(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?Il(c):[]}}function Ip(c,s,h,m,b){c.emplaceBack(2*s+(m+1)/2,2*h+(b+1)/2)}class h_{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new xr,this.indexArray=new ii,this.segments=new Kt,this.programConfigurations=new Al(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){const b=this.layers[0],T=[];let C=null,D=!1;b.type==="circle"&&(C=b.layout.get("circle-sort-key"),D=!C.isConstant());for(const{feature:O,id:F,index:$,sourceLayerIndex:G}of s){const X=this.layers[0]._featureFilter.needGeometry,J=Ml(O,X);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),J,m))continue;const Q=D?C.evaluate(J,{},m):void 0,he={id:F,properties:O.properties,type:O.type,sourceLayerIndex:G,index:$,geometry:X?J.geometry:Il(O),patterns:{},sortKey:Q};T.push(he)}D&&T.sort((O,F)=>O.sortKey-F.sortKey);for(const O of T){const{geometry:F,index:$,sourceLayerIndex:G}=O,X=s[$].feature;this.addFeature(O,F,$,m),h.featureIndex.insert(X,F,$,G,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,yn),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,h,m,b){for(const T of h)for(const C of T){const D=C.x,O=C.y;if(D<0||D>=xn||O<0||O>=xn)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),$=F.vertexLength;Ip(this.layoutVertexArray,D,O,-1,-1),Ip(this.layoutVertexArray,D,O,1,-1),Ip(this.layoutVertexArray,D,O,1,1),Ip(this.layoutVertexArray,D,O,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+3,$+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{},b)}}function nw(c,s){for(let h=0;h<c.length;h++)if(Wu(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(Wu(c,s[h]))return!0;return!!f_(c,s)}function bk(c,s,h){return!!Wu(c,s)||!!d_(s,c,h)}function iw(c,s){if(c.length===1)return ow(s,c[0]);for(let h=0;h<s.length;h++){const m=s[h];for(let b=0;b<m.length;b++)if(Wu(c,m[b]))return!0}for(let h=0;h<c.length;h++)if(ow(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(f_(c,s[h]))return!0;return!1}function wk(c,s,h){if(c.length>1){if(f_(c,s))return!0;for(let m=0;m<s.length;m++)if(d_(s[m],c,h))return!0}for(let m=0;m<c.length;m++)if(d_(c[m],s,h))return!0;return!1}function f_(c,s){if(c.length===0||s.length===0)return!1;for(let h=0;h<c.length-1;h++){const m=c[h],b=c[h+1];for(let T=0;T<s.length-1;T++)if(Sk(m,b,s[T],s[T+1]))return!0}return!1}function Sk(c,s,h,m){return Z(c,h,m)!==Z(s,h,m)&&Z(c,s,h)!==Z(c,s,m)}function d_(c,s,h){const m=h*h;if(s.length===1)return c.distSqr(s[0])<m;for(let b=1;b<s.length;b++)if(aw(c,s[b-1],s[b])<m)return!0;return!1}function aw(c,s,h){const m=s.distSqr(h);if(m===0)return c.distSqr(s);const b=((c.x-s.x)*(h.x-s.x)+(c.y-s.y)*(h.y-s.y))/m;return c.distSqr(b<0?s:b>1?h:h.sub(s)._mult(b)._add(s))}function ow(c,s){let h,m,b,T=!1;for(let C=0;C<c.length;C++){h=c[C];for(let D=0,O=h.length-1;D<h.length;O=D++)m=h[D],b=h[O],m.y>s.y!=b.y>s.y&&s.x<(b.x-m.x)*(s.y-m.y)/(b.y-m.y)+m.x&&(T=!T)}return T}function Wu(c,s){let h=!1;for(let m=0,b=c.length-1;m<c.length;b=m++){const T=c[m],C=c[b];T.y>s.y!=C.y>s.y&&s.x<(C.x-T.x)*(s.y-T.y)/(C.y-T.y)+T.x&&(h=!h)}return h}function Tk(c,s,h){const m=h[0],b=h[2];if(c.x<m.x&&s.x<m.x||c.x>b.x&&s.x>b.x||c.y<m.y&&s.y<m.y||c.y>b.y&&s.y>b.y)return!1;const T=Z(c,s,h[0]);return T!==Z(c,s,h[1])||T!==Z(c,s,h[2])||T!==Z(c,s,h[3])}function Nh(c,s,h){const m=s.paint.get(c).value;return m.kind==="constant"?m.value:h.programConfigurations.get(s.id).getMaxValue(c)}function Mp(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Pp(c,s,h,m,b){if(!s[0]&&!s[1])return c;const T=Ce.convert(s)._mult(b);h==="viewport"&&T._rotate(-m);const C=[];for(let D=0;D<c.length;D++)C.push(c[D].sub(T));return C}ht("CircleBucket",h_,{omit:["layers"]});const Ek=new On({"circle-sort-key":new Mt(Ne.layout_circle["circle-sort-key"])});var Ck={paint:new On({"circle-radius":new Mt(Ne.paint_circle["circle-radius"]),"circle-color":new Mt(Ne.paint_circle["circle-color"]),"circle-blur":new Mt(Ne.paint_circle["circle-blur"]),"circle-opacity":new Mt(Ne.paint_circle["circle-opacity"]),"circle-translate":new gt(Ne.paint_circle["circle-translate"]),"circle-translate-anchor":new gt(Ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gt(Ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gt(Ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mt(Ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mt(Ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mt(Ne.paint_circle["circle-stroke-opacity"])}),layout:Ek},ai=1e-6,oi=typeof Float32Array<"u"?Float32Array:Array;function sw(){var c=new oi(9);return oi!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function p_(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function lw(c,s,h){var m=s[0],b=s[1],T=s[2],C=s[3],D=s[4],O=s[5],F=s[6],$=s[7],G=s[8],X=s[9],J=s[10],Q=s[11],he=s[12],ce=s[13],Ee=s[14],ke=s[15],Te=h[0],Me=h[1],Ue=h[2],Ve=h[3];return c[0]=Te*m+Me*D+Ue*G+Ve*he,c[1]=Te*b+Me*O+Ue*X+Ve*ce,c[2]=Te*T+Me*F+Ue*J+Ve*Ee,c[3]=Te*C+Me*$+Ue*Q+Ve*ke,c[4]=(Te=h[4])*m+(Me=h[5])*D+(Ue=h[6])*G+(Ve=h[7])*he,c[5]=Te*b+Me*O+Ue*X+Ve*ce,c[6]=Te*T+Me*F+Ue*J+Ve*Ee,c[7]=Te*C+Me*$+Ue*Q+Ve*ke,c[8]=(Te=h[8])*m+(Me=h[9])*D+(Ue=h[10])*G+(Ve=h[11])*he,c[9]=Te*b+Me*O+Ue*X+Ve*ce,c[10]=Te*T+Me*F+Ue*J+Ve*Ee,c[11]=Te*C+Me*$+Ue*Q+Ve*ke,c[12]=(Te=h[12])*m+(Me=h[13])*D+(Ue=h[14])*G+(Ve=h[15])*he,c[13]=Te*b+Me*O+Ue*X+Ve*ce,c[14]=Te*T+Me*F+Ue*J+Ve*Ee,c[15]=Te*C+Me*$+Ue*Q+Ve*ke,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var Vh,Ak=lw;function uw(){var c=new oi(3);return oi!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function cw(c,s,h){var m=new oi(3);return m[0]=c,m[1]=s,m[2]=h,m}function Dp(c,s,h){var m=s[0],b=s[1],T=s[2],C=s[3];return c[0]=h[0]*m+h[4]*b+h[8]*T+h[12]*C,c[1]=h[1]*m+h[5]*b+h[9]*T+h[13]*C,c[2]=h[2]*m+h[6]*b+h[10]*T+h[14]*C,c[3]=h[3]*m+h[7]*b+h[11]*T+h[15]*C,c}function hw(){var c=new oi(4);return oi!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function fw(c,s){const h=Dp([],[c.x,c.y,0,1],s);return new Ce(h[0]/h[3],h[1]/h[3])}uw(),Vh=new oi(4),oi!=Float32Array&&(Vh[0]=0,Vh[1]=0,Vh[2]=0,Vh[3]=0),uw(),cw(1,0,0),cw(0,1,0),hw(),hw(),sw(),function(){var c;c=new oi(2),oi!=Float32Array&&(c[0]=0,c[1]=0)}();class dw extends h_{}ht("HeatmapBucket",dw,{omit:["layers"]});var Ik={paint:new On({"heatmap-radius":new Mt(Ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mt(Ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gt(Ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ao(Ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gt(Ne.paint_heatmap["heatmap-opacity"])})};function m_(c,{width:s,height:h},m,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==s*h*m)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${s*h*m}`)}else b=new Uint8Array(s*h*m);return c.width=s,c.height=h,c.data=b,c}function pw(c,{width:s,height:h},m){if(s===c.width&&h===c.height)return;const b=m_({},{width:s,height:h},m);v_(c,b,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,h)},m),c.width=s,c.height=h,c.data=b.data}function v_(c,s,h,m,b,T){if(b.width===0||b.height===0)return s;if(b.width>c.width||b.height>c.height||h.x>c.width-b.width||h.y>c.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>s.width||b.height>s.height||m.x>s.width-b.width||m.y>s.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const C=c.data,D=s.data;if(C===D)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<b.height;O++){const F=((h.y+O)*c.width+h.x)*T,$=((m.y+O)*s.width+m.x)*T;for(let G=0;G<b.width*T;G++)D[$+G]=C[F+G]}return s}class Uh{constructor(s,h){m_(this,s,1,h)}resize(s){pw(this,s,1)}clone(){return new Uh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,m,b,T){v_(s,h,m,b,T,1)}}class ea{constructor(s,h){m_(this,s,4,h)}resize(s){pw(this,s,4)}replace(s,h){h?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new ea({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,m,b,T){v_(s,h,m,b,T,4)}}function mw(c){const s={},h=c.resolution||256,m=c.clips?c.clips.length:1,b=c.image||new ea({width:h,height:m});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const T=(C,D,O)=>{s[c.evaluationKey]=O;const F=c.expression.evaluate(s);b.data[C+D+0]=Math.floor(255*F.r/F.a),b.data[C+D+1]=Math.floor(255*F.g/F.a),b.data[C+D+2]=Math.floor(255*F.b/F.a),b.data[C+D+3]=Math.floor(255*F.a)};if(c.clips)for(let C=0,D=0;C<m;++C,D+=4*h)for(let O=0,F=0;O<h;O++,F+=4){const $=O/(h-1),{start:G,end:X}=c.clips[C];T(D,F,G*(1-$)+X*$)}else for(let C=0,D=0;C<h;C++,D+=4)T(0,D,C/(h-1));return b}ht("AlphaImage",Uh),ht("RGBAImage",ea);var Mk={paint:new On({"hillshade-illumination-direction":new gt(Ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new gt(Ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gt(Ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gt(Ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gt(Ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gt(Ne.paint_hillshade["hillshade-accent-color"])})};const Pk=dn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Dk}=Pk;var kp={exports:{}};function Lp(c,s,h){h=h||2;var m,b,T,C,D,O,F,$=s&&s.length,G=$?s[0]*h:c.length,X=vw(c,0,G,h,!0),J=[];if(!X||X.next===X.prev)return J;if($&&(X=function(he,ce,Ee,ke){var Te,Me,Ue,Ve=[];for(Te=0,Me=ce.length;Te<Me;Te++)(Ue=vw(he,ce[Te]*ke,Te<Me-1?ce[Te+1]*ke:he.length,ke,!1))===Ue.next&&(Ue.steiner=!0),Ve.push(Nk(Ue));for(Ve.sort(zk),Te=0;Te<Ve.length;Te++)Ee=Bk(Ve[Te],Ee);return Ee}(c,s,X,h)),c.length>80*h){m=T=c[0],b=C=c[1];for(var Q=h;Q<G;Q+=h)(D=c[Q])<m&&(m=D),(O=c[Q+1])<b&&(b=O),D>T&&(T=D),O>C&&(C=O);F=(F=Math.max(T-m,C-b))!==0?32767/F:0}return $h(X,J,h,m,b,F,0),J}function vw(c,s,h,m,b){var T,C;if(b===y_(c,s,h,m)>0)for(T=s;T<h;T+=m)C=yw(T,c[T],c[T+1],C);else for(T=h-m;T>=s;T-=m)C=yw(T,c[T],c[T+1],C);return C&&Op(C,C.next)&&(Gh(C),C=C.next),C}function Pl(c,s){if(!c)return c;s||(s=c);var h,m=c;do if(h=!1,m.steiner||!Op(m,m.next)&&hn(m.prev,m,m.next)!==0)m=m.next;else{if(Gh(m),(m=s=m.prev)===m.next)break;h=!0}while(h||m!==s);return s}function $h(c,s,h,m,b,T,C){if(c){!C&&T&&function($,G,X,J){var Q=$;do Q.z===0&&(Q.z=g_(Q.x,Q.y,G,X,J)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==$);Q.prevZ.nextZ=null,Q.prevZ=null,function(he){var ce,Ee,ke,Te,Me,Ue,Ve,ct,pt=1;do{for(Ee=he,he=null,Me=null,Ue=0;Ee;){for(Ue++,ke=Ee,Ve=0,ce=0;ce<pt&&(Ve++,ke=ke.nextZ);ce++);for(ct=pt;Ve>0||ct>0&&ke;)Ve!==0&&(ct===0||!ke||Ee.z<=ke.z)?(Te=Ee,Ee=Ee.nextZ,Ve--):(Te=ke,ke=ke.nextZ,ct--),Me?Me.nextZ=Te:he=Te,Te.prevZ=Me,Me=Te;Ee=ke}Me.nextZ=null,pt*=2}while(Ue>1)}(Q)}(c,m,b,T);for(var D,O,F=c;c.prev!==c.next;)if(D=c.prev,O=c.next,T?Lk(c,m,b,T):kk(c))s.push(D.i/h|0),s.push(c.i/h|0),s.push(O.i/h|0),Gh(c),c=O.next,F=O.next;else if((c=O)===F){C?C===1?$h(c=Ok(Pl(c),s,h),s,h,m,b,T,2):C===2&&Rk(c,s,h,m,b,T):$h(Pl(c),s,h,m,b,T,1);break}}}function kk(c){var s=c.prev,h=c,m=c.next;if(hn(s,h,m)>=0)return!1;for(var b=s.x,T=h.x,C=m.x,D=s.y,O=h.y,F=m.y,$=b<T?b<C?b:C:T<C?T:C,G=D<O?D<F?D:F:O<F?O:F,X=b>T?b>C?b:C:T>C?T:C,J=D>O?D>F?D:F:O>F?O:F,Q=m.next;Q!==s;){if(Q.x>=$&&Q.x<=X&&Q.y>=G&&Q.y<=J&&Zu(b,D,T,O,C,F,Q.x,Q.y)&&hn(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function Lk(c,s,h,m){var b=c.prev,T=c,C=c.next;if(hn(b,T,C)>=0)return!1;for(var D=b.x,O=T.x,F=C.x,$=b.y,G=T.y,X=C.y,J=D<O?D<F?D:F:O<F?O:F,Q=$<G?$<X?$:X:G<X?G:X,he=D>O?D>F?D:F:O>F?O:F,ce=$>G?$>X?$:X:G>X?G:X,Ee=g_(J,Q,s,h,m),ke=g_(he,ce,s,h,m),Te=c.prevZ,Me=c.nextZ;Te&&Te.z>=Ee&&Me&&Me.z<=ke;){if(Te.x>=J&&Te.x<=he&&Te.y>=Q&&Te.y<=ce&&Te!==b&&Te!==C&&Zu(D,$,O,G,F,X,Te.x,Te.y)&&hn(Te.prev,Te,Te.next)>=0||(Te=Te.prevZ,Me.x>=J&&Me.x<=he&&Me.y>=Q&&Me.y<=ce&&Me!==b&&Me!==C&&Zu(D,$,O,G,F,X,Me.x,Me.y)&&hn(Me.prev,Me,Me.next)>=0))return!1;Me=Me.nextZ}for(;Te&&Te.z>=Ee;){if(Te.x>=J&&Te.x<=he&&Te.y>=Q&&Te.y<=ce&&Te!==b&&Te!==C&&Zu(D,$,O,G,F,X,Te.x,Te.y)&&hn(Te.prev,Te,Te.next)>=0)return!1;Te=Te.prevZ}for(;Me&&Me.z<=ke;){if(Me.x>=J&&Me.x<=he&&Me.y>=Q&&Me.y<=ce&&Me!==b&&Me!==C&&Zu(D,$,O,G,F,X,Me.x,Me.y)&&hn(Me.prev,Me,Me.next)>=0)return!1;Me=Me.nextZ}return!0}function Ok(c,s,h){var m=c;do{var b=m.prev,T=m.next.next;!Op(b,T)&&gw(b,m,m.next,T)&&jh(b,T)&&jh(T,b)&&(s.push(b.i/h|0),s.push(m.i/h|0),s.push(T.i/h|0),Gh(m),Gh(m.next),m=c=T),m=m.next}while(m!==c);return Pl(m)}function Rk(c,s,h,m,b,T){var C=c;do{for(var D=C.next.next;D!==C.prev;){if(C.i!==D.i&&Vk(C,D)){var O=_w(C,D);return C=Pl(C,C.next),O=Pl(O,O.next),$h(C,s,h,m,b,T,0),void $h(O,s,h,m,b,T,0)}D=D.next}C=C.next}while(C!==c)}function zk(c,s){return c.x-s.x}function Bk(c,s){var h=function(b,T){var C,D=T,O=b.x,F=b.y,$=-1/0;do{if(F<=D.y&&F>=D.next.y&&D.next.y!==D.y){var G=D.x+(F-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(G<=O&&G>$&&($=G,C=D.x<D.next.x?D:D.next,G===O))return C}D=D.next}while(D!==T);if(!C)return null;var X,J=C,Q=C.x,he=C.y,ce=1/0;D=C;do O>=D.x&&D.x>=Q&&O!==D.x&&Zu(F<he?O:$,F,Q,he,F<he?$:O,F,D.x,D.y)&&(X=Math.abs(F-D.y)/(O-D.x),jh(D,b)&&(X<ce||X===ce&&(D.x>C.x||D.x===C.x&&Fk(C,D)))&&(C=D,ce=X)),D=D.next;while(D!==J);return C}(c,s);if(!h)return s;var m=_w(h,c);return Pl(m,m.next),Pl(h,h.next)}function Fk(c,s){return hn(c.prev,c,s.prev)<0&&hn(s.next,c,c.next)<0}function g_(c,s,h,m,b){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*b|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*b|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function Nk(c){var s=c,h=c;do(s.x<h.x||s.x===h.x&&s.y<h.y)&&(h=s),s=s.next;while(s!==c);return h}function Zu(c,s,h,m,b,T,C,D){return(b-C)*(s-D)>=(c-C)*(T-D)&&(c-C)*(m-D)>=(h-C)*(s-D)&&(h-C)*(T-D)>=(b-C)*(m-D)}function Vk(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(h,m){var b=h;do{if(b.i!==h.i&&b.next.i!==h.i&&b.i!==m.i&&b.next.i!==m.i&&gw(b,b.next,h,m))return!0;b=b.next}while(b!==h);return!1}(c,s)&&(jh(c,s)&&jh(s,c)&&function(h,m){var b=h,T=!1,C=(h.x+m.x)/2,D=(h.y+m.y)/2;do b.y>D!=b.next.y>D&&b.next.y!==b.y&&C<(b.next.x-b.x)*(D-b.y)/(b.next.y-b.y)+b.x&&(T=!T),b=b.next;while(b!==h);return T}(c,s)&&(hn(c.prev,c,s.prev)||hn(c,s.prev,s))||Op(c,s)&&hn(c.prev,c,c.next)>0&&hn(s.prev,s,s.next)>0)}function hn(c,s,h){return(s.y-c.y)*(h.x-s.x)-(s.x-c.x)*(h.y-s.y)}function Op(c,s){return c.x===s.x&&c.y===s.y}function gw(c,s,h,m){var b=zp(hn(c,s,h)),T=zp(hn(c,s,m)),C=zp(hn(h,m,c)),D=zp(hn(h,m,s));return b!==T&&C!==D||!(b!==0||!Rp(c,h,s))||!(T!==0||!Rp(c,m,s))||!(C!==0||!Rp(h,c,m))||!(D!==0||!Rp(h,s,m))}function Rp(c,s,h){return s.x<=Math.max(c.x,h.x)&&s.x>=Math.min(c.x,h.x)&&s.y<=Math.max(c.y,h.y)&&s.y>=Math.min(c.y,h.y)}function zp(c){return c>0?1:c<0?-1:0}function jh(c,s){return hn(c.prev,c,c.next)<0?hn(c,s,c.next)>=0&&hn(c,c.prev,s)>=0:hn(c,s,c.prev)<0||hn(c,c.next,s)<0}function _w(c,s){var h=new __(c.i,c.x,c.y),m=new __(s.i,s.x,s.y),b=c.next,T=s.prev;return c.next=s,s.prev=c,h.next=b,b.prev=h,m.next=h,h.prev=m,T.next=m,m.prev=T,m}function yw(c,s,h,m){var b=new __(c,s,h);return m?(b.next=m.next,b.prev=m,m.next.prev=b,m.next=b):(b.prev=b,b.next=b),b}function Gh(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function __(c,s,h){this.i=c,this.x=s,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y_(c,s,h,m){for(var b=0,T=s,C=h-m;T<h;T+=m)b+=(c[C]-c[T])*(c[T+1]+c[C+1]),C=T;return b}function Uk(c,s,h,m,b){xw(c,s,h||0,m||c.length-1,b||$k)}function xw(c,s,h,m,b){for(;m>h;){if(m-h>600){var T=m-h+1,C=s-h+1,D=Math.log(T),O=.5*Math.exp(2*D/3),F=.5*Math.sqrt(D*O*(T-O)/T)*(C-T/2<0?-1:1);xw(c,s,Math.max(h,Math.floor(s-C*O/T+F)),Math.min(m,Math.floor(s+(T-C)*O/T+F)),b)}var $=c[s],G=h,X=m;for(Hh(c,h,s),b(c[m],$)>0&&Hh(c,h,m);G<X;){for(Hh(c,G,X),G++,X--;b(c[G],$)<0;)G++;for(;b(c[X],$)>0;)X--}b(c[h],$)===0?Hh(c,h,X):Hh(c,++X,m),X<=s&&(h=X+1),s<=X&&(m=X-1)}}function Hh(c,s,h){var m=c[s];c[s]=c[h],c[h]=m}function $k(c,s){return c<s?-1:c>s?1:0}function x_(c,s){const h=c.length;if(h<=1)return[c];const m=[];let b,T;for(let C=0;C<h;C++){const D=ee(c[C]);D!==0&&(c[C].area=Math.abs(D),T===void 0&&(T=D<0),T===D<0?(b&&m.push(b),b=[c[C]]):b.push(c[C]))}if(b&&m.push(b),s>1)for(let C=0;C<m.length;C++)m[C].length<=s||(Uk(m[C],s,1,m[C].length-1,jk),m[C]=m[C].slice(0,s));return m}function jk(c,s){return s.area-c.area}function b_(c,s,h){const m=h.patternDependencies;let b=!1;for(const T of s){const C=T.paint.get(`${c}-pattern`);C.isConstant()||(b=!0);const D=C.constantOr(null);D&&(b=!0,m[D.to]=!0,m[D.from]=!0)}return b}function w_(c,s,h,m,b){const T=b.patternDependencies;for(const C of s){const D=C.paint.get(`${c}-pattern`).value;if(D.kind!=="constant"){let O=D.evaluate({zoom:m-1},h,{},b.availableImages),F=D.evaluate({zoom:m},h,{},b.availableImages),$=D.evaluate({zoom:m+1},h,{},b.availableImages);O=O&&O.name?O.name:O,F=F&&F.name?F.name:F,$=$&&$.name?$.name:$,T[O]=!0,T[F]=!0,T[$]=!0,h.patterns[C.id]={min:O,mid:F,max:$}}}return h}kp.exports=Lp,kp.exports.default=Lp,Lp.deviation=function(c,s,h,m){var b=s&&s.length,T=Math.abs(y_(c,0,b?s[0]*h:c.length,h));if(b)for(var C=0,D=s.length;C<D;C++)T-=Math.abs(y_(c,s[C]*h,C<D-1?s[C+1]*h:c.length,h));var O=0;for(C=0;C<m.length;C+=3){var F=m[C]*h,$=m[C+1]*h,G=m[C+2]*h;O+=Math.abs((c[F]-c[G])*(c[$+1]-c[F+1])-(c[F]-c[$])*(c[G+1]-c[F+1]))}return T===0&&O===0?0:Math.abs((O-T)/T)},Lp.flatten=function(c){for(var s=c[0][0].length,h={vertices:[],holes:[],dimensions:s},m=0,b=0;b<c.length;b++){for(var T=0;T<c[b].length;T++)for(var C=0;C<s;C++)h.vertices.push(c[b][T][C]);b>0&&h.holes.push(m+=c[b-1].length)}return h};class S_{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new br,this.indexArray=new ii,this.indexArray2=new Ba,this.programConfigurations=new Al(s.layers,s.zoom),this.segments=new Kt,this.segments2=new Kt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.hasPattern=b_("fill",this.layers,h);const b=this.layers[0].layout.get("fill-sort-key"),T=!b.isConstant(),C=[];for(const{feature:D,id:O,index:F,sourceLayerIndex:$}of s){const G=this.layers[0]._featureFilter.needGeometry,X=Ml(D,G);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),X,m))continue;const J=T?b.evaluate(X,{},m,h.availableImages):void 0,Q={id:O,properties:D.properties,type:D.type,sourceLayerIndex:$,index:F,geometry:G?X.geometry:Il(D),patterns:{},sortKey:J};C.push(Q)}T&&C.sort((D,O)=>D.sortKey-O.sortKey);for(const D of C){const{geometry:O,index:F,sourceLayerIndex:$}=D;if(this.hasPattern){const G=w_("fill",this.layers,D,this.zoom,h);this.patternFeatures.push(G)}else this.addFeature(D,O,F,m,{});h.featureIndex.insert(s[F].feature,O,F,$,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}addFeatures(s,h,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Dk),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,h,m,b,T){for(const C of x_(h,500)){let D=0;for(const J of C)D+=J.length;const O=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray),F=O.vertexLength,$=[],G=[];for(const J of C){if(J.length===0)continue;J!==C[0]&&G.push($.length/2);const Q=this.segments2.prepareSegment(J.length,this.layoutVertexArray,this.indexArray2),he=Q.vertexLength;this.layoutVertexArray.emplaceBack(J[0].x,J[0].y),this.indexArray2.emplaceBack(he+J.length-1,he),$.push(J[0].x),$.push(J[0].y);for(let ce=1;ce<J.length;ce++)this.layoutVertexArray.emplaceBack(J[ce].x,J[ce].y),this.indexArray2.emplaceBack(he+ce-1,he+ce),$.push(J[ce].x),$.push(J[ce].y);Q.vertexLength+=J.length,Q.primitiveLength+=J.length}const X=kp.exports($,G);for(let J=0;J<X.length;J+=3)this.indexArray.emplaceBack(F+X[J],F+X[J+1],F+X[J+2]);O.vertexLength+=D,O.primitiveLength+=X.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,T,b)}}ht("FillBucket",S_,{omit:["layers","patternFeatures"]});const Gk=new On({"fill-sort-key":new Mt(Ne.layout_fill["fill-sort-key"])});var Hk={paint:new On({"fill-antialias":new gt(Ne.paint_fill["fill-antialias"]),"fill-opacity":new Mt(Ne.paint_fill["fill-opacity"]),"fill-color":new Mt(Ne.paint_fill["fill-color"]),"fill-outline-color":new Mt(Ne.paint_fill["fill-outline-color"]),"fill-translate":new gt(Ne.paint_fill["fill-translate"]),"fill-translate-anchor":new gt(Ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ps(Ne.paint_fill["fill-pattern"])}),layout:Gk};const qk=dn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Wk=dn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Zk}=qk;var Ls={},Xk=Ce,bw=Xu;function Xu(c,s,h,m,b){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=b,c.readFields(Yk,this,s)}function Yk(c,s,h){c==1?s.id=h.readVarint():c==2?function(m,b){for(var T=m.readVarint()+m.pos;m.pos<T;){var C=b._keys[m.readVarint()],D=b._values[m.readVarint()];b.properties[C]=D}}(h,s):c==3?s.type=h.readVarint():c==4&&(s._geometry=h.pos)}function Kk(c){for(var s,h,m=0,b=0,T=c.length,C=T-1;b<T;C=b++)m+=((h=c[C]).x-(s=c[b]).x)*(s.y+h.y);return m}Xu.types=["Unknown","Point","LineString","Polygon"],Xu.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,h=c.readVarint()+c.pos,m=1,b=0,T=0,C=0,D=[];c.pos<h;){if(b<=0){var O=c.readVarint();m=7&O,b=O>>3}if(b--,m===1||m===2)T+=c.readSVarint(),C+=c.readSVarint(),m===1&&(s&&D.push(s),s=[]),s.push(new Xk(T,C));else{if(m!==7)throw new Error("unknown command "+m);s&&s.push(s[0].clone())}}return s&&D.push(s),D},Xu.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,h=1,m=0,b=0,T=0,C=1/0,D=-1/0,O=1/0,F=-1/0;c.pos<s;){if(m<=0){var $=c.readVarint();h=7&$,m=$>>3}if(m--,h===1||h===2)(b+=c.readSVarint())<C&&(C=b),b>D&&(D=b),(T+=c.readSVarint())<O&&(O=T),T>F&&(F=T);else if(h!==7)throw new Error("unknown command "+h)}return[C,O,D,F]},Xu.prototype.toGeoJSON=function(c,s,h){var m,b,T=this.extent*Math.pow(2,h),C=this.extent*c,D=this.extent*s,O=this.loadGeometry(),F=Xu.types[this.type];function $(J){for(var Q=0;Q<J.length;Q++){var he=J[Q];J[Q]=[360*(he.x+C)/T-180,360/Math.PI*Math.atan(Math.exp((180-360*(he.y+D)/T)*Math.PI/180))-90]}}switch(this.type){case 1:var G=[];for(m=0;m<O.length;m++)G[m]=O[m][0];$(O=G);break;case 2:for(m=0;m<O.length;m++)$(O[m]);break;case 3:for(O=function(J){var Q=J.length;if(Q<=1)return[J];for(var he,ce,Ee=[],ke=0;ke<Q;ke++){var Te=Kk(J[ke]);Te!==0&&(ce===void 0&&(ce=Te<0),ce===Te<0?(he&&Ee.push(he),he=[J[ke]]):he.push(J[ke]))}return he&&Ee.push(he),Ee}(O),m=0;m<O.length;m++)for(b=0;b<O[m].length;b++)$(O[m][b])}O.length===1?O=O[0]:F="Multi"+F;var X={type:"Feature",geometry:{type:F,coordinates:O},properties:this.properties};return"id"in this&&(X.id=this.id),X};var Jk=bw,ww=Sw;function Sw(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(Qk,this,s),this.length=this._features.length}function Qk(c,s,h){c===15?s.version=h.readVarint():c===1?s.name=h.readString():c===5?s.extent=h.readVarint():c===2?s._features.push(h.pos):c===3?s._keys.push(h.readString()):c===4&&s._values.push(function(m){for(var b=null,T=m.readVarint()+m.pos;m.pos<T;){var C=m.readVarint()>>3;b=C===1?m.readString():C===2?m.readFloat():C===3?m.readDouble():C===4?m.readVarint64():C===5?m.readVarint():C===6?m.readSVarint():C===7?m.readBoolean():null}return b}(h))}Sw.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new Jk(this._pbf,s,this.extent,this._keys,this._values)};var eL=ww;function tL(c,s,h){if(c===3){var m=new eL(h,h.readVarint()+h.pos);m.length&&(s[m.name]=m)}}Ls.VectorTile=function(c,s){this.layers=c.readFields(tL,{},s)},Ls.VectorTileFeature=bw,Ls.VectorTileLayer=ww;const rL=Ls.VectorTileFeature.types,T_=Math.pow(2,13);function qh(c,s,h,m,b,T,C,D){c.emplaceBack(s,h,2*Math.floor(m*T_)+C,b*T_*2,T*T_*2,Math.round(D))}class E_{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new er,this.centroidVertexArray=new Et,this.indexArray=new ii,this.programConfigurations=new Al(s.layers,s.zoom),this.segments=new Kt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.features=[],this.hasPattern=b_("fill-extrusion",this.layers,h);for(const{feature:b,id:T,index:C,sourceLayerIndex:D}of s){const O=this.layers[0]._featureFilter.needGeometry,F=Ml(b,O);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),F,m))continue;const $={id:T,sourceLayerIndex:D,index:C,geometry:O?F.geometry:Il(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(w_("fill-extrusion",this.layers,$,this.zoom,h)):this.addFeature($,$.geometry,C,m,{}),h.featureIndex.insert(b,$.geometry,C,D,this.index,!0)}}addFeatures(s,h,m){for(const b of this.features){const{geometry:T}=b;this.addFeature(b,T,b.index,h,m)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Zk),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,Wk.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,h,m,b,T){const C={x:0,y:0,vertexCount:0};for(const D of x_(h,500)){let O=0;for(const Q of D)O+=Q.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Q of D){if(Q.length===0||iL(Q))continue;let he=0;for(let ce=0;ce<Q.length;ce++){const Ee=Q[ce];if(ce>=1){const ke=Q[ce-1];if(!nL(Ee,ke)){F.vertexLength+4>Kt.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Te=Ee.sub(ke)._perp()._unit(),Me=ke.dist(Ee);he+Me>32768&&(he=0),qh(this.layoutVertexArray,Ee.x,Ee.y,Te.x,Te.y,0,0,he),qh(this.layoutVertexArray,Ee.x,Ee.y,Te.x,Te.y,0,1,he),C.x+=2*Ee.x,C.y+=2*Ee.y,C.vertexCount+=2,he+=Me,qh(this.layoutVertexArray,ke.x,ke.y,Te.x,Te.y,0,0,he),qh(this.layoutVertexArray,ke.x,ke.y,Te.x,Te.y,0,1,he),C.x+=2*ke.x,C.y+=2*ke.y,C.vertexCount+=2;const Ue=F.vertexLength;this.indexArray.emplaceBack(Ue,Ue+2,Ue+1),this.indexArray.emplaceBack(Ue+1,Ue+2,Ue+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+O>Kt.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(O,this.layoutVertexArray,this.indexArray)),rL[s.type]!=="Polygon")continue;const $=[],G=[],X=F.vertexLength;for(const Q of D)if(Q.length!==0){Q!==D[0]&&G.push($.length/2);for(let he=0;he<Q.length;he++){const ce=Q[he];qh(this.layoutVertexArray,ce.x,ce.y,0,0,1,1,0),C.x+=ce.x,C.y+=ce.y,C.vertexCount+=1,$.push(ce.x),$.push(ce.y)}}const J=kp.exports($,G);for(let Q=0;Q<J.length;Q+=3)this.indexArray.emplaceBack(X+J[Q],X+J[Q+2],X+J[Q+1]);F.primitiveLength+=J.length/3,F.vertexLength+=O}for(let D=0;D<C.vertexCount;D++)this.centroidVertexArray.emplaceBack(Math.floor(C.x/C.vertexCount),Math.floor(C.y/C.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,T,b)}}function nL(c,s){return c.x===s.x&&(c.x<0||c.x>xn)||c.y===s.y&&(c.y<0||c.y>xn)}function iL(c){return c.every(s=>s.x<0)||c.every(s=>s.x>xn)||c.every(s=>s.y<0)||c.every(s=>s.y>xn)}ht("FillExtrusionBucket",E_,{omit:["layers","features"]});var aL={paint:new On({"fill-extrusion-opacity":new gt(Ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mt(Ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gt(Ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gt(Ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ps(Ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mt(Ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mt(Ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gt(Ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Wh(c,s){return c.x*s.x+c.y*s.y}function Tw(c,s){if(c.length===1){let h=0;const m=s[h++];let b;for(;!b||m.equals(b);)if(b=s[h++],!b)return 1/0;for(;h<s.length;h++){const T=s[h],C=c[0],D=b.sub(m),O=T.sub(m),F=C.sub(m),$=Wh(D,D),G=Wh(D,O),X=Wh(O,O),J=Wh(F,D),Q=Wh(F,O),he=$*X-G*G,ce=(X*J-G*Q)/he,Ee=($*Q-G*J)/he,ke=m.z*(1-ce-Ee)+b.z*ce+T.z*Ee;if(isFinite(ke))return ke}return 1/0}{let h=1/0;for(const m of s)h=Math.min(h,m.z);return h}}const oL=dn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:sL}=oL,lL=dn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:uL}=lL,cL=Ls.VectorTileFeature.types,hL=Math.cos(Math.PI/180*37.5),Ew=Math.pow(2,14)/.5;class C_{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new ir,this.layoutVertexArray2=new Ir,this.indexArray=new ii,this.programConfigurations=new Al(s.layers,s.zoom),this.segments=new Kt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.hasPattern=b_("line",this.layers,h);const b=this.layers[0].layout.get("line-sort-key"),T=!b.isConstant(),C=[];for(const{feature:D,id:O,index:F,sourceLayerIndex:$}of s){const G=this.layers[0]._featureFilter.needGeometry,X=Ml(D,G);if(!this.layers[0]._featureFilter.filter(new Jr(this.zoom),X,m))continue;const J=T?b.evaluate(X,{},m):void 0,Q={id:O,properties:D.properties,type:D.type,sourceLayerIndex:$,index:F,geometry:G?X.geometry:Il(D),patterns:{},sortKey:J};C.push(Q)}T&&C.sort((D,O)=>D.sortKey-O.sortKey);for(const D of C){const{geometry:O,index:F,sourceLayerIndex:$}=D;if(this.hasPattern){const G=w_("line",this.layers,D,this.zoom,h);this.patternFeatures.push(G)}else this.addFeature(D,O,F,m,{});h.featureIndex.insert(s[F].feature,O,F,$,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}addFeatures(s,h,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,uL)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,sL),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,h,m,b,T){const C=this.layers[0].layout,D=C.get("line-join").evaluate(s,{}),O=C.get("line-cap"),F=C.get("line-miter-limit"),$=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const G of h)this.addLine(G,s,D,O,F,$);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,T,b)}addLine(s,h,m,b,T,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ee=0;Ee<s.length-1;Ee++)this.totalDistance+=s[Ee].dist(s[Ee+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=cL[h.type]==="Polygon";let O=s.length;for(;O>=2&&s[O-1].equals(s[O-2]);)O--;let F=0;for(;F<O-1&&s[F].equals(s[F+1]);)F++;if(O<(D?3:2))return;m==="bevel"&&(T=1.05);const $=this.overscaling<=16?122880/(512*this.overscaling):0,G=this.segments.prepareSegment(10*O,this.layoutVertexArray,this.indexArray);let X,J,Q,he,ce;this.e1=this.e2=-1,D&&(X=s[O-2],ce=s[F].sub(X)._unit()._perp());for(let Ee=F;Ee<O;Ee++){if(Q=Ee===O-1?D?s[F+1]:void 0:s[Ee+1],Q&&s[Ee].equals(Q))continue;ce&&(he=ce),X&&(J=X),X=s[Ee],ce=Q?Q.sub(X)._unit()._perp():he,he=he||ce;let ke=he.add(ce);ke.x===0&&ke.y===0||ke._unit();const Te=he.x*ce.x+he.y*ce.y,Me=ke.x*ce.x+ke.y*ce.y,Ue=Me!==0?1/Me:1/0,Ve=2*Math.sqrt(2-2*Me),ct=Me<hL&&J&&Q,pt=he.x*ce.y-he.y*ce.x>0;if(ct&&Ee>F){const We=X.dist(J);if(We>2*$){const rt=X.sub(X.sub(J)._mult($/We)._round());this.updateDistance(J,rt),this.addCurrentVertex(rt,he,0,0,G),J=rt}}const tt=J&&Q;let Ke=tt?m:D?"butt":b;if(tt&&Ke==="round"&&(Ue<C?Ke="miter":Ue<=2&&(Ke="fakeround")),Ke==="miter"&&Ue>T&&(Ke="bevel"),Ke==="bevel"&&(Ue>2&&(Ke="flipbevel"),Ue<T&&(Ke="miter")),J&&this.updateDistance(J,X),Ke==="miter")ke._mult(Ue),this.addCurrentVertex(X,ke,0,0,G);else if(Ke==="flipbevel"){if(Ue>100)ke=ce.mult(-1);else{const We=Ue*he.add(ce).mag()/he.sub(ce).mag();ke._perp()._mult(We*(pt?-1:1))}this.addCurrentVertex(X,ke,0,0,G),this.addCurrentVertex(X,ke.mult(-1),0,0,G)}else if(Ke==="bevel"||Ke==="fakeround"){const We=-Math.sqrt(Ue*Ue-1),rt=pt?We:0,Qe=pt?0:We;if(J&&this.addCurrentVertex(X,he,rt,Qe,G),Ke==="fakeround"){const qe=Math.round(180*Ve/Math.PI/20);for(let Ct=1;Ct<qe;Ct++){let _t=Ct/qe;if(_t!==.5){const Gr=_t-.5;_t+=_t*Gr*(_t-1)*((1.0904+Te*(Te*(3.55645-1.43519*Te)-3.2452))*Gr*Gr+(.848013+Te*(.215638*Te-1.06021)))}const qt=ce.sub(he)._mult(_t)._add(he)._unit()._mult(pt?-1:1);this.addHalfVertex(X,qt.x,qt.y,!1,pt,0,G)}}Q&&this.addCurrentVertex(X,ce,-rt,-Qe,G)}else if(Ke==="butt")this.addCurrentVertex(X,ke,0,0,G);else if(Ke==="square"){const We=J?1:-1;this.addCurrentVertex(X,ke,We,We,G)}else Ke==="round"&&(J&&(this.addCurrentVertex(X,he,0,0,G),this.addCurrentVertex(X,he,1,1,G,!0)),Q&&(this.addCurrentVertex(X,ce,-1,-1,G,!0),this.addCurrentVertex(X,ce,0,0,G)));if(ct&&Ee<O-1){const We=X.dist(Q);if(We>2*$){const rt=X.add(Q.sub(X)._mult($/We)._round());this.updateDistance(X,rt),this.addCurrentVertex(rt,ce,0,0,G),X=rt}}}}addCurrentVertex(s,h,m,b,T,C=!1){const D=h.y*b-h.x,O=-h.y-h.x*b;this.addHalfVertex(s,h.x+h.y*m,h.y-h.x*m,C,!1,m,T),this.addHalfVertex(s,D,O,C,!0,-b,T),this.distance>Ew/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(s,h,m,b,T,C))}addHalfVertex({x:s,y:h},m,b,T,C,D,O){const F=.5*(this.lineClips?this.scaledDistance*(Ew-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(T?1:0),(h<<1)+(C?1:0),Math.round(63*m)+128,Math.round(63*b)+128,1+(D===0?0:D<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const $=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),O.primitiveLength++),C?this.e2=$:this.e1=$}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,h){this.distance+=s.dist(h),this.updateScaledDistance()}}ht("LineBucket",C_,{omit:["layers","patternFeatures"]});const fL=new On({"line-cap":new gt(Ne.layout_line["line-cap"]),"line-join":new Mt(Ne.layout_line["line-join"]),"line-miter-limit":new gt(Ne.layout_line["line-miter-limit"]),"line-round-limit":new gt(Ne.layout_line["line-round-limit"]),"line-sort-key":new Mt(Ne.layout_line["line-sort-key"])});var Cw={paint:new On({"line-opacity":new Mt(Ne.paint_line["line-opacity"]),"line-color":new Mt(Ne.paint_line["line-color"]),"line-translate":new gt(Ne.paint_line["line-translate"]),"line-translate-anchor":new gt(Ne.paint_line["line-translate-anchor"]),"line-width":new Mt(Ne.paint_line["line-width"]),"line-gap-width":new Mt(Ne.paint_line["line-gap-width"]),"line-offset":new Mt(Ne.paint_line["line-offset"]),"line-blur":new Mt(Ne.paint_line["line-blur"]),"line-dasharray":new Oh(Ne.paint_line["line-dasharray"]),"line-pattern":new Ps(Ne.paint_line["line-pattern"]),"line-gradient":new ao(Ne.paint_line["line-gradient"])}),layout:fL};const Aw=new class extends Mt{possiblyEvaluate(c,s){return s=new Jr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(c,s)}evaluate(c,s,h,m){return s=A({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(c,s,h,m)}}(Cw.paint.properties["line-width"].specification);function Iw(c,s){return s>0?s+2*c:c}Aw.useIntegerZoom=!0;const dL=dn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),pL=dn([{name:"a_projected_pos",components:3,type:"Float32"}],4);dn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const mL=dn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);dn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Mw=dn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),vL=dn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function gL(c,s,h){return c.sections.forEach(m=>{m.text=function(b,T,C){const D=T.layout.get("text-transform").evaluate(C,{});return D==="uppercase"?b=b.toLocaleUpperCase():D==="lowercase"&&(b=b.toLocaleLowerCase()),Bi.applyArabicShaping&&(b=Bi.applyArabicShaping(b)),b}(m.text,s,h)}),c}dn([{name:"triangle",components:3,type:"Uint16"}]),dn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),dn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),dn([{type:"Float32",name:"offsetX"}]),dn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Zh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Rn=24,A_=Or,Pw=function(c,s,h,m,b){var T,C,D=8*b-m-1,O=(1<<D)-1,F=O>>1,$=-7,G=h?b-1:0,X=h?-1:1,J=c[s+G];for(G+=X,T=J&(1<<-$)-1,J>>=-$,$+=D;$>0;T=256*T+c[s+G],G+=X,$-=8);for(C=T&(1<<-$)-1,T>>=-$,$+=m;$>0;C=256*C+c[s+G],G+=X,$-=8);if(T===0)T=1-F;else{if(T===O)return C?NaN:1/0*(J?-1:1);C+=Math.pow(2,m),T-=F}return(J?-1:1)*C*Math.pow(2,T-m)},Dw=function(c,s,h,m,b,T){var C,D,O,F=8*T-b-1,$=(1<<F)-1,G=$>>1,X=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=m?0:T-1,Q=m?1:-1,he=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(D=isNaN(s)?1:0,C=$):(C=Math.floor(Math.log(s)/Math.LN2),s*(O=Math.pow(2,-C))<1&&(C--,O*=2),(s+=C+G>=1?X/O:X*Math.pow(2,1-G))*O>=2&&(C++,O/=2),C+G>=$?(D=0,C=$):C+G>=1?(D=(s*O-1)*Math.pow(2,b),C+=G):(D=s*Math.pow(2,G-1)*Math.pow(2,b),C=0));b>=8;c[h+J]=255&D,J+=Q,D/=256,b-=8);for(C=C<<b|D,F+=b;F>0;c[h+J]=255&C,J+=Q,C/=256,F-=8);c[h+J-Q]|=128*he};function Or(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Or.Varint=0,Or.Fixed64=1,Or.Bytes=2,Or.Fixed32=5;var Os,I_=4294967296,kw=1/I_,Lw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function jo(c){return c.type===Or.Bytes?c.readVarint()+c.pos:c.pos+1}function Yu(c,s,h){return h?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function Ow(c,s,h){var m=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));h.realloc(m);for(var b=h.pos-1;b>=c;b--)h.buf[b+m]=h.buf[b]}function _L(c,s){for(var h=0;h<c.length;h++)s.writeVarint(c[h])}function yL(c,s){for(var h=0;h<c.length;h++)s.writeSVarint(c[h])}function xL(c,s){for(var h=0;h<c.length;h++)s.writeFloat(c[h])}function bL(c,s){for(var h=0;h<c.length;h++)s.writeDouble(c[h])}function wL(c,s){for(var h=0;h<c.length;h++)s.writeBoolean(c[h])}function SL(c,s){for(var h=0;h<c.length;h++)s.writeFixed32(c[h])}function TL(c,s){for(var h=0;h<c.length;h++)s.writeSFixed32(c[h])}function EL(c,s){for(var h=0;h<c.length;h++)s.writeFixed64(c[h])}function CL(c,s){for(var h=0;h<c.length;h++)s.writeSFixed64(c[h])}function Bp(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function Ku(c,s,h){c[h]=s,c[h+1]=s>>>8,c[h+2]=s>>>16,c[h+3]=s>>>24}function Rw(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}function AL(c,s,h){c===1&&h.readMessage(IL,s)}function IL(c,s,h){if(c===3){const{id:m,bitmap:b,width:T,height:C,left:D,top:O,advance:F}=h.readMessage(ML,{});s.push({id:m,bitmap:new Uh({width:T+6,height:C+6},b),metrics:{width:T,height:C,left:D,top:O,advance:F}})}}function ML(c,s,h){c===1?s.id=h.readVarint():c===2?s.bitmap=h.readBytes():c===3?s.width=h.readVarint():c===4?s.height=h.readVarint():c===5?s.left=h.readSVarint():c===6?s.top=h.readSVarint():c===7&&(s.advance=h.readVarint())}function zw(c){let s=0,h=0;for(const C of c)s+=C.w*C.h,h=Math.max(h,C.w);c.sort((C,D)=>D.h-C.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),h),h:1/0}];let b=0,T=0;for(const C of c)for(let D=m.length-1;D>=0;D--){const O=m[D];if(!(C.w>O.w||C.h>O.h)){if(C.x=O.x,C.y=O.y,T=Math.max(T,C.y+C.h),b=Math.max(b,C.x+C.w),C.w===O.w&&C.h===O.h){const F=m.pop();D<m.length&&(m[D]=F)}else C.h===O.h?(O.x+=C.w,O.w-=C.w):C.w===O.w?(O.y+=C.h,O.h-=C.h):(m.push({x:O.x+C.w,y:O.y,w:O.w-C.w,h:C.h}),O.y+=C.h,O.h-=C.h);break}}return{w:b,h:T,fill:s/(b*T)||0}}Or.prototype={destroy:function(){this.buf=null},readFields:function(c,s,h){for(h=h||this.length;this.pos<h;){var m=this.readVarint(),b=m>>3,T=this.pos;this.type=7&m,c(b,s,this),this.pos===T&&this.skip(m)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=Bp(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=Rw(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=Bp(this.buf,this.pos)+Bp(this.buf,this.pos+4)*I_;return this.pos+=8,c},readSFixed64:function(){var c=Bp(this.buf,this.pos)+Rw(this.buf,this.pos+4)*I_;return this.pos+=8,c},readFloat:function(){var c=Pw(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=Pw(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,h,m=this.buf;return s=127&(h=m[this.pos++]),h<128?s:(s|=(127&(h=m[this.pos++]))<<7,h<128?s:(s|=(127&(h=m[this.pos++]))<<14,h<128?s:(s|=(127&(h=m[this.pos++]))<<21,h<128?s:function(b,T,C){var D,O,F=C.buf;if(D=(112&(O=F[C.pos++]))>>4,O<128||(D|=(127&(O=F[C.pos++]))<<3,O<128)||(D|=(127&(O=F[C.pos++]))<<10,O<128)||(D|=(127&(O=F[C.pos++]))<<17,O<128)||(D|=(127&(O=F[C.pos++]))<<24,O<128)||(D|=(1&(O=F[C.pos++]))<<31,O<128))return Yu(b,D,T);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(h=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&Lw?function(h,m,b){return Lw.decode(h.subarray(m,b))}(this.buf,s,c):function(h,m,b){for(var T="",C=m;C<b;){var D,O,F,$=h[C],G=null,X=$>239?4:$>223?3:$>191?2:1;if(C+X>b)break;X===1?$<128&&(G=$):X===2?(192&(D=h[C+1]))==128&&(G=(31&$)<<6|63&D)<=127&&(G=null):X===3?(O=h[C+2],(192&(D=h[C+1]))==128&&(192&O)==128&&((G=(15&$)<<12|(63&D)<<6|63&O)<=2047||G>=55296&&G<=57343)&&(G=null)):X===4&&(O=h[C+2],F=h[C+3],(192&(D=h[C+1]))==128&&(192&O)==128&&(192&F)==128&&((G=(15&$)<<18|(63&D)<<12|(63&O)<<6|63&F)<=65535||G>=1114112)&&(G=null)),G===null?(G=65533,X=1):G>65535&&(G-=65536,T+=String.fromCharCode(G>>>10&1023|55296),G=56320|1023&G),T+=String.fromCharCode(G),C+=X}return T}(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==Or.Bytes)return c.push(this.readVarint(s));var h=jo(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==Or.Bytes)return c.push(this.readSVarint());var s=jo(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Or.Bytes)return c.push(this.readBoolean());var s=jo(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Or.Bytes)return c.push(this.readFloat());var s=jo(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Or.Bytes)return c.push(this.readDouble());var s=jo(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Or.Bytes)return c.push(this.readFixed32());var s=jo(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Or.Bytes)return c.push(this.readSFixed32());var s=jo(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Or.Bytes)return c.push(this.readFixed64());var s=jo(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Or.Bytes)return c.push(this.readSFixed64());var s=jo(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===Or.Varint)for(;this.buf[this.pos++]>127;);else if(s===Or.Bytes)this.pos=this.readVarint()+this.pos;else if(s===Or.Fixed32)this.pos+=4;else{if(s!==Or.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var h=new Uint8Array(s);h.set(this.buf),this.buf=h,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Ku(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Ku(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Ku(this.buf,-1&c,this.pos),Ku(this.buf,Math.floor(c*kw),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Ku(this.buf,-1&c,this.pos),Ku(this.buf,Math.floor(c*kw),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(s,h){var m,b;if(s>=0?(m=s%4294967296|0,b=s/4294967296|0):(b=~(-s/4294967296),4294967295^(m=~(-s%4294967296))?m=m+1|0:(m=0,b=b+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(T,C,D){D.buf[D.pos++]=127&T|128,T>>>=7,D.buf[D.pos++]=127&T|128,T>>>=7,D.buf[D.pos++]=127&T|128,T>>>=7,D.buf[D.pos++]=127&T|128,D.buf[D.pos]=127&(T>>>=7)}(m,0,h),function(T,C){var D=(7&T)<<4;C.buf[C.pos++]|=D|((T>>>=3)?128:0),T&&(C.buf[C.pos++]=127&T|((T>>>=7)?128:0),T&&(C.buf[C.pos++]=127&T|((T>>>=7)?128:0),T&&(C.buf[C.pos++]=127&T|((T>>>=7)?128:0),T&&(C.buf[C.pos++]=127&T|((T>>>=7)?128:0),T&&(C.buf[C.pos++]=127&T)))))}(b,h)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(Boolean(c))},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=function(m,b,T){for(var C,D,O=0;O<b.length;O++){if((C=b.charCodeAt(O))>55295&&C<57344){if(!D){C>56319||O+1===b.length?(m[T++]=239,m[T++]=191,m[T++]=189):D=C;continue}if(C<56320){m[T++]=239,m[T++]=191,m[T++]=189,D=C;continue}C=D-55296<<10|C-56320|65536,D=null}else D&&(m[T++]=239,m[T++]=191,m[T++]=189,D=null);C<128?m[T++]=C:(C<2048?m[T++]=C>>6|192:(C<65536?m[T++]=C>>12|224:(m[T++]=C>>18|240,m[T++]=C>>12&63|128),m[T++]=C>>6&63|128),m[T++]=63&C|128)}return T}(this.buf,c,this.pos);var h=this.pos-s;h>=128&&Ow(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),Dw(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),Dw(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var h=0;h<s;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,s){this.pos++;var h=this.pos;c(s,this);var m=this.pos-h;m>=128&&Ow(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,s,h){this.writeTag(c,Or.Bytes),this.writeRawMessage(s,h)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,_L,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,yL,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,wL,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,xL,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,bL,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,SL,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,TL,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,EL,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,CL,s)},writeBytesField:function(c,s){this.writeTag(c,Or.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,Or.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,Or.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,Or.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,Or.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,Or.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,Or.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,Or.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,Or.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,Or.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,Boolean(s))}};class M_{constructor(s,{pixelRatio:h,version:m,stretchX:b,stretchY:T,content:C}){this.paddedRect=s,this.pixelRatio=h,this.stretchX=b,this.stretchY=T,this.content=C,this.version=m}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Bw{constructor(s,h){const m={},b={};this.haveRenderCallbacks=[];const T=[];this.addImages(s,m,T),this.addImages(h,b,T);const{w:C,h:D}=zw(T),O=new ea({width:C||1,height:D||1});for(const F in s){const $=s[F],G=m[F].paddedRect;ea.copy($.data,O,{x:0,y:0},{x:G.x+1,y:G.y+1},$.data)}for(const F in h){const $=h[F],G=b[F].paddedRect,X=G.x+1,J=G.y+1,Q=$.data.width,he=$.data.height;ea.copy($.data,O,{x:0,y:0},{x:X,y:J},$.data),ea.copy($.data,O,{x:0,y:he-1},{x:X,y:J-1},{width:Q,height:1}),ea.copy($.data,O,{x:0,y:0},{x:X,y:J+he},{width:Q,height:1}),ea.copy($.data,O,{x:Q-1,y:0},{x:X-1,y:J},{width:1,height:he}),ea.copy($.data,O,{x:0,y:0},{x:X+Q,y:J},{width:1,height:he})}this.image=O,this.iconPositions=m,this.patternPositions=b}addImages(s,h,m){for(const b in s){const T=s[b],C={x:0,y:0,w:T.data.width+2,h:T.data.height+2};m.push(C),h[b]=new M_(C,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(s,h){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in s.updatedImages)this.patchUpdatedImage(this.iconPositions[m],s.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],s.getImage(m),h)}patchUpdatedImage(s,h,m){if(!s||!h||s.version===h.version)return;s.version=h.version;const[b,T]=s.tl;m.update(h.data,void 0,{x:b,y:T})}}ht("ImagePosition",M_),ht("ImageAtlas",Bw),a.WritingMode=void 0,(Os=a.WritingMode||(a.WritingMode={}))[Os.none=0]="none",Os[Os.horizontal=1]="horizontal",Os[Os.vertical=2]="vertical",Os[Os.horizontalOnly=3]="horizontalOnly";const Fp=-17;class Xh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,h){const m=new Xh;return m.scale=s||1,m.fontStack=h,m}static forImage(s){const h=new Xh;return h.imageName=s,h}}class Ju{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,h){const m=new Ju;for(let b=0;b<s.sections.length;b++){const T=s.sections[b];T.image?m.addImageSection(T):m.addTextSection(T,h)}return m}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let h="";for(let m=0;m<s.length;m++){const b=s.charCodeAt(m+1)||null,T=s.charCodeAt(m-1)||null;h+=b&&_p(b)&&!Zh[s[m+1]]||T&&_p(T)&&!Zh[s[m-1]]||!Zh[s[m]]?s[m]:Zh[s[m]]}return h}(this.text)}trim(){let s=0;for(let m=0;m<this.text.length&&Vp[this.text.charCodeAt(m)];m++)s++;let h=this.text.length;for(let m=this.text.length-1;m>=0&&m>=s&&Vp[this.text.charCodeAt(m)];m--)h--;this.text=this.text.substring(s,h),this.sectionIndex=this.sectionIndex.slice(s,h)}substring(s,h){const m=new Ju;return m.text=this.text.substring(s,h),m.sectionIndex=this.sectionIndex.slice(s,h),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,h)=>Math.max(s,this.sections[h].scale),0)}addTextSection(s,h){this.text+=s.text,this.sections.push(Xh.forText(s.scale,s.fontStack||h));const m=this.sections.length-1;for(let b=0;b<s.text.length;++b)this.sectionIndex.push(m)}addImageSection(s){const h=s.image?s.image.name:"";if(h.length===0)return void H("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(Xh.forImage(h)),this.sectionIndex.push(this.sections.length-1)):H("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Np(c,s,h,m,b,T,C,D,O,F,$,G,X,J,Q,he){const ce=Ju.fromFeature(c,b);let Ee;G===a.WritingMode.vertical&&ce.verticalizePunctuation();const{processBidirectionalText:ke,processStyledBidirectionalText:Te}=Bi;if(ke&&ce.sections.length===1){Ee=[];const Ve=ke(ce.toString(),P_(ce,F,T,s,m,J,Q));for(const ct of Ve){const pt=new Ju;pt.text=ct,pt.sections=ce.sections;for(let tt=0;tt<ct.length;tt++)pt.sectionIndex.push(0);Ee.push(pt)}}else if(Te){Ee=[];const Ve=Te(ce.text,ce.sectionIndex,P_(ce,F,T,s,m,J,Q));for(const ct of Ve){const pt=new Ju;pt.text=ct[0],pt.sectionIndex=ct[1],pt.sections=ce.sections,Ee.push(pt)}}else Ee=function(Ve,ct){const pt=[],tt=Ve.text;let Ke=0;for(const We of ct)pt.push(Ve.substring(Ke,We)),Ke=We;return Ke<tt.length&&pt.push(Ve.substring(Ke,tt.length)),pt}(ce,P_(ce,F,T,s,m,J,Q));const Me=[],Ue={positionedLines:Me,text:ce.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function(Ve,ct,pt,tt,Ke,We,rt,Qe,qe,Ct,_t,qt){let Gr=0,en=Fp,bn=0,ra=0;const $n=Qe==="right"?1:Qe==="left"?0:.5;let pn=0;for(const mn of Ke){mn.trim();const Gn=mn.getMaxScale(),Kn=(Gn-1)*Rn,si={positionedGlyphs:[],lineOffset:0};Ve.positionedLines[pn]=si;const bi=si.positionedGlyphs;let wi=0;if(!mn.length()){en+=We,++pn;continue}for(let kn=0;kn<mn.length();kn++){const Jt=mn.getSection(kn),Vi=mn.getSectionIndex(kn),Hn=mn.getCharCode(kn);let Jn=0,ma=null,Na=null,Va=null,Ho=Rn;const va=!(qe===a.WritingMode.horizontal||!_t&&!Ih(Hn)||_t&&(Vp[Hn]||(Dn=Hn,et.Arabic(Dn)||et["Arabic Supplement"](Dn)||et["Arabic Extended-A"](Dn)||et["Arabic Presentation Forms-A"](Dn)||et["Arabic Presentation Forms-B"](Dn))));if(Jt.imageName){const na=tt[Jt.imageName];if(!na)continue;Va=Jt.imageName,Ve.iconsInText=Ve.iconsInText||!0,Na=na.paddedRect;const Si=na.displaySize;Jt.scale=Jt.scale*Rn/qt,ma={width:Si[0],height:Si[1],left:1,top:-3,advance:va?Si[1]:Si[0]},Jn=Kn+(Rn-Si[1]*Jt.scale),Ho=ma.advance;const qo=va?Si[0]*Jt.scale-Rn*Gn:Si[1]*Jt.scale-Rn*Gn;qo>0&&qo>wi&&(wi=qo)}else{const na=pt[Jt.fontStack],Si=na&&na[Hn];if(Si&&Si.rect)Na=Si.rect,ma=Si.metrics;else{const qo=ct[Jt.fontStack],Jh=qo&&qo[Hn];if(!Jh)continue;ma=Jh.metrics}Jn=(Gn-Jt.scale)*Rn}va?(Ve.verticalizable=!0,bi.push({glyph:Hn,imageName:Va,x:Gr,y:en+Jn,vertical:va,scale:Jt.scale,fontStack:Jt.fontStack,sectionIndex:Vi,metrics:ma,rect:Na}),Gr+=Ho*Jt.scale+Ct):(bi.push({glyph:Hn,imageName:Va,x:Gr,y:en+Jn,vertical:va,scale:Jt.scale,fontStack:Jt.fontStack,sectionIndex:Vi,metrics:ma,rect:Na}),Gr+=ma.advance*Jt.scale+Ct)}bi.length!==0&&(bn=Math.max(Gr-Ct,bn),kL(bi,0,bi.length-1,$n,wi)),Gr=0;const rn=We*Gn+wi;si.lineOffset=Math.max(wi,Kn),en+=rn,ra=Math.max(rn,ra),++pn}var Dn;const jn=en-Fp,{horizontalAlign:Yn,verticalAlign:xi}=D_(rt);(function(mn,Gn,Kn,si,bi,wi,rn,kn,Jt){const Vi=(Gn-Kn)*bi;let Hn=0;Hn=wi!==rn?-kn*si-Fp:(-si*Jt+.5)*rn;for(const Jn of mn)for(const ma of Jn.positionedGlyphs)ma.x+=Vi,ma.y+=Hn})(Ve.positionedLines,$n,Yn,xi,bn,ra,We,jn,Ke.length),Ve.top+=-xi*jn,Ve.bottom=Ve.top+jn,Ve.left+=-Yn*bn,Ve.right=Ve.left+bn}(Ue,s,h,m,Ee,C,D,O,G,F,X,he),!function(Ve){for(const ct of Ve)if(ct.positionedGlyphs.length!==0)return!1;return!0}(Me)&&Ue}const Vp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},PL={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Fw(c,s,h,m,b,T){if(s.imageName){const C=m[s.imageName];return C?C.displaySize[0]*s.scale*Rn/T+b:0}{const C=h[s.fontStack],D=C&&C[c];return D?D.metrics.advance*s.scale+b:0}}function Nw(c,s,h,m){const b=Math.pow(c-s,2);return m?c<s?b/2:2*b:b+Math.abs(h)*h}function DL(c,s,h){let m=0;return c===10&&(m-=1e4),h&&(m+=150),c!==40&&c!==65288||(m+=50),s!==41&&s!==65289||(m+=50),m}function Vw(c,s,h,m,b,T){let C=null,D=Nw(s,h,b,T);for(const O of m){const F=Nw(s-O.x,h,b,T)+O.badness;F<=D&&(C=O,D=F)}return{index:c,x:s,priorBreak:C,badness:D}}function Uw(c){return c?Uw(c.priorBreak).concat(c.index):[]}function P_(c,s,h,m,b,T,C){if(T!=="point")return[];if(!c)return[];const D=[],O=function(X,J,Q,he,ce,Ee){let ke=0;for(let Te=0;Te<X.length();Te++){const Me=X.getSection(Te);ke+=Fw(X.getCharCode(Te),Me,he,ce,J,Ee)}return ke/Math.max(1,Math.ceil(ke/Q))}(c,s,h,m,b,C),F=c.text.indexOf("​")>=0;let $=0;for(let X=0;X<c.length();X++){const J=c.getSection(X),Q=c.getCharCode(X);if(Vp[Q]||($+=Fw(Q,J,m,b,s,C)),X<c.length()-1){const he=!((G=Q)<11904||!(et["Bopomofo Extended"](G)||et.Bopomofo(G)||et["CJK Compatibility Forms"](G)||et["CJK Compatibility Ideographs"](G)||et["CJK Compatibility"](G)||et["CJK Radicals Supplement"](G)||et["CJK Strokes"](G)||et["CJK Symbols and Punctuation"](G)||et["CJK Unified Ideographs Extension A"](G)||et["CJK Unified Ideographs"](G)||et["Enclosed CJK Letters and Months"](G)||et["Halfwidth and Fullwidth Forms"](G)||et.Hiragana(G)||et["Ideographic Description Characters"](G)||et["Kangxi Radicals"](G)||et["Katakana Phonetic Extensions"](G)||et.Katakana(G)||et["Vertical Forms"](G)||et["Yi Radicals"](G)||et["Yi Syllables"](G)));(PL[Q]||he||J.imageName)&&D.push(Vw(X+1,$,O,D,DL(Q,c.getCharCode(X+1),he&&F),!1))}}var G;return Uw(Vw(c.length(),$,O,D,0,!0))}function D_(c){let s=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:s,verticalAlign:h}}function kL(c,s,h,m,b){if(!m&&!b)return;const T=c[h],C=(c[h].x+T.metrics.advance*T.scale)*m;for(let D=s;D<=h;D++)c[D].x-=C,c[D].y+=b}function LL(c,s,h){const{horizontalAlign:m,verticalAlign:b}=D_(h),T=s[0]-c.displaySize[0]*m,C=s[1]-c.displaySize[1]*b;return{image:c,top:C,bottom:C+c.displaySize[1],left:T,right:T+c.displaySize[0]}}function $w(c,s,h,m,b,T){const C=c.image;let D;if(C.content){const ce=C.content,Ee=C.pixelRatio||1;D=[ce[0]/Ee,ce[1]/Ee,C.displaySize[0]-ce[2]/Ee,C.displaySize[1]-ce[3]/Ee]}const O=s.left*T,F=s.right*T;let $,G,X,J;h==="width"||h==="both"?(J=b[0]+O-m[3],G=b[0]+F+m[1]):(J=b[0]+(O+F-C.displaySize[0])/2,G=J+C.displaySize[0]);const Q=s.top*T,he=s.bottom*T;return h==="height"||h==="both"?($=b[1]+Q-m[0],X=b[1]+he+m[2]):($=b[1]+(Q+he-C.displaySize[1])/2,X=$+C.displaySize[1]),{image:C,top:$,right:G,bottom:X,left:J,collisionPadding:D}}const Go=128;function jw(c,s){const{expression:h}=s;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Jr(c+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:b}=h;let T=0;for(;T<m.length&&m[T]<=c;)T++;T=Math.max(0,T-1);let C=T;for(;C<m.length&&m[C]<c+1;)C++;C=Math.min(m.length-1,C);const D=m[T],O=m[C];return h.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:O,interpolationType:b}:{kind:"camera",minZoom:D,maxZoom:O,minSize:h.evaluate(new Jr(D)),maxSize:h.evaluate(new Jr(O)),interpolationType:b}}}class Rs extends Ce{constructor(s,h,m,b){super(s,h),this.angle=m,b!==void 0&&(this.segment=b)}clone(){return new Rs(this.x,this.y,this.angle,this.segment)}}function Gw(c,s,h,m,b){if(s.segment===void 0)return!0;let T=s,C=s.segment+1,D=0;for(;D>-h/2;){if(C--,C<0)return!1;D-=c[C].dist(T),T=c[C]}D+=c[C].dist(c[C+1]),C++;const O=[];let F=0;for(;D<h/2;){const $=c[C],G=c[C+1];if(!G)return!1;let X=c[C-1].angleTo($)-$.angleTo(G);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:D,angleDelta:X}),F+=X;D-O[0].distance>m;)F-=O.shift().angleDelta;if(F>b)return!1;C++,D+=$.dist(G)}return!0}function Hw(c){let s=0;for(let h=0;h<c.length-1;h++)s+=c[h].dist(c[h+1]);return s}function qw(c,s,h){return c?.6*s*h:0}function Ww(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function OL(c,s,h,m,b,T){const C=qw(h,b,T),D=Ww(h,m)*T;let O=0;const F=Hw(c)/2;for(let $=0;$<c.length-1;$++){const G=c[$],X=c[$+1],J=G.dist(X);if(O+J>F){const Q=(F-O)/J,he=Yr(G.x,X.x,Q),ce=Yr(G.y,X.y,Q),Ee=new Rs(he,ce,X.angleTo(G),$);return Ee._round(),!C||Gw(c,Ee,D,C,s)?Ee:void 0}O+=J}}function RL(c,s,h,m,b,T,C,D,O){const F=qw(m,T,C),$=Ww(m,b),G=$*C,X=c[0].x===0||c[0].x===O||c[0].y===0||c[0].y===O;return s-G<s/4&&(s=G+s/4),Zw(c,X?s/2*D%s:($/2+2*T)*C*D%s,s,F,h,G,X,!1,O)}function Zw(c,s,h,m,b,T,C,D,O){const F=T/2,$=Hw(c);let G=0,X=s-h,J=[];for(let Q=0;Q<c.length-1;Q++){const he=c[Q],ce=c[Q+1],Ee=he.dist(ce),ke=ce.angleTo(he);for(;X+h<G+Ee;){X+=h;const Te=(X-G)/Ee,Me=Yr(he.x,ce.x,Te),Ue=Yr(he.y,ce.y,Te);if(Me>=0&&Me<O&&Ue>=0&&Ue<O&&X-F>=0&&X+F<=$){const Ve=new Rs(Me,Ue,ke,Q);Ve._round(),m&&!Gw(c,Ve,T,m,b)||J.push(Ve)}}G+=Ee}return D||J.length||C||(J=Zw(c,G/2,h,m,b,T,C,!0,O)),J}function Xw(c,s,h,m,b){const T=[];for(let C=0;C<c.length;C++){const D=c[C];let O;for(let F=0;F<D.length-1;F++){let $=D[F],G=D[F+1];$.x<s&&G.x<s||($.x<s?$=new Ce(s,$.y+(s-$.x)/(G.x-$.x)*(G.y-$.y))._round():G.x<s&&(G=new Ce(s,$.y+(s-$.x)/(G.x-$.x)*(G.y-$.y))._round()),$.y<h&&G.y<h||($.y<h?$=new Ce($.x+(h-$.y)/(G.y-$.y)*(G.x-$.x),h)._round():G.y<h&&(G=new Ce($.x+(h-$.y)/(G.y-$.y)*(G.x-$.x),h)._round()),$.x>=m&&G.x>=m||($.x>=m?$=new Ce(m,$.y+(m-$.x)/(G.x-$.x)*(G.y-$.y))._round():G.x>=m&&(G=new Ce(m,$.y+(m-$.x)/(G.x-$.x)*(G.y-$.y))._round()),$.y>=b&&G.y>=b||($.y>=b?$=new Ce($.x+(b-$.y)/(G.y-$.y)*(G.x-$.x),b)._round():G.y>=b&&(G=new Ce($.x+(b-$.y)/(G.y-$.y)*(G.x-$.x),b)._round()),O&&$.equals(O[O.length-1])||(O=[$],T.push(O)),O.push(G)))))}}return T}function Yw(c,s,h,m){const b=[],T=c.image,C=T.pixelRatio,D=T.paddedRect.w-2,O=T.paddedRect.h-2,F=c.right-c.left,$=c.bottom-c.top,G=T.stretchX||[[0,D]],X=T.stretchY||[[0,O]],J=(We,rt)=>We+rt[1]-rt[0],Q=G.reduce(J,0),he=X.reduce(J,0),ce=D-Q,Ee=O-he;let ke=0,Te=Q,Me=0,Ue=he,Ve=0,ct=ce,pt=0,tt=Ee;if(T.content&&m){const We=T.content;ke=Up(G,0,We[0]),Me=Up(X,0,We[1]),Te=Up(G,We[0],We[2]),Ue=Up(X,We[1],We[3]),Ve=We[0]-ke,pt=We[1]-Me,ct=We[2]-We[0]-Te,tt=We[3]-We[1]-Ue}const Ke=(We,rt,Qe,qe)=>{const Ct=$p(We.stretch-ke,Te,F,c.left),_t=jp(We.fixed-Ve,ct,We.stretch,Q),qt=$p(rt.stretch-Me,Ue,$,c.top),Gr=jp(rt.fixed-pt,tt,rt.stretch,he),en=$p(Qe.stretch-ke,Te,F,c.left),bn=jp(Qe.fixed-Ve,ct,Qe.stretch,Q),ra=$p(qe.stretch-Me,Ue,$,c.top),$n=jp(qe.fixed-pt,tt,qe.stretch,he),pn=new Ce(Ct,qt),Dn=new Ce(en,qt),jn=new Ce(en,ra),Yn=new Ce(Ct,ra),xi=new Ce(_t/C,Gr/C),mn=new Ce(bn/C,$n/C),Gn=s*Math.PI/180;if(Gn){const bi=Math.sin(Gn),wi=Math.cos(Gn),rn=[wi,-bi,bi,wi];pn._matMult(rn),Dn._matMult(rn),Yn._matMult(rn),jn._matMult(rn)}const Kn=We.stretch+We.fixed,si=rt.stretch+rt.fixed;return{tl:pn,tr:Dn,bl:Yn,br:jn,tex:{x:T.paddedRect.x+1+Kn,y:T.paddedRect.y+1+si,w:Qe.stretch+Qe.fixed-Kn,h:qe.stretch+qe.fixed-si},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xi,pixelOffsetBR:mn,minFontScaleX:ct/C/F,minFontScaleY:tt/C/$,isSDF:h}};if(m&&(T.stretchX||T.stretchY)){const We=Kw(G,ce,Q),rt=Kw(X,Ee,he);for(let Qe=0;Qe<We.length-1;Qe++){const qe=We[Qe],Ct=We[Qe+1];for(let _t=0;_t<rt.length-1;_t++)b.push(Ke(qe,rt[_t],Ct,rt[_t+1]))}}else b.push(Ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:O+1}));return b}function Up(c,s,h){let m=0;for(const b of c)m+=Math.max(s,Math.min(h,b[1]))-Math.max(s,Math.min(h,b[0]));return m}function Kw(c,s,h){const m=[{fixed:-1,stretch:0}];for(const[b,T]of c){const C=m[m.length-1];m.push({fixed:b-C.stretch,stretch:C.stretch}),m.push({fixed:b-C.stretch,stretch:C.stretch+(T-b)})}return m.push({fixed:s+1,stretch:h}),m}function $p(c,s,h,m){return c/s*h+m}function jp(c,s,h,m){return c-s*h/m}ht("Anchor",Rs);class Gp{constructor(s,h,m,b,T,C,D,O,F,$){if(this.boxStartIndex=s.length,F){let G=C.top,X=C.bottom;const J=C.collisionPadding;J&&(G-=J[1],X+=J[3]);let Q=X-G;Q>0&&(Q=Math.max(10,Q),this.circleDiameter=Q)}else{let G=C.top*D-O[0],X=C.bottom*D+O[2],J=C.left*D-O[3],Q=C.right*D+O[1];const he=C.collisionPadding;if(he&&(J-=he[0]*D,G-=he[1]*D,Q+=he[2]*D,X+=he[3]*D),$){const ce=new Ce(J,G),Ee=new Ce(Q,G),ke=new Ce(J,X),Te=new Ce(Q,X),Me=$*Math.PI/180;ce._rotate(Me),Ee._rotate(Me),ke._rotate(Me),Te._rotate(Me),J=Math.min(ce.x,Ee.x,ke.x,Te.x),Q=Math.max(ce.x,Ee.x,ke.x,Te.x),G=Math.min(ce.y,Ee.y,ke.y,Te.y),X=Math.max(ce.y,Ee.y,ke.y,Te.y)}s.emplaceBack(h.x,h.y,J,G,Q,X,m,b,T)}this.boxEndIndex=s.length}}class zL{constructor(s=[],h=BL){if(this.data=s,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:h,compare:m}=this,b=h[s];for(;s>0;){const T=s-1>>1,C=h[T];if(m(b,C)>=0)break;h[s]=C,s=T}h[s]=b}_down(s){const{data:h,compare:m}=this,b=this.length>>1,T=h[s];for(;s<b;){let C=1+(s<<1),D=h[C];const O=C+1;if(O<this.length&&m(h[O],D)<0&&(C=O,D=h[O]),m(D,T)>=0)break;h[s]=D,s=C}h[s]=T}}function BL(c,s){return c<s?-1:c>s?1:0}function FL(c,s=1,h=!1){let m=1/0,b=1/0,T=-1/0,C=-1/0;const D=c[0];for(let J=0;J<D.length;J++){const Q=D[J];(!J||Q.x<m)&&(m=Q.x),(!J||Q.y<b)&&(b=Q.y),(!J||Q.x>T)&&(T=Q.x),(!J||Q.y>C)&&(C=Q.y)}const O=Math.min(T-m,C-b);let F=O/2;const $=new zL([],NL);if(O===0)return new Ce(m,b);for(let J=m;J<T;J+=O)for(let Q=b;Q<C;Q+=O)$.push(new Qu(J+F,Q+F,F,c));let G=function(J){let Q=0,he=0,ce=0;const Ee=J[0];for(let ke=0,Te=Ee.length,Me=Te-1;ke<Te;Me=ke++){const Ue=Ee[ke],Ve=Ee[Me],ct=Ue.x*Ve.y-Ve.x*Ue.y;he+=(Ue.x+Ve.x)*ct,ce+=(Ue.y+Ve.y)*ct,Q+=3*ct}return new Qu(he/Q,ce/Q,0,J)}(c),X=$.length;for(;$.length;){const J=$.pop();(J.d>G.d||!G.d)&&(G=J,h&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,X)),J.max-G.d<=s||(F=J.h/2,$.push(new Qu(J.p.x-F,J.p.y-F,F,c)),$.push(new Qu(J.p.x+F,J.p.y-F,F,c)),$.push(new Qu(J.p.x-F,J.p.y+F,F,c)),$.push(new Qu(J.p.x+F,J.p.y+F,F,c)),X+=4)}return h&&(console.log(`num probes: ${X}`),console.log(`best distance: ${G.d}`)),G.p}function NL(c,s){return s.max-c.max}function Qu(c,s,h,m){this.p=new Ce(c,s),this.h=h,this.d=function(b,T){let C=!1,D=1/0;for(let O=0;O<T.length;O++){const F=T[O];for(let $=0,G=F.length,X=G-1;$<G;X=$++){const J=F[$],Q=F[X];J.y>b.y!=Q.y>b.y&&b.x<(Q.x-J.x)*(b.y-J.y)/(Q.y-J.y)+J.x&&(C=!C),D=Math.min(D,aw(b,J,Q))}}return(C?1:-1)*Math.sqrt(D)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}const k_=Number.POSITIVE_INFINITY;function Jw(c,s){return s[1]!==k_?function(h,m,b){let T=0,C=0;switch(m=Math.abs(m),b=Math.abs(b),h){case"top-right":case"top-left":case"top":C=b-7;break;case"bottom-right":case"bottom-left":case"bottom":C=7-b}switch(h){case"top-right":case"bottom-right":case"right":T=-m;break;case"top-left":case"bottom-left":case"left":T=m}return[T,C]}(c,s[0],s[1]):function(h,m){let b=0,T=0;m<0&&(m=0);const C=m/Math.sqrt(2);switch(h){case"top-right":case"top-left":T=C-7;break;case"bottom-right":case"bottom-left":T=7-C;break;case"bottom":T=7-m;break;case"top":T=m-7}switch(h){case"top-right":case"bottom-right":b=-C;break;case"top-left":case"bottom-left":b=C;break;case"left":b=m;break;case"right":b=-m}return[b,T]}(c,s[0])}function L_(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function VL(c,s,h,m,b,T,C,D,O,F,$){let G=T.textMaxSize.evaluate(s,{});G===void 0&&(G=C);const X=c.layers[0].layout,J=X.get("icon-offset").evaluate(s,{},$),Q=e2(h.horizontal),he=C/24,ce=c.tilePixelRatio*he,Ee=c.tilePixelRatio*G/24,ke=c.tilePixelRatio*D,Te=c.tilePixelRatio*X.get("symbol-spacing"),Me=X.get("text-padding")*c.tilePixelRatio,Ue=function(qe,Ct,_t,qt=1){const Gr=qe.get("icon-padding").evaluate(Ct,{},_t),en=Gr&&Gr.values;return[en[0]*qt,en[1]*qt,en[2]*qt,en[3]*qt]}(X,s,$,c.tilePixelRatio),Ve=X.get("text-max-angle")/180*Math.PI,ct=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",pt=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",tt=X.get("symbol-placement"),Ke=Te/2,We=X.get("icon-text-fit");let rt;m&&We!=="none"&&(c.allowVerticalPlacement&&h.vertical&&(rt=$w(m,h.vertical,We,X.get("icon-text-fit-padding"),J,he)),Q&&(m=$w(m,Q,We,X.get("icon-text-fit-padding"),J,he)));const Qe=(qe,Ct)=>{Ct.x<0||Ct.x>=xn||Ct.y<0||Ct.y>=xn||function(_t,qt,Gr,en,bn,ra,$n,pn,Dn,jn,Yn,xi,mn,Gn,Kn,si,bi,wi,rn,kn,Jt,Vi,Hn,Jn,ma){const Na=_t.addToLineVertexArray(qt,Gr);let Va,Ho,va,na,Si=0,qo=0,Jh=0,v2=0,j_=-1,G_=-1;const Wo={};let g2=Pn.exports(""),H_=0,q_=0;if(pn._unevaluatedLayout.getValue("text-radial-offset")===void 0?[H_,q_]=pn.layout.get("text-offset").evaluate(Jt,{},Jn).map(Ti=>Ti*Rn):(H_=pn.layout.get("text-radial-offset").evaluate(Jt,{},Jn)*Rn,q_=k_),_t.allowVerticalPlacement&&en.vertical){const Ti=pn.layout.get("text-rotate").evaluate(Jt,{},Jn)+90;va=new Gp(Dn,qt,jn,Yn,xi,en.vertical,mn,Gn,Kn,Ti),$n&&(na=new Gp(Dn,qt,jn,Yn,xi,$n,bi,wi,Kn,Ti))}if(bn){const Ti=pn.layout.get("icon-rotate").evaluate(Jt,{}),co=pn.layout.get("icon-text-fit")!=="none",Qh=Yw(bn,Ti,Hn,co),ef=$n?Yw($n,Ti,Hn,co):void 0;Ho=new Gp(Dn,qt,jn,Yn,xi,bn,bi,wi,!1,Ti),Si=4*Qh.length;const x2=_t.iconSizeData;let kl=null;x2.kind==="source"?(kl=[Go*pn.layout.get("icon-size").evaluate(Jt,{})],kl[0]>zs&&H(`${_t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):x2.kind==="composite"&&(kl=[Go*Vi.compositeIconSizes[0].evaluate(Jt,{},Jn),Go*Vi.compositeIconSizes[1].evaluate(Jt,{},Jn)],(kl[0]>zs||kl[1]>zs)&&H(`${_t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),_t.addSymbols(_t.icon,Qh,kl,kn,rn,Jt,a.WritingMode.none,qt,Na.lineStartIndex,Na.lineLength,-1,Jn),j_=_t.icon.placedSymbolArray.length-1,ef&&(qo=4*ef.length,_t.addSymbols(_t.icon,ef,kl,kn,rn,Jt,a.WritingMode.vertical,qt,Na.lineStartIndex,Na.lineLength,-1,Jn),G_=_t.icon.placedSymbolArray.length-1)}const _2=Object.keys(en.horizontal);for(const Ti of _2){const co=en.horizontal[Ti];if(!Va){g2=Pn.exports(co.text);const ef=pn.layout.get("text-rotate").evaluate(Jt,{},Jn);Va=new Gp(Dn,qt,jn,Yn,xi,co,mn,Gn,Kn,ef)}const Qh=co.positionedLines.length===1;if(Jh+=Qw(_t,qt,co,ra,pn,Kn,Jt,si,Na,en.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,Qh?_2:[Ti],Wo,j_,Vi,Jn),Qh)break}en.vertical&&(v2+=Qw(_t,qt,en.vertical,ra,pn,Kn,Jt,si,Na,a.WritingMode.vertical,["vertical"],Wo,G_,Vi,Jn));const QL=Va?Va.boxStartIndex:_t.collisionBoxArray.length,e4=Va?Va.boxEndIndex:_t.collisionBoxArray.length,t4=va?va.boxStartIndex:_t.collisionBoxArray.length,r4=va?va.boxEndIndex:_t.collisionBoxArray.length,n4=Ho?Ho.boxStartIndex:_t.collisionBoxArray.length,i4=Ho?Ho.boxEndIndex:_t.collisionBoxArray.length,a4=na?na.boxStartIndex:_t.collisionBoxArray.length,o4=na?na.boxEndIndex:_t.collisionBoxArray.length;let Ua=-1;const Xp=(Ti,co)=>Ti&&Ti.circleDiameter?Math.max(Ti.circleDiameter,co):co;Ua=Xp(Va,Ua),Ua=Xp(va,Ua),Ua=Xp(Ho,Ua),Ua=Xp(na,Ua);const y2=Ua>-1?1:0;y2&&(Ua*=ma/Rn),_t.glyphOffsetArray.length>=ec.MAX_GLYPHS&&H("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jt.sortKey!==void 0&&_t.addToSortKeyRanges(_t.symbolInstances.length,Jt.sortKey),_t.symbolInstances.emplaceBack(qt.x,qt.y,Wo.right>=0?Wo.right:-1,Wo.center>=0?Wo.center:-1,Wo.left>=0?Wo.left:-1,Wo.vertical||-1,j_,G_,g2,QL,e4,t4,r4,n4,i4,a4,o4,jn,Jh,v2,Si,qo,y2,0,mn,H_,q_,Ua)}(c,Ct,qe,h,m,b,rt,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,ce,[Me,Me,Me,Me],ct,O,ke,Ue,pt,J,s,T,F,$,C)};if(tt==="line")for(const qe of Xw(s.geometry,0,0,xn,xn)){const Ct=RL(qe,Te,Ve,h.vertical||Q,m,24,Ee,c.overscaling,xn);for(const _t of Ct){const qt=Q;qt&&UL(c,qt.text,Ke,_t)||Qe(qe,_t)}}else if(tt==="line-center"){for(const qe of s.geometry)if(qe.length>1){const Ct=OL(qe,Ve,h.vertical||Q,m,24,Ee);Ct&&Qe(qe,Ct)}}else if(s.type==="Polygon")for(const qe of x_(s.geometry,0)){const Ct=FL(qe,16);Qe(qe[0],new Rs(Ct.x,Ct.y,0))}else if(s.type==="LineString")for(const qe of s.geometry)Qe(qe,new Rs(qe[0].x,qe[0].y,0));else if(s.type==="Point")for(const qe of s.geometry)for(const Ct of qe)Qe([Ct],new Rs(Ct.x,Ct.y,0))}const zs=32640;function Qw(c,s,h,m,b,T,C,D,O,F,$,G,X,J,Q){const he=function(ke,Te,Me,Ue,Ve,ct,pt,tt){const Ke=Ue.layout.get("text-rotate").evaluate(ct,{})*Math.PI/180,We=[];for(const rt of Te.positionedLines)for(const Qe of rt.positionedGlyphs){if(!Qe.rect)continue;const qe=Qe.rect||{};let Ct=4,_t=!0,qt=1,Gr=0;const en=(Ve||tt)&&Qe.vertical,bn=Qe.metrics.advance*Qe.scale/2;if(tt&&Te.verticalizable){const rn=(Qe.scale-1)*Rn,kn=(Rn-Qe.metrics.width*Qe.scale)/2;Gr=rt.lineOffset/2-(Qe.imageName?-kn:rn)}if(Qe.imageName){const rn=pt[Qe.imageName];_t=rn.sdf,qt=rn.pixelRatio,Ct=1/qt}const ra=Ve?[Qe.x+bn,Qe.y]:[0,0];let $n=Ve?[0,0]:[Qe.x+bn+Me[0],Qe.y+Me[1]-Gr],pn=[0,0];en&&(pn=$n,$n=[0,0]);const Dn=(Qe.metrics.left-Ct)*Qe.scale-bn+$n[0],jn=(-Qe.metrics.top-Ct)*Qe.scale+$n[1],Yn=Dn+qe.w*Qe.scale/qt,xi=jn+qe.h*Qe.scale/qt,mn=new Ce(Dn,jn),Gn=new Ce(Yn,jn),Kn=new Ce(Dn,xi),si=new Ce(Yn,xi);if(en){const rn=new Ce(-bn,bn-Fp),kn=-Math.PI/2,Jt=12-bn,Vi=new Ce(22-Jt,-(Qe.imageName?Jt:0)),Hn=new Ce(...pn);mn._rotateAround(kn,rn)._add(Vi)._add(Hn),Gn._rotateAround(kn,rn)._add(Vi)._add(Hn),Kn._rotateAround(kn,rn)._add(Vi)._add(Hn),si._rotateAround(kn,rn)._add(Vi)._add(Hn)}if(Ke){const rn=Math.sin(Ke),kn=Math.cos(Ke),Jt=[kn,-rn,rn,kn];mn._matMult(Jt),Gn._matMult(Jt),Kn._matMult(Jt),si._matMult(Jt)}const bi=new Ce(0,0),wi=new Ce(0,0);We.push({tl:mn,tr:Gn,bl:Kn,br:si,tex:qe,writingMode:Te.writingMode,glyphOffset:ra,sectionIndex:Qe.sectionIndex,isSDF:_t,pixelOffsetTL:bi,pixelOffsetBR:wi,minFontScaleX:0,minFontScaleY:0})}return We}(0,h,D,b,T,C,m,c.allowVerticalPlacement),ce=c.textSizeData;let Ee=null;ce.kind==="source"?(Ee=[Go*b.layout.get("text-size").evaluate(C,{})],Ee[0]>zs&&H(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ce.kind==="composite"&&(Ee=[Go*J.compositeTextSizes[0].evaluate(C,{},Q),Go*J.compositeTextSizes[1].evaluate(C,{},Q)],(Ee[0]>zs||Ee[1]>zs)&&H(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,he,Ee,D,T,C,F,s,O.lineStartIndex,O.lineLength,X,Q);for(const ke of $)G[ke]=c.text.placedSymbolArray.length-1;return 4*he.length}function e2(c){for(const s in c)return c[s];return null}function UL(c,s,h,m){const b=c.compareText;if(s in b){const T=b[s];for(let C=T.length-1;C>=0;C--)if(m.dist(T[C])<h)return!0}else b[s]=[];return b[s].push(m),!1}const $L=Ls.VectorTileFeature.types,jL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Hp(c,s,h,m,b,T,C,D,O,F,$,G,X){const J=D?Math.min(zs,Math.round(D[0])):0,Q=D?Math.min(zs,Math.round(D[1])):0;c.emplaceBack(s,h,Math.round(32*m),Math.round(32*b),T,C,(J<<1)+(O?1:0),Q,16*F,16*$,256*G,256*X)}function O_(c,s,h){c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h)}function GL(c){for(const s of c.sections)if(xp(s.text))return!0;return!1}class R_{constructor(s){this.layoutVertexArray=new da,this.indexArray=new ii,this.programConfigurations=s,this.segments=new Kt,this.dynamicLayoutVertexArray=new Qi,this.opacityVertexArray=new pa,this.placedSymbolArray=new He}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,h,m,b){this.isEmpty()||(m&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,dL.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,pL.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,jL,!0),this.opacityVertexBuffer.itemSize=1),(m||b)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ht("SymbolBuffers",R_);class z_{constructor(s,h,m){this.layoutVertexArray=new s,this.layoutAttributes=h,this.indexArray=new m,this.segments=new Kt,this.collisionVertexArray=new Fi}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,mL.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ht("CollisionBuffers",z_);class ec{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(C=>C.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=p_([]),this.placementViewportMatrix=p_([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=jw(this.zoom,h["text-size"]),this.iconSizeData=jw(this.zoom,h["icon-size"]);const m=this.layers[0].layout,b=m.get("symbol-sort-key"),T=m.get("symbol-z-order");this.canOverlap=F_(m,"text-overlap","text-allow-overlap")!=="never"||F_(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=T!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(T==="viewport-y"||T==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(C=>a.WritingMode[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=s.sourceID}createArrays(){this.text=new R_(new Al(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new R_(new Al(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new Ye,this.lineVertexArray=new ut,this.symbolInstances=new ot}calculateGlyphDependencies(s,h,m,b,T){for(let C=0;C<s.length;C++)if(h[s.charCodeAt(C)]=!0,(m||b)&&T){const D=Zh[s.charAt(C)];D&&(h[D.charCodeAt(0)]=!0)}}populate(s,h,m){const b=this.layers[0],T=b.layout,C=T.get("text-font"),D=T.get("text-field"),O=T.get("icon-image"),F=(D.value.kind!=="constant"||D.value.value instanceof me&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),$=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,G=T.get("symbol-sort-key");if(this.features=[],!F&&!$)return;const X=h.iconDependencies,J=h.glyphDependencies,Q=h.availableImages,he=new Jr(this.zoom);for(const{feature:ce,id:Ee,index:ke,sourceLayerIndex:Te}of s){const Me=b._featureFilter.needGeometry,Ue=Ml(ce,Me);if(!b._featureFilter.filter(he,Ue,m))continue;let Ve,ct;if(Me||(Ue.geometry=Il(ce)),F){const tt=b.getValueAndResolveTokens("text-field",Ue,m,Q),Ke=me.factory(tt);GL(Ke)&&(this.hasRTLText=!0),(!this.hasRTLText||Tl()==="unavailable"||this.hasRTLText&&Bi.isParsed())&&(Ve=gL(Ke,b,Ue))}if($){const tt=b.getValueAndResolveTokens("icon-image",Ue,m,Q);ct=tt instanceof be?tt:be.fromString(tt)}if(!Ve&&!ct)continue;const pt=this.sortFeaturesByKey?G.evaluate(Ue,{},m):void 0;if(this.features.push({id:Ee,text:Ve,icon:ct,index:ke,sourceLayerIndex:Te,geometry:Ue.geometry,properties:ce.properties,type:$L[ce.type],sortKey:pt}),ct&&(X[ct.name]=!0),Ve){const tt=C.evaluate(Ue,{},m).join(","),Ke=T.get("text-rotation-alignment")!=="viewport"&&T.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const We of Ve.sections)if(We.image)X[We.image.name]=!0;else{const rt=$u(Ve.toString()),Qe=We.fontStack||tt,qe=J[Qe]=J[Qe]||{};this.calculateGlyphDependencies(We.text,qe,Ke,this.allowVerticalPlacement,rt)}}}T.get("symbol-placement")==="line"&&(this.features=function(ce){const Ee={},ke={},Te=[];let Me=0;function Ue(tt){Te.push(ce[tt]),Me++}function Ve(tt,Ke,We){const rt=ke[tt];return delete ke[tt],ke[Ke]=rt,Te[rt].geometry[0].pop(),Te[rt].geometry[0]=Te[rt].geometry[0].concat(We[0]),rt}function ct(tt,Ke,We){const rt=Ee[Ke];return delete Ee[Ke],Ee[tt]=rt,Te[rt].geometry[0].shift(),Te[rt].geometry[0]=We[0].concat(Te[rt].geometry[0]),rt}function pt(tt,Ke,We){const rt=We?Ke[0][Ke[0].length-1]:Ke[0][0];return`${tt}:${rt.x}:${rt.y}`}for(let tt=0;tt<ce.length;tt++){const Ke=ce[tt],We=Ke.geometry,rt=Ke.text?Ke.text.toString():null;if(!rt){Ue(tt);continue}const Qe=pt(rt,We),qe=pt(rt,We,!0);if(Qe in ke&&qe in Ee&&ke[Qe]!==Ee[qe]){const Ct=ct(Qe,qe,We),_t=Ve(Qe,qe,Te[Ct].geometry);delete Ee[Qe],delete ke[qe],ke[pt(rt,Te[_t].geometry,!0)]=_t,Te[Ct].geometry=null}else Qe in ke?Ve(Qe,qe,We):qe in Ee?ct(Qe,qe,We):(Ue(tt),Ee[Qe]=Me-1,ke[qe]=Me-1)}return Te.filter(tt=>tt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ce,Ee)=>ce.sortKey-Ee.sortKey)}update(s,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,h,this.layers,m),this.icon.programConfigurations.updatePaintArrays(s,h,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,h){const m=this.lineVertexArray.length;if(s.segment!==void 0){let b=s.dist(h[s.segment+1]),T=s.dist(h[s.segment]);const C={};for(let D=s.segment+1;D<h.length;D++)C[D]={x:h[D].x,y:h[D].y,tileUnitDistanceFromAnchor:b},D<h.length-1&&(b+=h[D+1].dist(h[D]));for(let D=s.segment||0;D>=0;D--)C[D]={x:h[D].x,y:h[D].y,tileUnitDistanceFromAnchor:T},D>0&&(T+=h[D-1].dist(h[D]));for(let D=0;D<h.length;D++){const O=C[D];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(s,h,m,b,T,C,D,O,F,$,G,X){const J=s.indexArray,Q=s.layoutVertexArray,he=s.segments.prepareSegment(4*h.length,Q,J,this.canOverlap?C.sortKey:void 0),ce=this.glyphOffsetArray.length,Ee=he.vertexLength,ke=this.allowVerticalPlacement&&D===a.WritingMode.vertical?Math.PI/2:0,Te=C.text&&C.text.sections;for(let Me=0;Me<h.length;Me++){const{tl:Ue,tr:Ve,bl:ct,br:pt,tex:tt,pixelOffsetTL:Ke,pixelOffsetBR:We,minFontScaleX:rt,minFontScaleY:Qe,glyphOffset:qe,isSDF:Ct,sectionIndex:_t}=h[Me],qt=he.vertexLength,Gr=qe[1];Hp(Q,O.x,O.y,Ue.x,Gr+Ue.y,tt.x,tt.y,m,Ct,Ke.x,Ke.y,rt,Qe),Hp(Q,O.x,O.y,Ve.x,Gr+Ve.y,tt.x+tt.w,tt.y,m,Ct,We.x,Ke.y,rt,Qe),Hp(Q,O.x,O.y,ct.x,Gr+ct.y,tt.x,tt.y+tt.h,m,Ct,Ke.x,We.y,rt,Qe),Hp(Q,O.x,O.y,pt.x,Gr+pt.y,tt.x+tt.w,tt.y+tt.h,m,Ct,We.x,We.y,rt,Qe),O_(s.dynamicLayoutVertexArray,O,ke),J.emplaceBack(qt,qt+1,qt+2),J.emplaceBack(qt+1,qt+2,qt+3),he.vertexLength+=4,he.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qe[0]),Me!==h.length-1&&_t===h[Me+1].sectionIndex||s.programConfigurations.populatePaintArrays(Q.length,C,C.index,{},X,Te&&Te[_t])}s.placedSymbolArray.emplaceBack(O.x,O.y,ce,this.glyphOffsetArray.length-ce,Ee,F,$,O.segment,m?m[0]:0,m?m[1]:0,b[0],b[1],D,0,!1,0,G)}_addCollisionDebugVertex(s,h,m,b,T,C){return h.emplaceBack(0,0),s.emplaceBack(m.x,m.y,b,T,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(s,h,m,b,T,C,D){const O=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),F=O.vertexLength,$=T.layoutVertexArray,G=T.collisionVertexArray,X=D.anchorX,J=D.anchorY;this._addCollisionDebugVertex($,G,C,X,J,new Ce(s,h)),this._addCollisionDebugVertex($,G,C,X,J,new Ce(m,h)),this._addCollisionDebugVertex($,G,C,X,J,new Ce(m,b)),this._addCollisionDebugVertex($,G,C,X,J,new Ce(s,b)),O.vertexLength+=4;const Q=T.indexArray;Q.emplaceBack(F,F+1),Q.emplaceBack(F+1,F+2),Q.emplaceBack(F+2,F+3),Q.emplaceBack(F+3,F),O.primitiveLength+=4}addDebugCollisionBoxes(s,h,m,b){for(let T=s;T<h;T++){const C=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,b?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new z_(lo,Mw.members,Ba),this.iconCollisionBox=new z_(lo,Mw.members,Ba);for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(s,h,m,b,T,C,D,O,F){const $={};for(let G=h;G<m;G++){const X=s.get(G);$.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},$.textFeatureIndex=X.featureIndex;break}for(let G=b;G<T;G++){const X=s.get(G);$.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},$.verticalTextFeatureIndex=X.featureIndex;break}for(let G=C;G<D;G++){const X=s.get(G);$.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},$.iconFeatureIndex=X.featureIndex;break}for(let G=O;G<F;G++){const X=s.get(G);$.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},$.verticalIconFeatureIndex=X.featureIndex;break}return $}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,h){const m=s.placedSymbolArray.get(h),b=m.vertexStartIndex+4*m.numGlyphs;for(let T=m.vertexStartIndex;T<b;T+=4)s.indexArray.emplaceBack(T,T+1,T+2),s.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(s),m=Math.cos(s),b=[],T=[],C=[];for(let D=0;D<this.symbolInstances.length;++D){C.push(D);const O=this.symbolInstances.get(D);b.push(0|Math.round(h*O.anchorX+m*O.anchorY)),T.push(O.featureIndex)}return C.sort((D,O)=>b[D]-b[O]||T[O]-T[D]),C}addToSortKeyRanges(s,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((b,T,C)=>{b>=0&&C.indexOf(b)===T&&this.addIndicesForPlacedSymbol(this.text,b)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ht("SymbolBucket",ec,{omit:["layers","collisionBoxArray","features","compareText"]}),ec.MAX_GLYPHS=65535,ec.addDynamicAttributes=O_;const HL=new On({"symbol-placement":new gt(Ne.layout_symbol["symbol-placement"]),"symbol-spacing":new gt(Ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gt(Ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Mt(Ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gt(Ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gt(Ne.layout_symbol["icon-allow-overlap"]),"icon-overlap":new gt(Ne.layout_symbol["icon-overlap"]),"icon-ignore-placement":new gt(Ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new gt(Ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gt(Ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mt(Ne.layout_symbol["icon-size"]),"icon-text-fit":new gt(Ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gt(Ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mt(Ne.layout_symbol["icon-image"]),"icon-rotate":new Mt(Ne.layout_symbol["icon-rotate"]),"icon-padding":new Mt(Ne.layout_symbol["icon-padding"]),"icon-keep-upright":new gt(Ne.layout_symbol["icon-keep-upright"]),"icon-offset":new Mt(Ne.layout_symbol["icon-offset"]),"icon-anchor":new Mt(Ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gt(Ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gt(Ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gt(Ne.layout_symbol["text-rotation-alignment"]),"text-field":new Mt(Ne.layout_symbol["text-field"]),"text-font":new Mt(Ne.layout_symbol["text-font"]),"text-size":new Mt(Ne.layout_symbol["text-size"]),"text-max-width":new Mt(Ne.layout_symbol["text-max-width"]),"text-line-height":new gt(Ne.layout_symbol["text-line-height"]),"text-letter-spacing":new Mt(Ne.layout_symbol["text-letter-spacing"]),"text-justify":new Mt(Ne.layout_symbol["text-justify"]),"text-radial-offset":new Mt(Ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gt(Ne.layout_symbol["text-variable-anchor"]),"text-anchor":new Mt(Ne.layout_symbol["text-anchor"]),"text-max-angle":new gt(Ne.layout_symbol["text-max-angle"]),"text-writing-mode":new gt(Ne.layout_symbol["text-writing-mode"]),"text-rotate":new Mt(Ne.layout_symbol["text-rotate"]),"text-padding":new gt(Ne.layout_symbol["text-padding"]),"text-keep-upright":new gt(Ne.layout_symbol["text-keep-upright"]),"text-transform":new Mt(Ne.layout_symbol["text-transform"]),"text-offset":new Mt(Ne.layout_symbol["text-offset"]),"text-allow-overlap":new gt(Ne.layout_symbol["text-allow-overlap"]),"text-overlap":new gt(Ne.layout_symbol["text-overlap"]),"text-ignore-placement":new gt(Ne.layout_symbol["text-ignore-placement"]),"text-optional":new gt(Ne.layout_symbol["text-optional"])});var B_={paint:new On({"icon-opacity":new Mt(Ne.paint_symbol["icon-opacity"]),"icon-color":new Mt(Ne.paint_symbol["icon-color"]),"icon-halo-color":new Mt(Ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mt(Ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mt(Ne.paint_symbol["icon-halo-blur"]),"icon-translate":new gt(Ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new gt(Ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new Mt(Ne.paint_symbol["text-opacity"]),"text-color":new Mt(Ne.paint_symbol["text-color"],{runtimeType:Ln,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Mt(Ne.paint_symbol["text-halo-color"]),"text-halo-width":new Mt(Ne.paint_symbol["text-halo-width"]),"text-halo-blur":new Mt(Ne.paint_symbol["text-halo-blur"]),"text-translate":new gt(Ne.paint_symbol["text-translate"]),"text-translate-anchor":new gt(Ne.paint_symbol["text-translate-anchor"])}),layout:HL};class t2{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:eo,this.defaultValue=s}evaluate(s){if(s.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(s.formattedSection))return h.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ht("FormatSectionOverride",t2,{omit:["defaultValue"]});class qp extends fa{constructor(s){super(s,B_)}recalculate(s,h){if(super.recalculate(s,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const b=[];for(const T of m)b.indexOf(T)<0&&b.push(T);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,h,m,b){const T=this.layout.get(s).evaluate(h,{},m,b),C=this._unevaluatedLayout._values[s];return C.isDataDriven()||hl(C.value)||!T?T:function(D,O){return O.replace(/{([^{}]+)}/g,(F,$)=>$ in D?String(D[$]):"")}(h.properties,T)}createBucket(s){return new ec(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of B_.paint.overridableProperties){if(!qp.hasPaintOverride(this.layout,s))continue;const h=this.paint.get(s),m=new t2(h),b=new zu(m,h.property.specification);let T=null;T=h.value.kind==="constant"||h.value.kind==="source"?new dl("source",b):new wh("composite",b,h.value.zoomStops),this.paint._values[s]=new ha(h.property,T,h.parameters)}}_handleOverridablePaintPropertyUpdate(s,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&qp.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,h){const m=s.get("text-field"),b=B_.paint.properties[h];let T=!1;const C=D=>{for(const O of D)if(b.overrides&&b.overrides.hasOverride(O))return void(T=!0)};if(m.value.kind==="constant"&&m.value.value instanceof me)C(m.value.value.sections);else if(m.value.kind==="source"){const D=F=>{T||(F instanceof vt&&Oe(F.value)===Cn?C(F.value.sections):F instanceof Ou?C(F.sections):F.eachChild(D))},O=m.value;O._styleExpression&&D(O._styleExpression.expression)}return T}}function F_(c,s,h){let m="never";const b=c.get(s);return b?m=b:c.get(h)&&(m="always"),m}var qL={paint:new On({"background-color":new gt(Ne.paint_background["background-color"]),"background-pattern":new Oh(Ne.paint_background["background-pattern"]),"background-opacity":new gt(Ne.paint_background["background-opacity"])})},WL={paint:new On({"raster-opacity":new gt(Ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new gt(Ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gt(Ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gt(Ne.paint_raster["raster-brightness-max"]),"raster-saturation":new gt(Ne.paint_raster["raster-saturation"]),"raster-contrast":new gt(Ne.paint_raster["raster-contrast"]),"raster-resampling":new gt(Ne.paint_raster["raster-resampling"]),"raster-fade-duration":new gt(Ne.paint_raster["raster-fade-duration"])})};class ZL extends fa{constructor(s){super(s,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const XL={circle:class extends fa{constructor(c){super(c,Ck)}createBucket(c){return new h_(c)}queryRadius(c){const s=c;return Nh("circle-radius",this,s)+Nh("circle-stroke-width",this,s)+Mp(this.paint.get("circle-translate"))}queryIntersectsFeature(c,s,h,m,b,T,C,D){const O=Pp(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,C),F=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),$=this.paint.get("circle-pitch-alignment")==="map",G=$?O:function(J,Q){return J.map(he=>fw(he,Q))}(O,D),X=$?F*C:F;for(const J of m)for(const Q of J){const he=$?Q:fw(Q,D);let ce=X;const Ee=Dp([],[Q.x,Q.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ce*=Ee[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ce*=T.cameraToCenterDistance/Ee[3]),bk(G,he,ce))return!0}return!1}},heatmap:class extends fa{constructor(c){super(c,Ik),this._updateColorRamp()}createBucket(c){return new dw(c)}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=mw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends fa{constructor(c){super(c,Mk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends fa{constructor(c){super(c,Hk)}recalculate(c,s){super.recalculate(c,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new S_(c)}queryRadius(){return Mp(this.paint.get("fill-translate"))}queryIntersectsFeature(c,s,h,m,b,T,C){return iw(Pp(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,C),m)}isTileClipped(){return!0}},"fill-extrusion":class extends fa{constructor(c){super(c,aL)}createBucket(c){return new E_(c)}queryRadius(){return Mp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,s,h,m,b,T,C,D){const O=Pp(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,C),F=this.paint.get("fill-extrusion-height").evaluate(s,h),$=this.paint.get("fill-extrusion-base").evaluate(s,h),G=function(J,Q,he,ce){const Ee=[];for(const ke of J){const Te=[ke.x,ke.y,0,1];Dp(Te,Te,Q),Ee.push(new Ce(Te[0]/Te[3],Te[1]/Te[3]))}return Ee}(O,D),X=function(J,Q,he,ce){const Ee=[],ke=[],Te=ce[8]*Q,Me=ce[9]*Q,Ue=ce[10]*Q,Ve=ce[11]*Q,ct=ce[8]*he,pt=ce[9]*he,tt=ce[10]*he,Ke=ce[11]*he;for(const We of J){const rt=[],Qe=[];for(const qe of We){const Ct=qe.x,_t=qe.y,qt=ce[0]*Ct+ce[4]*_t+ce[12],Gr=ce[1]*Ct+ce[5]*_t+ce[13],en=ce[2]*Ct+ce[6]*_t+ce[14],bn=ce[3]*Ct+ce[7]*_t+ce[15],ra=en+Ue,$n=bn+Ve,pn=qt+ct,Dn=Gr+pt,jn=en+tt,Yn=bn+Ke,xi=new Ce((qt+Te)/$n,(Gr+Me)/$n);xi.z=ra/$n,rt.push(xi);const mn=new Ce(pn/Yn,Dn/Yn);mn.z=jn/Yn,Qe.push(mn)}Ee.push(rt),ke.push(Qe)}return[Ee,ke]}(m,$,F,D);return function(J,Q,he){let ce=1/0;iw(he,Q)&&(ce=Tw(he,Q[0]));for(let Ee=0;Ee<Q.length;Ee++){const ke=Q[Ee],Te=J[Ee];for(let Me=0;Me<ke.length-1;Me++){const Ue=ke[Me],Ve=[Ue,ke[Me+1],Te[Me+1],Te[Me],Ue];nw(he,Ve)&&(ce=Math.min(ce,Tw(he,Ve)))}}return ce!==1/0&&ce}(X[0],X[1],G)}},line:class extends fa{constructor(c){super(c,Cw),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof ol,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,s){super.recalculate(c,s),this.paint._values["line-floorwidth"]=Aw.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new C_(c)}queryRadius(c){const s=c,h=Iw(Nh("line-width",this,s),Nh("line-gap-width",this,s)),m=Nh("line-offset",this,s);return h/2+Math.abs(m)+Mp(this.paint.get("line-translate"))}queryIntersectsFeature(c,s,h,m,b,T,C){const D=Pp(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,C),O=C/2*Iw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),F=this.paint.get("line-offset").evaluate(s,h);return F&&(m=function($,G){const X=[];for(let J=0;J<$.length;J++){const Q=$[J],he=[];for(let ce=0;ce<Q.length;ce++){const Ee=Q[ce-1],ke=Q[ce],Te=Q[ce+1],Me=ce===0?new Ce(0,0):ke.sub(Ee)._unit()._perp(),Ue=ce===Q.length-1?new Ce(0,0):Te.sub(ke)._unit()._perp(),Ve=Me._add(Ue)._unit(),ct=Ve.x*Ue.x+Ve.y*Ue.y;ct!==0&&Ve._mult(1/ct),he.push(Ve._mult(G)._add(ke))}X.push(he)}return X}(m,F*C)),function($,G,X){for(let J=0;J<G.length;J++){const Q=G[J];if($.length>=3){for(let he=0;he<Q.length;he++)if(Wu($,Q[he]))return!0}if(wk($,Q,X))return!0}return!1}(D,m,O)}isTileClipped(){return!0}},symbol:qp,background:class extends fa{constructor(c){super(c,qL)}},raster:class extends fa{constructor(c){super(c,WL)}}};class YL{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const r2=63710088e-1;class sn{constructor(s,h){if(isNaN(s)||isNaN(h))throw new Error(`Invalid LngLat object: (${s}, ${h})`);if(this.lng=+s,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new sn(S(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const h=Math.PI/180,m=this.lat*h,b=s.lat*h,T=Math.sin(m)*Math.sin(b)+Math.cos(m)*Math.cos(b)*Math.cos((s.lng-this.lng)*h);return r2*Math.acos(Math.min(T,1))}toBounds(s=0){const h=360*s/40075017,m=h/Math.cos(Math.PI/180*this.lat);return new Dl(new sn(this.lng-m,this.lat-h),new sn(this.lng+m,this.lat+h))}static convert(s){if(s instanceof sn)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new sn(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new sn(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Dl{constructor(s,h){s&&(h?this.setSouthWest(s).setNorthEast(h):s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}setNorthEast(s){return this._ne=s instanceof sn?new sn(s.lng,s.lat):sn.convert(s),this}setSouthWest(s){return this._sw=s instanceof sn?new sn(s.lng,s.lat):sn.convert(s),this}extend(s){const h=this._sw,m=this._ne;let b,T;if(s instanceof sn)b=s,T=s;else{if(!(s instanceof Dl))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Dl.convert(s)):this.extend(sn.convert(s)):this;if(b=s._sw,T=s._ne,!b||!T)return this}return h||m?(h.lng=Math.min(b.lng,h.lng),h.lat=Math.min(b.lat,h.lat),m.lng=Math.max(T.lng,m.lng),m.lat=Math.max(T.lat,m.lat)):(this._sw=new sn(b.lng,b.lat),this._ne=new sn(T.lng,T.lat)),this}getCenter(){return new sn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new sn(this.getWest(),this.getNorth())}getSouthEast(){return new sn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:h,lat:m}=sn.convert(s);let b=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&b}static convert(s){return s instanceof Dl?s:s&&new Dl(s)}}const n2=2*Math.PI*r2;function i2(c){return n2*Math.cos(c*Math.PI/180)}function a2(c){return(180+c)/360}function o2(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function s2(c,s){return c/i2(s)}function N_(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Wp{constructor(s,h,m=0){this.x=+s,this.y=+h,this.z=+m}static fromLngLat(s,h=0){const m=sn.convert(s);return new Wp(a2(m.lng),o2(m.lat),s2(h,m.lat))}toLngLat(){return new sn(360*this.x-180,N_(this.y))}toAltitude(){return this.z*i2(N_(this.y))}meterInMercatorCoordinateUnits(){return 1/n2*(s=N_(this.y),1/Math.cos(s*Math.PI/180));var s}}function l2(c,s,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[c*m-2*Math.PI*6378137/2,s*m-2*Math.PI*6378137/2]}class V_{constructor(s,h,m){if(s<0||s>25||m<0||m>=Math.pow(2,s)||h<0||h>=Math.pow(2,s))throw new Error(`x=${h}, y=${m}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=h,this.y=m,this.key=Yh(0,s,s,h,m)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,h,m){const b=(C=this.y,D=this.z,O=l2(256*(T=this.x),256*(C=Math.pow(2,D)-C-1),D),F=l2(256*(T+1),256*(C+1),D),O[0]+","+O[1]+","+F[0]+","+F[1]);var T,C,D,O,F;const $=function(G,X,J){let Q,he="";for(let ce=G;ce>0;ce--)Q=1<<ce-1,he+=(X&Q?1:0)+(J&Q?2:0);return he}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,$).replace(/{bbox-epsg-3857}/g,b)}isChildOf(s){const h=this.z-s.z;return h>0&&s.x===this.x>>h&&s.y===this.y>>h}getTilePoint(s){const h=Math.pow(2,this.z);return new Ce((s.x*h-this.x)*xn,(s.y*h-this.y)*xn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class u2{constructor(s,h){this.wrap=s,this.canonical=h,this.key=Yh(s,h.z,h.z,h.x,h.y)}}class ta{constructor(s,h,m,b,T){if(s<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${m}`);this.overscaledZ=s,this.wrap=h,this.canonical=new V_(m,+b,+T),this.key=Yh(h,s,m,b,T)}clone(){return new ta(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-s;return s>this.canonical.z?new ta(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ta(s,this.wrap,s,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(s,h){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-s;return s>this.canonical.z?Yh(this.wrap*+h,s,this.canonical.z,this.canonical.x,this.canonical.y):Yh(this.wrap*+h,s,s,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const h=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>h&&s.canonical.y===this.canonical.y>>h}children(s){if(this.overscaledZ>=s)return[new ta(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,b=2*this.canonical.y;return[new ta(h,this.wrap,h,m,b),new ta(h,this.wrap,h,m+1,b),new ta(h,this.wrap,h,m,b+1),new ta(h,this.wrap,h,m+1,b+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new ta(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new ta(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new u2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Wp(s.x-this.wrap,s.y))}}function Yh(c,s,h,m,b){(c*=2)<0&&(c=-1*c-1);const T=1<<h;return(T*T*c+T*b+m).toString(36)+h.toString(36)+s.toString(36)}ht("CanonicalTileID",V_),ht("OverscaledTileID",ta,{omit:["posMatrix"]});class c2{constructor(s,h,m){if(this.uid=s,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&m!=="mapbox"&&m!=="terrarium")return void H(`"${m}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=h.height;const b=this.dim=h.height-2;this.data=new Uint32Array(h.data.buffer),this.encoding=m||"mapbox";for(let T=0;T<b;T++)this.data[this._idx(-1,T)]=this.data[this._idx(0,T)],this.data[this._idx(b,T)]=this.data[this._idx(b-1,T)],this.data[this._idx(T,-1)]=this.data[this._idx(T,0)],this.data[this._idx(T,b)]=this.data[this._idx(T,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let T=0;T<b;T++)for(let C=0;C<b;C++){const D=this.get(T,C);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(s,h){const m=new Uint8Array(this.data.buffer),b=4*this._idx(s,h);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(m[b],m[b+1],m[b+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(s,h){if(s<-1||s>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(s+1)}_unpackMapbox(s,h,m){return(256*s*256+256*h+m)/10-1e4}_unpackTerrarium(s,h,m){return 256*s+h+m/256-32768}getPixels(){return new ea({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,h,m){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let b=h*this.dim,T=h*this.dim+this.dim,C=m*this.dim,D=m*this.dim+this.dim;switch(h){case-1:b=T-1;break;case 1:T=b+1}switch(m){case-1:C=D-1;break;case 1:D=C+1}const O=-h*this.dim,F=-m*this.dim;for(let $=C;$<D;$++)for(let G=b;G<T;G++)this.data[this._idx(G,$)]=s.data[this._idx(G+O,$+F)]}}ht("DEMData",c2);class h2{constructor(s){this._stringToNumber={},this._numberToString=[];for(let h=0;h<s.length;h++){const m=s[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class f2{constructor(s,h,m,b,T){this.type="Feature",this._vectorTileFeature=s,s._z=h,s._x=m,s._y=b,this.properties=s.properties,this.id=T}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(s[h]=this[h]);return s}}class d2{constructor(s,h){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new Sl(xn,16,0),this.grid3D=new Sl(xn,16,0),this.featureIndexArray=new Ht,this.promoteId=h}insert(s,h,m,b,T,C){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,b,T);const O=C?this.grid3D:this.grid;for(let F=0;F<h.length;F++){const $=h[F],G=[1/0,1/0,-1/0,-1/0];for(let X=0;X<$.length;X++){const J=$[X];G[0]=Math.min(G[0],J.x),G[1]=Math.min(G[1],J.y),G[2]=Math.max(G[2],J.x),G[3]=Math.max(G[3],J.y)}G[0]<xn&&G[1]<xn&&G[2]>=0&&G[3]>=0&&O.insert(D,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ls.VectorTile(new A_(this.rawTileData)).layers,this.sourceLayerCoder=new h2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,h,m,b){this.loadVTLayers();const T=s.params||{},C=xn/s.tileSize/s.scale,D=Nu(T.filter),O=s.queryGeometry,F=s.queryPadding*C,$=m2(O),G=this.grid.query($.minX-F,$.minY-F,$.maxX+F,$.maxY+F),X=m2(s.cameraQueryGeometry),J=this.grid3D.query(X.minX-F,X.minY-F,X.maxX+F,X.maxY+F,(ce,Ee,ke,Te)=>function(Me,Ue,Ve,ct,pt){for(const Ke of Me)if(Ue<=Ke.x&&Ve<=Ke.y&&ct>=Ke.x&&pt>=Ke.y)return!0;const tt=[new Ce(Ue,Ve),new Ce(Ue,pt),new Ce(ct,pt),new Ce(ct,Ve)];if(Me.length>2){for(const Ke of tt)if(Wu(Me,Ke))return!0}for(let Ke=0;Ke<Me.length-1;Ke++)if(Tk(Me[Ke],Me[Ke+1],tt))return!0;return!1}(s.cameraQueryGeometry,ce-F,Ee-F,ke+F,Te+F));for(const ce of J)G.push(ce);G.sort(KL);const Q={};let he;for(let ce=0;ce<G.length;ce++){const Ee=G[ce];if(Ee===he)continue;he=Ee;const ke=this.featureIndexArray.get(Ee);let Te=null;this.loadMatchingFeature(Q,ke.bucketIndex,ke.sourceLayerIndex,ke.featureIndex,D,T.layers,T.availableImages,h,m,b,(Me,Ue,Ve)=>(Te||(Te=Il(Me)),Ue.queryIntersectsFeature(O,Me,Ve,Te,this.z,s.transform,C,s.pixelPosMatrix)))}return Q}loadMatchingFeature(s,h,m,b,T,C,D,O,F,$,G){const X=this.bucketLayerIDs[h];if(C&&!function(ce,Ee){for(let ke=0;ke<ce.length;ke++)if(Ee.indexOf(ce[ke])>=0)return!0;return!1}(C,X))return;const J=this.sourceLayerCoder.decode(m),Q=this.vtLayers[J].feature(b);if(T.needGeometry){const ce=Ml(Q,!0);if(!T.filter(new Jr(this.tileID.overscaledZ),ce,this.tileID.canonical))return}else if(!T.filter(new Jr(this.tileID.overscaledZ),Q))return;const he=this.getId(Q,J);for(let ce=0;ce<X.length;ce++){const Ee=X[ce];if(C&&C.indexOf(Ee)<0)continue;const ke=O[Ee];if(!ke)continue;let Te={};he&&$&&(Te=$.getState(ke.sourceLayer||"_geojsonTileLayer",he));const Me=A({},F[Ee]);Me.paint=p2(Me.paint,ke.paint,Q,Te,D),Me.layout=p2(Me.layout,ke.layout,Q,Te,D);const Ue=!G||G(Q,ke,Te);if(!Ue)continue;const Ve=new f2(Q,this.z,this.x,this.y,he);Ve.layer=Me;let ct=s[Ee];ct===void 0&&(ct=s[Ee]=[]),ct.push({featureIndex:b,feature:Ve,intersectionZ:Ue})}}lookupSymbolFeatures(s,h,m,b,T,C,D,O){const F={};this.loadVTLayers();const $=Nu(T);for(const G of s)this.loadMatchingFeature(F,m,b,G,$,C,D,O,h);return F}hasLayer(s){for(const h of this.bucketLayerIDs)for(const m of h)if(s===m)return!0;return!1}getId(s,h){let m=s.id;return this.promoteId&&(m=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof m=="boolean"&&(m=Number(m))),m}}function p2(c,s,h,m,b){return k(c,(T,C)=>{const D=s instanceof Cl?s.get(C):null;return D&&D.evaluate?D.evaluate(h,m,b):D})}function m2(c){let s=1/0,h=1/0,m=-1/0,b=-1/0;for(const T of c)s=Math.min(s,T.x),h=Math.min(h,T.y),m=Math.max(m,T.x),b=Math.max(b,T.y);return{minX:s,minY:h,maxX:m,maxY:b}}function KL(c,s){return s-c}var U_;ht("FeatureIndex",d2,{omit:["rawTileData","sourceLayerCoder"]}),a.PerformanceMarkers=void 0,(U_=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",U_.load="load",U_.fullLoad="fullLoad";let Zp=null,Kh=[];const $_=1e3/30,JL={mark(c){performance.mark(c)},frame(c){const s=c;Zp!=null&&Kh.push(s-Zp),Zp=s},clearMetrics(){Zp=null,Kh=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const c in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure("loadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure("fullLoadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName("loadTime")[0].duration,s=performance.getEntriesByName("fullLoadTime")[0].duration,h=Kh.length,m=1/(Kh.reduce((T,C)=>T+C,0)/h/1e3),b=Kh.filter(T=>T>$_).reduce((T,C)=>T+(C-$_)/$_,0);return{loadTime:c,fullLoadTime:s,fps:m,percentDroppedFrames:b/(h+b)*100}}};a.AJAXError=Tt,a.ARRAY_TYPE=oi,a.Actor=class{constructor(c,s,h){this.target=c,this.parent=s,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},M(["receive","process"],this),this.invoker=new YL(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Y()?c:window}send(c,s,h,m,b=!1){const T=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[T]=h);const C=ve(this.globalScope)?void 0:[];return this.target.postMessage({id:T,type:c,hasCallback:!!h,targetMapId:m,mustQueue:b,sourceMapId:this.mapId,data:Bo(s,C)},C),{cancel:()=>{h&&delete this.callbacks[T],this.target.postMessage({id:T,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}receive(c){const s=c.data,h=s.id;if(h&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){delete this.tasks[h];const m=this.cancelCallbacks[h];delete this.cancelCallbacks[h],m&&m()}else Y()||s.mustQueue?(this.tasks[h]=s,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,s)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){if(s.type==="<response>"){const h=this.callbacks[c];delete this.callbacks[c],h&&(s.error?h(no(s.error)):h(null,no(s.data)))}else{let h=!1;const m=ve(this.globalScope)?void 0:[],b=s.hasCallback?(D,O)=>{h=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:D?Bo(D):null,data:Bo(O,m)},m)}:D=>{h=!0};let T=null;const C=no(s.data);if(this.parent[s.type])T=this.parent[s.type](s.sourceMapId,C,b);else if(this.parent.getWorkerSource){const D=s.type.split(".");T=this.parent.getWorkerSource(s.sourceMapId,D[0],C.source)[D[1]](C,b)}else b(new Error(`Could not find function ${s.type}`));!h&&T&&T.cancel&&(this.cancelCallbacks[c]=T.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=Uh,a.CanonicalTileID=V_,a.CollisionBoxArray=Be,a.CollisionCircleLayoutArray=class extends j{},a.Color=re,a.DEMData=c2,a.DataConstantProperty=gt,a.DictionaryCoder=h2,a.EXTENT=xn,a.ErrorEvent=Ri,a.EvaluationParameters=Jr,a.Event=_n,a.Evented=Vn,a.FeatureIndex=d2,a.FillBucket=S_,a.FillExtrusionBucket=E_,a.GeoJSONFeature=f2,a.ImageAtlas=Bw,a.ImagePosition=M_,a.LineBucket=C_,a.LineStripIndexArray=class extends ue{},a.LngLat=sn,a.LngLatBounds=Dl,a.MercatorCoordinate=Wp,a.ONE_EM=Rn,a.OverscaledTileID=ta,a.PerformanceUtils=JL,a.PosArray=Et,a.Properties=On,a.QuadTriangleArray=class extends K{},a.RGBAImage=ea,a.RasterBoundsArray=class extends x{},a.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},a.ResourceType=kt,a.SegmentVector=Kt,a.SymbolBucket=ec,a.Transitionable=Sp,a.TriangleIndexArray=ii,a.Uniform1f=Uo,a.Uniform1i=class extends Vo{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},a.Uniform2f=class extends Vo{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},a.Uniform3f=class extends Vo{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},a.Uniform4f=Hu,a.UniformColor=Qb,a.UniformMatrix4f=class extends Vo{constructor(c,s){super(c,s),this.current=yk}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},a.UnwrappedTileID=u2,a.ValidationError=Je,a.ZoomHistory=Ch,a.add=function(c,s,h){return c[0]=s[0]+h[0],c[1]=s[1]+h[1],c[2]=s[2]+h[2],c},a.addDynamicAttributes=O_,a.asyncAll=function(c,s,h){if(!c.length)return h(null,[]);let m=c.length;const b=new Array(c.length);let T=null;c.forEach((C,D)=>{s(C,(O,F)=>{O&&(T=O),b[D]=F,--m==0&&h(T,b)})})},a.bezier=v,a.bindAll=M,a.cacheEntryPossiblyAdded=function(c){vr++,vr>Br&&(c.getActor().send("enforceCacheSizeLimit",Dt),vr=0)},a.clamp=y,a.clearTileCache=function(c){const s=caches.delete(xt);c&&s.catch(c).then(()=>c())},a.clipLine=Xw,a.clone=function(c){var s=new oi(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},a.clone$1=z,a.clone$2=function(c){var s=new oi(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},a.collisionCircleLayout=vL,a.config=st,a.copy=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.create=function(){var c=new oi(16);return oi!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},a.create$1=sw,a.createExpression=fl,a.createFilter=Nu,a.createLayout=dn,a.createStyleLayer=function(c){return c.type==="custom"?new ZL(c):new XL[c.type](c)},a.cross=function(c,s,h){var m=s[0],b=s[1],T=s[2],C=h[0],D=h[1],O=h[2];return c[0]=b*O-T*D,c[1]=T*C-m*O,c[2]=m*D-b*C,c},a.dot=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},a.dot$1=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]*s[3]},a.ease=_,a.emitValidationErrors=Uu,a.enforceCacheSizeLimit=function(c){cr(),St&&St.then(s=>{s.keys().then(h=>{for(let m=0;m<h.length-c;m++)s.delete(h[m])})})},a.equals=function(c,s){var h=c[0],m=c[1],b=c[2],T=c[3],C=c[4],D=c[5],O=c[6],F=c[7],$=c[8],G=c[9],X=c[10],J=c[11],Q=c[12],he=c[13],ce=c[14],Ee=c[15],ke=s[0],Te=s[1],Me=s[2],Ue=s[3],Ve=s[4],ct=s[5],pt=s[6],tt=s[7],Ke=s[8],We=s[9],rt=s[10],Qe=s[11],qe=s[12],Ct=s[13],_t=s[14],qt=s[15];return Math.abs(h-ke)<=ai*Math.max(1,Math.abs(h),Math.abs(ke))&&Math.abs(m-Te)<=ai*Math.max(1,Math.abs(m),Math.abs(Te))&&Math.abs(b-Me)<=ai*Math.max(1,Math.abs(b),Math.abs(Me))&&Math.abs(T-Ue)<=ai*Math.max(1,Math.abs(T),Math.abs(Ue))&&Math.abs(C-Ve)<=ai*Math.max(1,Math.abs(C),Math.abs(Ve))&&Math.abs(D-ct)<=ai*Math.max(1,Math.abs(D),Math.abs(ct))&&Math.abs(O-pt)<=ai*Math.max(1,Math.abs(O),Math.abs(pt))&&Math.abs(F-tt)<=ai*Math.max(1,Math.abs(F),Math.abs(tt))&&Math.abs($-Ke)<=ai*Math.max(1,Math.abs($),Math.abs(Ke))&&Math.abs(G-We)<=ai*Math.max(1,Math.abs(G),Math.abs(We))&&Math.abs(X-rt)<=ai*Math.max(1,Math.abs(X),Math.abs(rt))&&Math.abs(J-Qe)<=ai*Math.max(1,Math.abs(J),Math.abs(Qe))&&Math.abs(Q-qe)<=ai*Math.max(1,Math.abs(Q),Math.abs(qe))&&Math.abs(he-Ct)<=ai*Math.max(1,Math.abs(he),Math.abs(Ct))&&Math.abs(ce-_t)<=ai*Math.max(1,Math.abs(ce),Math.abs(_t))&&Math.abs(Ee-qt)<=ai*Math.max(1,Math.abs(Ee),Math.abs(qt))},a.evaluateSizeForFeature=function(c,{uSize:s,uSizeT:h},{lowerSize:m,upperSize:b}){return c.kind==="source"?m/Go:c.kind==="composite"?Yr(m/Go,b/Go,h):s},a.evaluateSizeForZoom=function(c,s){let h=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:b,minZoom:T,maxZoom:C}=c,D=b?y(gi.interpolationFactor(b,s,T,C),0,1):0;c.kind==="camera"?m=Yr(c.minSize,c.maxSize,D):h=D}return{uSizeT:h,uSize:m}},a.evaluateVariableOffset=Jw,a.evented=Lh,a.exported=$e,a.exported$1=Fr,a.extend=A,a.filterObject=L,a.fromRotation=function(c,s){var h=Math.sin(s),m=Math.cos(s);return c[0]=m,c[1]=h,c[2]=0,c[3]=-h,c[4]=m,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},a.fromScaling=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},a.getAnchorAlignment=D_,a.getAnchorJustification=L_,a.getArrayBuffer=cn,a.getImage=Oi,a.getJSON=function(c,s){return yr(A(c,{type:"json"}),s)},a.getOverlapMode=F_,a.getRTLTextPluginStatus=Tl,a.getReferrer=zt,a.getVideo=function(c,s){const h=window.document.createElement("video");h.muted=!0,h.onloadstart=function(){s(null,h)};for(let m=0;m<c.length;m++){const b=window.document.createElement("source");lr(c[m])||(h.crossOrigin="Anonymous"),b.src=c[m],h.appendChild(b)}return{cancel:()=>{}}},a.identity=p_,a.invert=function(c,s){var h=s[0],m=s[1],b=s[2],T=s[3],C=s[4],D=s[5],O=s[6],F=s[7],$=s[8],G=s[9],X=s[10],J=s[11],Q=s[12],he=s[13],ce=s[14],Ee=s[15],ke=h*D-m*C,Te=h*O-b*C,Me=h*F-T*C,Ue=m*O-b*D,Ve=m*F-T*D,ct=b*F-T*O,pt=$*he-G*Q,tt=$*ce-X*Q,Ke=$*Ee-J*Q,We=G*ce-X*he,rt=G*Ee-J*he,Qe=X*Ee-J*ce,qe=ke*Qe-Te*rt+Me*We+Ue*Ke-Ve*tt+ct*pt;return qe?(c[0]=(D*Qe-O*rt+F*We)*(qe=1/qe),c[1]=(b*rt-m*Qe-T*We)*qe,c[2]=(he*ct-ce*Ve+Ee*Ue)*qe,c[3]=(X*Ve-G*ct-J*Ue)*qe,c[4]=(O*Ke-C*Qe-F*tt)*qe,c[5]=(h*Qe-b*Ke+T*tt)*qe,c[6]=(ce*Me-Q*ct-Ee*Te)*qe,c[7]=($*ct-X*Me+J*Te)*qe,c[8]=(C*rt-D*Ke+F*pt)*qe,c[9]=(m*Ke-h*rt-T*pt)*qe,c[10]=(Q*Ve-he*Me+Ee*ke)*qe,c[11]=(G*Me-$*Ve-J*ke)*qe,c[12]=(D*tt-C*We-O*pt)*qe,c[13]=(h*We-m*tt+b*pt)*qe,c[14]=(he*Te-Q*Ue-ce*ke)*qe,c[15]=($*Ue-G*Te+X*ke)*qe,c):null},a.isImageBitmap=Pe,a.isSafari=ve,a.isWorker=Y,a.keysDifference=function(c,s){const h=[];for(const m in c)m in s||h.push(m);return h},a.lazyLoadRTLTextPlugin=function(){Bi.isLoading()||Bi.isLoaded()||Tl()!=="deferred"||wp()},a.makeRequest=yr,a.mapObject=k,a.mercatorXfromLng=a2,a.mercatorYfromLat=o2,a.mercatorZfromAltitude=s2,a.mul=Ak,a.mul$1=function(c,s,h){return c[0]=s[0]*h[0],c[1]=s[1]*h[1],c[2]=s[2]*h[2],c[3]=s[3]*h[3],c},a.multiply=lw,a.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},a.normalize=function(c,s){var h=s[0],m=s[1],b=s[2],T=h*h+m*m+b*b;return T>0&&(T=1/Math.sqrt(T)),c[0]=s[0]*T,c[1]=s[1]*T,c[2]=s[2]*T,c},a.number=Yr,a.ortho=function(c,s,h,m,b,T,C){var D=1/(s-h),O=1/(m-b),F=1/(T-C);return c[0]=-2*D,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*O,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*F,c[11]=0,c[12]=(s+h)*D,c[13]=(b+m)*O,c[14]=(C+T)*F,c[15]=1,c},a.parseCacheControl=ae,a.parseGlyphPbf=function(c){return new A_(c).readFields(AL,[])},a.pbf=A_,a.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=xn/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0].layout,h=c.bucket.layers[0]._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new Jr(c.bucket.zoom+1),c.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Jr(c.bucket.zoom+1),c.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Jr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:F}=c.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Jr(O),c.canonical),h["text-size"].possiblyEvaluate(new Jr(F),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:F}=c.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Jr(O),c.canonical),h["icon-size"].possiblyEvaluate(new Jr(F),c.canonical)]}const b=s.get("text-line-height")*Rn,T=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",C=s.get("text-keep-upright"),D=s.get("text-size");for(const O of c.bucket.features){const F=s.get("text-font").evaluate(O,{},c.canonical).join(","),$=D.evaluate(O,{},c.canonical),G=m.layoutTextSize.evaluate(O,{},c.canonical),X=m.layoutIconSize.evaluate(O,{},c.canonical),J={horizontal:{},vertical:void 0},Q=O.text;let he,ce=[0,0];if(Q){const Te=Q.toString(),Me=s.get("text-letter-spacing").evaluate(O,{},c.canonical)*Rn,Ue=o_(Te)?Me:0,Ve=s.get("text-anchor").evaluate(O,{},c.canonical),ct=s.get("text-variable-anchor");if(!ct){const rt=s.get("text-radial-offset").evaluate(O,{},c.canonical);ce=rt?Jw(Ve,[rt*Rn,k_]):s.get("text-offset").evaluate(O,{},c.canonical).map(Qe=>Qe*Rn)}let pt=T?"center":s.get("text-justify").evaluate(O,{},c.canonical);const tt=s.get("symbol-placement"),Ke=tt==="point"?s.get("text-max-width").evaluate(O,{},c.canonical)*Rn:0,We=()=>{c.bucket.allowVerticalPlacement&&$u(Te)&&(J.vertical=Np(Q,c.glyphMap,c.glyphPositions,c.imagePositions,F,Ke,b,Ve,"left",Ue,ce,a.WritingMode.vertical,!0,tt,G,$))};if(!T&&ct){const rt=pt==="auto"?ct.map(qe=>L_(qe)):[pt];let Qe=!1;for(let qe=0;qe<rt.length;qe++){const Ct=rt[qe];if(!J.horizontal[Ct])if(Qe)J.horizontal[Ct]=J.horizontal[0];else{const _t=Np(Q,c.glyphMap,c.glyphPositions,c.imagePositions,F,Ke,b,"center",Ct,Ue,ce,a.WritingMode.horizontal,!1,tt,G,$);_t&&(J.horizontal[Ct]=_t,Qe=_t.positionedLines.length===1)}}We()}else{pt==="auto"&&(pt=L_(Ve));const rt=Np(Q,c.glyphMap,c.glyphPositions,c.imagePositions,F,Ke,b,Ve,pt,Ue,ce,a.WritingMode.horizontal,!1,tt,G,$);rt&&(J.horizontal[pt]=rt),We(),$u(Te)&&T&&C&&(J.vertical=Np(Q,c.glyphMap,c.glyphPositions,c.imagePositions,F,Ke,b,Ve,pt,Ue,ce,a.WritingMode.vertical,!1,tt,G,$))}}let Ee=!1;if(O.icon&&O.icon.name){const Te=c.imageMap[O.icon.name];Te&&(he=LL(c.imagePositions[O.icon.name],s.get("icon-offset").evaluate(O,{},c.canonical),s.get("icon-anchor").evaluate(O,{},c.canonical)),Ee=!!Te.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Ee:c.bucket.sdfIcons!==Ee&&H("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Te.pixelRatio!==c.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const ke=e2(J.horizontal)||J.vertical;c.bucket.iconsInText=!!ke&&ke.iconsInText,(ke||he)&&VL(c.bucket,O,J,he,c.imageMap,m,G,X,ce,Ee,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},a.perspective=function(c,s,h,m,b){var T,C=1/Math.tan(s/2);return c[0]=C/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=C,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,b!=null&&b!==1/0?(c[10]=(b+m)*(T=1/(m-b)),c[14]=2*b*m*T):(c[10]=-1,c[14]=-2*m),c},a.pick=function(c,s){const h={};for(let m=0;m<s.length;m++){const b=s[m];b in c&&(h[b]=c[b])}return h},a.plugin=Bi,a.pointGeometry=Ce,a.polygonIntersectsPolygon=nw,a.potpack=zw,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=ht,a.registerForPluginStateChange=function(c){return c({pluginStatus:ni,pluginURL:io}),Lh.on("pluginStateChange",c),c},a.renderColorRamp=mw,a.rotateX=function(c,s,h){var m=Math.sin(h),b=Math.cos(h),T=s[4],C=s[5],D=s[6],O=s[7],F=s[8],$=s[9],G=s[10],X=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=T*b+F*m,c[5]=C*b+$*m,c[6]=D*b+G*m,c[7]=O*b+X*m,c[8]=F*b-T*m,c[9]=$*b-C*m,c[10]=G*b-D*m,c[11]=X*b-O*m,c},a.rotateZ=function(c,s,h){var m=Math.sin(h),b=Math.cos(h),T=s[0],C=s[1],D=s[2],O=s[3],F=s[4],$=s[5],G=s[6],X=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=T*b+F*m,c[1]=C*b+$*m,c[2]=D*b+G*m,c[3]=O*b+X*m,c[4]=F*b-T*m,c[5]=$*b-C*m,c[6]=G*b-D*m,c[7]=X*b-O*m,c},a.scale=function(c,s,h){var m=h[0],b=h[1],T=h[2];return c[0]=s[0]*m,c[1]=s[1]*m,c[2]=s[2]*m,c[3]=s[3]*m,c[4]=s[4]*b,c[5]=s[5]*b,c[6]=s[6]*b,c[7]=s[7]*b,c[8]=s[8]*T,c[9]=s[9]*T,c[10]=s[10]*T,c[11]=s[11]*T,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},a.scale$1=function(c,s,h){return c[0]=s[0]*h,c[1]=s[1]*h,c[2]=s[2]*h,c},a.setCacheLimits=function(c,s){Dt=c,Br=s},a.setRTLTextPlugin=function(c,s,h=!1){if(ni===Mh||ni===Ph||ni===Dh)throw new Error("setRTLTextPlugin cannot be called multiple times.");io=$e.resolveURL(c),ni=Mh,kh=s,Ms(),h||wp()},a.spec=Ne,a.sphericalToCartesian=function([c,s,h]){return s+=90,s*=Math.PI/180,h*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(h),y:c*Math.sin(s)*Math.sin(h),z:c*Math.cos(h)}},a.sqrLen=function(c){var s=c[0],h=c[1];return s*s+h*h},a.sub=function(c,s,h){return c[0]=s[0]-h[0],c[1]=s[1]-h[1],c[2]=s[2]-h[2],c},a.toEvaluationFeature=Ml,a.transformMat3=function(c,s,h){var m=s[0],b=s[1],T=s[2];return c[0]=m*h[0]+b*h[3]+T*h[6],c[1]=m*h[1]+b*h[4]+T*h[7],c[2]=m*h[2]+b*h[5]+T*h[8],c},a.transformMat4=Dp,a.transformMat4$1=function(c,s,h){var m=s[0],b=s[1];return c[0]=h[0]*m+h[4]*b+h[12],c[1]=h[1]*m+h[5]*b+h[13],c},a.translate=function(c,s,h){var m,b,T,C,D,O,F,$,G,X,J,Q,he=h[0],ce=h[1],Ee=h[2];return s===c?(c[12]=s[0]*he+s[4]*ce+s[8]*Ee+s[12],c[13]=s[1]*he+s[5]*ce+s[9]*Ee+s[13],c[14]=s[2]*he+s[6]*ce+s[10]*Ee+s[14],c[15]=s[3]*he+s[7]*ce+s[11]*Ee+s[15]):(b=s[1],T=s[2],C=s[3],D=s[4],O=s[5],F=s[6],$=s[7],G=s[8],X=s[9],J=s[10],Q=s[11],c[0]=m=s[0],c[1]=b,c[2]=T,c[3]=C,c[4]=D,c[5]=O,c[6]=F,c[7]=$,c[8]=G,c[9]=X,c[10]=J,c[11]=Q,c[12]=m*he+D*ce+G*Ee+s[12],c[13]=b*he+O*ce+X*Ee+s[13],c[14]=T*he+F*ce+J*Ee+s[14],c[15]=C*he+$*ce+Q*Ee+s[15]),c},a.triggerPluginCompletionEvent=bp,a.unicodeBlockLookup=et,a.uniqueId=function(){return I++},a.validateCustomStyleLayer=function(c){const s=[],h=c.id;return h===void 0&&s.push({message:`layers.${h}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),s},a.validateLight=Eh,a.validateStyle=wl,a.vectorTile=Ls,a.warnOnce=H,a.wrap=S}),o(["./shared"],function(a){function f(ne){const U=typeof ne;if(U==="number"||U==="boolean"||U==="string"||ne==null)return JSON.stringify(ne);if(Array.isArray(ne)){let re="[";for(const fe of ne)re+=`${f(fe)},`;return`${re}]`}const q=Object.keys(ne).sort();let te="{";for(let re=0;re<q.length;re++)te+=`${JSON.stringify(q[re])}:${f(ne[q[re]])},`;return`${te}}`}function p(ne){let U="";for(const q of a.refProperties)U+=`/${f(ne[q])}`;return U}class v{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,q){for(const re of U){this._layerConfigs[re.id]=re;const fe=this._layers[re.id]=a.createStyleLayer(re);fe._featureFilter=a.createFilter(fe.filter),this.keyCache[re.id]&&delete this.keyCache[re.id]}for(const re of q)delete this.keyCache[re],delete this._layerConfigs[re],delete this._layers[re];this.familiesBySource={};const te=function(re,fe){const xe={};for(let de=0;de<re.length;de++){const be=fe&&fe[re[de].id]||p(re[de]);fe&&(fe[re[de].id]=be);let Re=xe[be];Re||(Re=xe[be]=[]),Re.push(re[de])}const me=[];for(const de in xe)me.push(xe[de]);return me}(Object.values(this._layerConfigs),this.keyCache);for(const re of te){const fe=re.map(Ge=>this._layers[Ge.id]),xe=fe[0];if(xe.visibility==="none")continue;const me=xe.source||"";let de=this.familiesBySource[me];de||(de=this.familiesBySource[me]={});const be=xe.sourceLayer||"_geojsonTileLayer";let Re=de[be];Re||(Re=de[be]=[]),Re.push(fe)}}}class _{constructor(U){const q={},te=[];for(const me in U){const de=U[me],be=q[me]={};for(const Re in de){const Ge=de[+Re];if(!Ge||Ge.bitmap.width===0||Ge.bitmap.height===0)continue;const Oe={x:0,y:0,w:Ge.bitmap.width+2,h:Ge.bitmap.height+2};te.push(Oe),be[Re]={rect:Oe,metrics:Ge.metrics}}}const{w:re,h:fe}=a.potpack(te),xe=new a.AlphaImage({width:re||1,height:fe||1});for(const me in U){const de=U[me];for(const be in de){const Re=de[+be];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;const Ge=q[me][be].rect;a.AlphaImage.copy(Re.bitmap,xe,{x:0,y:0},{x:Ge.x+1,y:Ge.y+1},Re.bitmap)}}this.image=xe,this.positions=q}}a.register("GlyphAtlas",_);class y{constructor(U){this.tileID=new a.OverscaledTileID(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId}parse(U,q,te,re,fe){this.status="parsing",this.data=U,this.collisionBoxArray=new a.CollisionBoxArray;const xe=new a.DictionaryCoder(Object.keys(U.layers).sort()),me=new a.FeatureIndex(this.tileID,this.promoteId);me.bucketLayerIDs=[];const de={},be={featureIndex:me,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te},Re=q.familiesBySource[this.source];for(const Ft in Re){const Gt=U.layers[Ft];if(!Gt)continue;Gt.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${Ft}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const nr=xe.encode(Ft),kr=[];for(let An=0;An<Gt.length;An++){const Xr=Gt.feature(An),Un=me.getId(Xr,Ft);kr.push({feature:Xr,id:Un,index:An,sourceLayerIndex:nr})}for(const An of Re[Ft]){const Xr=An[0];Xr.source!==this.source&&a.warnOnce(`layer.source = ${Xr.source} does not equal this.source = ${this.source}`),Xr.minzoom&&this.zoom<Math.floor(Xr.minzoom)||Xr.maxzoom&&this.zoom>=Xr.maxzoom||Xr.visibility!=="none"&&(S(An,this.zoom,te),(de[Xr.id]=Xr.createBucket({index:me.bucketLayerIDs.length,layers:An,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:nr,sourceID:this.source})).populate(kr,be,this.tileID.canonical),me.bucketLayerIDs.push(An.map(Un=>Un.id)))}}let Ge,Oe,dt,vt;const it=a.mapObject(be.glyphDependencies,Ft=>Object.keys(Ft).map(Number));Object.keys(it).length?re.send("getGlyphs",{uid:this.uid,stacks:it},(Ft,Gt)=>{Ge||(Ge=Ft,Oe=Gt,rr.call(this))}):Oe={};const It=Object.keys(be.iconDependencies);It.length?re.send("getImages",{icons:It,source:this.source,tileID:this.tileID,type:"icons"},(Ft,Gt)=>{Ge||(Ge=Ft,dt=Gt,rr.call(this))}):dt={};const Lt=Object.keys(be.patternDependencies);function rr(){if(Ge)return fe(Ge);if(Oe&&dt&&vt){const Ft=new _(Oe),Gt=new a.ImageAtlas(dt,vt);for(const nr in de){const kr=de[nr];kr instanceof a.SymbolBucket?(S(kr.layers,this.zoom,te),a.performSymbolLayout({bucket:kr,glyphMap:Oe,glyphPositions:Ft.positions,imageMap:dt,imagePositions:Gt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):kr.hasPattern&&(kr instanceof a.LineBucket||kr instanceof a.FillBucket||kr instanceof a.FillExtrusionBucket)&&(S(kr.layers,this.zoom,te),kr.addFeatures(be,this.tileID.canonical,Gt.patternPositions))}this.status="done",fe(null,{buckets:Object.values(de).filter(nr=>!nr.isEmpty()),featureIndex:me,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ft.image,imageAtlas:Gt,glyphMap:this.returnDependencies?Oe:null,iconMap:this.returnDependencies?dt:null,glyphPositions:this.returnDependencies?Ft.positions:null})}}Lt.length?re.send("getImages",{icons:Lt,source:this.source,tileID:this.tileID,type:"patterns"},(Ft,Gt)=>{Ge||(Ge=Ft,vt=Gt,rr.call(this))}):vt={},rr.call(this)}}function S(ne,U,q){const te=new a.EvaluationParameters(U);for(const re of ne)re.recalculate(te,q)}function A(ne,U){const q=a.getArrayBuffer(ne.request,(te,re,fe,xe)=>{te?U(te):re&&U(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(re)),rawData:re,cacheControl:fe,expires:xe})});return()=>{q.cancel(),U()}}class I{constructor(U,q,te,re){this.actor=U,this.layerIndex=q,this.availableImages=te,this.loadVectorData=re||A,this.loading={},this.loaded={}}loadTile(U,q){const te=U.uid;this.loading||(this.loading={});const re=!!(U&&U.request&&U.request.collectResourceTiming)&&new a.RequestPerformance(U.request),fe=this.loading[te]=new y(U);fe.abort=this.loadVectorData(U,(xe,me)=>{if(delete this.loading[te],xe||!me)return fe.status="done",this.loaded[te]=fe,q(xe);const de=me.rawData,be={};me.expires&&(be.expires=me.expires),me.cacheControl&&(be.cacheControl=me.cacheControl);const Re={};if(re){const Ge=re.finish();Ge&&(Re.resourceTiming=JSON.parse(JSON.stringify(Ge)))}fe.vectorTile=me.vectorTile,fe.parse(me.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ge,Oe)=>{if(Ge||!Oe)return q(Ge);q(null,a.extend({rawTileData:de.slice(0)},Oe,be,Re))}),this.loaded=this.loaded||{},this.loaded[te]=fe})}reloadTile(U,q){const te=this.loaded,re=U.uid,fe=this;if(te&&te[re]){const xe=te[re];xe.showCollisionBoxes=U.showCollisionBoxes;const me=(de,be)=>{const Re=xe.reloadCallback;Re&&(delete xe.reloadCallback,xe.parse(xe.vectorTile,fe.layerIndex,this.availableImages,fe.actor,Re)),q(de,be)};xe.status==="parsing"?xe.reloadCallback=me:xe.status==="done"&&(xe.vectorTile?xe.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,me):me())}}abortTile(U,q){const te=this.loading,re=U.uid;te&&te[re]&&te[re].abort&&(te[re].abort(),delete te[re]),q()}removeTile(U,q){const te=this.loaded,re=U.uid;te&&te[re]&&delete te[re],q()}}class M{constructor(){this.loaded={}}loadTile(U,q){const{uid:te,encoding:re,rawImageData:fe}=U,xe=a.isImageBitmap(fe)?this.getImageData(fe):fe,me=new a.DEMData(te,xe,re);this.loaded=this.loaded||{},this.loaded[te]=me,q(null,me)}getImageData(U){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);const q=this.offscreenCanvasContext.getImageData(-1,-1,U.width+2,U.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:q.width,height:q.height},q.data)}removeTile(U){const q=this.loaded,te=U.uid;q&&q[te]&&delete q[te]}}var k=function ne(U,q){var te,re=U&&U.type;if(re==="FeatureCollection")for(te=0;te<U.features.length;te++)ne(U.features[te],q);else if(re==="GeometryCollection")for(te=0;te<U.geometries.length;te++)ne(U.geometries[te],q);else if(re==="Feature")ne(U.geometry,q);else if(re==="Polygon")L(U.coordinates,q);else if(re==="MultiPolygon")for(te=0;te<U.coordinates.length;te++)L(U.coordinates[te],q);return U};function L(ne,U){if(ne.length!==0){z(ne[0],U);for(var q=1;q<ne.length;q++)z(ne[q],!U)}}function z(ne,U){for(var q=0,te=0,re=0,fe=ne.length,xe=fe-1;re<fe;xe=re++){var me=(ne[re][0]-ne[xe][0])*(ne[xe][1]+ne[re][1]),de=q+me;te+=Math.abs(q)>=Math.abs(me)?q-de+me:me-de+q,q=de}q+te>=0!=!!U&&ne.reverse()}const V=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;class H{constructor(U){this._feature=U,this.extent=a.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))}loadGeometry(){if(this._feature.type===1){const U=[];for(const q of this._feature.geometry)U.push([new a.pointGeometry(q[0],q[1])]);return U}{const U=[];for(const q of this._feature.geometry){const te=[];for(const re of q)te.push(new a.pointGeometry(re[0],re[1]));U.push(te)}return U}}toGeoJSON(U,q,te){return V.call(this,U,q,te)}}class Z{constructor(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=U.length,this._features=U}feature(U){return new H(this._features[U])}}var ee={exports:{}},Y=a.pointGeometry,ae=a.vectorTile.VectorTileFeature,le=pe;function pe(ne,U){this.options=U||{},this.features=ne,this.length=ne.length}function ye(ne,U){this.id=typeof ne.id=="number"?ne.id:void 0,this.type=ne.type,this.rawGeometry=ne.type===1?[ne.geometry]:ne.geometry,this.properties=ne.tags,this.extent=U||4096}pe.prototype.feature=function(ne){return new ye(this.features[ne],this.options.extent)},ye.prototype.loadGeometry=function(){var ne=this.rawGeometry;this.geometry=[];for(var U=0;U<ne.length;U++){for(var q=ne[U],te=[],re=0;re<q.length;re++)te.push(new Y(q[re][0],q[re][1]));this.geometry.push(te)}return this.geometry},ye.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ne=this.geometry,U=1/0,q=-1/0,te=1/0,re=-1/0,fe=0;fe<ne.length;fe++)for(var xe=ne[fe],me=0;me<xe.length;me++){var de=xe[me];U=Math.min(U,de.x),q=Math.max(q,de.x),te=Math.min(te,de.y),re=Math.max(re,de.y)}return[U,te,q,re]},ye.prototype.toGeoJSON=ae.prototype.toGeoJSON;var ve=a.pbf,Pe=le;function $e(ne){var U=new ve;return function(q,te){for(var re in q.layers)te.writeMessage(3,Ce,q.layers[re])}(ne,U),U.finish()}function Ce(ne,U){var q;U.writeVarintField(15,ne.version||1),U.writeStringField(1,ne.name||""),U.writeVarintField(5,ne.extent||4096);var te={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<ne.length;q++)te.feature=ne.feature(q),U.writeMessage(2,at,te);var re=te.keys;for(q=0;q<re.length;q++)U.writeStringField(3,re[q]);var fe=te.values;for(q=0;q<fe.length;q++)U.writeMessage(4,Dt,fe[q])}function at(ne,U){var q=ne.feature;q.id!==void 0&&U.writeVarintField(1,q.id),U.writeMessage(2,st,ne),U.writeVarintField(3,q.type),U.writeMessage(4,Xt,q)}function st(ne,U){var q=ne.feature,te=ne.keys,re=ne.values,fe=ne.keycache,xe=ne.valuecache;for(var me in q.properties){var de=q.properties[me],be=fe[me];if(de!==null){be===void 0&&(te.push(me),fe[me]=be=te.length-1),U.writeVarint(be);var Re=typeof de;Re!=="string"&&Re!=="boolean"&&Re!=="number"&&(de=JSON.stringify(de));var Ge=Re+":"+de,Oe=xe[Ge];Oe===void 0&&(re.push(de),xe[Ge]=Oe=re.length-1),U.writeVarint(Oe)}}}function xt(ne,U){return(U<<3)+(7&ne)}function St(ne){return ne<<1^ne>>31}function Xt(ne,U){for(var q=ne.loadGeometry(),te=ne.type,re=0,fe=0,xe=q.length,me=0;me<xe;me++){var de=q[me],be=1;te===1&&(be=de.length),U.writeVarint(xt(1,be));for(var Re=te===3?de.length-1:de.length,Ge=0;Ge<Re;Ge++){Ge===1&&te!==1&&U.writeVarint(xt(2,Re-1));var Oe=de[Ge].x-re,dt=de[Ge].y-fe;U.writeVarint(St(Oe)),U.writeVarint(St(dt)),re+=Oe,fe+=dt}te===3&&U.writeVarint(xt(7,1))}}function Dt(ne,U){var q=typeof ne;q==="string"?U.writeStringField(1,ne):q==="boolean"?U.writeBooleanField(7,ne):q==="number"&&(ne%1!=0?U.writeDoubleField(3,ne):ne<0?U.writeSVarintField(6,ne):U.writeVarintField(5,ne))}function Br(ne,U,q,te,re,fe){if(re-te<=q)return;const xe=te+re>>1;cr(ne,U,xe,te,re,fe%2),Br(ne,U,q,te,xe-1,fe+1),Br(ne,U,q,xe+1,re,fe+1)}function cr(ne,U,q,te,re,fe){for(;re>te;){if(re-te>600){const be=re-te+1,Re=q-te+1,Ge=Math.log(be),Oe=.5*Math.exp(2*Ge/3),dt=.5*Math.sqrt(Ge*Oe*(be-Oe)/be)*(Re-be/2<0?-1:1);cr(ne,U,q,Math.max(te,Math.floor(q-Re*Oe/be+dt)),Math.min(re,Math.floor(q+(be-Re)*Oe/be+dt)),fe)}const xe=U[2*q+fe];let me=te,de=re;for(vr(ne,U,te,q),U[2*re+fe]>xe&&vr(ne,U,te,re);me<de;){for(vr(ne,U,me,de),me++,de--;U[2*me+fe]<xe;)me++;for(;U[2*de+fe]>xe;)de--}U[2*te+fe]===xe?vr(ne,U,te,de):(de++,vr(ne,U,de,re)),de<=q&&(te=de+1),q<=de&&(re=de-1)}}function vr(ne,U,q,te){Fr(ne,q,te),Fr(U,2*q,2*te),Fr(U,2*q+1,2*te+1)}function Fr(ne,U,q){const te=ne[U];ne[U]=ne[q],ne[q]=te}function Ur(ne,U,q,te){const re=ne-q,fe=U-te;return re*re+fe*fe}ee.exports=$e,ee.exports.fromVectorTileJs=$e,ee.exports.fromGeojsonVt=function(ne,U){U=U||{};var q={};for(var te in ne)q[te]=new Pe(ne[te].features,U),q[te].name=te,q[te].version=U.version,q[te].extent=U.extent;return $e({layers:q})},ee.exports.GeoJSONWrapper=Pe;const gr=ne=>ne[0],Yt=ne=>ne[1];class _r{constructor(U,q=gr,te=Yt,re=64,fe=Float64Array){this.nodeSize=re,this.points=U;const xe=U.length<65536?Uint16Array:Uint32Array,me=this.ids=new xe(U.length),de=this.coords=new fe(2*U.length);for(let be=0;be<U.length;be++)me[be]=be,de[2*be]=q(U[be]),de[2*be+1]=te(U[be]);Br(me,de,re,0,me.length-1,0)}range(U,q,te,re){return function(fe,xe,me,de,be,Re,Ge){const Oe=[0,fe.length-1,0],dt=[];let vt,it;for(;Oe.length;){const It=Oe.pop(),Lt=Oe.pop(),rr=Oe.pop();if(Lt-rr<=Ge){for(let nr=rr;nr<=Lt;nr++)vt=xe[2*nr],it=xe[2*nr+1],vt>=me&&vt<=be&&it>=de&&it<=Re&&dt.push(fe[nr]);continue}const Ft=Math.floor((rr+Lt)/2);vt=xe[2*Ft],it=xe[2*Ft+1],vt>=me&&vt<=be&&it>=de&&it<=Re&&dt.push(fe[Ft]);const Gt=(It+1)%2;(It===0?me<=vt:de<=it)&&(Oe.push(rr),Oe.push(Ft-1),Oe.push(Gt)),(It===0?be>=vt:Re>=it)&&(Oe.push(Ft+1),Oe.push(Lt),Oe.push(Gt))}return dt}(this.ids,this.coords,U,q,te,re,this.nodeSize)}within(U,q,te){return function(re,fe,xe,me,de,be){const Re=[0,re.length-1,0],Ge=[],Oe=de*de;for(;Re.length;){const dt=Re.pop(),vt=Re.pop(),it=Re.pop();if(vt-it<=be){for(let Gt=it;Gt<=vt;Gt++)Ur(fe[2*Gt],fe[2*Gt+1],xe,me)<=Oe&&Ge.push(re[Gt]);continue}const It=Math.floor((it+vt)/2),Lt=fe[2*It],rr=fe[2*It+1];Ur(Lt,rr,xe,me)<=Oe&&Ge.push(re[It]);const Ft=(dt+1)%2;(dt===0?xe-de<=Lt:me-de<=rr)&&(Re.push(it),Re.push(It-1),Re.push(Ft)),(dt===0?xe+de>=Lt:me+de>=rr)&&(Re.push(It+1),Re.push(vt),Re.push(Ft))}return Ge}(this.ids,this.coords,U,q,te,this.nodeSize)}}const At={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ne=>ne},kt=Math.fround||(Tt=new Float32Array(1),ne=>(Tt[0]=+ne,Tt[0]));var Tt;class zt{constructor(U){this.options=Oi(Object.create(At),U),this.trees=new Array(this.options.maxZoom+1)}load(U){const{log:q,minZoom:te,maxZoom:re,nodeSize:fe}=this.options;q&&console.time("total time");const xe=`prepare ${U.length} points`;q&&console.time(xe),this.points=U;let me=[];for(let de=0;de<U.length;de++)U[de].geometry&&me.push(yr(U[de],de));this.trees[re+1]=new _r(me,La,Yi,fe,Float32Array),q&&console.timeEnd(xe);for(let de=re;de>=te;de--){const be=+Date.now();me=this._cluster(me,de),this.trees[de]=new _r(me,La,Yi,fe,Float32Array),q&&console.log("z%d: %d clusters in %dms",de,me.length,+Date.now()-be)}return q&&console.timeEnd("total time"),this}getClusters(U,q){let te=((U[0]+180)%360+360)%360-180;const re=Math.max(-90,Math.min(90,U[1]));let fe=U[2]===180?180:((U[2]+180)%360+360)%360-180;const xe=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)te=-180,fe=180;else if(te>fe){const Re=this.getClusters([te,re,180,xe],q),Ge=this.getClusters([-180,re,fe,xe],q);return Re.concat(Ge)}const me=this.trees[this._limitZoom(q)],de=me.range(Pt(te),$r(xe),Pt(fe),$r(re)),be=[];for(const Re of de){const Ge=me.points[Re];be.push(Ge.numPoints?cn(Ge):this.points[Ge.index])}return be}getChildren(U){const q=this._getOriginId(U),te=this._getOriginZoom(U),re="No cluster with the specified id.",fe=this.trees[te];if(!fe)throw new Error(re);const xe=fe.points[q];if(!xe)throw new Error(re);const me=this.options.radius/(this.options.extent*Math.pow(2,te-1)),de=fe.within(xe.x,xe.y,me),be=[];for(const Re of de){const Ge=fe.points[Re];Ge.parentId===U&&be.push(Ge.numPoints?cn(Ge):this.points[Ge.index])}if(be.length===0)throw new Error(re);return be}getLeaves(U,q,te){const re=[];return this._appendLeaves(re,U,q=q||10,te=te||0,0),re}getTile(U,q,te){const re=this.trees[this._limitZoom(U)],fe=Math.pow(2,U),{extent:xe,radius:me}=this.options,de=me/xe,be=(te-de)/fe,Re=(te+1+de)/fe,Ge={features:[]};return this._addTileFeatures(re.range((q-de)/fe,be,(q+1+de)/fe,Re),re.points,q,te,fe,Ge),q===0&&this._addTileFeatures(re.range(1-de/fe,be,1,Re),re.points,fe,te,fe,Ge),q===fe-1&&this._addTileFeatures(re.range(0,be,de/fe,Re),re.points,-1,te,fe,Ge),Ge.features.length?Ge:null}getClusterExpansionZoom(U){let q=this._getOriginZoom(U)-1;for(;q<=this.options.maxZoom;){const te=this.getChildren(U);if(q++,te.length!==1)break;U=te[0].properties.cluster_id}return q}_appendLeaves(U,q,te,re,fe){const xe=this.getChildren(q);for(const me of xe){const de=me.properties;if(de&&de.cluster?fe+de.point_count<=re?fe+=de.point_count:fe=this._appendLeaves(U,de.cluster_id,te,re,fe):fe<re?fe++:U.push(me),U.length===te)break}return fe}_addTileFeatures(U,q,te,re,fe,xe){for(const me of U){const de=q[me],be=de.numPoints;let Re,Ge,Oe;if(be)Re=lr(de),Ge=de.x,Oe=de.y;else{const it=this.points[de.index];Re=it.properties,Ge=Pt(it.geometry.coordinates[0]),Oe=$r(it.geometry.coordinates[1])}const dt={type:1,geometry:[[Math.round(this.options.extent*(Ge*fe-te)),Math.round(this.options.extent*(Oe*fe-re))]],tags:Re};let vt;be?vt=de.id:this.options.generateId?vt=de.index:this.points[de.index].id&&(vt=this.points[de.index].id),vt!==void 0&&(dt.id=vt),xe.features.push(dt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,q){const te=[],{radius:re,extent:fe,reduce:xe,minPoints:me}=this.options,de=re/(fe*Math.pow(2,q));for(let be=0;be<U.length;be++){const Re=U[be];if(Re.zoom<=q)continue;Re.zoom=q;const Ge=this.trees[q+1],Oe=Ge.within(Re.x,Re.y,de),dt=Re.numPoints||1;let vt=dt;for(const it of Oe){const It=Ge.points[it];It.zoom>q&&(vt+=It.numPoints||1)}if(vt>dt&&vt>=me){let it=Re.x*dt,It=Re.y*dt,Lt=xe&&dt>1?this._map(Re,!0):null;const rr=(be<<5)+(q+1)+this.points.length;for(const Ft of Oe){const Gt=Ge.points[Ft];if(Gt.zoom<=q)continue;Gt.zoom=q;const nr=Gt.numPoints||1;it+=Gt.x*nr,It+=Gt.y*nr,Gt.parentId=rr,xe&&(Lt||(Lt=this._map(Re,!0)),xe(Lt,this._map(Gt)))}Re.parentId=rr,te.push(hr(it/vt,It/vt,rr,vt,Lt))}else if(te.push(Re),vt>1)for(const it of Oe){const It=Ge.points[it];It.zoom<=q||(It.zoom=q,te.push(It))}}return te}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,q){if(U.numPoints)return q?Oi({},U.properties):U.properties;const te=this.points[U.index].properties,re=this.options.map(te);return q&&re===te?Oi({},re):re}}function hr(ne,U,q,te,re){return{x:kt(ne),y:kt(U),zoom:1/0,id:q,parentId:-1,numPoints:te,properties:re}}function yr(ne,U){const[q,te]=ne.geometry.coordinates;return{x:kt(Pt(q)),y:kt($r(te)),zoom:1/0,index:U,parentId:-1}}function cn(ne){return{type:"Feature",id:ne.id,properties:lr(ne),geometry:{type:"Point",coordinates:[(U=ne.x,360*(U-.5)),pi(ne.y)]}};var U}function lr(ne){const U=ne.numPoints,q=U>=1e4?`${Math.round(U/1e3)}k`:U>=1e3?Math.round(U/100)/10+"k":U;return Oi(Oi({},ne.properties),{cluster:!0,cluster_id:ne.id,point_count:U,point_count_abbreviated:q})}function Pt(ne){return ne/360+.5}function $r(ne){const U=Math.sin(ne*Math.PI/180),q=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return q<0?0:q>1?1:q}function pi(ne){const U=(180-360*ne)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function Oi(ne,U){for(const q in U)ne[q]=U[q];return ne}function La(ne){return ne.x}function Yi(ne){return ne.y}function _n(ne,U,q,te){for(var re,fe=te,xe=q-U>>1,me=q-U,de=ne[U],be=ne[U+1],Re=ne[q],Ge=ne[q+1],Oe=U+3;Oe<q;Oe+=3){var dt=Ri(ne[Oe],ne[Oe+1],de,be,Re,Ge);if(dt>fe)re=Oe,fe=dt;else if(dt===fe){var vt=Math.abs(Oe-xe);vt<me&&(re=Oe,me=vt)}}fe>te&&(re-U>3&&_n(ne,U,re,te),ne[re+2]=fe,q-re>3&&_n(ne,re,q,te))}function Ri(ne,U,q,te,re,fe){var xe=re-q,me=fe-te;if(xe!==0||me!==0){var de=((ne-q)*xe+(U-te)*me)/(xe*xe+me*me);de>1?(q=re,te=fe):de>0&&(q+=xe*de,te+=me*de)}return(xe=ne-q)*xe+(me=U-te)*me}function Vn(ne,U,q,te){var re={id:ne===void 0?null:ne,type:U,geometry:q,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(fe){var xe=fe.geometry,me=fe.type;if(me==="Point"||me==="MultiPoint"||me==="LineString")Ne(fe,xe);else if(me==="Polygon"||me==="MultiLineString")for(var de=0;de<xe.length;de++)Ne(fe,xe[de]);else if(me==="MultiPolygon")for(de=0;de<xe.length;de++)for(var be=0;be<xe[de].length;be++)Ne(fe,xe[de][be])}(re),re}function Ne(ne,U){for(var q=0;q<U.length;q+=3)ne.minX=Math.min(ne.minX,U[q]),ne.minY=Math.min(ne.minY,U[q+1]),ne.maxX=Math.max(ne.maxX,U[q]),ne.maxY=Math.max(ne.maxY,U[q+1])}function Je(ne,U,q,te){if(U.geometry){var re=U.geometry.coordinates,fe=U.geometry.type,xe=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2),me=[],de=U.id;if(q.promoteId?de=U.properties[q.promoteId]:q.generateId&&(de=te||0),fe==="Point")Po(re,me);else if(fe==="MultiPoint")for(var be=0;be<re.length;be++)Po(re[be],me);else if(fe==="LineString")Ki(re,me,xe,!1);else if(fe==="MultiLineString"){if(q.lineMetrics){for(be=0;be<re.length;be++)Ki(re[be],me=[],xe,!1),ne.push(Vn(de,"LineString",me,U.properties));return}tr(re,me,xe,!1)}else if(fe==="Polygon")tr(re,me,xe,!0);else{if(fe!=="MultiPolygon"){if(fe==="GeometryCollection"){for(be=0;be<U.geometry.geometries.length;be++)Je(ne,{id:de,geometry:U.geometry.geometries[be],properties:U.properties},q,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(be=0;be<re.length;be++){var Re=[];tr(re[be],Re,xe,!0),me.push(Re)}}ne.push(Vn(de,fe,me,U.properties))}}function Po(ne,U){U.push(zi(ne[0])),U.push(mi(ne[1])),U.push(0)}function Ki(ne,U,q,te){for(var re,fe,xe=0,me=0;me<ne.length;me++){var de=zi(ne[me][0]),be=mi(ne[me][1]);U.push(de),U.push(be),U.push(0),me>0&&(xe+=te?(re*be-de*fe)/2:Math.sqrt(Math.pow(de-re,2)+Math.pow(be-fe,2))),re=de,fe=be}var Re=U.length-3;U[2]=1,_n(U,0,Re,q),U[Re+2]=1,U.size=Math.abs(xe),U.start=0,U.end=U.size}function tr(ne,U,q,te){for(var re=0;re<ne.length;re++){var fe=[];Ki(ne[re],fe,q,te),U.push(fe)}}function zi(ne){return ne/360+.5}function mi(ne){var U=Math.sin(ne*Math.PI/180),q=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return q<0?0:q>1?1:q}function vi(ne,U,q,te,re,fe,xe,me){if(te/=U,fe>=(q/=U)&&xe<te)return ne;if(xe<q||fe>=te)return null;for(var de=[],be=0;be<ne.length;be++){var Re=ne[be],Ge=Re.geometry,Oe=Re.type,dt=re===0?Re.minX:Re.minY,vt=re===0?Re.maxX:Re.maxY;if(dt>=q&&vt<te)de.push(Re);else if(!(vt<q||dt>=te)){var it=[];if(Oe==="Point"||Oe==="MultiPoint")eo(Ge,it,q,te,re);else if(Oe==="LineString")Xe(Ge,it,q,te,re,!1,me.lineMetrics);else if(Oe==="MultiLineString")Ut(Ge,it,q,te,re,!1);else if(Oe==="Polygon")Ut(Ge,it,q,te,re,!0);else if(Oe==="MultiPolygon")for(var It=0;It<Ge.length;It++){var Lt=[];Ut(Ge[It],Lt,q,te,re,!0),Lt.length&&it.push(Lt)}if(it.length){if(me.lineMetrics&&Oe==="LineString"){for(It=0;It<it.length;It++)de.push(Vn(Re.id,Oe,it[It],Re.tags));continue}Oe!=="LineString"&&Oe!=="MultiLineString"||(it.length===1?(Oe="LineString",it=it[0]):Oe="MultiLineString"),Oe!=="Point"&&Oe!=="MultiPoint"||(Oe=it.length===3?"Point":"MultiPoint"),de.push(Vn(Re.id,Oe,it,Re.tags))}}}return de.length?de:null}function eo(ne,U,q,te,re){for(var fe=0;fe<ne.length;fe+=3){var xe=ne[fe+re];xe>=q&&xe<=te&&(U.push(ne[fe]),U.push(ne[fe+1]),U.push(ne[fe+2]))}}function Xe(ne,U,q,te,re,fe,xe){for(var me,de,be=jt(ne),Re=re===0?to:Nt,Ge=ne.start,Oe=0;Oe<ne.length-3;Oe+=3){var dt=ne[Oe],vt=ne[Oe+1],it=ne[Oe+2],It=ne[Oe+3],Lt=ne[Oe+4],rr=re===0?dt:vt,Ft=re===0?It:Lt,Gt=!1;xe&&(me=Math.sqrt(Math.pow(dt-It,2)+Math.pow(vt-Lt,2))),rr<q?Ft>q&&(de=Re(be,dt,vt,It,Lt,q),xe&&(be.start=Ge+me*de)):rr>te?Ft<te&&(de=Re(be,dt,vt,It,Lt,te),xe&&(be.start=Ge+me*de)):Ln(be,dt,vt,it),Ft<q&&rr>=q&&(de=Re(be,dt,vt,It,Lt,q),Gt=!0),Ft>te&&rr<=te&&(de=Re(be,dt,vt,It,Lt,te),Gt=!0),!fe&&Gt&&(xe&&(be.end=Ge+me*de),U.push(be),be=jt(ne)),xe&&(Ge+=me)}var nr=ne.length-3;dt=ne[nr],vt=ne[nr+1],it=ne[nr+2],(rr=re===0?dt:vt)>=q&&rr<=te&&Ln(be,dt,vt,it),nr=be.length-3,fe&&nr>=3&&(be[nr]!==be[0]||be[nr+1]!==be[1])&&Ln(be,be[0],be[1],be[2]),be.length&&U.push(be)}function jt(ne){var U=[];return U.size=ne.size,U.start=ne.start,U.end=ne.end,U}function Ut(ne,U,q,te,re,fe){for(var xe=0;xe<ne.length;xe++)Xe(ne[xe],U,q,te,re,fe,!1)}function Ln(ne,U,q,te){ne.push(U),ne.push(q),ne.push(te)}function to(ne,U,q,te,re,fe){var xe=(fe-U)/(te-U);return ne.push(fe),ne.push(q+(re-q)*xe),ne.push(1),xe}function Nt(ne,U,q,te,re,fe){var xe=(fe-q)/(re-q);return ne.push(U+(te-U)*xe),ne.push(fe),ne.push(1),xe}function Oa(ne,U){for(var q=[],te=0;te<ne.length;te++){var re,fe=ne[te],xe=fe.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")re=Cn(fe.geometry,U);else if(xe==="MultiLineString"||xe==="Polygon"){re=[];for(var me=0;me<fe.geometry.length;me++)re.push(Cn(fe.geometry[me],U))}else if(xe==="MultiPolygon")for(re=[],me=0;me<fe.geometry.length;me++){for(var de=[],be=0;be<fe.geometry[me].length;be++)de.push(Cn(fe.geometry[me][be],U));re.push(de)}q.push(Vn(fe.id,xe,re,fe.tags))}return q}function Cn(ne,U){var q=[];q.size=ne.size,ne.start!==void 0&&(q.start=ne.start,q.end=ne.end);for(var te=0;te<ne.length;te+=3)q.push(ne[te]+U,ne[te+1],ne[te+2]);return q}function vs(ne,U){if(ne.transformed)return ne;var q,te,re,fe=1<<ne.z,xe=ne.x,me=ne.y;for(q=0;q<ne.features.length;q++){var de=ne.features[q],be=de.geometry,Re=de.type;if(de.geometry=[],Re===1)for(te=0;te<be.length;te+=2)de.geometry.push(fn(be[te],be[te+1],U,fe,xe,me));else for(te=0;te<be.length;te++){var Ge=[];for(re=0;re<be[te].length;re+=2)Ge.push(fn(be[te][re],be[te][re+1],U,fe,xe,me));de.geometry.push(Ge)}}return ne.transformed=!0,ne}function fn(ne,U,q,te,re,fe){return[Math.round(q*(ne*te-re)),Math.round(q*(U*te-fe))]}function Xn(ne,U,q,te,re){for(var fe=U===re.maxZoom?0:re.tolerance/((1<<U)*re.extent),xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:q,y:te,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},me=0;me<ne.length;me++){xe.numFeatures++,Ar(xe,ne[me],fe,re);var de=ne[me].minX,be=ne[me].minY,Re=ne[me].maxX,Ge=ne[me].maxY;de<xe.minX&&(xe.minX=de),be<xe.minY&&(xe.minY=be),Re>xe.maxX&&(xe.maxX=Re),Ge>xe.maxY&&(xe.maxY=Ge)}return xe}function Ar(ne,U,q,te){var re=U.geometry,fe=U.type,xe=[];if(fe==="Point"||fe==="MultiPoint")for(var me=0;me<re.length;me+=3)xe.push(re[me]),xe.push(re[me+1]),ne.numPoints++,ne.numSimplified++;else if(fe==="LineString")gs(xe,re,ne,q,!1,!1);else if(fe==="MultiLineString"||fe==="Polygon")for(me=0;me<re.length;me++)gs(xe,re[me],ne,q,fe==="Polygon",me===0);else if(fe==="MultiPolygon")for(var de=0;de<re.length;de++){var be=re[de];for(me=0;me<be.length;me++)gs(xe,be[me],ne,q,!0,me===0)}if(xe.length){var Re=U.tags||null;if(fe==="LineString"&&te.lineMetrics){for(var Ge in Re={},U.tags)Re[Ge]=U.tags[Ge];Re.mapbox_clip_start=re.start/re.size,Re.mapbox_clip_end=re.end/re.size}var Oe={geometry:xe,type:fe==="Polygon"||fe==="MultiPolygon"?3:fe==="LineString"||fe==="MultiLineString"?2:1,tags:Re};U.id!==null&&(Oe.id=U.id),ne.features.push(Oe)}}function gs(ne,U,q,te,re,fe){var xe=te*te;if(te>0&&U.size<(re?xe:te))q.numPoints+=U.length/3;else{for(var me=[],de=0;de<U.length;de+=3)(te===0||U[de+2]>xe)&&(q.numSimplified++,me.push(U[de]),me.push(U[de+1])),q.numPoints++;re&&function(be,Re){for(var Ge=0,Oe=0,dt=be.length,vt=dt-2;Oe<dt;vt=Oe,Oe+=2)Ge+=(be[Oe]-be[vt])*(be[Oe+1]+be[vt+1]);if(Ge>0===Re)for(Oe=0,dt=be.length;Oe<dt/2;Oe+=2){var it=be[Oe],It=be[Oe+1];be[Oe]=be[dt-2-Oe],be[Oe+1]=be[dt-1-Oe],be[dt-2-Oe]=it,be[dt-1-Oe]=It}}(me,fe),ne.push(me)}}function ca(ne,U){var q=(U=this.options=function(re,fe){for(var xe in fe)re[xe]=fe[xe];return re}(Object.create(this.options),U)).debug;if(q&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");var te=function(re,fe){var xe=[];if(re.type==="FeatureCollection")for(var me=0;me<re.features.length;me++)Je(xe,re.features[me],fe,me);else Je(xe,re.type==="Feature"?re:{geometry:re},fe);return xe}(ne,U);this.tiles={},this.tileCoords=[],q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(re,fe){var xe=fe.buffer/fe.extent,me=re,de=vi(re,1,-1-xe,xe,0,-1,2,fe),be=vi(re,1,1-xe,2+xe,0,-1,2,fe);return(de||be)&&(me=vi(re,1,-xe,1+xe,0,-1,2,fe)||[],de&&(me=Oa(de,1).concat(me)),be&&(me=me.concat(Oa(be,-1)))),me}(te,U),te.length&&this.splitTile(te,0,0,0),q&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Do(ne,U,q){return 32*((1<<ne)*q+U)+ne}function ko(ne,U){const q=ne.tileID.canonical;if(!this._geoJSONIndex)return U(null,null);const te=this._geoJSONIndex.getTile(q.z,q.x,q.y);if(!te)return U(null,null);const re=new Z(te.features);let fe=ee.exports(re);fe.byteOffset===0&&fe.byteLength===fe.buffer.byteLength||(fe=new Uint8Array(fe)),U(null,{vectorTile:re,rawData:fe.buffer})}ca.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ca.prototype.splitTile=function(ne,U,q,te,re,fe,xe){for(var me=[ne,U,q,te],de=this.options,be=de.debug;me.length;){te=me.pop(),q=me.pop(),U=me.pop(),ne=me.pop();var Re=1<<U,Ge=Do(U,q,te),Oe=this.tiles[Ge];if(!Oe&&(be>1&&console.time("creation"),Oe=this.tiles[Ge]=Xn(ne,U,q,te,de),this.tileCoords.push({z:U,x:q,y:te}),be)){be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,q,te,Oe.numFeatures,Oe.numPoints,Oe.numSimplified),console.timeEnd("creation"));var dt="z"+U;this.stats[dt]=(this.stats[dt]||0)+1,this.total++}if(Oe.source=ne,re){if(U===de.maxZoom||U===re)continue;var vt=1<<re-U;if(q!==Math.floor(fe/vt)||te!==Math.floor(xe/vt))continue}else if(U===de.indexMaxZoom||Oe.numPoints<=de.indexMaxPoints)continue;if(Oe.source=null,ne.length!==0){be>1&&console.time("clipping");var it,It,Lt,rr,Ft,Gt,nr=.5*de.buffer/de.extent,kr=.5-nr,An=.5+nr,Xr=1+nr;it=It=Lt=rr=null,Ft=vi(ne,Re,q-nr,q+An,0,Oe.minX,Oe.maxX,de),Gt=vi(ne,Re,q+kr,q+Xr,0,Oe.minX,Oe.maxX,de),ne=null,Ft&&(it=vi(Ft,Re,te-nr,te+An,1,Oe.minY,Oe.maxY,de),It=vi(Ft,Re,te+kr,te+Xr,1,Oe.minY,Oe.maxY,de),Ft=null),Gt&&(Lt=vi(Gt,Re,te-nr,te+An,1,Oe.minY,Oe.maxY,de),rr=vi(Gt,Re,te+kr,te+Xr,1,Oe.minY,Oe.maxY,de),Gt=null),be>1&&console.timeEnd("clipping"),me.push(it||[],U+1,2*q,2*te),me.push(It||[],U+1,2*q,2*te+1),me.push(Lt||[],U+1,2*q+1,2*te),me.push(rr||[],U+1,2*q+1,2*te+1)}}},ca.prototype.getTile=function(ne,U,q){var te=this.options,re=te.extent,fe=te.debug;if(ne<0||ne>24)return null;var xe=1<<ne,me=Do(ne,U=(U%xe+xe)%xe,q);if(this.tiles[me])return vs(this.tiles[me],re);fe>1&&console.log("drilling down to z%d-%d-%d",ne,U,q);for(var de,be=ne,Re=U,Ge=q;!de&&be>0;)be--,Re=Math.floor(Re/2),Ge=Math.floor(Ge/2),de=this.tiles[Do(be,Re,Ge)];return de&&de.source?(fe>1&&console.log("found parent tile z%d-%d-%d",be,Re,Ge),fe>1&&console.time("drilling down"),this.splitTile(de.source,be,Re,Ge,ne,U,q),fe>1&&console.timeEnd("drilling down"),this.tiles[me]?vs(this.tiles[me],re):null):null};class _s extends I{constructor(U,q,te,re){super(U,q,te,ko),re&&(this.loadGeoJSON=re)}loadData(U,q){var te;(te=this._pendingRequest)===null||te===void 0||te.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const re=!!(U&&U.request&&U.request.collectResourceTiming)&&new a.RequestPerformance(U.request);this._pendingCallback=q,this._pendingRequest=this.loadGeoJSON(U,(fe,xe)=>{if(delete this._pendingCallback,delete this._pendingRequest,fe||!xe)return q(fe);if(typeof xe!="object")return q(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));{k(xe,!0);try{if(U.filter){const de=a.createExpression(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(de.result==="error")throw new Error(de.value.map(Re=>`${Re.key}: ${Re.message}`).join(", "));xe={type:"FeatureCollection",features:xe.features.filter(Re=>de.value.evaluate({zoom:0},Re))}}this._geoJSONIndex=U.cluster?new zt(function({superclusterOptions:de,clusterProperties:be}){if(!be||!de)return de;const Re={},Ge={},Oe={accumulated:null,zoom:0},dt={properties:null},vt=Object.keys(be);for(const it of vt){const[It,Lt]=be[it],rr=a.createExpression(Lt),Ft=a.createExpression(typeof It=="string"?[It,["accumulated"],["get",it]]:It);Re[it]=rr.value,Ge[it]=Ft.value}return de.map=it=>{dt.properties=it;const It={};for(const Lt of vt)It[Lt]=Re[Lt].evaluate(Oe,dt);return It},de.reduce=(it,It)=>{dt.properties=It;for(const Lt of vt)Oe.accumulated=it[Lt],it[Lt]=Ge[Lt].evaluate(Oe,dt)},de}(U)).load(xe.features):function(de,be){return new ca(de,be)}(xe,U.geojsonVtOptions)}catch(de){return q(de)}this.loaded={};const me={};if(re){const de=re.finish();de&&(me.resourceTiming={},me.resourceTiming[U.source]=JSON.parse(JSON.stringify(de)))}q(null,me)}})}reloadTile(U,q){const te=this.loaded;return te&&te[U.uid]?super.reloadTile(U,q):this.loadTile(U,q)}loadGeoJSON(U,q){if(U.request)return a.getJSON(U.request,q);if(typeof U.data=="string")try{q(null,JSON.parse(U.data))}catch{q(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`))}else q(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(U,q){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),q()}getClusterExpansionZoom(U,q){try{q(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(te){q(te)}}getClusterChildren(U,q){try{q(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(te){q(te)}}getClusterLeaves(U,q){try{q(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(te){q(te)}}}class Lo{constructor(U){this.self=U,this.actor=new a.Actor(U,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:I,geojson:_s},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(q,te)=>{if(this.workerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.workerSourceTypes[q]=te},this.self.registerRTLTextPlugin=q=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=q.applyArabicShaping,a.plugin.processBidirectionalText=q.processBidirectionalText,a.plugin.processStyledBidirectionalText=q.processStyledBidirectionalText}}setReferrer(U,q){this.referrer=q}setImages(U,q,te){this.availableImages[U]=q;for(const re in this.workerSources[U]){const fe=this.workerSources[U][re];for(const xe in fe)fe[xe].availableImages=q}te()}setLayers(U,q,te){this.getLayerIndex(U).replace(q),te()}updateLayers(U,q,te){this.getLayerIndex(U).update(q.layers,q.removedIds),te()}loadTile(U,q,te){this.getWorkerSource(U,q.type,q.source).loadTile(q,te)}loadDEMTile(U,q,te){this.getDEMWorkerSource(U,q.source).loadTile(q,te)}reloadTile(U,q,te){this.getWorkerSource(U,q.type,q.source).reloadTile(q,te)}abortTile(U,q,te){this.getWorkerSource(U,q.type,q.source).abortTile(q,te)}removeTile(U,q,te){this.getWorkerSource(U,q.type,q.source).removeTile(q,te)}removeDEMTile(U,q){this.getDEMWorkerSource(U,q.source).removeTile(q)}removeSource(U,q,te){if(!this.workerSources[U]||!this.workerSources[U][q.type]||!this.workerSources[U][q.type][q.source])return;const re=this.workerSources[U][q.type][q.source];delete this.workerSources[U][q.type][q.source],re.removeSource!==void 0?re.removeSource(q,te):te()}loadWorkerSource(U,q,te){try{this.self.importScripts(q.url),te()}catch(re){te(re.toString())}}syncRTLPluginState(U,q,te){try{a.plugin.setState(q);const re=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&re!=null){this.self.importScripts(re);const fe=a.plugin.isParsed();te(fe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${re}`),fe)}}catch(re){te(re.toString())}}getAvailableImages(U){let q=this.availableImages[U];return q||(q=[]),q}getLayerIndex(U){let q=this.layerIndexes[U];return q||(q=this.layerIndexes[U]=new v),q}getWorkerSource(U,q,te){if(this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][q]||(this.workerSources[U][q]={}),!this.workerSources[U][q][te]){const re={send:(fe,xe,me)=>{this.actor.send(fe,xe,me,U)}};this.workerSources[U][q][te]=new this.workerSourceTypes[q](re,this.getLayerIndex(U),this.getAvailableImages(U))}return this.workerSources[U][q][te]}getDEMWorkerSource(U,q){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][q]||(this.demWorkerSources[U][q]=new M),this.demWorkerSources[U][q]}enforceCacheSizeLimit(U,q){a.enforceCacheSizeLimit(q)}}return a.isWorker()&&(self.worker=new Lo(self)),Lo}),o(["./shared"],function(a){var f=p;function p(x){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,w,E=new Blob([""],{type:"text/javascript"}),P=URL.createObjectURL(E);try{w=new Worker(P),g=!0}catch{g=!1}return w&&w.terminate(),URL.revokeObjectURL(P),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var w=g.getContext("2d");if(!w)return!1;var E=w.getImageData(0,0,1,1);return E&&E.width===g.width}()?(v[d=l&&l.failIfMajorPerformanceCaveat]===void 0&&(v[d]=function(g){var w,E=function(P){var R=document.createElement("canvas"),B=Object.create(p.webGLContextAttributes);return B.failIfMajorPerformanceCaveat=P,R.getContext("webgl",B)||R.getContext("experimental-webgl",B)}(g);if(!E)return!1;try{w=E.createShader(E.VERTEX_SHADER)}catch{return!1}return!(!w||E.isContextLost())&&(E.shaderSource(w,"void main() {}"),E.compileShader(w),E.getShaderParameter(w,E.COMPILE_STATUS)===!0)}(d)),v[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var d}(x)}var v={};function _(x,l){if(Array.isArray(x)){if(!Array.isArray(l)||x.length!==l.length)return!1;for(let d=0;d<x.length;d++)if(!_(x[d],l[d]))return!1;return!0}if(typeof x=="object"&&x!==null&&l!==null){if(typeof l!="object"||Object.keys(x).length!==Object.keys(l).length)return!1;for(const d in x)if(!_(x[d],l[d]))return!1;return!0}return x===l}p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class y{static testProp(l){if(!y.docStyle)return l[0];for(let d=0;d<l.length;d++)if(l[d]in y.docStyle)return l[d];return l[0]}static create(l,d,g){const w=window.document.createElement(l);return d!==void 0&&(w.className=d),g&&g.appendChild(w),w}static createNS(l,d){return window.document.createElementNS(l,d)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(l,d){l.style[y.transformProp]=d}static addEventListener(l,d,g,w={}){l.addEventListener(d,g,"passive"in w?w:w.capture)}static removeEventListener(l,d,g,w={}){l.removeEventListener(d,g,"passive"in w?w:w.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(l,d){const g=l.getBoundingClientRect();return new a.pointGeometry(d.clientX-g.left-l.clientLeft,d.clientY-g.top-l.clientTop)}static touchPos(l,d){const g=l.getBoundingClientRect(),w=[];for(let E=0;E<d.length;E++)w.push(new a.pointGeometry(d[E].clientX-g.left-l.clientLeft,d[E].clientY-g.top-l.clientTop));return w}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);class S{constructor(l){this._transformRequestFn=l}transformRequest(l,d){return this._transformRequestFn&&this._transformRequestFn(l,d)||{url:l}}normalizeSpriteURL(l,d,g){const w=function(E){const P=E.match(A);if(!P)throw new Error(`Unable to parse URL "${E}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(l);return w.path+=`${d}${g}`,function(E){const P=E.params.length?`?${E.params.join("&")}`:"";return`${E.protocol}://${E.authority}${E.path}${P}`}(w)}setTransformRequest(l){this._transformRequestFn=l}}const A=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class I{constructor(l,d,g,w){this.context=l,this.format=g,this.texture=l.gl.createTexture(),this.update(d,w)}update(l,d,g){const{width:w,height:E}=l,P=!(this.size&&this.size[0]===w&&this.size[1]===E||g),{context:R}=this,{gl:B}=R;if(this.useMipmap=Boolean(d&&d.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!d||d.premultiply!==!1)),P)this.size=[w,E],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.isImageBitmap(l)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,l):B.texImage2D(B.TEXTURE_2D,0,this.format,w,E,0,this.format,B.UNSIGNED_BYTE,l.data);else{const{x:N,y:j}=g||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||a.isImageBitmap(l)?B.texSubImage2D(B.TEXTURE_2D,0,N,j,B.RGBA,B.UNSIGNED_BYTE,l):B.texSubImage2D(B.TEXTURE_2D,0,N,j,w,E,B.RGBA,B.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(l,d,g){const{context:w}=this,{gl:E}=w;E.bindTexture(E.TEXTURE_2D,this.texture),g!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=E.LINEAR),l!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,l),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,g||l),this.filter=l),d!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,d),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function M(x){const{userImage:l}=x;return!!(l&&l.render&&l.render())&&(x.data.replace(new Uint8Array(l.data.buffer)),!0)}class k extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:d,callback:g}of this.requestors)this._notify(d,g);this.requestors=[]}}getImage(l){return this.images[l]}addImage(l,d){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,d)&&(this.images[l]=d)}_validate(l,d){let g=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),g=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),g=!1),this._validateContent(d.content,d)||(this.fire(new a.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),g=!1),g}_validateStretch(l,d){if(!l)return!0;let g=0;for(const w of l){if(w[0]<g||w[1]<w[0]||d<w[1])return!1;g=w[1]}return!0}_validateContent(l,d){return!(l&&(l.length!==4||l[0]<0||d.data.width<l[0]||l[1]<0||d.data.height<l[1]||l[2]<0||d.data.width<l[2]||l[3]<0||d.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,d){const g=this.images[l];if(g.data.width!==d.data.width||g.data.height!==d.data.height)throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=g.version+1,this.images[l]=d,this.updatedImages[l]=!0}removeImage(l){const d=this.images[l];delete this.images[l],delete this.patterns[l],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,d){let g=!0;if(!this.isLoaded())for(const w of l)this.images[w]||(g=!1);this.isLoaded()||g?this._notify(l,d):this.requestors.push({ids:l,callback:d})}_notify(l,d){const g={};for(const w of l){this.images[w]||this.fire(new a.Event("styleimagemissing",{id:w}));const E=this.images[w];E?g[w]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:Boolean(E.userImage&&E.userImage.render)}:a.warnOnce(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,g)}getPixelSize(){const{width:l,height:d}=this.atlasImage;return{width:l,height:d}}getPattern(l){const d=this.patterns[l],g=this.getImage(l);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{const w={w:g.data.width+2,h:g.data.height+2,x:0,y:0},E=new a.ImagePosition(w,g);this.patterns[l]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const d=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new I(l,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const E in this.patterns)l.push(this.patterns[E].bin);const{w:d,h:g}=a.potpack(l),w=this.atlasImage;w.resize({width:d||1,height:g||1});for(const E in this.patterns){const{bin:P}=this.patterns[E],R=P.x+1,B=P.y+1,N=this.images[E].data,j=N.width,W=N.height;a.RGBAImage.copy(N,w,{x:0,y:0},{x:R,y:B},{width:j,height:W}),a.RGBAImage.copy(N,w,{x:0,y:W-1},{x:R,y:B-1},{width:j,height:1}),a.RGBAImage.copy(N,w,{x:0,y:0},{x:R,y:B+W},{width:j,height:1}),a.RGBAImage.copy(N,w,{x:j-1,y:0},{x:R-1,y:B},{width:1,height:W}),a.RGBAImage.copy(N,w,{x:0,y:0},{x:R+j,y:B},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const d of l){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const g=this.images[d];g||a.warnOnce(`Image with ID: "${d}" was not found`),M(g)&&this.updateImage(d,g)}}}const L=1e20;function z(x,l,d,g,w,E,P,R,B){for(let N=l;N<l+g;N++)V(x,d*E+N,E,w,P,R,B);for(let N=d;N<d+w;N++)V(x,N*E+l,1,g,P,R,B)}function V(x,l,d,g,w,E,P){E[0]=0,P[0]=-L,P[1]=L,w[0]=x[l];for(let R=1,B=0,N=0;R<g;R++){w[R]=x[l+R*d];const j=R*R;do{const W=E[B];N=(w[R]-w[W]+j-W*W)/(R-W)/2}while(N<=P[B]&&--B>-1);B++,E[B]=R,P[B]=N,P[B+1]=L}for(let R=0,B=0;R<g;R++){for(;P[B+1]<R;)B++;const N=E[B],j=R-N;x[l+R*d]=w[N]+j*j}}class H{constructor(l,d){this.requestManager=l,this.localIdeographFontFamily=d,this.entries={}}setURL(l){this.url=l}getGlyphs(l,d){const g=[];for(const w in l)for(const E of l[w])g.push({stack:w,id:E});a.asyncAll(g,({stack:w,id:E},P)=>{let R=this.entries[w];R||(R=this.entries[w]={glyphs:{},requests:{},ranges:{}});let B=R.glyphs[E];if(B!==void 0)return void P(null,{stack:w,id:E,glyph:B});if(B=this._tinySDF(R,w,E),B)return R.glyphs[E]=B,void P(null,{stack:w,id:E,glyph:B});const N=Math.floor(E/256);if(256*N>65535)return void P(new Error("glyphs > 65535 not supported"));if(R.ranges[N])return void P(null,{stack:w,id:E,glyph:B});let j=R.requests[N];j||(j=R.requests[N]=[],H.loadGlyphRange(w,N,this.url,this.requestManager,(W,K)=>{if(K){for(const se in K)this._doesCharSupportLocalGlyph(+se)||(R.glyphs[+se]=K[+se]);R.ranges[N]=!0}for(const se of j)se(W,K);delete R.requests[N]})),j.push((W,K)=>{W?P(W):K&&P(null,{stack:w,id:E,glyph:K[E]||null})})},(w,E)=>{if(w)d(w);else if(E){const P={};for(const{stack:R,id:B,glyph:N}of E)(P[R]||(P[R]={}))[B]=N&&{id:N.id,bitmap:N.bitmap.clone(),metrics:N.metrics};d(null,P)}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](l)||a.unicodeBlockLookup["Hangul Syllables"](l)||a.unicodeBlockLookup.Hiragana(l)||a.unicodeBlockLookup.Katakana(l))}_tinySDF(l,d,g){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(g))return;let E=l.tinySDF;if(!E){let R="400";/bold/i.test(d)?R="900":/medium/i.test(d)?R="500":/light/i.test(d)&&(R="200"),E=l.tinySDF=new H.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:w,fontWeight:R})}const P=E.draw(String.fromCharCode(g));return{id:g,bitmap:new a.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop-27||-8,advance:P.glyphAdvance||24}}}}H.loadGlyphRange=function(x,l,d,g,w){const E=256*l,P=E+255,R=g.transformRequest(d.replace("{fontstack}",x).replace("{range}",`${E}-${P}`),a.ResourceType.Glyphs);a.getArrayBuffer(R,(B,N)=>{if(B)w(B);else if(N){const j={};for(const W of a.parseGlyphPbf(N))j[W.id]=W;w(null,j)}})},H.TinySDF=class{constructor({fontSize:x=24,buffer:l=3,radius:d=8,cutoff:g=.25,fontFamily:w="sans-serif",fontWeight:E="normal",fontStyle:P="normal"}={}){this.buffer=l,this.cutoff=g,this.radius=d;const R=this.size=x+4*l,B=this._createCanvas(R),N=this.ctx=B.getContext("2d",{willReadFrequently:!0});N.font=`${P} ${E} ${x}px ${w}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(x){const l=document.createElement("canvas");return l.width=l.height=x,l}draw(x){const{width:l,actualBoundingBoxAscent:d,actualBoundingBoxDescent:g,actualBoundingBoxLeft:w,actualBoundingBoxRight:E}=this.ctx.measureText(x),P=Math.ceil(d),R=Math.min(this.size-this.buffer,Math.ceil(E-w)),B=Math.min(this.size-this.buffer,P+Math.ceil(g)),N=R+2*this.buffer,j=B+2*this.buffer,W=Math.max(N*j,0),K=new Uint8ClampedArray(W),se={data:K,width:N,height:j,glyphWidth:R,glyphHeight:B,glyphTop:P,glyphLeft:0,glyphAdvance:l};if(R===0||B===0)return se;const{ctx:ie,buffer:oe,gridInner:ge,gridOuter:Se}=this;ie.clearRect(oe,oe,R,B),ie.fillText(x,oe,oe+P);const Ae=ie.getImageData(oe,oe,R,B);Se.fill(L,0,W),ge.fill(0,0,W);for(let ue=0;ue<B;ue++)for(let De=0;De<R;De++){const Ie=Ae.data[4*(ue*R+De)+3]/255;if(Ie===0)continue;const Be=(ue+oe)*N+De+oe;if(Ie===1)Se[Be]=0,ge[Be]=L;else{const Fe=.5-Ie;Se[Be]=Fe>0?Fe*Fe:0,ge[Be]=Fe<0?Fe*Fe:0}}z(Se,0,0,N,j,N,this.f,this.v,this.z),z(ge,oe,oe,R,B,N,this.f,this.v,this.z);for(let ue=0;ue<W;ue++){const De=Math.sqrt(Se[ue])-Math.sqrt(ge[ue]);K[ue]=Math.round(255-255*(De/this.radius+this.cutoff))}return se}};const Z=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(x,l){return a.sphericalToCartesian(x.expression.evaluate(l))}interpolate(x,l,d){return{x:a.number(x.x,l.x,d),y:a.number(x.y,l.y,d),z:a.number(x.z,l.z,d)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),ee="-transition";class Y extends a.Evented{constructor(l){super(),this._transitionable=new a.Transitionable(Z),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,d={}){if(!this._validate(a.validateLight,l,d))for(const g in l){const w=l[g];g.endsWith(ee)?this._transitionable.setTransition(g.slice(0,-ee.length),w):this._transitionable.setValue(g,w)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,g){return(!g||g.validate!==!1)&&a.emitValidationErrors(this,l.call(a.validateStyle,a.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class ae{constructor(l,d){this.width=l,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,d){const g=l.join(",")+String(d);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(l,d)),this.dashEntry[g]}getDashRanges(l,d,g){const w=[];let E=l.length%2==1?-l[l.length-1]*g:0,P=l[0]*g,R=!0;w.push({left:E,right:P,isDash:R,zeroLength:l[0]===0});let B=l[0];for(let N=1;N<l.length;N++){R=!R;const j=l[N];E=B*g,B+=j,P=B*g,w.push({left:E,right:P,isDash:R,zeroLength:j===0})}return w}addRoundDash(l,d,g){const w=d/2;for(let E=-g;E<=g;E++){const P=this.width*(this.nextRow+g+E);let R=0,B=l[R];for(let N=0;N<this.width;N++){N/B.right>1&&(B=l[++R]);const j=Math.abs(N-B.left),W=Math.abs(N-B.right),K=Math.min(j,W);let se;const ie=E/g*(w+1);if(B.isDash){const oe=w-Math.abs(ie);se=Math.sqrt(K*K+oe*oe)}else se=w-Math.sqrt(K*K+ie*ie);this.data[P+N]=Math.max(0,Math.min(255,se+128))}}}addRegularDash(l){for(let R=l.length-1;R>=0;--R){const B=l[R],N=l[R+1];B.zeroLength?l.splice(R,1):N&&N.isDash===B.isDash&&(N.left=B.left,l.splice(R,1))}const d=l[0],g=l[l.length-1];d.isDash===g.isDash&&(d.left=g.left-this.width,g.right=d.right+this.width);const w=this.width*this.nextRow;let E=0,P=l[E];for(let R=0;R<this.width;R++){R/P.right>1&&(P=l[++E]);const B=Math.abs(R-P.left),N=Math.abs(R-P.right),j=Math.min(B,N);this.data[w+R]=Math.max(0,Math.min(255,(P.isDash?j:-j)+128))}}addDash(l,d){const g=d?7:0,w=2*g+1;if(this.nextRow+w>this.height)return a.warnOnce("LineAtlas out of space"),null;let E=0;for(let R=0;R<l.length;R++)E+=l[R];if(E!==0){const R=this.width/E,B=this.getDashRanges(l,this.width,R);d?this.addRoundDash(B,R,g):this.addRegularDash(B)}const P={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:E};return this.nextRow+=w,this.dirty=!0,P}bind(l){const d=l.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class le{constructor(l,d){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const g=this.workerPool.acquire(this.id);for(let w=0;w<g.length;w++){const E=new le.Actor(g[w],d,this.id);E.name=`Worker ${w}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,d,g){a.asyncAll(this.actors,(w,E)=>{w.send(l,d,E)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function pe(x,l,d){const g=function(w,E){if(w)return d(w);if(E){const P=a.pick(a.extend(E,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(P.vectorLayers=E.vector_layers,P.vectorLayerIds=P.vectorLayers.map(R=>R.id)),d(null,P)}};return x.url?a.getJSON(l.transformRequest(x.url,a.ResourceType.Source),g):a.exported.frame(()=>g(null,x))}le.Actor=a.Actor;class ye{constructor(l,d,g){this.bounds=a.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=d||0,this.maxzoom=g||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const d=Math.pow(2,l.z),g=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*d),w=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*d),E=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*d),P=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*d);return l.x>=g&&l.x<E&&l.y>=w&&l.y<P}}class ve extends a.Evented{constructor(l,d,g,w){if(super(),this.id=l,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(d,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=pe(this._options,this.map._requestManager,(l,d)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l?this.fire(new a.ErrorEvent(l)):d&&(a.extend(this,d),d.bounds&&(this.tileBounds=new ye(d.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}loadTile(l,d){const g=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w={request:this.map._requestManager.transformRequest(g,a.ResourceType.Tile),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(P,R){return delete l.request,l.aborted?d(null):P&&P.status!==404?d(P):(R&&R.resourceTiming&&(l.resourceTiming=R.resourceTiming),this.map._refreshExpiredTiles&&R&&l.setExpiryData(R),l.loadVectorData(R,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired"?l.state==="loading"?l.reloadCallback=d:l.request=l.actor.send("reloadTile",w,E.bind(this)):(l.actor=this.dispatcher.getActor(),l.request=l.actor.send("loadTile",w,E.bind(this)))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id},void 0)}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Pe extends a.Evented{constructor(l,d,g,w){super(),this.id=l,this.dispatcher=g,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},d),a.extend(this,a.pick(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=pe(this._options,this.map._requestManager,(l,d)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new a.ErrorEvent(l)):d&&(a.extend(this,d),d.bounds&&(this.tileBounds=new ye(d.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,d){const g=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.request=a.getImage(this.map._requestManager.transformRequest(g,a.ResourceType.Tile),(w,E,P)=>{if(delete l.request,l.aborted)l.state="unloaded",d(null);else if(w)l.state="errored",d(w);else if(E){this.map._refreshExpiredTiles&&l.setExpiryData(P);const R=this.map.painter.context,B=R.gl;l.texture=this.map.painter.getTileTexture(E.width),l.texture?l.texture.update(E,{useMipmap:!0}):(l.texture=new I(R,E,B.RGBA,{useMipmap:!0}),l.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),R.extTextureFilterAnisotropic&&B.texParameterf(B.TEXTURE_2D,R.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,R.extTextureFilterAnisotropicMax)),l.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),d(null)}})}abortTile(l,d){l.request&&(l.request.cancel(),delete l.request),d()}unloadTile(l,d){l.texture&&this.map.painter.saveTileTexture(l.texture),d()}hasTransition(){return!1}}let $e;class Ce extends Pe{constructor(l,d,g,w){super(l,d,g,w),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(l,d){const g=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function w(E,P){E&&(l.state="errored",d(E)),P&&(l.dem=P,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded",d(null))}l.request=a.getImage(this.map._requestManager.transformRequest(g,a.ResourceType.Tile),function(E,P){if(delete l.request,l.aborted)l.state="unloaded",d(null);else if(E)l.state="errored",d(E);else if(P){this.map._refreshExpiredTiles&&l.setExpiryData(P),delete P.cacheControl,delete P.expires;const R=a.isImageBitmap(P)&&($e==null&&($e=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$e)?P:a.exported.getImageData(P,1),B={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:R,encoding:this.encoding};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",B,w.bind(this)))}}.bind(this)),l.neighboringTiles=this._getNeighboringTiles(l.tileID)}_getNeighboringTiles(l){const d=l.canonical,g=Math.pow(2,d.z),w=(d.x-1+g)%g,E=d.x===0?l.wrap-1:l.wrap,P=(d.x+1+g)%g,R=d.x+1===g?l.wrap+1:l.wrap,B={};return B[new a.OverscaledTileID(l.overscaledZ,E,d.z,w,d.y).key]={backfilled:!1},B[new a.OverscaledTileID(l.overscaledZ,R,d.z,P,d.y).key]={backfilled:!1},d.y>0&&(B[new a.OverscaledTileID(l.overscaledZ,E,d.z,w,d.y-1).key]={backfilled:!1},B[new a.OverscaledTileID(l.overscaledZ,l.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},B[new a.OverscaledTileID(l.overscaledZ,R,d.z,P,d.y-1).key]={backfilled:!1}),d.y+1<g&&(B[new a.OverscaledTileID(l.overscaledZ,E,d.z,w,d.y+1).key]={backfilled:!1},B[new a.OverscaledTileID(l.overscaledZ,l.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},B[new a.OverscaledTileID(l.overscaledZ,R,d.z,P,d.y+1).key]={backfilled:!1}),B}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&l.actor.send("removeDEMTile",{uid:l.uid,source:this.id})}}class at extends a.Evented{constructor(l,d,g,w){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(w),this._data=d.data,this._options=a.extend({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const E=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*E,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*E,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.EXTENT,radius:(d.clusterRadius||50)*E,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData("content"),this}getClusterExpansionZoom(l,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},d),this}getClusterChildren(l,d){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},d),this}getClusterLeaves(l,d,g,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:d,offset:g},w),this}_updateWorkerData(l){const d=a.extend({},this.workerOptions),g=this._data;typeof g=="string"?(d.request=this.map._requestManager.transformRequest(a.exported.resolveURL(g),a.ResourceType.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(g),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(w,E)=>{if(this._pendingLoads--,this._removed||E&&E.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source",sourceDataType:l}));let P=null;if(E&&E.resourceTiming&&E.resourceTiming[this.id]&&(P=E.resourceTiming[this.id].slice(0)),w)return void this.fire(new a.ErrorEvent(w));const R={dataType:"source",sourceDataType:l};this._collectResourceTiming&&P&&P.length>0&&a.extend(R,{resourceTiming:P}),this.fire(new a.Event("data",R))})}loaded(){return this._pendingLoads===0}loadTile(l,d){const g=l.actor?"reloadTile":"loadTile";l.actor=this.actor;const w={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.request=this.actor.send(g,w,(E,P)=>(delete l.request,l.unloadVectorData(),l.aborted?d(null):E?d(E):(l.loadVectorData(P,this.map.painter,g==="reloadTile"),d(null))))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var st=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class xt extends a.Evented{constructor(l,d,g,w){super(),this.id=l,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}load(l,d){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(g,w)=>{this._loaded=!0,g?this.fire(new a.ErrorEvent(g)):w&&(this.image=w,l&&(this.coordinates=l),d&&d(),this._finishLoading())})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this.options.url=l.url,this.load(l.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}setCoordinates(l){this.coordinates=l;const d=l.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(w){let E=1/0,P=1/0,R=-1/0,B=-1/0;for(const K of w)E=Math.min(E,K.x),P=Math.min(P,K.y),R=Math.max(R,K.x),B=Math.max(B,K.y);const N=Math.max(R-E,B-P),j=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),W=Math.pow(2,j);return new a.CanonicalTileID(j,Math.floor((E+R)/2*W),Math.floor((P+B)/2*W))}(d),this.minzoom=this.maxzoom=this.tileID.z;const g=d.map(w=>this.tileID.getTilePoint(w)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,st.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new I(l,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));for(const g in this.tiles){const w=this.tiles[g];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}loadTile(l,d){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},d(null)):(l.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class St extends xt{constructor(l,d,g,w){super(l,d,g,w),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const l=this.options;this.urls=[];for(const d of l.urls)this.urls.push(this.map._requestManager.transformRequest(d,a.ResourceType.Source).url);a.getVideo(this.urls,(d,g)=>{this._loaded=!0,d?this.fire(new a.ErrorEvent(d)):g&&(this.video=g,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const d=this.video.seekable;l<d.start(0)||l>d.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,st.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new I(l,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));for(const g in this.tiles){const w=this.tiles[g];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Xt extends xt{constructor(l,d,g,w){super(l,d,g,w),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(P=>typeof P!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${l}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,g=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,st.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new I(d,this.canvas,g.RGBA,{premultiply:!0});for(const w in this.tiles){const E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const Dt={vector:ve,raster:Pe,"raster-dem":Ce,geojson:at,video:St,image:xt,canvas:Xt};function Br(x,l){const d=a.create();return a.translate(d,d,[1,1,0]),a.scale(d,d,[.5*x.width,.5*x.height,1]),a.multiply(d,d,x.calculatePosMatrix(l.toUnwrapped()))}function cr(x,l,d,g,w,E){const P=function(W,K,se){if(W)for(const ie of W){const oe=K[ie];if(oe&&oe.source===se&&oe.type==="fill-extrusion")return!0}else for(const ie in K){const oe=K[ie];if(oe.source===se&&oe.type==="fill-extrusion")return!0}return!1}(w&&w.layers,l,x.id),R=E.maxPitchScaleFactor(),B=x.tilesIn(g,R,P);B.sort(vr);const N=[];for(const W of B)N.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(l,d,x._state,W.queryGeometry,W.cameraQueryGeometry,W.scale,w,E,R,Br(x.transform,W.tileID))});const j=function(W){const K={},se={};for(const ie of W){const oe=ie.queryResults,ge=ie.wrappedTileID,Se=se[ge]=se[ge]||{};for(const Ae in oe){const ue=oe[Ae],De=Se[Ae]=Se[Ae]||{},Ie=K[Ae]=K[Ae]||[];for(const Be of ue)De[Be.featureIndex]||(De[Be.featureIndex]=!0,Ie.push(Be))}}return K}(N);for(const W in j)j[W].forEach(K=>{const se=K.feature,ie=x.getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=ie});return j}function vr(x,l){const d=x.tileID,g=l.tileID;return d.overscaledZ-g.overscaledZ||d.canonical.y-g.canonical.y||d.wrap-g.wrap||d.canonical.x-g.canonical.x}class Fr{constructor(l,d){this.tileID=l,this.uid=a.uniqueId(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const d=l+this.timeAdded;d<a.exported.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.textures.forEach(d=>l.saveTileTexture(d)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(l,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(w,E){const P={};if(!E)return P;for(const R of w){const B=R.layerIds.map(N=>E.getLayer(N)).filter(Boolean);if(B.length!==0){R.layers=B,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(N=>B.filter(j=>j.id===N)[0]));for(const N of B)P[N.id]=R}}return P}(l.buckets,d.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const E=this.buckets[w];if(E instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!g)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const E=this.buckets[w];if(E instanceof a.SymbolBucket&&E.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const w in this.buckets){const E=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(w).queryRadius(E))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const g in this.buckets){const w=this.buckets[g];w.uploadPending()&&w.upload(l)}const d=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new I(l,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new I(l,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,d,g,w,E,P,R,B,N,j){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:E,scale:P,tileSize:this.tileSize,pixelPosMatrix:j,transform:B,params:R,queryPadding:this.queryPadding*N},l,d,g):{}}querySourceFeatures(l,d){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const w=g.loadVTLayers(),E=d?d.sourceLayer:"",P=w._geojsonTileLayer||w[E];if(!P)return;const R=a.createFilter(d&&d.filter),{z:B,x:N,y:j}=this.tileID.canonical,W={z:B,x:N,y:j};for(let K=0;K<P.length;K++){const se=P.feature(K);if(R.needGeometry){const ge=a.toEvaluationFeature(se,!0);if(!R.filter(new a.EvaluationParameters(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!R.filter(new a.EvaluationParameters(this.tileID.overscaledZ),se))continue;const ie=g.getId(se,E),oe=new a.GeoJSONFeature(se,B,N,j,ie);oe.tile=W,l.push(oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const d=this.expirationTime;if(l.cacheControl){const g=a.parseCacheControl(l.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const g=Date.now();let w=!1;if(this.expirationTime>g)w=!1;else if(d)if(this.expirationTime<d)w=!0;else{const E=this.expirationTime-d;E?this.expirationTime=g+Math.max(E,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!d.style.hasLayer(w))continue;const E=this.buckets[w],P=E.layers[0].sourceLayer||"_geojsonTileLayer",R=g[P],B=l[P];if(!R||!B||Object.keys(B).length===0)continue;E.update(B,R,this.imageAtlas&&this.imageAtlas.patternPositions||{});const N=d&&d.style&&d.style.getLayer(w);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=a.exported.now()+l}setDependencies(l,d){const g={};for(const w of d)g[w]=!0;this.dependencies[l]=g}hasDependency(l,d){for(const g of l){const w=this.dependencies[g];if(w){for(const E of d)if(w[E])return!0}}return!1}}class Ur{constructor(l,d){this.max=l,this.onRemove=d,this.reset()}reset(){for(const l in this.data)for(const d of this.data[l])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(l,d,g){const w=l.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const E={value:d,timeout:void 0};if(g!==void 0&&(E.timeout=setTimeout(()=>{this.remove(l,E)},g)),this.data[w].push(E),this.order.push(w),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const d=this.data[l].shift();return d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),d.value}getByKey(l){const d=this.data[l];return d?d[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,d){if(!this.has(l))return this;const g=l.wrapped().key,w=d===void 0?0:this.data[g].indexOf(d),E=this.data[g][w];return this.data[g].splice(w,1),E.timeout&&clearTimeout(E.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(E.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(l){const d=[];for(const g in this.data)for(const w of this.data[g])l(w.value)||d.push(w);for(const g of d)this.remove(g.value.tileID,g)}}class gr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,d,g){const w=String(d);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][w]=this.stateChanges[l][w]||{},a.extend(this.stateChanges[l][w],g),this.deletedStates[l]===null){this.deletedStates[l]={};for(const E in this.state[l])E!==w&&(this.deletedStates[l][E]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][w]===null){this.deletedStates[l][w]={};for(const E in this.state[l][w])g[E]||(this.deletedStates[l][w][E]=null)}else for(const E in g)this.deletedStates[l]&&this.deletedStates[l][w]&&this.deletedStates[l][w][E]===null&&delete this.deletedStates[l][w][E]}removeFeatureState(l,d,g){if(this.deletedStates[l]===null)return;const w=String(d);if(this.deletedStates[l]=this.deletedStates[l]||{},g&&d!==void 0)this.deletedStates[l][w]!==null&&(this.deletedStates[l][w]=this.deletedStates[l][w]||{},this.deletedStates[l][w][g]=null);else if(d!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][w])for(g in this.deletedStates[l][w]={},this.stateChanges[l][w])this.deletedStates[l][w][g]=null;else this.deletedStates[l][w]=null;else this.deletedStates[l]=null}getState(l,d){const g=String(d),w=a.extend({},(this.state[l]||{})[g],(this.stateChanges[l]||{})[g]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const E=this.deletedStates[l][d];if(E===null)return{};for(const P in E)delete w[P]}return w}initializeTileState(l,d){l.setFeatureState(this.state,d)}coalesceChanges(l,d){const g={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const E={};for(const P in this.stateChanges[w])this.state[w][P]||(this.state[w][P]={}),a.extend(this.state[w][P],this.stateChanges[w][P]),E[P]=this.state[w][P];g[w]=E}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const E={};if(this.deletedStates[w]===null)for(const P in this.state[w])E[P]={},this.state[w][P]={};else for(const P in this.deletedStates[w]){if(this.deletedStates[w][P]===null)this.state[w][P]={};else for(const R of Object.keys(this.deletedStates[w][P]))delete this.state[w][P][R];E[P]=this.state[w][P]}g[w]=g[w]||{},a.extend(g[w],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const w in l)l[w].setFeatureState(g,d)}}class Yt extends a.Evented{constructor(l,d,g){super(),this.id=l,this.dispatcher=g,this.on("data",w=>{w.dataType==="source"&&w.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&w.dataType==="source"&&w.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(w,E,P,R){const B=new Dt[E.type](w,E,P,R);if(B.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${B.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],B),B}(l,d,g,this),this._tiles={},this._cache=new Ur(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new gr}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const d=this._tiles[l];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,d){return this._source.loadTile(l,d)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){this._source.abortTile&&this._source.abortTile(l,()=>{}),this._source.fire(new a.Event("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const g=this._tiles[d];g.upload(l),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(_r).map(l=>l.key)}getRenderableIds(l){const d=[];for(const g in this._tiles)this._isIdRenderable(g,l)&&d.push(this._tiles[g]);return l?d.sort((g,w)=>{const E=g.tileID,P=w.tileID,R=new a.pointGeometry(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),B=new a.pointGeometry(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-P.overscaledZ||B.y-R.y||B.x-R.x}).map(g=>g.tileID.key):d.map(g=>g.tileID).sort(_r).map(g=>g.key)}hasRenderableParent(l){const d=this.findLoadedParent(l,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(l,d){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(d||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,d){const g=this._tiles[l];g&&(g.state!=="loading"&&(g.state=d),this._loadTile(g,this._tileLoaded.bind(this,g,l,d)))}_tileLoaded(l,d,g,w){if(w)return l.state="errored",void(w.status!==404?this._source.fire(new a.ErrorEvent(w,{tile:l})):this.update(this.transform,this.terrain));l.timeAdded=a.exported.now(),g==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(d,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const d=this.getRenderableIds();for(let w=0;w<d.length;w++){const E=d[w];if(l.neighboringTiles&&l.neighboringTiles[E]){const P=this.getTileByID(E);g(l,P),g(P,l)}}function g(w,E){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let P=E.tileID.canonical.x-w.tileID.canonical.x;const R=E.tileID.canonical.y-w.tileID.canonical.y,B=Math.pow(2,w.tileID.canonical.z),N=E.tileID.key;P===0&&R===0||Math.abs(R)>1||(Math.abs(P)>1&&(Math.abs(P+B)===1?P+=B:Math.abs(P-B)===1&&(P-=B)),E.dem&&w.dem&&(w.dem.backfillBorder(E.dem,P,R),w.neighboringTiles&&w.neighboringTiles[N]&&(w.neighboringTiles[N].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,d,g,w){for(const E in this._tiles){let P=this._tiles[E];if(w[E]||!P.hasData()||P.tileID.overscaledZ<=d||P.tileID.overscaledZ>g)continue;let R=P.tileID;for(;P&&P.tileID.overscaledZ>d+1;){const N=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[N.key],P&&P.hasData()&&(R=N)}let B=R;for(;B.overscaledZ>d;)if(B=B.scaledTo(B.overscaledZ-1),l[B.key]){w[R.key]=R;break}}}findLoadedParent(l,d){if(l.key in this._loadedParentTiles){const g=this._loadedParentTiles[l.key];return g&&g.tileID.overscaledZ>=d?g:null}for(let g=l.overscaledZ-1;g>=d;g--){const w=l.scaledTo(g),E=this._getLoadedTile(w);if(E)return E}}_getLoadedTile(l){const d=this._tiles[l.key];return d&&d.hasData()?d:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const d=Math.ceil(l.width/this._source.tileSize)+1,g=Math.ceil(l.height/this._source.tileSize)+1,w=Math.floor(d*g*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)}handleWrapJump(l){const d=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,d){const g={};for(const w in this._tiles){const E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+d),g[E.tileID.key]=E}this._tiles=g;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(l,d){if(this.transform=l,this.terrain=d,!this._sourceLoaded||this._paused)return;let g;this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new a.OverscaledTileID(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y)):(g=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(g=g.filter(N=>this._source.hasTile(N)))):g=[];const w=l.coveringZoomLevel(this._source),E=Math.max(w-Yt.maxOverzooming,this._source.minzoom),P=Math.max(w+Yt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const N={};for(const j of g)if(j.canonical.z>this._source.minzoom){const W=j.scaledTo(j.canonical.z-1);N[W.key]=W;const K=j.scaledTo(Math.max(this._source.minzoom,Math.min(j.canonical.z,5)));N[K.key]=K}g=g.concat(Object.values(N))}const R=this._updateRetainedTiles(g,w);if(At(this._source.type)){const N={},j={},W=Object.keys(R);for(const K of W){const se=R[K],ie=this._tiles[K];if(!ie||ie.fadeEndTime&&ie.fadeEndTime<=a.exported.now())continue;const oe=this.findLoadedParent(se,E);oe&&(this._addTile(oe.tileID),N[oe.tileID.key]=oe.tileID),j[K]=se}this._retainLoadedChildren(j,w,P,R);for(const K in N)R[K]||(this._coveredTiles[K]=!0,R[K]=N[K]);if(d){const K={},se={};for(const ie of g)this._tiles[ie.key].hasData()?K[ie.key]=ie:se[ie.key]=ie;for(const ie in se){const oe=se[ie].children(this._source.maxzoom);this._tiles[oe[0].key]&&this._tiles[oe[1].key]&&this._tiles[oe[2].key]&&this._tiles[oe[3].key]&&(K[oe[0].key]=R[oe[0].key]=oe[0],K[oe[1].key]=R[oe[1].key]=oe[1],K[oe[2].key]=R[oe[2].key]=oe[2],K[oe[3].key]=R[oe[3].key]=oe[3],delete se[ie])}for(const ie in se){const oe=this.findLoadedParent(se[ie],this._source.minzoom);if(oe){K[oe.tileID.key]=R[oe.tileID.key]=oe.tileID;for(const ge in K)K[ge].isChildOf(oe.tileID)&&delete K[ge]}}for(const ie in this._tiles)K[ie]||(this._coveredTiles[ie]=!0)}}for(const N in R)this._tiles[N].clearFadeHold();const B=a.keysDifference(this._tiles,R);for(const N of B){const j=this._tiles[N];j.hasSymbolBuckets&&!j.holdingForFade()?j.setHoldDuration(this.map._fadeDuration):j.hasSymbolBuckets&&!j.symbolFadeFinished()||this._removeTile(N)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,d){const g={},w={},E=Math.max(d-Yt.maxOverzooming,this._source.minzoom),P=Math.max(d+Yt.maxUnderzooming,this._source.minzoom),R={};for(const B of l){const N=this._addTile(B);g[B.key]=B,N.hasData()||d<this._source.maxzoom&&(R[B.key]=B)}this._retainLoadedChildren(R,d,P,g);for(const B of l){let N=this._tiles[B.key];if(N.hasData())continue;if(d+1>this._source.maxzoom){const W=B.children(this._source.maxzoom)[0],K=this.getTile(W);if(K&&K.hasData()){g[W.key]=W;continue}}else{const W=B.children(this._source.maxzoom);if(g[W[0].key]&&g[W[1].key]&&g[W[2].key]&&g[W[3].key])continue}let j=N.wasRequested();for(let W=B.overscaledZ-1;W>=E;--W){const K=B.scaledTo(W);if(w[K.key]||(w[K.key]=!0,N=this.getTile(K),!N&&j&&(N=this._addTile(K)),N&&(g[K.key]=K,j=N.wasRequested(),N.hasData())))break}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const d=[];let g,w=this._tiles[l].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){g=this._loadedParentTiles[w.key];break}d.push(w.key);const E=w.scaledTo(w.overscaledZ-1);if(g=this._getLoadedTile(E),g)break;w=E}for(const E of d)this._loadedParentTiles[E]=g}}_addTile(l){let d=this._tiles[l.key];if(d)return d;d=this._cache.getAndRemove(l),d&&(this._setTileReloadTimer(l.key,d),d.tileID=l,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,d)));const g=d;return d||(d=new Fr(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,l.key,d.state))),d.uses++,this._tiles[l.key]=d,g||this._source.fire(new a.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(l,d){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const g=d.getExpiryTimeout();g&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},g))}_removeTile(l){const d=this._tiles[l];d&&(d.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,d,g){const w=[],E=this.transform;if(!E)return w;const P=g?E.getCameraQueryGeometry(l):l,R=l.map(ie=>E.pointCoordinate(ie,this.terrain)),B=P.map(ie=>E.pointCoordinate(ie,this.terrain)),N=this.getIds();let j=1/0,W=1/0,K=-1/0,se=-1/0;for(const ie of B)j=Math.min(j,ie.x),W=Math.min(W,ie.y),K=Math.max(K,ie.x),se=Math.max(se,ie.y);for(let ie=0;ie<N.length;ie++){const oe=this._tiles[N[ie]];if(oe.holdingForFade())continue;const ge=oe.tileID,Se=Math.pow(2,E.zoom-oe.tileID.overscaledZ),Ae=d*oe.queryPadding*a.EXTENT/oe.tileSize/Se,ue=[ge.getTilePoint(new a.MercatorCoordinate(j,W)),ge.getTilePoint(new a.MercatorCoordinate(K,se))];if(ue[0].x-Ae<a.EXTENT&&ue[0].y-Ae<a.EXTENT&&ue[1].x+Ae>=0&&ue[1].y+Ae>=0){const De=R.map(Be=>ge.getTilePoint(Be)),Ie=B.map(Be=>ge.getTilePoint(Be));w.push({tile:oe,tileID:ge,queryGeometry:De,cameraQueryGeometry:Ie,scale:Se})}}return w}getVisibleCoordinates(l){const d=this.getRenderableIds(l).map(g=>this._tiles[g].tileID);for(const g of d)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(At(this._source.type))for(const l in this._tiles){const d=this._tiles[l];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=a.exported.now())return!0}return!1}setFeatureState(l,d,g){this._state.updateState(l=l||"_geojsonTileLayer",d,g)}removeFeatureState(l,d,g){this._state.removeFeatureState(l=l||"_geojsonTileLayer",d,g)}getFeatureState(l,d){return this._state.getState(l=l||"_geojsonTileLayer",d)}setDependencies(l,d,g){const w=this._tiles[l];w&&w.setDependencies(d,g)}reloadTilesForDependencies(l,d){for(const g in this._tiles)this._tiles[g].hasDependency(l,d)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(l,d))}}function _r(x,l){const d=Math.abs(2*x.wrap)-+(x.wrap<0),g=Math.abs(2*l.wrap)-+(l.wrap<0);return x.overscaledZ-l.overscaledZ||g-d||l.canonical.y-x.canonical.y||l.canonical.x-x.canonical.x}function At(x){return x==="raster"||x==="image"||x==="video"}Yt.maxOverzooming=10,Yt.maxUnderzooming=3;const kt="mapboxgl_preloaded_worker_pool";class Tt{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Tt.workerCount;)this.workers.push(new Worker(Fo.workerUrl));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[kt]}numActive(){return Object.keys(this.active).length}}const zt=Math.floor(a.exported.hardwareConcurrency/2);let hr;function yr(){return hr||(hr=new Tt),hr}function cn(x,l){const d={};for(const g in x)g!=="ref"&&(d[g]=x[g]);return a.refProperties.forEach(g=>{g in l&&(d[g]=l[g])}),d}function lr(x){x=x.slice();const l=Object.create(null);for(let d=0;d<x.length;d++)l[x[d].id]=x[d];for(let d=0;d<x.length;d++)"ref"in x[d]&&(x[d]=cn(x[d],l[x[d].ref]));return x}Tt.workerCount=Math.max(Math.min(zt,6),1);const Pt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function $r(x,l,d){d.push({command:Pt.addSource,args:[x,l[x]]})}function pi(x,l,d){l.push({command:Pt.removeSource,args:[x]}),d[x]=!0}function Oi(x,l,d,g){pi(x,d,g),$r(x,l,d)}function La(x,l,d){let g;for(g in x[d])if(Object.prototype.hasOwnProperty.call(x[d],g)&&g!=="data"&&!_(x[d][g],l[d][g]))return!1;for(g in l[d])if(Object.prototype.hasOwnProperty.call(l[d],g)&&g!=="data"&&!_(x[d][g],l[d][g]))return!1;return!0}function Yi(x,l,d,g,w,E){let P;for(P in l=l||{},x=x||{})Object.prototype.hasOwnProperty.call(x,P)&&(_(x[P],l[P])||d.push({command:E,args:[g,P,l[P],w]}));for(P in l)Object.prototype.hasOwnProperty.call(l,P)&&!Object.prototype.hasOwnProperty.call(x,P)&&(_(x[P],l[P])||d.push({command:E,args:[g,P,l[P],w]}))}function _n(x){return x.id}function Ri(x,l){return x[l.id]=l,x}class Vn{constructor(l,d){this.reset(l,d)}reset(l,d){this.points=l||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=a.clamp(l,0,1);let d=1,g=this._distances[d];const w=l*this.paddedLength+this.padding;for(;g<w&&d<this._distances.length;)g=this._distances[++d];const E=d-1,P=this._distances[E],R=g-P,B=R>0?(w-P)/R:0;return this.points[E].mult(1-B).add(this.points[d].mult(B))}}function Ne(x,l){let d=!0;return x==="always"||x!=="never"&&l!=="never"||(d=!1),d}class Je{constructor(l,d,g){const w=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(l/g),this.yCellCount=Math.ceil(d/g);for(let P=0;P<this.xCellCount*this.yCellCount;P++)w.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,d,g,w,E){this._forEachCell(d,g,w,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(w),this.bboxes.push(E)}insertCircle(l,d,g,w){this._forEachCell(d-w,g-w,d+w,g+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(g),this.circles.push(w)}_insertBoxCell(l,d,g,w,E,P){this.boxCells[E].push(P)}_insertCircleCell(l,d,g,w,E,P){this.circleCells[E].push(P)}_query(l,d,g,w,E,P,R){if(g<0||l>this.width||w<0||d>this.height)return[];const B=[];if(l<=0&&d<=0&&this.width<=g&&this.height<=w){if(E)return[{key:null,x1:l,y1:d,x2:g,y2:w}];for(let N=0;N<this.boxKeys.length;N++)B.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const j=this.circles[3*N],W=this.circles[3*N+1],K=this.circles[3*N+2];B.push({key:this.circleKeys[N],x1:j-K,y1:W-K,x2:j+K,y2:W+K})}}else this._forEachCell(l,d,g,w,this._queryCell,B,{hitTest:E,overlapMode:P,seenUids:{box:{},circle:{}}},R);return B}query(l,d,g,w){return this._query(l,d,g,w,!1,null)}hitTest(l,d,g,w,E,P){return this._query(l,d,g,w,!0,E,P).length>0}hitTestCircle(l,d,g,w,E){const P=l-g,R=l+g,B=d-g,N=d+g;if(R<0||P>this.width||N<0||B>this.height)return!1;const j=[];return this._forEachCell(P,B,R,N,this._queryCellCircle,j,{hitTest:!0,overlapMode:w,circle:{x:l,y:d,radius:g},seenUids:{box:{},circle:{}}},E),j.length>0}_queryCell(l,d,g,w,E,P,R,B){const{seenUids:N,hitTest:j,overlapMode:W}=R,K=this.boxCells[E];if(K!==null){const ie=this.bboxes;for(const oe of K)if(!N.box[oe]){N.box[oe]=!0;const ge=4*oe,Se=this.boxKeys[oe];if(l<=ie[ge+2]&&d<=ie[ge+3]&&g>=ie[ge+0]&&w>=ie[ge+1]&&(!B||B(Se))&&(!j||!Ne(W,Se.overlapMode))&&(P.push({key:Se,x1:ie[ge],y1:ie[ge+1],x2:ie[ge+2],y2:ie[ge+3]}),j))return!0}}const se=this.circleCells[E];if(se!==null){const ie=this.circles;for(const oe of se)if(!N.circle[oe]){N.circle[oe]=!0;const ge=3*oe,Se=this.circleKeys[oe];if(this._circleAndRectCollide(ie[ge],ie[ge+1],ie[ge+2],l,d,g,w)&&(!B||B(Se))&&(!j||!Ne(W,Se.overlapMode))){const Ae=ie[ge],ue=ie[ge+1],De=ie[ge+2];if(P.push({key:Se,x1:Ae-De,y1:ue-De,x2:Ae+De,y2:ue+De}),j)return!0}}}return!1}_queryCellCircle(l,d,g,w,E,P,R,B){const{circle:N,seenUids:j,overlapMode:W}=R,K=this.boxCells[E];if(K!==null){const ie=this.bboxes;for(const oe of K)if(!j.box[oe]){j.box[oe]=!0;const ge=4*oe,Se=this.boxKeys[oe];if(this._circleAndRectCollide(N.x,N.y,N.radius,ie[ge+0],ie[ge+1],ie[ge+2],ie[ge+3])&&(!B||B(Se))&&!Ne(W,Se.overlapMode))return P.push(!0),!0}}const se=this.circleCells[E];if(se!==null){const ie=this.circles;for(const oe of se)if(!j.circle[oe]){j.circle[oe]=!0;const ge=3*oe,Se=this.circleKeys[oe];if(this._circlesCollide(ie[ge],ie[ge+1],ie[ge+2],N.x,N.y,N.radius)&&(!B||B(Se))&&!Ne(W,Se.overlapMode))return P.push(!0),!0}}}_forEachCell(l,d,g,w,E,P,R,B){const N=this._convertToXCellCoord(l),j=this._convertToYCellCoord(d),W=this._convertToXCellCoord(g),K=this._convertToYCellCoord(w);for(let se=N;se<=W;se++)for(let ie=j;ie<=K;ie++)if(E.call(this,l,d,g,w,this.xCellCount*ie+se,P,R,B))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,d,g,w,E,P){const R=w-l,B=E-d,N=g+P;return N*N>R*R+B*B}_circleAndRectCollide(l,d,g,w,E,P,R){const B=(P-w)/2,N=Math.abs(l-(w+B));if(N>B+g)return!1;const j=(R-E)/2,W=Math.abs(d-(E+j));if(W>j+g)return!1;if(N<=B||W<=j)return!0;const K=N-B,se=W-j;return K*K+se*se<=g*g}}function Po(x,l,d,g,w){const E=a.create();return l?(a.scale(E,E,[1/w,1/w,1]),d||a.rotateZ(E,E,g.angle)):a.multiply(E,g.labelPlaneMatrix,x),E}function Ki(x,l,d,g,w){if(l){const E=a.clone(x);return a.scale(E,E,[w,w,1]),d||a.rotateZ(E,E,-g.angle),E}return g.glCoordMatrix}function tr(x,l,d){let g;d?(g=[x.x,x.y,d(x.x,x.y),1],a.transformMat4(g,g,l)):(g=[x.x,x.y,0,1],Oa(g,g,l));const w=g[3];return{point:new a.pointGeometry(g[0]/w,g[1]/w),signedDistanceFromCamera:w}}function zi(x,l){return .5+x/l*.5}function mi(x,l){const d=x[0]/x[3],g=x[1]/x[3];return d>=-l[0]&&d<=l[0]&&g>=-l[1]&&g<=l[1]}function vi(x,l,d,g,w,E,P,R,B,N){const j=g?x.textSizeData:x.iconSizeData,W=a.evaluateSizeForZoom(j,d.transform.zoom),K=[256/d.width*2+1,256/d.height*2+1],se=g?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;se.clear();const ie=x.lineVertexArray,oe=g?x.text.placedSymbolArray:x.icon.placedSymbolArray,ge=d.transform.width/d.transform.height;let Se=!1;for(let Ae=0;Ae<oe.length;Ae++){const ue=oe.get(Ae);if(ue.hidden||ue.writingMode===a.WritingMode.vertical&&!Se){Nt(ue.numGlyphs,se);continue}let De;if(Se=!1,N?(De=[ue.anchorX,ue.anchorY,N(ue.anchorX,ue.anchorY),1],a.transformMat4(De,De,l)):(De=[ue.anchorX,ue.anchorY,0,1],Oa(De,De,l)),!mi(De,K)){Nt(ue.numGlyphs,se);continue}const Ie=zi(d.transform.cameraToCenterDistance,De[3]),Be=a.evaluateSizeForFeature(j,W,ue),Fe=P?Be/Ie:Be*Ie,He=new a.pointGeometry(ue.anchorX,ue.anchorY),ze=tr(He,w,N).point,ot={},Ye=jt(ue,Fe,!1,R,l,w,E,x.glyphOffsetArray,ie,se,ze,He,ot,ge,B,N);Se=Ye.useVertical,(Ye.notEnoughRoom||Se||Ye.needsFlipping&&jt(ue,Fe,!0,R,l,w,E,x.glyphOffsetArray,ie,se,ze,He,ot,ge,B,N).notEnoughRoom)&&Nt(ue.numGlyphs,se)}g?x.text.dynamicLayoutVertexBuffer.updateData(se):x.icon.dynamicLayoutVertexBuffer.updateData(se)}function eo(x,l,d,g,w,E,P,R,B,N,j,W,K){const se=R.glyphStartIndex+R.numGlyphs,ie=R.lineStartIndex,oe=R.lineStartIndex+R.lineLength,ge=l.getoffsetX(R.glyphStartIndex),Se=l.getoffsetX(se-1),Ae=Ln(x*ge,d,g,w,E,P,R.segment,ie,oe,B,N,j,W,K);if(!Ae)return null;const ue=Ln(x*Se,d,g,w,E,P,R.segment,ie,oe,B,N,j,W,K);return ue?{first:Ae,last:ue}:null}function Xe(x,l,d,g){return x===a.WritingMode.horizontal&&Math.abs(d.y-l.y)>Math.abs(d.x-l.x)*g?{useVertical:!0}:(x===a.WritingMode.vertical?l.y<d.y:l.x>d.x)?{needsFlipping:!0}:null}function jt(x,l,d,g,w,E,P,R,B,N,j,W,K,se,ie,oe){const ge=l/24,Se=x.lineOffsetX*ge,Ae=x.lineOffsetY*ge;let ue;if(x.numGlyphs>1){const De=x.glyphStartIndex+x.numGlyphs,Ie=x.lineStartIndex,Be=x.lineStartIndex+x.lineLength,Fe=eo(ge,R,Se,Ae,d,j,W,x,B,E,K,ie,oe);if(!Fe)return{notEnoughRoom:!0};const He=tr(Fe.first.point,P,oe).point,ze=tr(Fe.last.point,P,oe).point;if(g&&!d){const ot=Xe(x.writingMode,He,ze,se);if(ot)return ot}ue=[Fe.first];for(let ot=x.glyphStartIndex+1;ot<De-1;ot++)ue.push(Ln(ge*R.getoffsetX(ot),Se,Ae,d,j,W,x.segment,Ie,Be,B,E,K,ie,oe));ue.push(Fe.last)}else{if(g&&!d){const Ie=tr(W,w,oe).point,Be=x.lineStartIndex+x.segment+1,Fe=new a.pointGeometry(B.getx(Be),B.gety(Be)),He=tr(Fe,w,oe),ze=He.signedDistanceFromCamera>0?He.point:Ut(W,Fe,Ie,1,w,oe),ot=Xe(x.writingMode,Ie,ze,se);if(ot)return ot}const De=Ln(ge*R.getoffsetX(x.glyphStartIndex),Se,Ae,d,j,W,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,B,E,K,ie,oe);if(!De)return{notEnoughRoom:!0};ue=[De]}for(const De of ue)a.addDynamicAttributes(N,De.point,De.angle);return{}}function Ut(x,l,d,g,w,E){const P=tr(x.add(x.sub(l)._unit()),w,E).point,R=d.sub(P);return d.add(R._mult(g/R.mag()))}function Ln(x,l,d,g,w,E,P,R,B,N,j,W,K,se){const ie=g?x-l:x+l;let oe=ie>0?1:-1,ge=0;g&&(oe*=-1,ge=Math.PI),oe<0&&(ge+=Math.PI);let Se=oe>0?R+P:R+P+1,Ae=w,ue=w,De=0,Ie=0;const Be=Math.abs(ie),Fe=[];for(;De+Ie<=Be;){if(Se+=oe,Se<R||Se>=B)return null;if(ue=Ae,Fe.push(Ae),Ae=W[Se],Ae===void 0){const ut=new a.pointGeometry(N.getx(Se),N.gety(Se)),$t=tr(ut,j,se);if($t.signedDistanceFromCamera>0)Ae=W[Se]=$t.point;else{const Ht=Se-oe;Ae=Ut(De===0?E:new a.pointGeometry(N.getx(Ht),N.gety(Ht)),ut,ue,Be-De+1,j,se)}}De+=Ie,Ie=ue.dist(Ae)}const He=(Be-De)/Ie,ze=Ae.sub(ue),ot=ze.mult(He)._add(ue);ot._add(ze._unit()._perp()._mult(d*oe));const Ye=ge+Math.atan2(Ae.y-ue.y,Ae.x-ue.x);return Fe.push(ot),{point:ot,angle:K?Ye:0,path:Fe}}const to=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Nt(x,l){for(let d=0;d<x;d++){const g=l.length;l.resize(g+4),l.float32.set(to,3*g)}}function Oa(x,l,d){const g=l[0],w=l[1];return x[0]=d[0]*g+d[4]*w+d[12],x[1]=d[1]*g+d[5]*w+d[13],x[3]=d[3]*g+d[7]*w+d[15],x}const Cn=100;class vs{constructor(l,d=new Je(l.width+200,l.height+200,25),g=new Je(l.width+200,l.height+200,25)){this.transform=l,this.grid=d,this.ignoredGrid=g,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Cn,this.screenBottomBoundary=l.height+Cn,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,d,g,w,E,P){const R=this.projectAndGetPerspectiveRatio(w,l.anchorPointX,l.anchorPointY,P),B=g*R.perspectiveRatio,N=l.x1*B+R.point.x,j=l.y1*B+R.point.y,W=l.x2*B+R.point.x,K=l.y2*B+R.point.y;return!this.isInsideGrid(N,j,W,K)||d!=="always"&&this.grid.hitTest(N,j,W,K,d,E)||R.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[N,j,W,K],offscreen:this.isOffscreen(N,j,W,K)}}placeCollisionCircles(l,d,g,w,E,P,R,B,N,j,W,K,se,ie){const oe=[],ge=new a.pointGeometry(d.anchorX,d.anchorY),Se=tr(ge,P,ie),Ae=zi(this.transform.cameraToCenterDistance,Se.signedDistanceFromCamera),ue=(j?E/Ae:E*Ae)/a.ONE_EM,De=tr(ge,R,ie).point,Ie=eo(ue,w,d.lineOffsetX*ue,d.lineOffsetY*ue,!1,De,ge,d,g,R,{},!1,ie);let Be=!1,Fe=!1,He=!0;if(Ie){const ze=.5*K*Ae+se,ot=new a.pointGeometry(-100,-100),Ye=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ut=new Vn,$t=Ie.first,Ht=Ie.last;let Et=[];for(let er=$t.path.length-1;er>=1;er--)Et.push($t.path[er]);for(let er=1;er<Ht.path.length;er++)Et.push(Ht.path[er]);const xr=2.5*ze;if(B){const er=Et.map(ir=>tr(ir,B,ie));Et=er.some(ir=>ir.signedDistanceFromCamera<=0)?[]:er.map(ir=>ir.point)}let br=[];if(Et.length>0){const er=Et[0].clone(),ir=Et[0].clone();for(let Ir=1;Ir<Et.length;Ir++)er.x=Math.min(er.x,Et[Ir].x),er.y=Math.min(er.y,Et[Ir].y),ir.x=Math.max(ir.x,Et[Ir].x),ir.y=Math.max(ir.y,Et[Ir].y);br=er.x>=ot.x&&ir.x<=Ye.x&&er.y>=ot.y&&ir.y<=Ye.y?[Et]:ir.x<ot.x||er.x>Ye.x||ir.y<ot.y||er.y>Ye.y?[]:a.clipLine([Et],ot.x,ot.y,Ye.x,Ye.y)}for(const er of br){ut.reset(er,.25*ze);let ir=0;ir=ut.length<=.5*ze?1:Math.ceil(ut.paddedLength/xr)+1;for(let Ir=0;Ir<ir;Ir++){const In=Ir/Math.max(ir-1,1),da=ut.lerp(In),Qi=da.x+Cn,pa=da.y+Cn;oe.push(Qi,pa,ze,0);const lo=Qi-ze,Fi=pa-ze,ii=Qi+ze,Ba=pa+ze;if(He=He&&this.isOffscreen(lo,Fi,ii,Ba),Fe=Fe||this.isInsideGrid(lo,Fi,ii,Ba),l!=="always"&&this.grid.hitTestCircle(Qi,pa,ze,l,W)&&(Be=!0,!N))return{circles:[],offscreen:!1,collisionDetected:Be}}}}return{circles:!N&&Be||!Fe||Ae<this.perspectiveRatioCutoff?[]:oe,offscreen:He,collisionDetected:Be}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let g=1/0,w=1/0,E=-1/0,P=-1/0;for(const j of l){const W=new a.pointGeometry(j.x+Cn,j.y+Cn);g=Math.min(g,W.x),w=Math.min(w,W.y),E=Math.max(E,W.x),P=Math.max(P,W.y),d.push(W)}const R=this.grid.query(g,w,E,P).concat(this.ignoredGrid.query(g,w,E,P)),B={},N={};for(const j of R){const W=j.key;if(B[W.bucketInstanceId]===void 0&&(B[W.bucketInstanceId]={}),B[W.bucketInstanceId][W.featureIndex])continue;const K=[new a.pointGeometry(j.x1,j.y1),new a.pointGeometry(j.x2,j.y1),new a.pointGeometry(j.x2,j.y2),new a.pointGeometry(j.x1,j.y2)];a.polygonIntersectsPolygon(d,K)&&(B[W.bucketInstanceId][W.featureIndex]=!0,N[W.bucketInstanceId]===void 0&&(N[W.bucketInstanceId]=[]),N[W.bucketInstanceId].push(W.featureIndex))}return N}insertCollisionBox(l,d,g,w,E,P){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:E,collisionGroupID:P,overlapMode:d},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,d,g,w,E,P){const R=g?this.ignoredGrid:this.grid,B={bucketInstanceId:w,featureIndex:E,collisionGroupID:P,overlapMode:d};for(let N=0;N<l.length;N+=4)R.insertCircle(B,l[N],l[N+1],l[N+2])}projectAndGetPerspectiveRatio(l,d,g,w){let E;return w?(E=[d,g,w(d,g),1],a.transformMat4(E,E,l)):(E=[d,g,0,1],Oa(E,E,l)),{point:new a.pointGeometry((E[0]/E[3]+1)/2*this.transform.width+Cn,(-E[1]/E[3]+1)/2*this.transform.height+Cn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E[3]*.5}}isOffscreen(l,d,g,w){return g<Cn||l>=this.screenRightBoundary||w<Cn||d>this.screenBottomBoundary}isInsideGrid(l,d,g,w){return g>=0&&l<this.gridRightBoundary&&w>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const l=a.identity([]);return a.translate(l,l,[-100,-100,0]),l}}function fn(x,l,d){return l*(a.EXTENT/(x.tileSize*Math.pow(2,d-x.tileID.overscaledZ)))}class Xn{constructor(l,d,g,w){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):w&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Ar{constructor(l,d,g,w,E){this.text=new Xn(l?l.text:null,d,g,E),this.icon=new Xn(l?l.icon:null,d,w,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gs{constructor(l,d,g){this.text=l,this.icon=d,this.skipFade=g}}class ca{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Do{constructor(l,d,g,w,E){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=g,this.bucketIndex=w,this.tileID=E}}class ko{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:g=>g.collisionGroupID===d}}return this.collisionGroups[l]}}function _s(x,l,d,g,w){const{horizontalAlign:E,verticalAlign:P}=a.getAnchorAlignment(x),R=-(E-.5)*l,B=-(P-.5)*d,N=a.evaluateVariableOffset(x,g);return new a.pointGeometry(R+N[0]*w,B+N[1]*w)}function Lo(x,l,d,g,w,E){const{x1:P,x2:R,y1:B,y2:N,anchorPointX:j,anchorPointY:W}=x,K=new a.pointGeometry(l,d);return g&&K._rotate(w?E:-E),{x1:P+K.x,y1:B+K.y,x2:R+K.x,y2:N+K.y,anchorPointX:j,anchorPointY:W}}class ne{constructor(l,d,g,w,E){this.transform=l.clone(),this.terrain=d,this.collisionIndex=new vs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new ko(w),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,d,g,w){const E=g.getBucket(d),P=g.latestFeatureIndex;if(!E||!P||d.id!==E.layerIds[0])return;const R=g.collisionBoxArray,B=E.layers[0].layout,N=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),j=g.tileSize/a.EXTENT,W=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),K=B.get("text-pitch-alignment")==="map",se=B.get("text-rotation-alignment")==="map",ie=fn(g,1,this.transform.zoom),oe=Po(W,K,se,this.transform,ie);let ge=null;if(K){const Ae=Ki(W,K,se,this.transform,ie);ge=a.multiply([],this.transform.labelPlaneMatrix,Ae)}this.retainedQueryData[E.bucketInstanceId]=new Do(E.bucketInstanceId,P,E.sourceLayerIndex,E.index,g.tileID);const Se={bucket:E,layout:B,posMatrix:W,textLabelPlaneMatrix:oe,labelToScreenMatrix:ge,scale:N,textPixelRatio:j,holdingForFade:g.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(w)for(const Ae of E.sortKeyRanges){const{sortKey:ue,symbolInstanceStart:De,symbolInstanceEnd:Ie}=Ae;l.push({sortKey:ue,symbolInstanceStart:De,symbolInstanceEnd:Ie,parameters:Se})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(l,d,g,w,E,P,R,B,N,j,W,K,se,ie,oe,ge){const Se=[K.textOffset0,K.textOffset1],Ae=_s(l,g,w,Se,E),ue=this.collisionIndex.placeCollisionBox(Lo(d,Ae.x,Ae.y,P,R,this.transform.angle),W,B,N,j.predicate,ge);if((!oe||this.collisionIndex.placeCollisionBox(Lo(oe,Ae.x,Ae.y,P,R,this.transform.angle),W,B,N,j.predicate,ge).box.length!==0)&&ue.box.length>0){let De;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(De=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Se,width:g,height:w,anchor:l,textBoxScale:E,prevAnchor:De},this.markUsedJustification(se,l,K,ie),se.allowVerticalPlacement&&(this.markUsedOrientation(se,ie,K),this.placedOrientations[K.crossTileID]=ie),{shift:Ae,placedGlyphBoxes:ue}}}placeLayerBucketPart(l,d,g){const{bucket:w,layout:E,posMatrix:P,textLabelPlaneMatrix:R,labelToScreenMatrix:B,textPixelRatio:N,holdingForFade:j,collisionBoxArray:W,partiallyEvaluatedTextSize:K,collisionGroup:se}=l.parameters,ie=E.get("text-optional"),oe=E.get("icon-optional"),ge=a.getOverlapMode(E,"text-overlap","text-allow-overlap"),Se=ge==="always",Ae=a.getOverlapMode(E,"icon-overlap","icon-allow-overlap"),ue=Ae==="always",De=E.get("text-rotation-alignment")==="map",Ie=E.get("text-pitch-alignment")==="map",Be=E.get("icon-text-fit")!=="none",Fe=E.get("symbol-z-order")==="viewport-y",He=Se&&(ue||!w.hasIconData()||oe),ze=ue&&(Se||!w.hasTextData()||ie);!w.collisionArrays&&W&&w.deserializeCollisionBoxes(W);const ot=(Ye,ut)=>{if(d[Ye.crossTileID])return;if(j)return void(this.placements[Ye.crossTileID]=new gs(!1,!1,!1));let $t=!1,Ht=!1,Et=!0,xr=null,br={box:null,offscreen:null},er={box:null,offscreen:null},ir=null,Ir=null,In=null,da=0,Qi=0,pa=0;ut.textFeatureIndex?da=ut.textFeatureIndex:Ye.useRuntimeCollisionCircles&&(da=Ye.featureIndex),ut.verticalTextFeatureIndex&&(Qi=ut.verticalTextFeatureIndex);const lo=this.retainedQueryData[w.bucketInstanceId].tileID,Fi=this.terrain?(yn,Kt)=>this.terrain.getElevation(lo,yn,Kt):null;for(const yn of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Kt=ut[yn];Kt&&(Kt.elevation=Fi?Fi(Kt.anchorPointX,Kt.anchorPointY):0)}const ii=ut.textBox;if(ii){const yn=pr=>{let Mn=a.WritingMode.horizontal;if(w.allowVerticalPlacement&&!pr&&this.prevPlacement){const Pn=this.prevPlacement.placedOrientations[Ye.crossTileID];Pn&&(this.placedOrientations[Ye.crossTileID]=Pn,Mn=Pn,this.markUsedOrientation(w,Mn,Ye))}return Mn},Kt=(pr,Mn)=>{if(w.allowVerticalPlacement&&Ye.numVerticalGlyphVertices>0&&ut.verticalTextBox){for(const Pn of w.writingModes)if(Pn===a.WritingMode.vertical?(br=Mn(),er=br):br=pr(),br&&br.box&&br.box.length)break}else br=pr()};if(E.get("text-variable-anchor")){let pr=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ye.crossTileID]){const Qr=this.prevPlacement.variableOffsets[Ye.crossTileID];pr.indexOf(Qr.anchor)>0&&(pr=pr.filter(Ni=>Ni!==Qr.anchor),pr.unshift(Qr.anchor))}const Mn=(Qr,Ni,No)=>{const zh=Qr.x2-Qr.x1,Ds=Qr.y2-Qr.y1,Ap=Ye.textBoxScale,Bh=Be&&Ae==="never"?Ni:null;let uo={box:[],offscreen:!1};const Vo=ge!=="never"?2*pr.length:pr.length;for(let Uo=0;Uo<Vo;++Uo){const Hu=this.attemptAnchorPlacement(pr[Uo%pr.length],Qr,zh,Ds,Ap,De,Ie,N,P,se,Uo>=pr.length?ge:"never",Ye,w,No,Bh,Fi);if(Hu&&(uo=Hu.placedGlyphBoxes,uo&&uo.box&&uo.box.length)){$t=!0,xr=Hu.shift;break}}return uo};Kt(()=>Mn(ii,ut.iconBox,a.WritingMode.horizontal),()=>{const Qr=ut.verticalTextBox;return w.allowVerticalPlacement&&!(br&&br.box&&br.box.length)&&Ye.numVerticalGlyphVertices>0&&Qr?Mn(Qr,ut.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),br&&($t=br.box,Et=br.offscreen);const Pn=yn(br&&br.box);if(!$t&&this.prevPlacement){const Qr=this.prevPlacement.variableOffsets[Ye.crossTileID];Qr&&(this.variableOffsets[Ye.crossTileID]=Qr,this.markUsedJustification(w,Qr.anchor,Ye,Pn))}}else{const pr=(Mn,Pn)=>{const Qr=this.collisionIndex.placeCollisionBox(Mn,ge,N,P,se.predicate,Fi);return Qr&&Qr.box&&Qr.box.length&&(this.markUsedOrientation(w,Pn,Ye),this.placedOrientations[Ye.crossTileID]=Pn),Qr};Kt(()=>pr(ii,a.WritingMode.horizontal),()=>{const Mn=ut.verticalTextBox;return w.allowVerticalPlacement&&Ye.numVerticalGlyphVertices>0&&Mn?pr(Mn,a.WritingMode.vertical):{box:null,offscreen:null}}),yn(br&&br.box&&br.box.length)}}if(ir=br,$t=ir&&ir.box&&ir.box.length>0,Et=ir&&ir.offscreen,Ye.useRuntimeCollisionCircles){const yn=w.text.placedSymbolArray.get(Ye.centerJustifiedTextSymbolIndex),Kt=a.evaluateSizeForFeature(w.textSizeData,K,yn),pr=E.get("text-padding");Ir=this.collisionIndex.placeCollisionCircles(ge,yn,w.lineVertexArray,w.glyphOffsetArray,Kt,P,R,B,g,Ie,se.predicate,Ye.collisionCircleDiameter,pr,Fi),Ir.circles.length&&Ir.collisionDetected&&!g&&a.warnOnce("Collisions detected, but collision boxes are not shown"),$t=Se||Ir.circles.length>0&&!Ir.collisionDetected,Et=Et&&Ir.offscreen}if(ut.iconFeatureIndex&&(pa=ut.iconFeatureIndex),ut.iconBox){const yn=Kt=>{const pr=Be&&xr?Lo(Kt,xr.x,xr.y,De,Ie,this.transform.angle):Kt;return this.collisionIndex.placeCollisionBox(pr,Ae,N,P,se.predicate,Fi)};er&&er.box&&er.box.length&&ut.verticalIconBox?(In=yn(ut.verticalIconBox),Ht=In.box.length>0):(In=yn(ut.iconBox),Ht=In.box.length>0),Et=Et&&In.offscreen}const Ba=ie||Ye.numHorizontalGlyphVertices===0&&Ye.numVerticalGlyphVertices===0,Gu=oe||Ye.numIconVertices===0;if(Ba||Gu?Gu?Ba||(Ht=Ht&&$t):$t=Ht&&$t:Ht=$t=Ht&&$t,$t&&ir&&ir.box&&this.collisionIndex.insertCollisionBox(ir.box,ge,E.get("text-ignore-placement"),w.bucketInstanceId,er&&er.box&&Qi?Qi:da,se.ID),Ht&&In&&this.collisionIndex.insertCollisionBox(In.box,Ae,E.get("icon-ignore-placement"),w.bucketInstanceId,pa,se.ID),Ir&&($t&&this.collisionIndex.insertCollisionCircles(Ir.circles,ge,E.get("text-ignore-placement"),w.bucketInstanceId,da,se.ID),g)){const yn=w.bucketInstanceId;let Kt=this.collisionCircleArrays[yn];Kt===void 0&&(Kt=this.collisionCircleArrays[yn]=new ca);for(let pr=0;pr<Ir.circles.length;pr+=4)Kt.circles.push(Ir.circles[pr+0]),Kt.circles.push(Ir.circles[pr+1]),Kt.circles.push(Ir.circles[pr+2]),Kt.circles.push(Ir.collisionDetected?1:0)}if(Ye.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ye.crossTileID]=new gs($t||He,Ht||ze,Et||w.justReloaded),d[Ye.crossTileID]=!0};if(Fe){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ye=w.getSortedSymbolIndexes(this.transform.angle);for(let ut=Ye.length-1;ut>=0;--ut){const $t=Ye[ut];ot(w.symbolInstances.get($t),w.collisionArrays[$t])}}else for(let Ye=l.symbolInstanceStart;Ye<l.symbolInstanceEnd;Ye++)ot(w.symbolInstances.get(Ye),w.collisionArrays[Ye]);if(g&&w.bucketInstanceId in this.collisionCircleArrays){const Ye=this.collisionCircleArrays[w.bucketInstanceId];a.invert(Ye.invProjMatrix,P),Ye.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,d,g,w){let E;E=w===a.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(d)];const P=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const R of P)R>=0&&(l.text.placedSymbolArray.get(R).crossTileID=E>=0&&R!==E?0:g.crossTileID)}markUsedOrientation(l,d,g){const w=d===a.WritingMode.horizontal||d===a.WritingMode.horizontalOnly?d:0,E=d===a.WritingMode.vertical?d:0,P=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const R of P)l.text.placedSymbolArray.get(R).placedOrientation=w;g.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let g=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const w=d?d.symbolFadeChange(l):1,E=d?d.opacities:{},P=d?d.variableOffsets:{},R=d?d.placedOrientations:{};for(const B in this.placements){const N=this.placements[B],j=E[B];j?(this.opacities[B]=new Ar(j,w,N.text,N.icon),g=g||N.text!==j.text.placed||N.icon!==j.icon.placed):(this.opacities[B]=new Ar(null,w,N.text,N.icon,N.skipFade),g=g||N.text||N.icon)}for(const B in E){const N=E[B];if(!this.opacities[B]){const j=new Ar(N,w,!1,!1);j.isHidden()||(this.opacities[B]=j,g=g||N.text.placed||N.icon.placed)}}for(const B in P)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=P[B]);for(const B in R)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=R[B]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)}updateLayerOpacities(l,d){const g={};for(const w of d){const E=w.getBucket(l);E&&w.latestFeatureIndex&&l.id===E.layerIds[0]&&this.updateBucketOpacities(E,g,w.collisionBoxArray)}}updateBucketOpacities(l,d,g){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const w=l.layers[0].layout,E=new Ar(null,0,!1,!1,!0),P=w.get("text-allow-overlap"),R=w.get("icon-allow-overlap"),B=w.get("text-variable-anchor"),N=w.get("text-rotation-alignment")==="map",j=w.get("text-pitch-alignment")==="map",W=w.get("icon-text-fit")!=="none",K=new Ar(null,0,P&&(R||!l.hasIconData()||w.get("icon-optional")),R&&(P||!l.hasTextData()||w.get("text-optional")),!0);!l.collisionArrays&&g&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(g);const se=(ie,oe,ge)=>{for(let Se=0;Se<oe/4;Se++)ie.opacityVertexArray.emplaceBack(ge)};for(let ie=0;ie<l.symbolInstances.length;ie++){const oe=l.symbolInstances.get(ie),{numHorizontalGlyphVertices:ge,numVerticalGlyphVertices:Se,crossTileID:Ae}=oe;let ue=this.opacities[Ae];d[Ae]?ue=E:ue||(ue=K,this.opacities[Ae]=ue),d[Ae]=!0;const De=oe.numIconVertices>0,Ie=this.placedOrientations[oe.crossTileID],Be=Ie===a.WritingMode.vertical,Fe=Ie===a.WritingMode.horizontal||Ie===a.WritingMode.horizontalOnly;if(ge>0||Se>0){const He=be(ue.text);se(l.text,ge,Be?Re:He),se(l.text,Se,Fe?Re:He);const ze=ue.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(ut=>{ut>=0&&(l.text.placedSymbolArray.get(ut).hidden=ze||Be?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=ze||Fe?1:0);const ot=this.variableOffsets[oe.crossTileID];ot&&this.markUsedJustification(l,ot.anchor,oe,Ie);const Ye=this.placedOrientations[oe.crossTileID];Ye&&(this.markUsedJustification(l,"left",oe,Ye),this.markUsedOrientation(l,Ye,oe))}if(De){const He=be(ue.icon),ze=!(W&&oe.verticalPlacedIconSymbolIndex&&Be);oe.placedIconSymbolIndex>=0&&(se(l.icon,oe.numIconVertices,ze?He:Re),l.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=ue.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(se(l.icon,oe.numVerticalIconVertices,ze?Re:He),l.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=ue.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const He=l.collisionArrays[ie];if(He){let ze=new a.pointGeometry(0,0);if(He.textBox||He.verticalTextBox){let Ye=!0;if(B){const ut=this.variableOffsets[Ae];ut?(ze=_s(ut.anchor,ut.width,ut.height,ut.textOffset,ut.textBoxScale),N&&ze._rotate(j?this.transform.angle:-this.transform.angle)):Ye=!1}He.textBox&&U(l.textCollisionBox.collisionVertexArray,ue.text.placed,!Ye||Be,ze.x,ze.y),He.verticalTextBox&&U(l.textCollisionBox.collisionVertexArray,ue.text.placed,!Ye||Fe,ze.x,ze.y)}const ot=Boolean(!Fe&&He.verticalIconBox);He.iconBox&&U(l.iconCollisionBox.collisionVertexArray,ue.icon.placed,ot,W?ze.x:0,W?ze.y:0),He.verticalIconBox&&U(l.iconCollisionBox.collisionVertexArray,ue.icon.placed,!ot,W?ze.x:0,W?ze.y:0)}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const ie=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ie.invProjMatrix,l.placementViewportMatrix=ie.viewportMatrix,l.collisionCircleArray=ie.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,d){const g=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*g>l}setStale(){this.stale=!0}}function U(x,l,d,g,w){x.emplaceBack(l?1:0,d?1:0,g||0,w||0),x.emplaceBack(l?1:0,d?1:0,g||0,w||0),x.emplaceBack(l?1:0,d?1:0,g||0,w||0),x.emplaceBack(l?1:0,d?1:0,g||0,w||0)}const q=Math.pow(2,25),te=Math.pow(2,24),re=Math.pow(2,17),fe=Math.pow(2,16),xe=Math.pow(2,9),me=Math.pow(2,8),de=Math.pow(2,1);function be(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;const l=x.placed?1:0,d=Math.floor(127*x.opacity);return d*q+l*te+d*re+l*fe+d*xe+l*me+d*de+l}const Re=0;class Ge{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,d,g,w,E){const P=this._bucketParts;for(;this._currentTileIndex<l.length;)if(d.getBucketParts(P,w,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((R,B)=>R.sortKey-B.sortKey));this._currentPartIndex<P.length;)if(d.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,E())return!0;return!1}}class Oe{constructor(l,d,g,w,E,P,R,B){this.placement=new ne(l,d,P,R,B),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(l,d,g){const w=a.exported.now(),E=()=>{const P=a.exported.now()-w;return!this._forceFullPlacement&&P>2};for(;this._currentPlacementIndex>=0;){const P=d[l[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=R)&&(!P.maxzoom||P.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new Ge(P)),this._inProgressLayer.continuePlacement(g[P.source],this.placement,this._showCollisionBoxes,P,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const dt=512/a.EXTENT/2;class vt{constructor(l,d,g){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(let w=0;w<d.length;w++){const E=d.get(w),P=E.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:E.crossTileID,coord:this.getScaledCoordinates(E,l)})}}getScaledCoordinates(l,d){const g=dt/Math.pow(2,d.canonical.z-this.tileID.canonical.z);return{x:Math.floor((d.canonical.x*a.EXTENT+l.anchorX)*g),y:Math.floor((d.canonical.y*a.EXTENT+l.anchorY)*g)}}findMatches(l,d,g){const w=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let E=0;E<l.length;E++){const P=l.get(E);if(P.crossTileID)continue;const R=this.indexedSymbolInstances[P.key];if(!R)continue;const B=this.getScaledCoordinates(P,d);for(const N of R)if(Math.abs(N.coord.x-B.x)<=w&&Math.abs(N.coord.y-B.y)<=w&&!g[N.crossTileID]){g[N.crossTileID]=!0,P.crossTileID=N.crossTileID;break}}}}class it{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class It{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const d=Math.round((l-this.lng)/360);if(d!==0)for(const g in this.indexes){const w=this.indexes[g],E={};for(const P in w){const R=w[P];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+d),E[R.tileID.key]=R}this.indexes[g]=E}this.lng=l}addBucket(l,d,g){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let E=0;E<d.symbolInstances.length;E++)d.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const w=this.usedCrossTileIDs[l.overscaledZ];for(const E in this.indexes){const P=this.indexes[E];if(Number(E)>l.overscaledZ)for(const R in P){const B=P[R];B.tileID.isChildOf(l)&&B.findMatches(d.symbolInstances,l,w)}else{const R=P[l.scaledTo(Number(E)).key];R&&R.findMatches(d.symbolInstances,l,w)}}for(let E=0;E<d.symbolInstances.length;E++){const P=d.symbolInstances.get(E);P.crossTileID||(P.crossTileID=g.generate(),w[P.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new vt(l,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(l,d){for(const g in d.indexedSymbolInstances)for(const w of d.indexedSymbolInstances[g])delete this.usedCrossTileIDs[l][w.crossTileID]}removeStaleBuckets(l){let d=!1;for(const g in this.indexes){const w=this.indexes[g];for(const E in w)l[w[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,w[E]),delete w[E],d=!0)}return d}}class Lt{constructor(){this.layerIndexes={},this.crossTileIDs=new it,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,d,g){let w=this.layerIndexes[l.id];w===void 0&&(w=this.layerIndexes[l.id]=new It);let E=!1;const P={};w.handleWrapJump(g);for(const R of d){const B=R.getBucket(l);B&&l.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(R.tileID,B,this.crossTileIDs)&&(E=!0),P[B.bucketInstanceId]=!0)}return w.removeStaleBuckets(P)&&(E=!0),E}pruneUnusedLayers(l){const d={};l.forEach(g=>{d[g]=!0});for(const g in this.layerIndexes)d[g]||delete this.layerIndexes[g]}}var rr=a.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Ft extends a.Evented{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=l._cache.max,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const l in this._tiles){const d=this._tiles[l];d.textures.forEach(g=>g.destroy()),d.textures=[]}}update(l,d){this.sourceCache.update(l,d),this._renderableTilesKeys=[];for(const g of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),a.ortho(g.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[g.key]=new Fr(g,this.tileSize))}removeOutdated(l){const d={};this.renderHistory=this.renderHistory.filter((g,w)=>this.renderHistory.indexOf(g)===w).slice(0,this.renderHistorySize);for(const g of this._renderableTilesKeys)d[g]=!0;for(const g of this.renderHistory)d[g]=!0;for(const g in this._tiles)d[g]||(this._tiles[g].clearTextures(l),delete this._tiles[g])}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const d={};for(const g of this._renderableTilesKeys){const w=this._tiles[g].tileID;if(w.canonical.equals(l.canonical)){const E=l.clone();E.posMatrix=new Float64Array(16),a.ortho(E.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),d[g]=E}else if(w.canonical.isChildOf(l.canonical)){const E=l.clone();E.posMatrix=new Float64Array(16);const P=w.canonical.z-l.canonical.z,R=w.canonical.x-(w.canonical.x>>P<<P),B=w.canonical.y-(w.canonical.y>>P<<P),N=a.EXTENT>>P;a.ortho(E.posMatrix,0,N,0,N,0,1),a.translate(E.posMatrix,E.posMatrix,[-R*N,-B*N,0]),d[g]=E}else if(l.canonical.isChildOf(w.canonical)){const E=l.clone();E.posMatrix=new Float64Array(16);const P=l.canonical.z-w.canonical.z,R=l.canonical.x-(l.canonical.x>>P<<P),B=l.canonical.y-(l.canonical.y>>P<<P),N=a.EXTENT>>P;a.ortho(E.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(E.posMatrix,E.posMatrix,[R*N,B*N,0]),a.scale(E.posMatrix,E.posMatrix,[1/2**P,1/2**P,0]),d[g]=E}}return d}getSourceTile(l,d){const g=this.sourceCache._source;let w=l.overscaledZ-this.deltaZoom;if(w>g.maxzoom&&(w=g.maxzoom),w<g.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(w).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!E||!E.dem)&&d)for(;w>=g.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(l.scaledTo(w--).key);return E}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter(d=>d.timeLoaded>=l)}}class Gt{constructor(l,d,g){this.style=l,this.sourceCache=new Ft(d),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.elevationOffset=typeof g.elevationOffset=="number"?g.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(l,d,g,w=a.EXTENT){if(!(d>=0&&d<w&&g>=0&&g<w))return this.elevationOffset;let E=0;const P=this.getTerrainData(l);if(P.tile&&P.tile.dem){const R=a.transformMat4$1([],[d/w*a.EXTENT,g/w*a.EXTENT],P.u_terrain_matrix),B=[R[0]*P.tile.dem.dim,R[1]*P.tile.dem.dim],N=[Math.floor(B[0]),Math.floor(B[1])],j=P.tile.dem.get(N[0],N[1]),W=P.tile.dem.get(N[0],N[1]+1),K=P.tile.dem.get(N[0]+1,N[1]),se=P.tile.dem.get(N[0]+1,N[1]+1);E=a.number(a.number(j,W,B[0]-N[0]),a.number(K,se,B[0]-N[0]),B[1]-N[1])}return E}rememberForRerender(l,d){for(const g in this.sourceCache._tiles){const w=this.sourceCache._tiles[g];(w.tileID.equals(d)||w.tileID.isChildOf(d))&&(l===this.sourceCache.sourceCache.id&&(w.timeLoaded=Date.now()),this._rerender[l]=this._rerender[l]||{},this._rerender[l][w.tileID.key]=!0)}}needsRerender(l,d){return this._rerender[l]&&this._rerender[l][d.key]}clearRerenderCache(){this._rerender={}}getElevation(l,d,g,w=a.EXTENT){return(this.getDEMElevation(l,d,g,w)+this.elevationOffset)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const w=this.style.map.painter.context,E=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new I(w,E,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new I(w,new a.RGBAImage({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}const d=this.sourceCache.getSourceTile(l,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const w=this.style.map.painter.context;d.demTexture=this.style.map.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new I(w,d.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),d.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const g=d&&d+d.tileID.key+l.key;if(g&&!this._demMatrixCache[g]){const w=this.sourceCache.sourceCache._source.maxzoom;let E=l.canonical.z-d.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=w?E=l.canonical.z-w:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=l.canonical.x-(l.canonical.x>>E<<E),R=l.canonical.y-(l.canonical.y>>E<<E),B=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<E),1/(a.EXTENT<<E),0]);a.translate(B,B,[P*a.EXTENT,R*a.EXTENT,0]),this._demMatrixCache[l.key]={matrix:B,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getRTTFramebuffer(){const l=this.style.map.painter;if(!this._rttFramebuffer){const d=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=l.context.createFramebuffer(d,d,!0),this._rttFramebuffer.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,d))}return this._rttFramebuffer}getFramebuffer(l){const d=this.style.map.painter,g=d.width/devicePixelRatio,w=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new I(d.context,{width:g,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new I(d.context,{width:g,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(g,w,!0),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,g,w))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,P=0;E<this._coordsTextureSize;E++)for(let R=0;R<this._coordsTextureSize;R++,P+=4)d[P+0]=255&R,d[P+1]=255&E,d[P+2]=R>>8<<4|E>>8,d[P+3]=0;const g=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),w=new I(l,g,l.gl.RGBA,{premultiply:!1});return w.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(l){const d=new Uint8Array(4),g=this.style.map.painter,w=g.context,E=w.gl;w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),E.readPixels(l.x,g.height/devicePixelRatio-l.y-1,1,1,E.RGBA,E.UNSIGNED_BYTE,d),w.bindFramebuffer.set(null);const P=d[0]+(d[2]>>4<<8),R=d[1]+((15&d[2])<<8),B=this.coordsIndex[255-d[3]],N=B&&this.sourceCache.getTileByID(B);if(!N)return null;const j=this._coordsTextureSize,W=(1<<N.tileID.canonical.z)*j;return new a.MercatorCoordinate((N.tileID.canonical.x*j+P)/W,(N.tileID.canonical.y*j+R)/W,this.getElevation(N.tileID,P,R,j))}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.style.map.painter.context,d=new a.PosArray,g=new a.TriangleIndexArray,w=this.meshSize,E=a.EXTENT/w,P=w*w;for(let R=0;R<=w;R++)for(let B=0;B<=w;B++)d.emplaceBack(B*E,R*E);for(let R=0;R<P;R+=w+1)for(let B=0;B<w;B++)g.emplaceBack(B+R,w+B+R+1,w+B+R+2),g.emplaceBack(B+R,w+B+R+2,B+R+1);return this._mesh={indexBuffer:l.createIndexBuffer(g),vertexBuffer:l.createVertexBuffer(d,rr.members),segments:a.SegmentVector.simpleSegment(0,0,d.length,g.length)},this._mesh}getMinMaxElevation(l){const d=this.getTerrainData(l).tile,g={minElevation:null,maxElevation:null};return d&&d.dem&&(g.minElevation=(d.dem.min+this.elevationOffset)*this.exaggeration,g.maxElevation=(d.dem.max+this.elevationOffset)*this.exaggeration),g}}const nr=(x,l)=>a.emitValidationErrors(x,l&&l.filter(d=>d.identifier!=="source.canvas")),kr=a.pick(Pt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),An=a.pick(Pt,["setCenter","setZoom","setBearing","setPitch"]),Xr=function(){const x={},l=a.spec.$version;for(const d in a.spec.$root){const g=a.spec.$root[d];if(g.required){let w=null;w=d==="version"?l:g.type==="array"?[]:{},w!=null&&(x[d]=w)}}return x}();class Un extends a.Evented{constructor(l,d={}){super(),this.map=l,this.dispatcher=new le(yr(),this),this.imageManager=new k,this.imageManager.setEventedParent(this),this.glyphManager=new H(l._requestManager,d.localIdeographFontFamily),this.lineAtlas=new ae(256,512),this.crossTileSymbolIndex=new Lt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const g=this;this._rtlTextPluginCallback=Un.registerForPluginStateChange(w=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},(E,P)=>{if(a.triggerPluginCompletionEvent(E),P&&P.every(R=>R))for(const R in g.sourceCaches)g.sourceCaches[R].reload()})}),this.on("data",w=>{if(w.dataType!=="source"||w.sourceDataType!=="metadata")return;const E=this.sourceCaches[w.sourceId];if(!E)return;const P=E.getSource();if(P&&P.vectorLayerIds)for(const R in this._layers){const B=this._layers[R];B.source===P.id&&this._validateLayer(B)}})}loadURL(l,d={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const g=typeof d.validate!="boolean"||d.validate,w=this.map._requestManager.transformRequest(l,a.ResourceType.Style);this._request=a.getJSON(w,(E,P)=>{this._request=null,E?this.fire(new a.ErrorEvent(E)):P&&this._load(P,g)})}loadJSON(l,d={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(l,d.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(Xr,!1)}_load(l,d){if(d&&nr(this,a.validateStyle(l)))return;this._loaded=!0,this.stylesheet=l;for(const w in l.sources)this.addSource(w,l.sources[w],{validate:!1});l.sprite?this._loadSprite(l.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(l.glyphs);const g=lr(this.stylesheet.layers);this._order=g.map(w=>w.id),this._layers={},this._serializedLayers={};for(let w of g)w=a.createStyleLayer(w),w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Y(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}_loadSprite(l){this._spriteRequest=function(d,g,w,E){let P,R,B;const N=w>1?"@2x":"";let j=a.getJSON(g.transformRequest(g.normalizeSpriteURL(d,N,".json"),a.ResourceType.SpriteJSON),(se,ie)=>{j=null,B||(B=se,P=ie,K())}),W=a.getImage(g.transformRequest(g.normalizeSpriteURL(d,N,".png"),a.ResourceType.SpriteImage),(se,ie)=>{W=null,B||(B=se,R=ie,K())});function K(){if(B)E(B);else if(P&&R){const se=a.exported.getImageData(R),ie={};for(const oe in P){const{width:ge,height:Se,x:Ae,y:ue,sdf:De,pixelRatio:Ie,stretchX:Be,stretchY:Fe,content:He}=P[oe],ze=new a.RGBAImage({width:ge,height:Se});a.RGBAImage.copy(se,ze,{x:Ae,y:ue},{x:0,y:0},{width:ge,height:Se}),ie[oe]={data:ze,pixelRatio:Ie,sdf:De,stretchX:Be,stretchY:Fe,content:He}}E(null,ie)}}return{cancel(){j&&(j.cancel(),j=null),W&&(W.cancel(),W=null)}}}(l,this.map._requestManager,this.map.getPixelRatio(),(d,g)=>{if(this._spriteRequest=null,d)this.fire(new a.ErrorEvent(d));else if(g)for(const w in g)this.imageManager.addImage(w,g[w]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(l){const d=this.sourceCaches[l.source];if(!d)return;const g=l.sourceLayer;if(!g)return;const w=d.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(g)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${w.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const d=[];for(const g of l){const w=this._layers[g];w.type!=="custom"&&d.push(w.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const d=this._changed;if(this._changed){const w=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(w.length||E.length)&&this._updateWorkerLayers(w,E);for(const P in this._updatedSources){const R=this._updatedSources[P];if(R==="reload")this._reloadSource(P);else{if(R!=="clear")throw new Error(`Invalid action ${R}`);this._clearSource(P)}}this._updateTilesForChangedImages();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(l);this.light.updateTransitions(l),this._resetUpdates()}const g={};for(const w in this.sourceCaches){const E=this.sourceCaches[w];g[w]=E.used,E.used=!1}for(const w of this._order){const E=this._layers[w];E.recalculate(l,this._availableImages),!E.isHidden(l.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const w in g){const E=this.sourceCaches[w];g[w]!==E.used&&E.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(l),this.z=l.zoom,d&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(l){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),l){const d=this.sourceCaches[l.source];if(!d)throw new Error(`cannot load terrain, because there exists no source with ID: ${l.source}`);this.terrain=new Gt(this,d,l),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=g=>{g.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=g=>{g.tile&&(g.sourceId===l.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(g.sourceId,g.tile.tileID)):g.source.type==="geojson"&&this.terrain.rememberForRerender(g.sourceId,g.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new a.Event("terrain",{terrain:l}))}setState(l){if(this._checkLoaded(),nr(this,a.validateStyle(l)))return!1;(l=a.clone$1(l)).layers=lr(l.layers);const d=function(w,E){if(!w)return[{command:Pt.setStyle,args:[E]}];let P=[];try{if(!_(w.version,E.version))return[{command:Pt.setStyle,args:[E]}];_(w.center,E.center)||P.push({command:Pt.setCenter,args:[E.center]}),_(w.zoom,E.zoom)||P.push({command:Pt.setZoom,args:[E.zoom]}),_(w.bearing,E.bearing)||P.push({command:Pt.setBearing,args:[E.bearing]}),_(w.pitch,E.pitch)||P.push({command:Pt.setPitch,args:[E.pitch]}),_(w.sprite,E.sprite)||P.push({command:Pt.setSprite,args:[E.sprite]}),_(w.glyphs,E.glyphs)||P.push({command:Pt.setGlyphs,args:[E.glyphs]}),_(w.transition,E.transition)||P.push({command:Pt.setTransition,args:[E.transition]}),_(w.light,E.light)||P.push({command:Pt.setLight,args:[E.light]});const R={},B=[];(function(j,W,K,se){let ie;for(ie in W=W||{},j=j||{})Object.prototype.hasOwnProperty.call(j,ie)&&(Object.prototype.hasOwnProperty.call(W,ie)||pi(ie,K,se));for(ie in W)Object.prototype.hasOwnProperty.call(W,ie)&&(Object.prototype.hasOwnProperty.call(j,ie)?_(j[ie],W[ie])||(j[ie].type==="geojson"&&W[ie].type==="geojson"&&La(j,W,ie)?K.push({command:Pt.setGeoJSONSourceData,args:[ie,W[ie].data]}):Oi(ie,W,K,se)):$r(ie,W,K))})(w.sources,E.sources,B,R);const N=[];w.layers&&w.layers.forEach(j=>{R[j.source]?P.push({command:Pt.removeLayer,args:[j.id]}):N.push(j)}),P=P.concat(B),function(j,W,K){W=W||[];const se=(j=j||[]).map(_n),ie=W.map(_n),oe=j.reduce(Ri,{}),ge=W.reduce(Ri,{}),Se=se.slice(),Ae=Object.create(null);let ue,De,Ie,Be,Fe,He,ze;for(ue=0,De=0;ue<se.length;ue++)Ie=se[ue],Object.prototype.hasOwnProperty.call(ge,Ie)?De++:(K.push({command:Pt.removeLayer,args:[Ie]}),Se.splice(Se.indexOf(Ie,De),1));for(ue=0,De=0;ue<ie.length;ue++)Ie=ie[ie.length-1-ue],Se[Se.length-1-ue]!==Ie&&(Object.prototype.hasOwnProperty.call(oe,Ie)?(K.push({command:Pt.removeLayer,args:[Ie]}),Se.splice(Se.lastIndexOf(Ie,Se.length-De),1)):De++,He=Se[Se.length-ue],K.push({command:Pt.addLayer,args:[ge[Ie],He]}),Se.splice(Se.length-ue,0,Ie),Ae[Ie]=!0);for(ue=0;ue<ie.length;ue++)if(Ie=ie[ue],Be=oe[Ie],Fe=ge[Ie],!Ae[Ie]&&!_(Be,Fe))if(_(Be.source,Fe.source)&&_(Be["source-layer"],Fe["source-layer"])&&_(Be.type,Fe.type)){for(ze in Yi(Be.layout,Fe.layout,K,Ie,null,Pt.setLayoutProperty),Yi(Be.paint,Fe.paint,K,Ie,null,Pt.setPaintProperty),_(Be.filter,Fe.filter)||K.push({command:Pt.setFilter,args:[Ie,Fe.filter]}),_(Be.minzoom,Fe.minzoom)&&_(Be.maxzoom,Fe.maxzoom)||K.push({command:Pt.setLayerZoomRange,args:[Ie,Fe.minzoom,Fe.maxzoom]}),Be)Object.prototype.hasOwnProperty.call(Be,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?Yi(Be[ze],Fe[ze],K,Ie,ze.slice(6),Pt.setPaintProperty):_(Be[ze],Fe[ze])||K.push({command:Pt.setLayerProperty,args:[Ie,ze,Fe[ze]]}));for(ze in Fe)Object.prototype.hasOwnProperty.call(Fe,ze)&&!Object.prototype.hasOwnProperty.call(Be,ze)&&ze!=="layout"&&ze!=="paint"&&ze!=="filter"&&ze!=="metadata"&&ze!=="minzoom"&&ze!=="maxzoom"&&(ze.indexOf("paint.")===0?Yi(Be[ze],Fe[ze],K,Ie,ze.slice(6),Pt.setPaintProperty):_(Be[ze],Fe[ze])||K.push({command:Pt.setLayerProperty,args:[Ie,ze,Fe[ze]]}))}else K.push({command:Pt.removeLayer,args:[Ie]}),He=Se[Se.lastIndexOf(Ie)+1],K.push({command:Pt.addLayer,args:[Fe,He]})}(N,E.layers,P)}catch(R){console.warn("Unable to compute style diff:",R),P=[{command:Pt.setStyle,args:[E]}]}return P}(this.serialize(),l).filter(w=>!(w.command in An));if(d.length===0)return!1;const g=d.filter(w=>!(w.command in kr));if(g.length>0)throw new Error(`Unimplemented: ${g.map(w=>w.command).join(", ")}.`);return d.forEach(w=>{w.command!=="setTransition"&&this[w.command].apply(this,w.args)}),this.stylesheet=l,!0}addImage(l,d){if(this.getImage(l))return this.fire(new a.ErrorEvent(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,d),this._afterImageUpdated(l)}updateImage(l,d){this.imageManager.updateImage(l,d)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new a.ErrorEvent(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,d,g={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.validateStyle.source,`sources.${l}`,d,null,g))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const w=this.sourceCaches[l]=new Yt(l,d,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:w.serialize(),sourceId:l})),w.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===l)return this.fire(new a.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${g}" is using it.`)));const d=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],d.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,d){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const g=this.sourceCaches[l].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(d),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,d,g={}){this._checkLoaded();const w=l.id;if(this.getLayer(w))return void this.fire(new a.ErrorEvent(new Error(`Layer "${w}" already exists on this map.`)));let E;if(l.type==="custom"){if(nr(this,a.validateCustomStyleLayer(l)))return;E=a.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(w,l.source),l=a.clone$1(l),l=a.extend(l,{source:w})),this._validate(a.validateStyle.layer,`layers.${w}`,l,{arrayIndex:-1},g))return;E=a.createStyleLayer(l),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}const P=d?this._order.indexOf(d):this._order.length;if(d&&P===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${w}" before non-existing layer "${d}".`)));else{if(this._order.splice(P,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){const R=this._removedLayers[w];delete this._removedLayers[w],R.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(l,d){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new a.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===d)return;const g=this._order.indexOf(l);this._order.splice(g,1);const w=d?this._order.indexOf(d):this._order.length;d&&w===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${l}" before non-existing layer "${d}".`))):(this._order.splice(w,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const d=this._layers[l];if(!d)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${l}".`)));d.setEventedParent(null);const g=this._order.indexOf(l);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=d,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],d.onRemove&&d.onRemove(this.map)}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,d,g){this._checkLoaded();const w=this.getLayer(l);w?w.minzoom===d&&w.maxzoom===g||(d!=null&&(w.minzoom=d),g!=null&&(w.maxzoom=g),this._updateLayer(w)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,d,g={}){this._checkLoaded();const w=this.getLayer(l);if(w){if(!_(w.filter,d))return d==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(a.validateStyle.filter,`layers.${w.id}.filter`,d,null,g)||(w.filter=a.clone$1(d),this._updateLayer(w)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return a.clone$1(this.getLayer(l).filter)}setLayoutProperty(l,d,g,w={}){this._checkLoaded();const E=this.getLayer(l);E?_(E.getLayoutProperty(d),g)||(E.setLayoutProperty(d,g,w),this._updateLayer(E)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,d){const g=this.getLayer(l);if(g)return g.getLayoutProperty(d);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,d,g,w={}){this._checkLoaded();const E=this.getLayer(l);E?_(E.getPaintProperty(d),g)||(E.setPaintProperty(d,g,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,d){return this.getLayer(l).getPaintProperty(d)}setFeatureState(l,d){this._checkLoaded();const g=l.source,w=l.sourceLayer,E=this.sourceCaches[g];if(E===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const P=E.getSource().type;P==="geojson"&&w?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||w?(l.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,l.id,d)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,d){this._checkLoaded();const g=l.source,w=this.sourceCaches[g];if(w===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const E=w.getSource().type,P=E==="vector"?l.sourceLayer:void 0;E!=="vector"||P?d&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(P,l.id,d):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const d=l.source,g=l.sourceLayer,w=this.sourceCaches[d];if(w!==void 0)return w.getSource().type!=="vector"||g?(l.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(g,l.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,l=>l.serialize()),layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(l){const d=P=>this._layers[P].type==="fill-extrusion",g={},w=[];for(let P=this._order.length-1;P>=0;P--){const R=this._order[P];if(d(R)){g[R]=P;for(const B of l){const N=B[R];if(N)for(const j of N)w.push(j)}}}w.sort((P,R)=>R.intersectionZ-P.intersectionZ);const E=[];for(let P=this._order.length-1;P>=0;P--){const R=this._order[P];if(d(R))for(let B=w.length-1;B>=0;B--){const N=w[B].feature;if(g[N.layer.id]<P)break;E.push(N),w.pop()}else for(const B of l){const N=B[R];if(N)for(const j of N)E.push(j.feature)}}return E}queryRenderedFeatures(l,d,g){d&&d.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);const w={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of d.layers){const R=this._layers[P];if(!R)return this.fire(new a.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];w[R.source]=!0}}const E=[];d.availableImages=this._availableImages;for(const P in this.sourceCaches)d.layers&&!w[P]||E.push(cr(this.sourceCaches[P],this._layers,this._serializedLayers,l,d,g));return this.placement&&E.push(function(P,R,B,N,j,W,K){const se={},ie=W.queryRenderedSymbols(N),oe=[];for(const ge of Object.keys(ie).map(Number))oe.push(K[ge]);oe.sort(vr);for(const ge of oe){const Se=ge.featureIndex.lookupSymbolFeatures(ie[ge.bucketInstanceId],R,ge.bucketIndex,ge.sourceLayerIndex,j.filter,j.layers,j.availableImages,P);for(const Ae in Se){const ue=se[Ae]=se[Ae]||[],De=Se[Ae];De.sort((Ie,Be)=>{const Fe=ge.featureSortOrder;if(Fe){const He=Fe.indexOf(Ie.featureIndex);return Fe.indexOf(Be.featureIndex)-He}return Be.featureIndex-Ie.featureIndex});for(const Ie of De)ue.push(Ie)}}for(const ge in se)se[ge].forEach(Se=>{const Ae=Se.feature,ue=B[P[ge].source].getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=ue});return se}(this._layers,this._serializedLayers,this.sourceCaches,l,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(l,d){d&&d.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);const g=this.sourceCaches[l];return g?function(w,E){const P=w.getRenderableIds().map(N=>w.getTileByID(N)),R=[],B={};for(let N=0;N<P.length;N++){const j=P[N],W=j.tileID.canonical.key;B[W]||(B[W]=!0,j.querySourceFeatures(R,E))}return R}(g,d):[]}addSourceType(l,d,g){return Un.getSourceType(l)?g(new Error(`A source type called "${l}" already exists.`)):(Un.setSourceType(l,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:d.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(l,d={}){this._checkLoaded();const g=this.light.getLight();let w=!1;for(const P in l)if(!_(l[P],g[P])){w=!0;break}if(!w)return;const E={now:a.exported.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,d),this.light.updateTransitions(E)}_validate(l,d,g,w,E={}){return(!E||E.validate!==!1)&&nr(this,l.call(a.validateStyle,a.extend({key:d,style:this.serialize(),value:g,styleSpec:a.spec},w)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const d in this.sourceCaches)this.sourceCaches[d].update(l,this.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,d,g,w,E=!1){let P=!1,R=!1;const B={};for(const N of this._order){const j=this._layers[N];if(j.type!=="symbol")continue;if(!B[j.source]){const K=this.sourceCaches[j.source];B[j.source]=K.getRenderableIds(!0).map(se=>K.getTileByID(se)).sort((se,ie)=>ie.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(ie.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer(j,B[j.source],l.center.lng);P=P||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),l.zoom))&&(this.pauseablePlacement=new Oe(l,this.terrain,this._order,E,d,g,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),R=!0),P&&this.pauseablePlacement.placement.setStale()),R||P)for(const N of this._order){const j=this._layers[N];j.type==="symbol"&&this.placement.updateLayerOpacities(j,B[j.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,d,g){this.imageManager.getImages(d.icons,g),this._updateTilesForChangedImages();const w=this.sourceCaches[d.source];w&&w.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(l,d,g){this.glyphManager.getGlyphs(d.stacks,g)}getResource(l,d,g){return a.makeRequest(d,g)}}Un.getSourceType=function(x){return Dt[x]},Un.setSourceType=function(x,l){Dt[x]=l},Un.registerForPluginStateChange=a.registerForPluginStateChange;var ys="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const il={prelude:Lr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Lr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Lr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Lr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Lr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Lr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Lr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Lr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Lr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Lr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Lr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Lr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Lr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Lr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Lr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Lr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Lr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Lr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Lr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Lr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Lr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Lr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Lr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ys),terrainDepth:Lr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ys),terrainCoords:Lr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ys)};function Lr(x,l){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=l.match(/attribute ([\w]+) ([\w]+)/g),w=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=E?E.concat(w):w,R={};return{fragmentSource:x=x.replace(d,(B,N,j,W,K)=>(R[K]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${K}
varying ${j} ${W} ${K};
#else
uniform ${j} ${W} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${j} ${W} ${K} = u_${K};
#endif
`)),vertexSource:l=l.replace(d,(B,N,j,W,K)=>{const se=W==="float"?"vec2":"vec4",ie=K.match(/color/)?"color":se;return R[K]?N==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${j} ${se} a_${K};
varying ${j} ${W} ${K};
#else
uniform ${j} ${W} u_${K};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${j} ${W} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${ie}(a_${K}, u_${K}_t);
#else
    ${j} ${W} ${K} = u_${K};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${j} ${se} a_${K};
#else
uniform ${j} ${W} u_${K};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${j} ${W} ${K} = a_${K};
#else
    ${j} ${W} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${j} ${W} ${K} = unpack_mix_${ie}(a_${K}, u_${K}_t);
#else
    ${j} ${W} ${K} = u_${K};
#endif
`}),staticAttributes:g,staticUniforms:P}}class ih{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,d,g,w,E,P,R,B,N){this.context=l;let j=this.boundPaintVertexBuffers.length!==w.length;for(let W=0;!j&&W<w.length;W++)this.boundPaintVertexBuffers[W]!==w[W]&&(j=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===d&&this.boundLayoutVertexBuffer===g&&!j&&this.boundIndexBuffer===E&&this.boundVertexOffset===P&&this.boundDynamicVertexBuffer===R&&this.boundDynamicVertexBuffer2===B&&this.boundDynamicVertexBuffer3===N?(l.bindVertexArrayOES.set(this.vao),R&&R.bind(),E&&E.dynamicDraw&&E.bind(),B&&B.bind(),N&&N.bind()):this.freshBind(d,g,w,E,P,R,B,N)}freshBind(l,d,g,w,E,P,R,B){let N;const j=l.numAttributes,W=this.context,K=W.gl;if(W.extVertexArrayObject)this.vao&&this.destroy(),this.vao=W.extVertexArrayObject.createVertexArrayOES(),W.bindVertexArrayOES.set(this.vao),N=0,this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=w,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=R,this.boundDynamicVertexBuffer3=B;else{N=W.currentNumAttributes||0;for(let se=j;se<N;se++)K.disableVertexAttribArray(se)}d.enableAttributes(K,l);for(const se of g)se.enableAttributes(K,l);P&&P.enableAttributes(K,l),R&&R.enableAttributes(K,l),B&&B.enableAttributes(K,l),d.bind(),d.setVertexAttribPointers(K,l,E);for(const se of g)se.bind(),se.setVertexAttribPointers(K,l,E);P&&(P.bind(),P.setVertexAttribPointers(K,l,E)),w&&w.bind(),R&&(R.bind(),R.setVertexAttribPointers(K,l,E)),B&&(B.bind(),B.setVertexAttribPointers(K,l,E)),W.currentNumAttributes=j}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function ah(x){const l=[];for(let d=0;d<x.length;d++){if(x[d]===null)continue;const g=x[d].split(" ");l.push(g.pop())}return l}class jd{constructor(l,d,g,w,E,P,R){const B=l.gl;this.program=B.createProgram();const N=ah(g.staticAttributes),j=w?w.getBinderAttributes():[],W=N.concat(j),K=il.prelude.staticUniforms?ah(il.prelude.staticUniforms):[],se=g.staticUniforms?ah(g.staticUniforms):[],ie=w?w.getBinderUniforms():[],oe=K.concat(se).concat(ie),ge=[];for(const Fe of oe)ge.indexOf(Fe)<0&&ge.push(Fe);const Se=w?w.defines():[];P&&Se.push("#define OVERDRAW_INSPECTOR;"),R&&Se.push("#define TERRAIN3D;");const Ae=Se.concat(il.prelude.fragmentSource,g.fragmentSource).join(`
`),ue=Se.concat(il.prelude.vertexSource,g.vertexSource).join(`
`),De=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);B.shaderSource(De,Ae),B.compileShader(De),B.attachShader(this.program,De);const Ie=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);B.shaderSource(Ie,ue),B.compileShader(Ie),B.attachShader(this.program,Ie),this.attributes={};const Be={};this.numAttributes=W.length;for(let Fe=0;Fe<this.numAttributes;Fe++)W[Fe]&&(B.bindAttribLocation(this.program,Fe,W[Fe]),this.attributes[W[Fe]]=Fe);B.linkProgram(this.program),B.deleteShader(Ie),B.deleteShader(De);for(let Fe=0;Fe<ge.length;Fe++){const He=ge[Fe];if(He&&!Be[He]){const ze=B.getUniformLocation(this.program,He);ze&&(Be[He]=ze)}}this.fixedUniforms=E(l,Be),this.terrainUniforms=((Fe,He)=>({u_depth:new a.Uniform1i(Fe,He.u_depth),u_terrain:new a.Uniform1i(Fe,He.u_terrain),u_terrain_dim:new a.Uniform1f(Fe,He.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(Fe,He.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(Fe,He.u_terrain_unpack),u_terrain_offset:new a.Uniform1f(Fe,He.u_terrain_offset),u_terrain_exaggeration:new a.Uniform1f(Fe,He.u_terrain_exaggeration)}))(l,Be),this.binderUniforms=w?w.getUniforms(l,Be):[]}draw(l,d,g,w,E,P,R,B,N,j,W,K,se,ie,oe,ge,Se,Ae){const ue=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(g),l.setStencilMode(w),l.setColorMode(E),l.setCullFace(P),B){l.activeTexture.set(ue.TEXTURE2),ue.bindTexture(ue.TEXTURE_2D,B.depthTexture),l.activeTexture.set(ue.TEXTURE3),ue.bindTexture(ue.TEXTURE_2D,B.texture);for(const Ie in this.terrainUniforms)this.terrainUniforms[Ie].set(B[Ie])}for(const Ie in this.fixedUniforms)this.fixedUniforms[Ie].set(R[Ie]);oe&&oe.setUniforms(l,this.binderUniforms,se,{zoom:ie});let De=0;switch(d){case ue.LINES:De=2;break;case ue.TRIANGLES:De=3;break;case ue.LINE_STRIP:De=1}for(const Ie of K.get()){const Be=Ie.vaos||(Ie.vaos={});(Be[N]||(Be[N]=new ih)).bind(l,this,j,oe?oe.getPaintVertexBuffers():[],W,Ie.vertexOffset,ge,Se,Ae),ue.drawElements(d,Ie.primitiveLength*De,ue.UNSIGNED_SHORT,Ie.primitiveOffset*De*2)}}}function Gd(x,l,d){const g=1/fn(d,1,l.transform.tileZoom),w=Math.pow(2,d.tileID.overscaledZ),E=d.tileSize*Math.pow(2,l.transform.tileZoom)/w,P=E*(d.tileID.canonical.x+d.tileID.wrap*w),R=E*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[g,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[P>>16,R>>16],u_pixel_coord_lower:[65535&P,65535&R]}}const oh=(x,l,d,g)=>{const w=l.style.light,E=w.properties.get("position"),P=[E.x,E.y,E.z],R=a.create$1();w.properties.get("anchor")==="viewport"&&a.fromRotation(R,-l.transform.angle),a.transformMat3(P,P,R);const B=w.properties.get("color");return{u_matrix:x,u_lightpos:P,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+d,u_opacity:g}},jg=(x,l,d,g,w,E,P)=>a.extend(oh(x,l,d,g),Gd(E,l,P),{u_height_factor:-Math.pow(2,w.overscaledZ)/P.tileSize/8}),Eu=x=>({u_matrix:x}),sh=(x,l,d,g)=>a.extend(Eu(x),Gd(d,l,g)),Hd=(x,l)=>({u_matrix:x,u_world:l}),qd=(x,l,d,g,w)=>a.extend(sh(x,l,d,g),{u_world:w}),Wd=(x,l,d,g)=>{const w=x.transform;let E,P;if(g.paint.get("circle-pitch-alignment")==="map"){const R=fn(d,1,w.zoom);E=!0,P=[R,R]}else E=!1,P=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:x.translatePosMatrix(l.posMatrix,d,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:x.pixelRatio,u_extrude_scale:P}},Oo=(x,l,d)=>{const g=fn(d,1,l.zoom),w=Math.pow(2,l.zoom-d.tileID.overscaledZ),E=d.tileID.overscaleFactor();return{u_matrix:x,u_camera_to_center_distance:l.cameraToCenterDistance,u_pixels_to_tile_units:g,u_extrude_scale:[l.pixelsToGLUnits[0]/(g*w),l.pixelsToGLUnits[1]/(g*w)],u_overscale_factor:E}},al=(x,l,d=1)=>({u_matrix:x,u_color:l,u_overlay:0,u_overlay_scale:d}),xs=x=>({u_matrix:x}),Cu=(x,l,d,g)=>({u_matrix:x,u_extrude_scale:fn(l,1,d),u_intensity:g});function Au(x,l){const d=Math.pow(2,l.canonical.z),g=l.canonical.y;return[new a.MercatorCoordinate(0,g/d).toLngLat().lat,new a.MercatorCoordinate(0,(g+1)/d).toLngLat().lat]}const bs=(x,l,d,g)=>{const w=x.transform;return{u_matrix:sl(x,l,d,g),u_ratio:1/fn(l,1,w.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},lh=(x,l,d,g,w)=>a.extend(bs(x,l,d,w),{u_image:0,u_image_height:g}),Iu=(x,l,d,g,w)=>{const E=x.transform,P=Yr(l,E);return{u_matrix:sl(x,l,d,w),u_texsize:l.imageAtlasTexture.size,u_ratio:1/fn(l,1,E.zoom),u_device_pixel_ratio:x.pixelRatio,u_image:0,u_scale:[P,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},ol=(x,l,d,g,w,E)=>{const P=x.lineAtlas,R=Yr(l,x.transform),B=d.layout.get("line-cap")==="round",N=P.getDash(g.from,B),j=P.getDash(g.to,B),W=N.width*w.fromScale,K=j.width*w.toScale;return a.extend(bs(x,l,d,E),{u_patternscale_a:[R/W,-N.height/2],u_patternscale_b:[R/K,-j.height/2],u_sdfgamma:P.width/(256*Math.min(W,K)*x.pixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:j.y,u_mix:w.t})};function Yr(x,l){return 1/fn(x,1,l.tileZoom)}function sl(x,l,d,g){return x.translatePosMatrix(g?g.posMatrix:l.tileID.posMatrix,l,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Zd=(x,l,d,g,w)=>{return{u_matrix:x,u_tl_parent:l,u_scale_parent:d,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(P=w.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(E=w.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:Xd(w.paint.get("raster-hue-rotate"))};var E,P};function Xd(x){x*=Math.PI/180;const l=Math.sin(x),d=Math.cos(x);return[(2*d+1)/3,(-Math.sqrt(3)*l-d+1)/3,(Math.sqrt(3)*l-d+1)/3]}const uh=(x,l,d,g,w,E,P,R,B,N)=>{const j=w.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:j.cameraToCenterDistance,u_pitch:j.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:j.width/j.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:P,u_coord_matrix:R,u_is_text:+B,u_pitch_with_map:+g,u_texsize:N,u_texture:0}},Mu=(x,l,d,g,w,E,P,R,B,N,j)=>{const W=w.transform;return a.extend(uh(x,l,d,g,w,E,P,R,B,N),{u_gamma_scale:g?Math.cos(W._pitch)*W.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+j})},Yd=(x,l,d,g,w,E,P,R,B,N)=>a.extend(Mu(x,l,d,g,w,E,P,R,!0,B,!0),{u_texsize_icon:N,u_texture_icon:1}),Gg=(x,l,d)=>({u_matrix:x,u_opacity:l,u_color:d}),Hg=(x,l,d,g,w,E)=>a.extend(function(P,R,B,N){const j=B.imageManager.getPattern(P.from.toString()),W=B.imageManager.getPattern(P.to.toString()),{width:K,height:se}=B.imageManager.getPixelSize(),ie=Math.pow(2,N.tileID.overscaledZ),oe=N.tileSize*Math.pow(2,B.transform.tileZoom)/ie,ge=oe*(N.tileID.canonical.x+N.tileID.wrap*ie),Se=oe*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:W.tl,u_pattern_br_b:W.br,u_texsize:[K,se],u_mix:R.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:W.displaySize,u_scale_a:R.fromScale,u_scale_b:R.toScale,u_tile_units_to_pixels:1/fn(N,1,B.transform.tileZoom),u_pixel_coord_upper:[ge>>16,Se>>16],u_pixel_coord_lower:[65535&ge,65535&Se]}}(g,E,d,w),{u_matrix:x,u_opacity:l}),ch={fillExtrusion:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_lightpos:new a.Uniform3f(x,l.u_lightpos),u_lightintensity:new a.Uniform1f(x,l.u_lightintensity),u_lightcolor:new a.Uniform3f(x,l.u_lightcolor),u_vertical_gradient:new a.Uniform1f(x,l.u_vertical_gradient),u_opacity:new a.Uniform1f(x,l.u_opacity)}),fillExtrusionPattern:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_lightpos:new a.Uniform3f(x,l.u_lightpos),u_lightintensity:new a.Uniform1f(x,l.u_lightintensity),u_lightcolor:new a.Uniform3f(x,l.u_lightcolor),u_vertical_gradient:new a.Uniform1f(x,l.u_vertical_gradient),u_height_factor:new a.Uniform1f(x,l.u_height_factor),u_image:new a.Uniform1i(x,l.u_image),u_texsize:new a.Uniform2f(x,l.u_texsize),u_pixel_coord_upper:new a.Uniform2f(x,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(x,l.u_pixel_coord_lower),u_scale:new a.Uniform3f(x,l.u_scale),u_fade:new a.Uniform1f(x,l.u_fade),u_opacity:new a.Uniform1f(x,l.u_opacity)}),fill:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix)}),fillPattern:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_image:new a.Uniform1i(x,l.u_image),u_texsize:new a.Uniform2f(x,l.u_texsize),u_pixel_coord_upper:new a.Uniform2f(x,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(x,l.u_pixel_coord_lower),u_scale:new a.Uniform3f(x,l.u_scale),u_fade:new a.Uniform1f(x,l.u_fade)}),fillOutline:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_world:new a.Uniform2f(x,l.u_world)}),fillOutlinePattern:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_world:new a.Uniform2f(x,l.u_world),u_image:new a.Uniform1i(x,l.u_image),u_texsize:new a.Uniform2f(x,l.u_texsize),u_pixel_coord_upper:new a.Uniform2f(x,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(x,l.u_pixel_coord_lower),u_scale:new a.Uniform3f(x,l.u_scale),u_fade:new a.Uniform1f(x,l.u_fade)}),circle:(x,l)=>({u_camera_to_center_distance:new a.Uniform1f(x,l.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(x,l.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(x,l.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(x,l.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(x,l.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(x,l.u_matrix)}),collisionBox:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_camera_to_center_distance:new a.Uniform1f(x,l.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(x,l.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(x,l.u_extrude_scale),u_overscale_factor:new a.Uniform1f(x,l.u_overscale_factor)}),collisionCircle:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_inv_matrix:new a.UniformMatrix4f(x,l.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(x,l.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(x,l.u_viewport_size)}),debug:(x,l)=>({u_color:new a.UniformColor(x,l.u_color),u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_overlay:new a.Uniform1i(x,l.u_overlay),u_overlay_scale:new a.Uniform1f(x,l.u_overlay_scale)}),clippingMask:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix)}),heatmap:(x,l)=>({u_extrude_scale:new a.Uniform1f(x,l.u_extrude_scale),u_intensity:new a.Uniform1f(x,l.u_intensity),u_matrix:new a.UniformMatrix4f(x,l.u_matrix)}),heatmapTexture:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_world:new a.Uniform2f(x,l.u_world),u_image:new a.Uniform1i(x,l.u_image),u_color_ramp:new a.Uniform1i(x,l.u_color_ramp),u_opacity:new a.Uniform1f(x,l.u_opacity)}),hillshade:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_image:new a.Uniform1i(x,l.u_image),u_latrange:new a.Uniform2f(x,l.u_latrange),u_light:new a.Uniform2f(x,l.u_light),u_shadow:new a.UniformColor(x,l.u_shadow),u_highlight:new a.UniformColor(x,l.u_highlight),u_accent:new a.UniformColor(x,l.u_accent)}),hillshadePrepare:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_image:new a.Uniform1i(x,l.u_image),u_dimension:new a.Uniform2f(x,l.u_dimension),u_zoom:new a.Uniform1f(x,l.u_zoom),u_unpack:new a.Uniform4f(x,l.u_unpack)}),line:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_ratio:new a.Uniform1f(x,l.u_ratio),u_device_pixel_ratio:new a.Uniform1f(x,l.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(x,l.u_units_to_pixels)}),lineGradient:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_ratio:new a.Uniform1f(x,l.u_ratio),u_device_pixel_ratio:new a.Uniform1f(x,l.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(x,l.u_units_to_pixels),u_image:new a.Uniform1i(x,l.u_image),u_image_height:new a.Uniform1f(x,l.u_image_height)}),linePattern:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_texsize:new a.Uniform2f(x,l.u_texsize),u_ratio:new a.Uniform1f(x,l.u_ratio),u_device_pixel_ratio:new a.Uniform1f(x,l.u_device_pixel_ratio),u_image:new a.Uniform1i(x,l.u_image),u_units_to_pixels:new a.Uniform2f(x,l.u_units_to_pixels),u_scale:new a.Uniform3f(x,l.u_scale),u_fade:new a.Uniform1f(x,l.u_fade)}),lineSDF:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_ratio:new a.Uniform1f(x,l.u_ratio),u_device_pixel_ratio:new a.Uniform1f(x,l.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(x,l.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(x,l.u_patternscale_a),u_patternscale_b:new a.Uniform2f(x,l.u_patternscale_b),u_sdfgamma:new a.Uniform1f(x,l.u_sdfgamma),u_image:new a.Uniform1i(x,l.u_image),u_tex_y_a:new a.Uniform1f(x,l.u_tex_y_a),u_tex_y_b:new a.Uniform1f(x,l.u_tex_y_b),u_mix:new a.Uniform1f(x,l.u_mix)}),raster:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_tl_parent:new a.Uniform2f(x,l.u_tl_parent),u_scale_parent:new a.Uniform1f(x,l.u_scale_parent),u_buffer_scale:new a.Uniform1f(x,l.u_buffer_scale),u_fade_t:new a.Uniform1f(x,l.u_fade_t),u_opacity:new a.Uniform1f(x,l.u_opacity),u_image0:new a.Uniform1i(x,l.u_image0),u_image1:new a.Uniform1i(x,l.u_image1),u_brightness_low:new a.Uniform1f(x,l.u_brightness_low),u_brightness_high:new a.Uniform1f(x,l.u_brightness_high),u_saturation_factor:new a.Uniform1f(x,l.u_saturation_factor),u_contrast_factor:new a.Uniform1f(x,l.u_contrast_factor),u_spin_weights:new a.Uniform3f(x,l.u_spin_weights)}),symbolIcon:(x,l)=>({u_is_size_zoom_constant:new a.Uniform1i(x,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(x,l.u_is_size_feature_constant),u_size_t:new a.Uniform1f(x,l.u_size_t),u_size:new a.Uniform1f(x,l.u_size),u_camera_to_center_distance:new a.Uniform1f(x,l.u_camera_to_center_distance),u_pitch:new a.Uniform1f(x,l.u_pitch),u_rotate_symbol:new a.Uniform1i(x,l.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(x,l.u_aspect_ratio),u_fade_change:new a.Uniform1f(x,l.u_fade_change),u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(x,l.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(x,l.u_coord_matrix),u_is_text:new a.Uniform1i(x,l.u_is_text),u_pitch_with_map:new a.Uniform1i(x,l.u_pitch_with_map),u_texsize:new a.Uniform2f(x,l.u_texsize),u_texture:new a.Uniform1i(x,l.u_texture)}),symbolSDF:(x,l)=>({u_is_size_zoom_constant:new a.Uniform1i(x,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(x,l.u_is_size_feature_constant),u_size_t:new a.Uniform1f(x,l.u_size_t),u_size:new a.Uniform1f(x,l.u_size),u_camera_to_center_distance:new a.Uniform1f(x,l.u_camera_to_center_distance),u_pitch:new a.Uniform1f(x,l.u_pitch),u_rotate_symbol:new a.Uniform1i(x,l.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(x,l.u_aspect_ratio),u_fade_change:new a.Uniform1f(x,l.u_fade_change),u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(x,l.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(x,l.u_coord_matrix),u_is_text:new a.Uniform1i(x,l.u_is_text),u_pitch_with_map:new a.Uniform1i(x,l.u_pitch_with_map),u_texsize:new a.Uniform2f(x,l.u_texsize),u_texture:new a.Uniform1i(x,l.u_texture),u_gamma_scale:new a.Uniform1f(x,l.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(x,l.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(x,l.u_is_halo)}),symbolTextAndIcon:(x,l)=>({u_is_size_zoom_constant:new a.Uniform1i(x,l.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(x,l.u_is_size_feature_constant),u_size_t:new a.Uniform1f(x,l.u_size_t),u_size:new a.Uniform1f(x,l.u_size),u_camera_to_center_distance:new a.Uniform1f(x,l.u_camera_to_center_distance),u_pitch:new a.Uniform1f(x,l.u_pitch),u_rotate_symbol:new a.Uniform1i(x,l.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(x,l.u_aspect_ratio),u_fade_change:new a.Uniform1f(x,l.u_fade_change),u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(x,l.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(x,l.u_coord_matrix),u_is_text:new a.Uniform1i(x,l.u_is_text),u_pitch_with_map:new a.Uniform1i(x,l.u_pitch_with_map),u_texsize:new a.Uniform2f(x,l.u_texsize),u_texsize_icon:new a.Uniform2f(x,l.u_texsize_icon),u_texture:new a.Uniform1i(x,l.u_texture),u_texture_icon:new a.Uniform1i(x,l.u_texture_icon),u_gamma_scale:new a.Uniform1f(x,l.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(x,l.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(x,l.u_is_halo)}),background:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_opacity:new a.Uniform1f(x,l.u_opacity),u_color:new a.UniformColor(x,l.u_color)}),backgroundPattern:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_opacity:new a.Uniform1f(x,l.u_opacity),u_image:new a.Uniform1i(x,l.u_image),u_pattern_tl_a:new a.Uniform2f(x,l.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(x,l.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(x,l.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(x,l.u_pattern_br_b),u_texsize:new a.Uniform2f(x,l.u_texsize),u_mix:new a.Uniform1f(x,l.u_mix),u_pattern_size_a:new a.Uniform2f(x,l.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(x,l.u_pattern_size_b),u_scale_a:new a.Uniform1f(x,l.u_scale_a),u_scale_b:new a.Uniform1f(x,l.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(x,l.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(x,l.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(x,l.u_tile_units_to_pixels)}),terrain:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_texture:new a.Uniform1i(x,l.u_texture)}),terrainDepth:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix)}),terrainCoords:(x,l)=>({u_matrix:new a.UniformMatrix4f(x,l.u_matrix),u_texture:new a.Uniform1i(x,l.u_texture),u_terrain_coords_id:new a.Uniform1f(x,l.u_terrain_coords_id)})};class hh{constructor(l,d,g){this.context=l;const w=l.gl;this.buffer=w.createBuffer(),this.dynamicDraw=Boolean(g),this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const fh={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class dh{constructor(l,d,g,w){this.length=d.length,this.attributes=g,this.itemSize=d.bytesPerElement,this.dynamicDraw=w,this.context=l;const E=l.gl;this.buffer=E.createBuffer(),l.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,d){for(let g=0;g<this.attributes.length;g++){const w=d.attributes[this.attributes[g].name];w!==void 0&&l.enableVertexAttribArray(w)}}setVertexAttribPointers(l,d,g){for(let w=0;w<this.attributes.length;w++){const E=this.attributes[w],P=d.attributes[E.name];P!==void 0&&l.vertexAttribPointer(P,E.components,l[fh[E.type]],!1,this.itemSize,E.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class fr{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Kd extends fr{getDefault(){return a.Color.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class qg extends fr{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class ll extends fr{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class ul extends fr{getDefault(){return[!0,!0,!0,!0]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Jd extends fr{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class gi extends fr{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class ph extends fr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const d=this.current;(l.func!==d.func||l.ref!==d.ref||l.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Pu extends fr{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class Du extends fr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=l,this.dirty=!1}}class mh extends fr{getDefault(){return[0,1]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class vh extends fr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=l,this.dirty=!1}}class ku extends fr{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class gh extends fr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.BLEND):d.disable(d.BLEND),this.current=l,this.dirty=!1}}class _h extends fr{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Lu extends fr{getDefault(){return a.Color.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Qd extends fr{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class ep extends fr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=l,this.dirty=!1}}class ws extends fr{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Wg extends fr{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class Zg extends fr{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class Xg extends fr{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Yg extends fr{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Kg extends fr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Jg extends fr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class yh extends fr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Ou extends fr{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class xh extends fr{getDefault(){return null}set(l){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class bh extends fr{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class Ss extends fr{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class tp extends fr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class rp extends fr{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Ru extends fr{constructor(l,d){super(l),this.context=l,this.parent=d}getDefault(){return null}}class Ro extends Ru{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class np extends Ru{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Ts{constructor(l,d,g,w){this.context=l,this.width=d,this.height=g;const E=l.gl,P=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new Ro(l,P),w&&(this.depthAttachment=new np(l,P)),E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,d=this.colorAttachment.get();if(d&&l.deleteTexture(d),this.depthAttachment){const g=this.depthAttachment.get();g&&l.deleteRenderbuffer(g)}l.deleteFramebuffer(this.framebuffer)}}class jr{constructor(l,d,g){this.blendFunction=l,this.blendColor=d,this.mask=g}}jr.Replace=[1,0],jr.disabled=new jr(jr.Replace,a.Color.transparent,[!1,!1,!1,!1]),jr.unblended=new jr(jr.Replace,a.Color.transparent,[!0,!0,!0,!0]),jr.alphaBlended=new jr([1,771],a.Color.transparent,[!0,!0,!0,!0]);class ip{constructor(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Kd(this),this.clearDepth=new qg(this),this.clearStencil=new ll(this),this.colorMask=new ul(this),this.depthMask=new Jd(this),this.stencilMask=new gi(this),this.stencilFunc=new ph(this),this.stencilOp=new Pu(this),this.stencilTest=new Du(this),this.depthRange=new mh(this),this.depthTest=new vh(this),this.depthFunc=new ku(this),this.blend=new gh(this),this.blendFunc=new _h(this),this.blendColor=new Lu(this),this.blendEquation=new Qd(this),this.cullFace=new ep(this),this.cullFaceSide=new ws(this),this.frontFace=new Wg(this),this.program=new Zg(this),this.activeTexture=new Xg(this),this.viewport=new Yg(this),this.bindFramebuffer=new Kg(this),this.bindRenderbuffer=new Jg(this),this.bindTexture=new yh(this),this.bindVertexBuffer=new Ou(this),this.bindElementBuffer=new xh(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new bh(this),this.pixelStoreUnpack=new Ss(this),this.pixelStoreUnpackPremultiplyAlpha=new tp(this),this.pixelStoreUnpackFlipY=new rp(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,d){return new hh(this,l,d)}createVertexBuffer(l,d,g){return new dh(this,l,d,g)}createRenderbuffer(l,d,g){const w=this.gl,E=w.createRenderbuffer();return this.bindRenderbuffer.set(E),w.renderbufferStorage(w.RENDERBUFFER,l,d,g),this.bindRenderbuffer.set(null),E}createFramebuffer(l,d,g){return new Ts(this,l,d,g)}clear({color:l,depth:d}){const g=this.gl;let w=0;l&&(w|=g.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(w|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),g.clear(w)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){_(l.blendFunction,jr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Qt{constructor(l,d,g){this.func=l,this.mask=d,this.range=g}}Qt.ReadOnly=!1,Qt.ReadWrite=!0,Qt.disabled=new Qt(519,Qt.ReadOnly,[0,1]);const dr=7680;class Nr{constructor(l,d,g,w,E,P){this.test=l,this.ref=d,this.mask=g,this.fail=w,this.depthFail=E,this.pass=P}}Nr.disabled=new Nr({func:519,mask:0},0,0,dr,dr,dr);class Kr{constructor(l,d,g){this.enable=l,this.mode=d,this.frontFace=g}}let cl;function Es(x,l,d,g,w,E,P){const R=x.context,B=R.gl,N=x.useProgram("collisionBox"),j=[];let W=0,K=0;for(let ue=0;ue<g.length;ue++){const De=g[ue],Ie=l.getTile(De),Be=Ie.getBucket(d);if(!Be)continue;let Fe=De.posMatrix;w[0]===0&&w[1]===0||(Fe=x.translatePosMatrix(De.posMatrix,Ie,w,E));const He=P?Be.textCollisionBox:Be.iconCollisionBox,ze=Be.collisionCircleArray;if(ze.length>0){const ot=a.create(),Ye=Fe;a.mul(ot,Be.placementInvProjMatrix,x.transform.glCoordMatrix),a.mul(ot,ot,Be.placementViewportMatrix),j.push({circleArray:ze,circleOffset:K,transform:Ye,invTransform:ot,coord:De}),W+=ze.length/4,K=W}He&&N.draw(R,B.LINES,Qt.disabled,Nr.disabled,x.colorModeForRenderPass(),Kr.disabled,Oo(Fe,x.transform,Ie),x.style.terrain&&x.style.terrain.getTerrainData(De),d.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,null,x.transform.zoom,null,null,He.collisionVertexBuffer)}if(!P||!j.length)return;const se=x.useProgram("collisionCircle"),ie=new a.CollisionCircleLayoutArray;ie.resize(4*W),ie._trim();let oe=0;for(const ue of j)for(let De=0;De<ue.circleArray.length/4;De++){const Ie=4*De,Be=ue.circleArray[Ie+0],Fe=ue.circleArray[Ie+1],He=ue.circleArray[Ie+2],ze=ue.circleArray[Ie+3];ie.emplace(oe++,Be,Fe,He,ze,0),ie.emplace(oe++,Be,Fe,He,ze,1),ie.emplace(oe++,Be,Fe,He,ze,2),ie.emplace(oe++,Be,Fe,He,ze,3)}(!cl||cl.length<2*W)&&(cl=function(ue){const De=2*ue,Ie=new a.QuadTriangleArray;Ie.resize(De),Ie._trim();for(let Be=0;Be<De;Be++){const Fe=6*Be;Ie.uint16[Fe+0]=4*Be+0,Ie.uint16[Fe+1]=4*Be+1,Ie.uint16[Fe+2]=4*Be+2,Ie.uint16[Fe+3]=4*Be+2,Ie.uint16[Fe+4]=4*Be+3,Ie.uint16[Fe+5]=4*Be+0}return Ie}(W));const ge=R.createIndexBuffer(cl,!0),Se=R.createVertexBuffer(ie,a.collisionCircleLayout.members,!0);for(const ue of j){const De={u_matrix:ue.transform,u_inv_matrix:ue.invTransform,u_camera_to_center_distance:(Ae=x.transform).cameraToCenterDistance,u_viewport_size:[Ae.width,Ae.height]};se.draw(R,B.TRIANGLES,Qt.disabled,Nr.disabled,x.colorModeForRenderPass(),Kr.disabled,De,x.style.terrain&&x.style.terrain.getTerrainData(ue.coord),d.id,Se,ge,a.SegmentVector.simpleSegment(0,2*ue.circleOffset,ue.circleArray.length,ue.circleArray.length/2),null,x.transform.zoom,null,null,null)}var Ae;Se.destroy(),ge.destroy()}Kr.disabled=new Kr(!1,1029,2305),Kr.backCCW=new Kr(!0,1029,2305);const Qg=a.identity(new Float32Array(16));function e_(x,l,d,g,w,E){const{horizontalAlign:P,verticalAlign:R}=a.getAnchorAlignment(x),B=-(P-.5)*l,N=-(R-.5)*d,j=a.evaluateVariableOffset(x,g);return new a.pointGeometry((B/w+j[0])*E,(N/w+j[1])*E)}function ap(x,l,d,g,w,E,P,R,B,N,j){const W=x.text.placedSymbolArray,K=x.text.dynamicLayoutVertexArray,se=x.icon.dynamicLayoutVertexArray,ie={};K.clear();for(let oe=0;oe<W.length;oe++){const ge=W.get(oe),Se=x.allowVerticalPlacement&&!ge.placedOrientation,Ae=ge.hidden||!ge.crossTileID||Se?null:g[ge.crossTileID];if(Ae){const ue=new a.pointGeometry(ge.anchorX,ge.anchorY),De=tr(ue,d?P:E,j),Ie=zi(w.cameraToCenterDistance,De.signedDistanceFromCamera);let Be=a.evaluateSizeForFeature(x.textSizeData,B,ge)*Ie/a.ONE_EM;d&&(Be*=x.tilePixelRatio/R);const{width:Fe,height:He,anchor:ze,textOffset:ot,textBoxScale:Ye}=Ae,ut=e_(ze,Fe,He,ot,Ye,Be),$t=d?tr(ue.add(ut),E,j).point:De.point.add(l?ut.rotate(-w.angle):ut),Ht=x.allowVerticalPlacement&&ge.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let Et=0;Et<ge.numGlyphs;Et++)a.addDynamicAttributes(K,$t,Ht);N&&ge.associatedIconIndex>=0&&(ie[ge.associatedIconIndex]={shiftedAnchor:$t,angle:Ht})}else Nt(ge.numGlyphs,K)}if(N){se.clear();const oe=x.icon.placedSymbolArray;for(let ge=0;ge<oe.length;ge++){const Se=oe.get(ge);if(Se.hidden)Nt(Se.numGlyphs,se);else{const Ae=ie[ge];if(Ae)for(let ue=0;ue<Se.numGlyphs;ue++)a.addDynamicAttributes(se,Ae.shiftedAnchor,Ae.angle);else Nt(Se.numGlyphs,se)}}x.icon.dynamicLayoutVertexBuffer.updateData(se)}x.text.dynamicLayoutVertexBuffer.updateData(K)}function t_(x,l,d){return d.iconsInText&&l?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function zu(x,l,d,g,w,E,P,R,B,N,j,W){const K=x.context,se=K.gl,ie=x.transform,oe=R==="map",ge=B==="map",Se=R!=="viewport"&&d.layout.get("symbol-placement")!=="point",Ae=oe&&!ge&&!Se,ue=!d.layout.get("symbol-sort-key").isConstant();let De=!1;const Ie=x.depthModeForSublayer(0,Qt.ReadOnly),Be=d.layout.get("text-variable-anchor"),Fe=[];for(const He of g){const ze=l.getTile(He),ot=ze.getBucket(d);if(!ot)continue;const Ye=w?ot.text:ot.icon;if(!Ye||!Ye.segments.get().length)continue;const ut=Ye.programConfigurations.get(d.id),$t=w||ot.sdfIcons,Ht=w?ot.textSizeData:ot.iconSizeData,Et=ge||ie.pitch!==0,xr=x.useProgram(t_($t,w,ot),ut),br=a.evaluateSizeForZoom(Ht,ie.zoom),er=x.style.terrain&&x.style.terrain.getTerrainData(He);let ir,Ir,In,da,Qi=[0,0],pa=null;if(w){if(Ir=ze.glyphAtlasTexture,In=se.LINEAR,ir=ze.glyphAtlasTexture.size,ot.iconsInText){Qi=ze.imageAtlasTexture.size,pa=ze.imageAtlasTexture;const Ni=Ht.kind==="composite"||Ht.kind==="camera";da=Et||x.options.rotating||x.options.zooming||Ni?se.LINEAR:se.NEAREST}}else{const Ni=d.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;Ir=ze.imageAtlasTexture,In=$t||x.options.rotating||x.options.zooming||Ni||Et?se.LINEAR:se.NEAREST,ir=ze.imageAtlasTexture.size}const lo=fn(ze,1,x.transform.zoom),Fi=Po(He.posMatrix,ge,oe,x.transform,lo),ii=Ki(He.posMatrix,ge,oe,x.transform,lo),Ba=Be&&ot.hasTextData(),Gu=d.layout.get("icon-text-fit")!=="none"&&Ba&&ot.hasIconData();if(Se){const Ni=x.style.terrain?(zh,Ds)=>x.style.terrain.getElevation(He,zh,Ds):null,No=d.layout.get("text-rotation-alignment")==="map";vi(ot,He.posMatrix,x,w,Fi,ii,ge,N,No,Ni)}const yn=x.translatePosMatrix(He.posMatrix,ze,E,P),Kt=Se||w&&Be||Gu?Qg:Fi,pr=x.translatePosMatrix(ii,ze,E,P,!0),Mn=$t&&d.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Pn;Pn=$t?ot.iconsInText?Yd(Ht.kind,br,Ae,ge,x,yn,Kt,pr,ir,Qi):Mu(Ht.kind,br,Ae,ge,x,yn,Kt,pr,w,ir,!0):uh(Ht.kind,br,Ae,ge,x,yn,Kt,pr,w,ir);const Qr={program:xr,buffers:Ye,uniformValues:Pn,atlasTexture:Ir,atlasTextureIcon:pa,atlasInterpolation:In,atlasInterpolationIcon:da,isSDF:$t,hasHalo:Mn};if(ue&&ot.canOverlap){De=!0;const Ni=Ye.segments.get();for(const No of Ni)Fe.push({segments:new a.SegmentVector([No]),sortKey:No.sortKey,state:Qr,terrainData:er})}else Fe.push({segments:Ye.segments,sortKey:0,state:Qr,terrainData:er})}De&&Fe.sort((He,ze)=>He.sortKey-ze.sortKey);for(const He of Fe){const ze=He.state;if(K.activeTexture.set(se.TEXTURE0),ze.atlasTexture.bind(ze.atlasInterpolation,se.CLAMP_TO_EDGE),ze.atlasTextureIcon&&(K.activeTexture.set(se.TEXTURE1),ze.atlasTextureIcon&&ze.atlasTextureIcon.bind(ze.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),ze.isSDF){const ot=ze.uniformValues;ze.hasHalo&&(ot.u_is_halo=1,hl(ze.buffers,He.segments,d,x,ze.program,Ie,j,W,ot,He.terrainData)),ot.u_is_halo=0}hl(ze.buffers,He.segments,d,x,ze.program,Ie,j,W,ze.uniformValues,He.terrainData)}}function hl(x,l,d,g,w,E,P,R,B,N){const j=g.context;w.draw(j,j.gl.TRIANGLES,E,P,R,Kr.disabled,B,N,d.id,x.layoutVertexBuffer,x.indexBuffer,l,d.paint,g.transform.zoom,x.programConfigurations.get(d.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function fl(x,l,d,g,w,E,P){const R=x.context.gl,B=d.paint.get("fill-pattern"),N=B&&B.constantOr(1),j=d.getCrossfadeParameters();let W,K,se,ie,oe;P?(K=N&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",W=R.LINES):(K=N?"fillPattern":"fill",W=R.TRIANGLES);for(const ge of g){const Se=l.getTile(ge);if(N&&!Se.patternsLoaded())continue;const Ae=Se.getBucket(d);if(!Ae)continue;const ue=Ae.programConfigurations.get(d.id),De=x.useProgram(K,ue),Ie=x.style.terrain&&x.style.terrain.getTerrainData(ge);N&&(x.context.activeTexture.set(R.TEXTURE0),Se.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),ue.updatePaintBuffers(j));const Be=B.constantOr(null);if(Be&&Se.imageAtlas){const ze=Se.imageAtlas,ot=ze.patternPositions[Be.to.toString()],Ye=ze.patternPositions[Be.from.toString()];ot&&Ye&&ue.setConstantPatternPositions(ot,Ye)}const Fe=Ie?ge:null,He=x.translatePosMatrix(Fe?Fe.posMatrix:ge.posMatrix,Se,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(P){ie=Ae.indexBuffer2,oe=Ae.segments2;const ze=[R.drawingBufferWidth,R.drawingBufferHeight];se=K==="fillOutlinePattern"&&N?qd(He,x,j,Se,ze):Hd(He,ze)}else ie=Ae.indexBuffer,oe=Ae.segments,se=N?sh(He,x,j,Se):Eu(He);De.draw(x.context,W,w,x.stencilModeForClipping(ge),E,Kr.disabled,se,Ie,d.id,Ae.layoutVertexBuffer,ie,oe,d.paint,x.transform.zoom,ue)}}function dl(x,l,d,g,w,E,P){const R=x.context,B=R.gl,N=d.paint.get("fill-extrusion-pattern"),j=N.constantOr(1),W=d.getCrossfadeParameters(),K=d.paint.get("fill-extrusion-opacity");for(const se of g){const ie=l.getTile(se),oe=ie.getBucket(d);if(!oe)continue;const ge=x.style.terrain&&x.style.terrain.getTerrainData(se),Se=oe.programConfigurations.get(d.id),Ae=x.useProgram(j?"fillExtrusionPattern":"fillExtrusion",Se);j&&(x.context.activeTexture.set(B.TEXTURE0),ie.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Se.updatePaintBuffers(W));const ue=N.constantOr(null);if(ue&&ie.imageAtlas){const Fe=ie.imageAtlas,He=Fe.patternPositions[ue.to.toString()],ze=Fe.patternPositions[ue.from.toString()];He&&ze&&Se.setConstantPatternPositions(He,ze)}const De=x.translatePosMatrix(se.posMatrix,ie,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ie=d.paint.get("fill-extrusion-vertical-gradient"),Be=j?jg(De,x,Ie,K,se,W,ie):oh(De,x,Ie,K);Ae.draw(R,R.gl.TRIANGLES,w,E,P,Kr.backCCW,Be,ge,d.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,d.paint,x.transform.zoom,Se,x.style.terrain&&oe.centroidVertexBuffer)}}function wh(x,l,d,g,w,E,P){const R=x.context,B=R.gl,N=d.fbo;if(!N)return;const j=x.useProgram("hillshade"),W=x.style.terrain&&x.style.terrain.getTerrainData(l);R.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,N.colorAttachment.get()),j.draw(R,B.TRIANGLES,w,E,P,Kr.disabled,((K,se,ie,oe)=>{const ge=ie.paint.get("hillshade-shadow-color"),Se=ie.paint.get("hillshade-highlight-color"),Ae=ie.paint.get("hillshade-accent-color");let ue=ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);ie.paint.get("hillshade-illumination-anchor")==="viewport"&&(ue-=K.transform.angle);const De=!K.options.moving;return{u_matrix:oe?oe.posMatrix:K.transform.calculatePosMatrix(se.tileID.toUnwrapped(),De),u_image:0,u_latrange:Au(0,se.tileID),u_light:[ie.paint.get("hillshade-exaggeration"),ue],u_shadow:ge,u_highlight:Se,u_accent:Ae}})(x,d,g,W?l:null),W,g.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}function op(x,l,d,g,w,E){const P=x.context,R=P.gl,B=l.dem;if(B&&B.data){const N=B.dim,j=B.stride,W=B.getPixels();if(P.activeTexture.set(R.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||x.getTileTexture(j),l.demTexture){const se=l.demTexture;se.update(W,{premultiply:!1}),se.bind(R.NEAREST,R.CLAMP_TO_EDGE)}else l.demTexture=new I(P,W,R.RGBA,{premultiply:!1}),l.demTexture.bind(R.NEAREST,R.CLAMP_TO_EDGE);P.activeTexture.set(R.TEXTURE0);let K=l.fbo;if(!K){const se=new I(P,{width:N,height:N,data:null},R.RGBA);se.bind(R.LINEAR,R.CLAMP_TO_EDGE),K=l.fbo=P.createFramebuffer(N,N,!0),K.colorAttachment.set(se.texture)}P.bindFramebuffer.set(K.framebuffer),P.viewport.set([0,0,N,N]),x.useProgram("hillshadePrepare").draw(P,R.TRIANGLES,g,w,E,Kr.disabled,((se,ie)=>{const oe=ie.stride,ge=a.create();return a.ortho(ge,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(ge,ge,[0,-a.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[oe,oe],u_zoom:se.overscaledZ,u_unpack:ie.getUnpackVector()}})(l.tileID,B),null,d.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function Bu(x,l,d,g,w,E){const P=g.paint.get("raster-fade-duration");if(!E&&P>0){const R=a.exported.now(),B=(R-x.timeAdded)/P,N=l?(R-l.timeAdded)/P:-1,j=d.getSource(),W=w.coveringZoomLevel({tileSize:j.tileSize,roundZoom:j.roundZoom}),K=!l||Math.abs(l.tileID.overscaledZ-W)>Math.abs(x.tileID.overscaledZ-W),se=K&&x.refreshedUponExpiration?1:a.clamp(K?B:1-N,0,1);return x.refreshedUponExpiration&&B>=1&&(x.refreshedUponExpiration=!1),l?{opacity:1,mix:1-se}:{opacity:se,mix:0}}return{opacity:1,mix:0}}const Fu=new a.Color(1,0,0,1),Ji=new a.Color(0,1,0,1),sp=new a.Color(0,0,1,1),Sh=new a.Color(1,0,1,1),lp=new a.Color(0,1,1,1);function zo(x,l,d,g){Cs(x,0,l+d/2,x.transform.width,d,g)}function pl(x,l,d,g){Cs(x,l-d/2,0,d,x.transform.height,g)}function Cs(x,l,d,g,w,E){const P=x.context,R=P.gl;R.enable(R.SCISSOR_TEST),R.scissor(l*x.pixelRatio,d*x.pixelRatio,g*x.pixelRatio,w*x.pixelRatio),P.clear({color:E}),R.disable(R.SCISSOR_TEST)}function r_(x,l,d){const g=x.context,w=g.gl,E=d.posMatrix,P=x.useProgram("debug"),R=Qt.disabled,B=Nr.disabled,N=x.colorModeForRenderPass(),j="$debug",W=x.style.terrain&&x.style.terrain.getTerrainData(d);g.activeTexture.set(w.TEXTURE0),x.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE);const K=l.getTileByID(d.key).latestRawTileData,se=Math.floor((K&&K.byteLength||0)/1024),ie=l.getTile(d).tileSize,oe=512/Math.min(ie,512)*(d.overscaledZ/x.transform.zoom)*.5;let ge=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ge+=` => ${d.overscaledZ}`),function(Se,Ae){Se.initDebugOverlayCanvas();const ue=Se.debugOverlayCanvas,De=Se.context.gl,Ie=Se.debugOverlayCanvas.getContext("2d");Ie.clearRect(0,0,ue.width,ue.height),Ie.shadowColor="white",Ie.shadowBlur=2,Ie.lineWidth=1.5,Ie.strokeStyle="white",Ie.textBaseline="top",Ie.font="bold 36px Open Sans, sans-serif",Ie.fillText(Ae,5,5),Ie.strokeText(Ae,5,5),Se.debugOverlayTexture.update(ue),Se.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)}(x,`${ge} ${se}kB`),P.draw(g,w.TRIANGLES,R,B,jr.alphaBlended,Kr.disabled,al(E,a.Color.transparent,oe),null,j,x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments),P.draw(g,w.LINE_STRIP,R,B,N,Kr.disabled,al(E,a.Color.red),W,j,x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments)}function Nu(x,l,d){const g=x.context,w=g.gl,E=x.colorModeForRenderPass(),P=new Qt(w.LEQUAL,Qt.ReadWrite,x.depthRangeFor3D),R=x.useProgram("terrain"),B=l.getTerrainMesh(),N=l.getTerrainData(d.tileID);g.bindFramebuffer.set(null),g.viewport.set([0,0,x.width,x.height]),g.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,l.getRTTFramebuffer().colorAttachment.get());const j=x.transform.calculatePosMatrix(d.tileID.toUnwrapped());R.draw(g,w.TRIANGLES,P,Nr.disabled,E,Kr.backCCW,{u_matrix:j,u_texture:0},N,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}function up(x,l,d,g){const w=x.context,E=d.tileSize*l.qualityFactor;d.textures[g]||(d.textures[g]=x.getTileTexture(E)||new I(w,{width:E,height:E,data:null},w.gl.RGBA),d.textures[g].bind(w.gl.LINEAR,w.gl.CLAMP_TO_EDGE),g===0&&l.sourceCache.renderHistory.unshift(d.tileID.key));const P=l.getRTTFramebuffer();P.colorAttachment.set(d.textures[g].texture),w.bindFramebuffer.set(P.framebuffer),w.viewport.set([0,0,E,E])}class cp{constructor(l){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=l,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=l.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const l=this.painter.style,d=l.terrain;for(const g in l.sourceCaches){this._coordsDescendingInv[g]={};const w=l.sourceCaches[g].getVisibleCoordinates();for(const E of w){const P=d.sourceCache.getTerrainCoords(E);for(const R in P)this._coordsDescendingInv[g][R]||(this._coordsDescendingInv[g][R]=[]),this._coordsDescendingInv[g][R].push(P[R])}}for(const g of l._order){const w=l._layers[g],E=w.source;if(this._renderToTexture[w.type]&&!this._coordsDescendingInvStr[E]){this._coordsDescendingInvStr[E]={};for(const P in this._coordsDescendingInv[E])this._coordsDescendingInvStr[E][P]=this._coordsDescendingInv[E][P].map(R=>R.key).sort().join()}}return this._renderableTiles.forEach(g=>{for(const w in this._coordsDescendingInvStr){const E=this._coordsDescendingInvStr[w][g.tileID.key];E&&E!==g.textureCoords[w]&&g.clearTextures(this.painter),d.needsRerender(w,g.tileID)&&g.clearTextures(this.painter)}this._rerender[g.tileID.key]=!g.textures.length}),d.clearRerenderCache(),d.sourceCache.removeOutdated(this.painter),this}renderLayer(l){const d=l.type,g=this.painter,w=g.style._order,E=g.currentLayer,P=E+1===w.length;if(this._renderToTexture[d]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(w[E]),!P))return!0;if(this._renderToTexture[this._prevType]||d==="hillshade"||this._renderToTexture[d]&&P){this._prevType=d;const R=this._stacks.length-1,B=this._stacks[R]||[];for(const N of this._renderableTiles){if(up(g,g.style.terrain,N,R),this._rerender[N.tileID.key]){g.context.clear({color:a.Color.transparent});for(let j=0;j<B.length;j++){const W=g.style._layers[B[j]],K=W.source?this._coordsDescendingInv[W.source][N.tileID.key]:[N.tileID];g._renderTileClippingMasks(W,K),g.renderLayer(g,g.style.sourceCaches[W.source],W,K),W.source&&(N.textureCoords[W.source]=this._coordsDescendingInvStr[W.source][N.tileID.key])}}Nu(g,g.style.terrain,N)}if(d==="hillshade"){this._stacks.push([w[E]]);for(const N of this._renderableTiles){const j=this._coordsDescendingInv[l.source][N.tileID.key];up(g,g.style.terrain,N,this._stacks.length-1),g.context.clear({color:a.Color.transparent}),g._renderTileClippingMasks(l,j),g.renderLayer(g,g.style.sourceCaches[l.source],l,j),Nu(g,g.style.terrain,N)}return!0}return this._renderToTexture[d]}return!1}}const ml={symbol:function(x,l,d,g,w){if(x.renderPass!=="translucent")return;const E=Nr.disabled,P=x.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(R,B,N,j,W,K,se){const ie=B.transform,oe=W==="map",ge=K==="map";for(const Se of R){const Ae=j.getTile(Se),ue=Ae.getBucket(N);if(!ue||!ue.text||!ue.text.segments.get().length)continue;const De=a.evaluateSizeForZoom(ue.textSizeData,ie.zoom),Ie=fn(Ae,1,B.transform.zoom),Be=Po(Se.posMatrix,ge,oe,B.transform,Ie),Fe=N.layout.get("icon-text-fit")!=="none"&&ue.hasIconData();if(De){const He=Math.pow(2,ie.zoom-Ae.tileID.overscaledZ);ap(ue,oe,ge,se,ie,Be,Se.posMatrix,He,De,Fe,B.style.terrain?(ze,ot)=>B.style.terrain.getElevation(Se,ze,ot):null)}}}(g,x,d,l,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),w),d.paint.get("icon-opacity").constantOr(1)!==0&&zu(x,l,d,g,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),E,P),d.paint.get("text-opacity").constantOr(1)!==0&&zu(x,l,d,g,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),E,P),l.map.showCollisionBoxes&&(Es(x,l,d,g,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Es(x,l,d,g,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(x,l,d,g){if(x.renderPass!=="translucent")return;const w=d.paint.get("circle-opacity"),E=d.paint.get("circle-stroke-width"),P=d.paint.get("circle-stroke-opacity"),R=!d.layout.get("circle-sort-key").isConstant();if(w.constantOr(1)===0&&(E.constantOr(1)===0||P.constantOr(1)===0))return;const B=x.context,N=B.gl,j=x.depthModeForSublayer(0,Qt.ReadOnly),W=Nr.disabled,K=x.colorModeForRenderPass(),se=[];for(let ie=0;ie<g.length;ie++){const oe=g[ie],ge=l.getTile(oe),Se=ge.getBucket(d);if(!Se)continue;const Ae=Se.programConfigurations.get(d.id),ue=x.useProgram("circle",Ae),De=Se.layoutVertexBuffer,Ie=Se.indexBuffer,Be=x.style.terrain&&x.style.terrain.getTerrainData(oe),Fe={programConfiguration:Ae,program:ue,layoutVertexBuffer:De,indexBuffer:Ie,uniformValues:Wd(x,oe,ge,d),terrainData:Be};if(R){const He=Se.segments.get();for(const ze of He)se.push({segments:new a.SegmentVector([ze]),sortKey:ze.sortKey,state:Fe})}else se.push({segments:Se.segments,sortKey:0,state:Fe})}R&&se.sort((ie,oe)=>ie.sortKey-oe.sortKey);for(const ie of se){const{programConfiguration:oe,program:ge,layoutVertexBuffer:Se,indexBuffer:Ae,uniformValues:ue,terrainData:De}=ie.state;ge.draw(B,N.TRIANGLES,j,W,K,Kr.disabled,ue,De,d.id,Se,Ae,ie.segments,d.paint,x.transform.zoom,oe)}},heatmap:function(x,l,d,g){if(d.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const w=x.context,E=w.gl,P=Nr.disabled,R=new jr([E.ONE,E.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(B,N,j){const W=B.gl;B.activeTexture.set(W.TEXTURE1),B.viewport.set([0,0,N.width/4,N.height/4]);let K=j.heatmapFbo;if(K)W.bindTexture(W.TEXTURE_2D,K.colorAttachment.get()),B.bindFramebuffer.set(K.framebuffer);else{const se=W.createTexture();W.bindTexture(W.TEXTURE_2D,se),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.LINEAR),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.LINEAR),K=j.heatmapFbo=B.createFramebuffer(N.width/4,N.height/4,!1),function(ie,oe,ge,Se){const Ae=ie.gl;Ae.texImage2D(Ae.TEXTURE_2D,0,Ae.RGBA,oe.width/4,oe.height/4,0,Ae.RGBA,ie.extRenderToTextureHalfFloat?ie.extTextureHalfFloat.HALF_FLOAT_OES:Ae.UNSIGNED_BYTE,null),Se.colorAttachment.set(ge)}(B,N,se,K)}})(w,x,d),w.clear({color:a.Color.transparent});for(let B=0;B<g.length;B++){const N=g[B];if(l.hasRenderableParent(N))continue;const j=l.getTile(N),W=j.getBucket(d);if(!W)continue;const K=W.programConfigurations.get(d.id),se=x.useProgram("heatmap",K),{zoom:ie}=x.transform;se.draw(w,E.TRIANGLES,Qt.disabled,P,R,Kr.disabled,Cu(N.posMatrix,j,ie,d.paint.get("heatmap-intensity")),null,d.id,W.layoutVertexBuffer,W.indexBuffer,W.segments,d.paint,x.transform.zoom,K)}w.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(w,E){const P=w.context,R=P.gl,B=E.heatmapFbo;if(!B)return;P.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,B.colorAttachment.get()),P.activeTexture.set(R.TEXTURE1);let N=E.colorRampTexture;N||(N=E.colorRampTexture=new I(P,E.colorRamp,R.RGBA)),N.bind(R.LINEAR,R.CLAMP_TO_EDGE),w.useProgram("heatmapTexture").draw(P,R.TRIANGLES,Qt.disabled,Nr.disabled,w.colorModeForRenderPass(),Kr.disabled,((j,W,K,se)=>{const ie=a.create();a.ortho(ie,0,j.width,j.height,0,0,1);const oe=j.context.gl;return{u_matrix:ie,u_world:[oe.drawingBufferWidth,oe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:W.paint.get("heatmap-opacity")}})(w,E),null,E.id,w.viewportBuffer,w.quadTriangleIndexBuffer,w.viewportSegments,E.paint,w.transform.zoom)}(x,d))},line:function(x,l,d,g){if(x.renderPass!=="translucent")return;const w=d.paint.get("line-opacity"),E=d.paint.get("line-width");if(w.constantOr(1)===0||E.constantOr(1)===0)return;const P=x.depthModeForSublayer(0,Qt.ReadOnly),R=x.colorModeForRenderPass(),B=d.paint.get("line-dasharray"),N=d.paint.get("line-pattern"),j=N.constantOr(1),W=d.paint.get("line-gradient"),K=d.getCrossfadeParameters(),se=j?"linePattern":B?"lineSDF":W?"lineGradient":"line",ie=x.context,oe=ie.gl;let ge=!0;for(const Se of g){const Ae=l.getTile(Se);if(j&&!Ae.patternsLoaded())continue;const ue=Ae.getBucket(d);if(!ue)continue;const De=ue.programConfigurations.get(d.id),Ie=x.context.program.get(),Be=x.useProgram(se,De),Fe=ge||Be.program!==Ie,He=x.style.terrain&&x.style.terrain.getTerrainData(Se),ze=N.constantOr(null);if(ze&&Ae.imageAtlas){const ut=Ae.imageAtlas,$t=ut.patternPositions[ze.to.toString()],Ht=ut.patternPositions[ze.from.toString()];$t&&Ht&&De.setConstantPatternPositions($t,Ht)}const ot=He?Se:null,Ye=j?Iu(x,Ae,d,K,ot):B?ol(x,Ae,d,B,K,ot):W?lh(x,Ae,d,ue.lineClipsArray.length,ot):bs(x,Ae,d,ot);if(j)ie.activeTexture.set(oe.TEXTURE0),Ae.imageAtlasTexture.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),De.updatePaintBuffers(K);else if(B&&(Fe||x.lineAtlas.dirty))ie.activeTexture.set(oe.TEXTURE0),x.lineAtlas.bind(ie);else if(W){const ut=ue.gradients[d.id];let $t=ut.texture;if(d.gradientVersion!==ut.version){let Ht=256;if(d.stepInterpolant){const Et=l.getSource().maxzoom,xr=Se.canonical.z===Et?Math.ceil(1<<x.transform.maxZoom-Se.canonical.z):1;Ht=a.clamp(a.nextPowerOfTwo(ue.maxLineLength/a.EXTENT*1024*xr),256,ie.maxTextureSize)}ut.gradient=a.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:Ht,image:ut.gradient||void 0,clips:ue.lineClipsArray}),ut.texture?ut.texture.update(ut.gradient):ut.texture=new I(ie,ut.gradient,oe.RGBA),ut.version=d.gradientVersion,$t=ut.texture}ie.activeTexture.set(oe.TEXTURE0),$t.bind(d.stepInterpolant?oe.NEAREST:oe.LINEAR,oe.CLAMP_TO_EDGE)}Be.draw(ie,oe.TRIANGLES,P,x.stencilModeForClipping(Se),R,Kr.disabled,Ye,He,d.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,d.paint,x.transform.zoom,De,ue.layoutVertexBuffer2),ge=!1}},fill:function(x,l,d,g){const w=d.paint.get("fill-color"),E=d.paint.get("fill-opacity");if(E.constantOr(1)===0)return;const P=x.colorModeForRenderPass(),R=d.paint.get("fill-pattern"),B=x.opaquePassEnabledForLayer()&&!R.constantOr(1)&&w.constantOr(a.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===B){const N=x.depthModeForSublayer(1,x.renderPass==="opaque"?Qt.ReadWrite:Qt.ReadOnly);fl(x,l,d,g,N,P,!1)}if(x.renderPass==="translucent"&&d.paint.get("fill-antialias")){const N=x.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,Qt.ReadOnly);fl(x,l,d,g,N,P,!0)}},"fill-extrusion":function(x,l,d,g){const w=d.paint.get("fill-extrusion-opacity");if(w!==0&&x.renderPass==="translucent"){const E=new Qt(x.context.gl.LEQUAL,Qt.ReadWrite,x.depthRangeFor3D);if(w!==1||d.paint.get("fill-extrusion-pattern").constantOr(1))dl(x,l,d,g,E,Nr.disabled,jr.disabled),dl(x,l,d,g,E,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const P=x.colorModeForRenderPass();dl(x,l,d,g,E,Nr.disabled,P)}}},hillshade:function(x,l,d,g){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const w=x.context,E=x.depthModeForSublayer(0,Qt.ReadOnly),P=x.colorModeForRenderPass(),[R,B]=x.renderPass==="translucent"?x.stencilConfigForOverlap(g):[{},g];for(const N of B){const j=l.getTile(N);j.needsHillshadePrepare!==void 0&&j.needsHillshadePrepare&&x.renderPass==="offscreen"?op(x,j,d,E,Nr.disabled,P):x.renderPass==="translucent"&&wh(x,N,j,d,E,R[N.overscaledZ],P)}w.viewport.set([0,0,x.width,x.height])},raster:function(x,l,d,g){if(x.renderPass!=="translucent"||d.paint.get("raster-opacity")===0||!g.length)return;const w=x.context,E=w.gl,P=l.getSource(),R=x.useProgram("raster"),B=x.colorModeForRenderPass(),[N,j]=P instanceof xt?[{},g]:x.stencilConfigForOverlap(g),W=j[j.length-1].overscaledZ,K=!x.options.moving;for(const se of j){const ie=x.depthModeForSublayer(se.overscaledZ-W,d.paint.get("raster-opacity")===1?Qt.ReadWrite:Qt.ReadOnly,E.LESS),oe=l.getTile(se);oe.registerFadeDuration(d.paint.get("raster-fade-duration"));const ge=l.findLoadedParent(se,0),Se=Bu(oe,ge,l,d,x.transform,x.style.terrain);let Ae,ue;const De=d.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;w.activeTexture.set(E.TEXTURE0),oe.texture.bind(De,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),w.activeTexture.set(E.TEXTURE1),ge?(ge.texture.bind(De,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),Ae=Math.pow(2,ge.tileID.overscaledZ-oe.tileID.overscaledZ),ue=[oe.tileID.canonical.x*Ae%1,oe.tileID.canonical.y*Ae%1]):oe.texture.bind(De,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);const Ie=x.style.terrain&&x.style.terrain.getTerrainData(se),Be=Ie?se:null,Fe=Be?Be.posMatrix:x.transform.calculatePosMatrix(se.toUnwrapped(),K),He=Zd(Fe,ue||[0,0],Ae||1,Se,d);P instanceof xt?R.draw(w,E.TRIANGLES,ie,Nr.disabled,B,Kr.disabled,He,Ie,d.id,P.boundsBuffer,x.quadTriangleIndexBuffer,P.boundsSegments):R.draw(w,E.TRIANGLES,ie,N[se.overscaledZ],B,Kr.disabled,He,Ie,d.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}},background:function(x,l,d,g){const w=d.paint.get("background-color"),E=d.paint.get("background-opacity");if(E===0)return;const P=x.context,R=P.gl,B=x.transform,N=B.tileSize,j=d.paint.get("background-pattern");if(x.isPatternMissing(j))return;const W=!j&&w.a===1&&E===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==W)return;const K=Nr.disabled,se=x.depthModeForSublayer(0,W==="opaque"?Qt.ReadWrite:Qt.ReadOnly),ie=x.colorModeForRenderPass(),oe=x.useProgram(j?"backgroundPattern":"background"),ge=g||B.coveringTiles({tileSize:N,terrain:x.style.terrain});j&&(P.activeTexture.set(R.TEXTURE0),x.imageManager.bind(x.context));const Se=d.getCrossfadeParameters();for(const Ae of ge){const ue=g?Ae.posMatrix:x.transform.calculatePosMatrix(Ae.toUnwrapped()),De=j?Hg(ue,E,x,j,{tileID:Ae,tileSize:N},Se):Gg(ue,E,w),Ie=x.style.terrain&&x.style.terrain.getTerrainData(Ae);oe.draw(P,R.TRIANGLES,se,K,ie,Kr.disabled,De,Ie,d.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}},debug:function(x,l,d){for(let g=0;g<d.length;g++)r_(x,l,d[g])},custom:function(x,l,d){const g=x.context,w=d.implementation;if(x.renderPass==="offscreen"){const E=w.prerender;E&&(x.setCustomLayerDefaults(),g.setColorMode(x.colorModeForRenderPass()),E.call(w,g.gl,x.transform.customLayerMatrix()),g.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),g.setColorMode(x.colorModeForRenderPass()),g.setStencilMode(Nr.disabled);const E=w.renderingMode==="3d"?new Qt(x.context.gl.LEQUAL,Qt.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,Qt.ReadOnly);g.setDepthMode(E),w.render(g.gl,x.transform.customLayerMatrix()),g.setDirty(),x.setBaseState(),g.bindFramebuffer.set(null)}}};class Th{constructor(l,d){this.context=new ip(l),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=Yt.maxUnderzooming+Yt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Lt,this.gpuTimers={}}resize(l,d,g){if(this.width=l*g,this.height=d*g,this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const l=this.context,d=new a.PosArray;d.emplaceBack(0,0),d.emplaceBack(a.EXTENT,0),d.emplaceBack(0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(d,rr.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const g=new a.PosArray;g.emplaceBack(0,0),g.emplaceBack(a.EXTENT,0),g.emplaceBack(0,a.EXTENT),g.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=l.createVertexBuffer(g,rr.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const w=new a.RasterBoundsArray;w.emplaceBack(0,0,0,0),w.emplaceBack(a.EXTENT,0,a.EXTENT,0),w.emplaceBack(0,a.EXTENT,0,a.EXTENT),w.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(w,st.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const E=new a.PosArray;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(E,rr.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const P=new a.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(P);const R=new a.TriangleIndexArray;R.emplaceBack(0,1,2),R.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(R),this.emptyTexture=new I(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);const B=this.context.gl;this.stencilClearMode=new Nr({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const l=this.context,d=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=a.create();a.ortho(g,0,this.width,this.height,0,0,1),a.scale(g,g,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,d.TRIANGLES,Qt.disabled,this.stencilClearMode,jr.disabled,Kr.disabled,xs(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,d){if(this.currentStencilSource===l.source||!l.isTileClipped()||!d||!d.length)return;this.currentStencilSource=l.source;const g=this.context,w=g.gl;this.nextStencilID+d.length>256&&this.clearStencil(),g.setColorMode(jr.disabled),g.setDepthMode(Qt.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of d){const R=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,B=this.style.terrain&&this.style.terrain.getTerrainData(P);E.draw(g,w.TRIANGLES,Qt.disabled,new Nr({func:w.ALWAYS,mask:0},R,255,w.KEEP,w.KEEP,w.REPLACE),jr.disabled,Kr.disabled,xs(P.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,d=this.context.gl;return new Nr({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(l){const d=this.context.gl;return new Nr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(l){const d=this.context.gl,g=l.sort((P,R)=>R.overscaledZ-P.overscaledZ),w=g[g.length-1].overscaledZ,E=g[0].overscaledZ-w+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const P={};for(let R=0;R<E;R++)P[R+w]=new Nr({func:d.GEQUAL,mask:255},R+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=E,[P,g]}return[{[w]:Nr.disabled},g]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new jr([l.CONSTANT_COLOR,l.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?jr.unblended:jr.alphaBlended}depthModeForSublayer(l,d,g){if(!this.opaquePassEnabledForLayer())return Qt.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new Qt(g||this.context.gl.LEQUAL,d,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,d){this.style=l,this.options=d,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const g=this.style._order,w=this.style.sourceCaches,E=this.style.terrain&&new cp(this);for(const N in w){const j=w[N];j.used&&j.prepare(this.context)}const P={},R={},B={};for(const N in w){const j=w[N];P[N]=j.getVisibleCoordinates(),R[N]=P[N].slice().reverse(),B[N]=j.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let N=0;N<g.length;N++)if(this.style._layers[g[N]].is3D()){this.opaquePassCutoff=N;break}if(E){this.opaquePassCutoff=0;const N=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||N.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(j,W){const K=j.context,se=K.gl,ie=jr.unblended,oe=new Qt(se.LEQUAL,Qt.ReadWrite,[0,1]),ge=W.getTerrainMesh(),Se=W.sourceCache.getRenderableTiles(),Ae=j.useProgram("terrainDepth");K.bindFramebuffer.set(W.getFramebuffer("depth").framebuffer),K.viewport.set([0,0,j.width/devicePixelRatio,j.height/devicePixelRatio]),K.clear({color:a.Color.transparent,depth:1});for(const ue of Se){const De=W.getTerrainData(ue.tileID),Ie=j.transform.calculatePosMatrix(ue.tileID.toUnwrapped());Ae.draw(K,se.TRIANGLES,oe,Nr.disabled,ie,Kr.backCCW,{u_matrix:Ie},De,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments)}K.bindFramebuffer.set(null),K.viewport.set([0,0,j.width,j.height])}(this,this.style.terrain),function(j,W){const K=j.context,se=K.gl,ie=jr.unblended,oe=new Qt(se.LEQUAL,Qt.ReadWrite,[0,1]),ge=W.getTerrainMesh(),Se=W.getCoordsTexture(),Ae=W.sourceCache.getRenderableTiles(),ue=j.useProgram("terrainCoords");K.bindFramebuffer.set(W.getFramebuffer("coords").framebuffer),K.viewport.set([0,0,j.width/devicePixelRatio,j.height/devicePixelRatio]),K.clear({color:a.Color.transparent,depth:1}),W.coordsIndex=[];for(const De of Ae){const Ie=W.getTerrainData(De.tileID);K.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,Se.texture);const Be=j.transform.calculatePosMatrix(De.tileID.toUnwrapped());ue.draw(K,se.TRIANGLES,oe,Nr.disabled,ie,Kr.backCCW,{u_matrix:Be,u_terrain_coords_id:(255-W.coordsIndex.length)/255,u_texture:0},Ie,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),W.coordsIndex.push(De.tileID.key)}K.bindFramebuffer.set(null),K.viewport.set([0,0,j.width,j.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const N of g){const j=this.style._layers[N];if(!j.hasOffscreenPass()||j.isHidden(this.transform.zoom))continue;const W=R[j.source];(j.type==="custom"||W.length)&&this.renderLayer(this,w[j.source],j,W)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!E)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const N=this.style._layers[g[this.currentLayer]],j=w[N.source],W=P[N.source];this._renderTileClippingMasks(N,W),this.renderLayer(this,j,N,W)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const N=this.style._layers[g[this.currentLayer]],j=w[N.source];if(E&&E.renderLayer(N))continue;const W=(N.type==="symbol"?B:R)[N.source];this._renderTileClippingMasks(N,P[N.source]),this.renderLayer(this,j,N,W)}if(this.options.showTileBoundaries){let N,j;Object.values(this.style._layers).forEach(W=>{W.source&&!W.isHidden(this.transform.zoom)&&(W.source!==(j&&j.id)&&(j=this.style.sourceCaches[W.source]),(!N||N.getSource().maxzoom<j.getSource().maxzoom)&&(N=j))}),N&&ml.debug(this,N,N.getVisibleCoordinates())}this.options.showPadding&&function(N){const j=N.transform.padding;zo(N,N.transform.height-(j.top||0),3,Fu),zo(N,j.bottom||0,3,Ji),pl(N,j.left||0,3,sp),pl(N,N.transform.width-(j.right||0),3,Sh);const W=N.transform.centerPoint;(function(K,se,ie,oe){Cs(K,se-1,ie-10,2,20,oe),Cs(K,se-10,ie-1,20,2,oe)})(N,W.x,N.transform.height-W.y,lp)}(this),this.context.setDefault()}renderLayer(l,d,g,w){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||(w||[]).length)&&(this.id=g.id,this.gpuTimingStart(g),ml[g.type](l,d,g,w,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let g=this.gpuTimers[l.id];g||(g=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),g.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,g.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}queryGpuTimers(l){const d={};for(const g in l){const w=l[g],E=this.context.extTimerQuery,P=E.getQueryObjectEXT(w.query,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(w.query),d[g]=P}return d}translatePosMatrix(l,d,g,w,E){if(!g[0]&&!g[1])return l;const P=E?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(P){const N=Math.sin(P),j=Math.cos(P);g=[g[0]*j-g[1]*N,g[0]*N+g[1]*j]}const R=[E?g[0]:fn(d,g[0],this.transform.zoom),E?g[1]:fn(d,g[1],this.transform.zoom),0],B=new Float32Array(16);return a.translate(B,l,R),B}saveTileTexture(l){const d=this._tileTextures[l.size[0]];d?d.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const d=this._tileTextures[l];return d&&d.length>0?d.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const d=this.imageManager.getPattern(l.from.toString()),g=this.imageManager.getPattern(l.to.toString());return!d||!g}useProgram(l,d){this.cache=this.cache||{};const g=l+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new jd(this.context,l,il[l],d,ch[l],this._showOverdrawInspector,this.style.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new I(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Vu{constructor(l,d){this.points=l,this.planes=d}static fromInvProjectionMatrix(l,d,g){const w=Math.pow(2,g),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(R=>{const B=1/(R=a.transformMat4([],R,l))[3]/d*w;return a.mul$1(R,R,[B,B,1/R[3],B])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(R=>{const B=a.sub([],E[R[0]],E[R[1]]),N=a.sub([],E[R[2]],E[R[1]]),j=a.normalize([],a.cross([],B,N)),W=-a.dot(j,E[R[1]]);return j.concat(W)});return new Vu(E,P)}}class vl{constructor(l,d){this.min=l,this.max=d,this.center=a.scale$1([],a.add([],this.min,this.max),.5)}quadrant(l){const d=[l%2==0,l<2],g=a.clone$2(this.min),w=a.clone$2(this.max);for(let E=0;E<d.length;E++)g[E]=d[E]?this.min[E]:this.center[E],w[E]=d[E]?this.center[E]:this.max[E];return w[2]=this.max[2],new vl(g,w)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let w=0;w<l.planes.length;w++){const E=l.planes[w];let P=0;for(let R=0;R<d.length;R++)a.dot$1(E,d[R])>=0&&P++;if(P===0)return 0;P!==d.length&&(g=!1)}if(g)return 2;for(let w=0;w<3;w++){let E=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let R=0;R<l.points.length;R++){const B=l.points[R][w]-this.min[w];E=Math.min(E,B),P=Math.max(P,B)}if(P<0||E>this.max[w]-this.min[w])return 0}return 1}}class As{constructor(l=0,d=0,g=0,w=0){if(isNaN(l)||l<0||isNaN(d)||d<0||isNaN(g)||g<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=g,this.right=w}interpolate(l,d,g){return d.top!=null&&l.top!=null&&(this.top=a.number(l.top,d.top,g)),d.bottom!=null&&l.bottom!=null&&(this.bottom=a.number(l.bottom,d.bottom,g)),d.left!=null&&l.left!=null&&(this.left=a.number(l.left,d.left,g)),d.right!=null&&l.right!=null&&(this.right=a.number(l.right,d.right,g)),this}getCenter(l,d){const g=a.clamp((this.left+l-this.right)/2,0,l),w=a.clamp((this.top+d-this.bottom)/2,0,d);return new a.pointGeometry(g,w)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new As(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class gl{constructor(l,d,g,w,E){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=E===void 0||!!E,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=g??0,this._maxPitch=w??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new As,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const l=new gl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l._elevation=this._elevation,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const d=-a.wrap(l,-180,180)*Math.PI/180;var g;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(g=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(w,E,P){var R=E[0],B=E[1],N=E[2],j=E[3],W=Math.sin(P),K=Math.cos(P);w[0]=R*K+N*W,w[1]=B*K+j*W,w[2]=R*-W+N*K,w[3]=B*-W+j*K}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const d=a.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,d,g){this._unmodified=!1,this._edgeInsets.interpolate(l,d,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(l){const d=[new a.UnwrappedTileID(0,l)];if(this._renderWorldCopies){const g=this.pointCoordinate(new a.pointGeometry(0,0)),w=this.pointCoordinate(new a.pointGeometry(this.width,0)),E=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),P=this.pointCoordinate(new a.pointGeometry(0,this.height)),R=Math.floor(Math.min(g.x,w.x,E.x,P.x)),B=Math.floor(Math.max(g.x,w.x,E.x,P.x)),N=1;for(let j=R-N;j<=B+N;j++)j!==0&&d.push(new a.UnwrappedTileID(j,l))}return d}coveringTiles(l){var d,g;let w=this.coveringZoomLevel(l);const E=w;if(l.minzoom!==void 0&&w<l.minzoom)return[];l.maxzoom!==void 0&&w>l.maxzoom&&(w=l.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),R=a.MercatorCoordinate.fromLngLat(this.center),B=Math.pow(2,w),N=[B*P.x,B*P.y,0],j=[B*R.x,B*R.y,0],W=Vu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,w);let K=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(K=w);const se=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,ie=ue=>({aabb:new vl([ue*B,0,0],[(ue+1)*B,B,0]),zoom:0,x:0,y:0,wrap:ue,fullyVisible:!1}),oe=[],ge=[],Se=w,Ae=l.reparseOverscaled?E:w;if(this._renderWorldCopies)for(let ue=1;ue<=3;ue++)oe.push(ie(-ue)),oe.push(ie(ue));for(oe.push(ie(0));oe.length>0;){const ue=oe.pop(),De=ue.x,Ie=ue.y;let Be=ue.fullyVisible;if(!Be){const ut=ue.aabb.intersects(W);if(ut===0)continue;Be=ut===2}const Fe=l.terrain?N:j,He=ue.aabb.distanceX(Fe),ze=ue.aabb.distanceY(Fe),ot=Math.max(Math.abs(He),Math.abs(ze)),Ye=se+(1<<Se-ue.zoom)-2;if(ue.zoom===Se||ot>Ye&&ue.zoom>=K){const ut=Se-ue.zoom,$t=N[0]-.5-(De<<ut),Ht=N[1]-.5-(Ie<<ut);ge.push({tileID:new a.OverscaledTileID(ue.zoom===Se?Ae:ue.zoom,ue.wrap,ue.zoom,De,Ie),distanceSq:a.sqrLen([j[0]-.5-De,j[1]-.5-Ie]),tileDistanceToCamera:Math.sqrt($t*$t+Ht*Ht)})}else for(let ut=0;ut<4;ut++){const $t=(De<<1)+ut%2,Ht=(Ie<<1)+(ut>>1),Et=ue.zoom+1;let xr=ue.aabb.quadrant(ut);if(l.terrain){const br=new a.OverscaledTileID(Et,ue.wrap,Et,$t,Ht),er=l.terrain.getMinMaxElevation(br),ir=(d=er.minElevation)!==null&&d!==void 0?d:this.elevation,Ir=(g=er.maxElevation)!==null&&g!==void 0?g:this.elevation;xr=new vl([xr.min[0],xr.min[1],ir],[xr.max[0],xr.max[1],Ir])}oe.push({aabb:xr,zoom:Et,x:$t,y:Ht,wrap:ue.wrap,fullyVisible:Be})}}return ge.sort((ue,De)=>ue.distanceSq-De.distanceSq).map(ue=>ue.tileID)}resize(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const d=a.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.pointGeometry(a.mercatorXfromLng(l.lng)*this.worldSize,a.mercatorYfromLat(d)*this.worldSize)}unproject(l){return new a.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(l){this.freezeElevation||(this.elevation=l?this.getElevation(this._center,l):0)}getElevation(l,d){const g=a.MercatorCoordinate.fromLngLat(l),w=(1<<this.tileZoom)*a.EXTENT,E=g.x*w,P=g.y*w,R=Math.floor(E/a.EXTENT),B=Math.floor(P/a.EXTENT),N=new a.OverscaledTileID(this.tileZoom,0,this.tileZoom,R,B);return d.getElevation(N,E%a.EXTENT,P%a.EXTENT,a.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const d=this.pointLocation(this.centerPoint,l),g=this.getElevation(d,l);if(!(this.elevation-g))return;const w=this.getCameraPosition(),E=a.MercatorCoordinate.fromLngLat(w.lngLat,w.altitude),P=a.MercatorCoordinate.fromLngLat(d,g),R=E.x-P.x,B=E.y-P.y,N=E.z-P.z,j=Math.sqrt(R*R+B*B+N*N),W=this.scaleZoom(this.cameraToCenterDistance/j/this.tileSize);this._elevation=g,this._center=d,this.zoom=W}setLocationAtPoint(l,d){const g=this.pointCoordinate(d),w=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(l),P=new a.MercatorCoordinate(E.x-(g.x-w.x),E.y-(g.y-w.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,d){return d?this.coordinatePoint(this.locationCoordinate(l),this.getElevation(l,d),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,d){return this.coordinateLocation(this.pointCoordinate(l,d))}locationCoordinate(l){return a.MercatorCoordinate.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,d){if(d){const K=d.pointCoordinate(l);if(K!=null)return K}const g=[l.x,l.y,0,1],w=[l.x,l.y,1,1];a.transformMat4(g,g,this.pixelMatrixInverse),a.transformMat4(w,w,this.pixelMatrixInverse);const E=g[3],P=w[3],R=g[1]/E,B=w[1]/P,N=g[2]/E,j=w[2]/P,W=N===j?0:(0-N)/(j-N);return new a.MercatorCoordinate(a.number(g[0]/E,w[0]/P,W)/this.worldSize,a.number(R,B,W)/this.worldSize)}coordinatePoint(l,d=0,g=this.pixelMatrix){const w=[l.x*this.worldSize,l.y*this.worldSize,d,1];return a.transformMat4(w,w,g),new a.pointGeometry(w[0]/w[3],w[1]/w[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new a.LngLatBounds().extend(this.pointLocation(new a.pointGeometry(0,l))).extend(this.pointLocation(new a.pointGeometry(this.width,l))).extend(this.pointLocation(new a.pointGeometry(this.width,this.height))).extend(this.pointLocation(new a.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(l,d=!1){const g=l.key,w=d?this._alignedPosMatrixCache:this._posMatrixCache;if(w[g])return w[g];const E=l.canonical,P=this.worldSize/this.zoomScale(E.z),R=E.x+Math.pow(2,E.z)*l.wrap,B=a.identity(new Float64Array(16));return a.translate(B,B,[R*P,E.y*P,0]),a.scale(B,B,[P/a.EXTENT,P/a.EXTENT,1]),a.multiply(B,d?this.alignedProjMatrix:this.projMatrix,B),w[g]=new Float32Array(B),w[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let l,d,g,w,E=-90,P=90,R=-180,B=180;const N=this.size,j=this._unmodified;if(this.latRange){const se=this.latRange;E=a.mercatorYfromLat(se[1])*this.worldSize,P=a.mercatorYfromLat(se[0])*this.worldSize,l=P-E<N.y?N.y/(P-E):0}if(this.lngRange){const se=this.lngRange;R=a.wrap(a.mercatorXfromLng(se[0])*this.worldSize,0,this.worldSize),B=a.wrap(a.mercatorXfromLng(se[1])*this.worldSize,0,this.worldSize),B<R&&(B+=this.worldSize),d=B-R<N.x?N.x/(B-R):0}const W=this.point,K=Math.max(d||0,l||0);if(K)return this.center=this.unproject(new a.pointGeometry(d?(B+R)/2:W.x,l?(P+E)/2:W.y)),this.zoom+=this.scaleZoom(K),this._unmodified=j,void(this._constraining=!1);if(this.latRange){const se=W.y,ie=N.y/2;se-ie<E&&(w=E+ie),se+ie>P&&(w=P-ie)}if(this.lngRange){const se=(R+B)/2,ie=a.wrap(W.x,se-this.worldSize/2,se+this.worldSize/2),oe=N.x/2;ie-oe<R&&(g=R+oe),ie+oe>B&&(g=B-oe)}g===void 0&&w===void 0||(this.center=this.unproject(new a.pointGeometry(g!==void 0?g:W.x,w!==void 0?w:W.y)).wrap()),this._unmodified=j,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,d=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let w=a.identity(new Float64Array(16));a.scale(w,w,[this.width/2,-this.height/2,1]),a.translate(w,w,[1,-1,0]),this.labelPlaneMatrix=w,w=a.identity(new Float64Array(16)),a.scale(w,w,[1,-1,1]),a.translate(w,w,[-1,-1,0]),a.scale(w,w,[2/this.width,2/this.height,1]),this.glCoordMatrix=w,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const E=Math.PI/2+this._pitch,P=this._fov*(.5+l.y/this.height),R=Math.sin(P)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-E-P,.01,Math.PI-.01)),B=this.getHorizon(),N=2*Math.atan(B/this.cameraToCenterDistance)*(.5+l.y/(2*B)),j=Math.sin(N)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-E-N,.01,Math.PI-.01)),W=Math.cos(Math.PI/2-this._pitch)*R+this.cameraToSeaLevelDistance,K=Math.cos(Math.PI/2-this._pitch)*j+this.cameraToSeaLevelDistance,se=1.01*Math.min(W,K),ie=this.height/50;w=new Float64Array(16),a.perspective(w,this._fov,this.width/this.height,ie,se),w[8]=2*-l.x/this.width,w[9]=2*l.y/this.height,a.scale(w,w,[1,-1,1]),a.translate(w,w,[0,0,-this.cameraToCenterDistance]),a.rotateX(w,w,this._pitch),a.rotateZ(w,w,this.angle),a.translate(w,w,[-d,-g,0]),this.mercatorMatrix=a.scale([],w,[this.worldSize,this.worldSize,this.worldSize]),a.scale(w,w,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,w),a.translate(w,w,[0,0,-this.elevation]),this.projMatrix=w,this.invProjMatrix=a.invert([],w),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,w);const oe=this.width%2/2,ge=this.height%2/2,Se=Math.cos(this.angle),Ae=Math.sin(this.angle),ue=d-Math.round(d)+Se*oe+Ae*ge,De=g-Math.round(g)+Se*ge+Ae*oe,Ie=new Float64Array(w);if(a.translate(Ie,Ie,[ue>.5?ue-1:ue,De>.5?De-1:De,0]),this.alignedProjMatrix=Ie,w=a.invert(new Float64Array(16),this.pixelMatrix),!w)throw new Error("failed to invert matrix");this.pixelMatrixInverse=w,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new a.pointGeometry(0,0)),d=[l.x*this.worldSize,l.y*this.worldSize,0,1];return a.transformMat4(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,l))}getCameraQueryGeometry(l){const d=this.getCameraPoint();if(l.length===1)return[l[0],d];{let g=d.x,w=d.y,E=d.x,P=d.y;for(const R of l)g=Math.min(g,R.x),w=Math.min(w,R.y),E=Math.max(E,R.x),P=Math.max(P,R.y);return[new a.pointGeometry(g,w),new a.pointGeometry(E,w),new a.pointGeometry(E,P),new a.pointGeometry(g,P),new a.pointGeometry(g,w)]}}}class hp{constructor(l){this._hashName=l&&encodeURIComponent(l),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(d,g){let w=!1,E=null;const P=()=>{E=null,w&&(d(),E=setTimeout(P,300),w=!1)};return()=>(w=!0,E||P(),E)}(this._updateHashUnthrottled.bind(this))}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(l){const d=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,w=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,w),P=Math.round(d.lng*E)/E,R=Math.round(d.lat*E)/E,B=this._map.getBearing(),N=this._map.getPitch();let j="";if(j+=l?`/${P}/${R}/${g}`:`${g}/${R}/${P}`,(B||N)&&(j+="/"+Math.round(10*B)/10),N&&(j+=`/${Math.round(N)}`),this._hashName){const W=this._hashName;let K=!1;const se=window.location.hash.slice(1).split("&").map(ie=>{const oe=ie.split("=")[0];return oe===W?(K=!0,`${oe}=${j}`):ie}).filter(ie=>ie);return K||se.push(`${W}=${j}`),`#${se.join("&")}`}return`#${j}`}_getCurrentHash(){const l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._getCurrentHash();if(l.length>=3&&!l.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}}}const _l={linearity:.3,easing:a.bezier(0,0,.3,1)},fp=a.extend({deceleration:2500,maxSpeed:1400},_l),dp=a.extend({deceleration:20,maxSpeed:1400},_l),pp=a.extend({deceleration:1e3,maxSpeed:360},_l),Is=a.extend({deceleration:1e3,maxSpeed:90},_l);class mp{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,d=a.exported.now();for(;l.length>0&&d-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)d.zoom+=E.zoomDelta||0,d.bearing+=E.bearingDelta||0,d.pitch+=E.pitchDelta||0,E.panDelta&&d.pan._add(E.panDelta),E.around&&(d.around=E.around),E.pinchAround&&(d.pinchAround=E.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(d.pan.mag()){const E=xl(d.pan.mag(),g,a.extend({},fp,l||{}));w.offset=d.pan.mult(E.amount/d.pan.mag()),w.center=this._map.transform.center,yl(w,E)}if(d.zoom){const E=xl(d.zoom,g,dp);w.zoom=this._map.transform.zoom+E.amount,yl(w,E)}if(d.bearing){const E=xl(d.bearing,g,pp);w.bearing=this._map.transform.bearing+a.clamp(E.amount,-179,179),yl(w,E)}if(d.pitch){const E=xl(d.pitch,g,Is);w.pitch=this._map.transform.pitch+E.amount,yl(w,E)}if(w.zoom||w.bearing){const E=d.pinchAround===void 0?d.around:d.pinchAround;w.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),a.extend(w,{noMoveStart:!0})}}function yl(x,l){(!x.duration||x.duration<l.duration)&&(x.duration=l.duration,x.easing=l.easing)}function xl(x,l,d){const{maxSpeed:g,linearity:w,deceleration:E}=d,P=a.clamp(x*w/(l/1e3),-g,g),R=Math.abs(P)/(E*w);return{easing:d.easing,duration:1e3*R,amount:P*(R/2)}}class _i extends a.Event{constructor(l,d,g,w={}){const E=y.mousePos(d.getCanvasContainer(),g),P=d.unproject(E);super(l,a.extend({point:E,lngLat:P,originalEvent:g},w)),this._defaultPrevented=!1,this.target=d}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class bl extends a.Event{constructor(l,d,g){const w=l==="touchend"?g.changedTouches:g.touches,E=y.touchPos(d.getCanvasContainer(),w),P=E.map(B=>d.unproject(B)),R=E.reduce((B,N,j,W)=>B.add(N.div(W.length)),new a.pointGeometry(0,0));super(l,{points:E,point:R,lngLats:P,lngLat:d.unproject(R),originalEvent:g}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class yi extends a.Event{constructor(l,d,g){super(l,{originalEvent:g}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class n_{constructor(l,d){this._map=l,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new yi(l.type,this._map,l))}mousedown(l,d){return this._mousedownPos=d,this._firePreventable(new _i(l.type,this._map,l))}mouseup(l){this._map.fire(new _i(l.type,this._map,l))}click(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new _i(l.type,this._map,l))}dblclick(l){return this._firePreventable(new _i(l.type,this._map,l))}mouseover(l){this._map.fire(new _i(l.type,this._map,l))}mouseout(l){this._map.fire(new _i(l.type,this._map,l))}touchstart(l){return this._firePreventable(new bl(l.type,this._map,l))}touchmove(l){this._map.fire(new bl(l.type,this._map,l))}touchend(l){this._map.fire(new bl(l.type,this._map,l))}touchcancel(l){this._map.fire(new bl(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ro{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new _i(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new _i(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class vp{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,d){this.isEnabled()&&l.shiftKey&&l.button===0&&(y.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(l,d){if(!this._active)return;const g=d;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=g,this._box||(this._box=y.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const E=Math.min(w.x,g.x),P=Math.max(w.x,g.x),R=Math.min(w.y,g.y),B=Math.max(w.y,g.y);y.setTransform(this._box,`translate(${E}px,${R}px)`),this._box.style.width=P-E+"px",this._box.style.height=B-R+"px"}mouseupWindow(l,d){if(!this._active||l.button!==0)return;const g=this._startPos,w=d;if(this.reset(),y.suppressClick(),g.x!==w.x||g.y!==w.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:E=>E.fitScreenCoordinates(g,w,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,d){return this._map.fire(new a.Event(l,{originalEvent:d}))}}function Ra(x,l){if(x.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points ${l.length}`);const d={};for(let g=0;g<x.length;g++)d[x[g].identifier]=l[g];return d}class wl{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,d,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),g.length===this.numTouches&&(this.centroid=function(w){const E=new a.pointGeometry(0,0);for(const P of w)E._add(P);return E.div(w.length)}(d),this.touches=Ra(g,d)))}touchmove(l,d,g){if(this.aborted||!this.centroid)return;const w=Ra(g,d);for(const E in this.touches){const P=this.touches[E],R=w[E];(!R||R.dist(P)>30)&&(this.aborted=!0)}}touchend(l,d,g){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class Eh{constructor(l){this.singleTap=new wl(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,d,g){this.singleTap.touchstart(l,d,g)}touchmove(l,d,g){this.singleTap.touchmove(l,d,g)}touchend(l,d,g){const w=this.singleTap.touchend(l,d,g);if(w){const E=l.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(w)<30;if(E&&P||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class i_{constructor(){this._zoomIn=new Eh({numTouches:1,numTaps:2}),this._zoomOut=new Eh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,d,g){this._zoomIn.touchstart(l,d,g),this._zoomOut.touchstart(l,d,g)}touchmove(l,d,g){this._zoomIn.touchmove(l,d,g),this._zoomOut.touchmove(l,d,g)}touchend(l,d,g){const w=this._zoomIn.touchend(l,d,g),E=this._zoomOut.touchend(l,d,g);return w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(w)},{originalEvent:l})}):E?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(E)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const a_={0:1,2:2};class Uu{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(l,d){return!1}_move(l,d){return{}}mousedown(l,d){if(this._lastPoint)return;const g=y.mouseButton(l);this._correctButton(l,g)&&(this._lastPoint=d,this._eventButton=g)}mousemoveWindow(l,d){const g=this._lastPoint;if(g){if(l.preventDefault(),function(w,E){const P=a_[E];return w.buttons===void 0||(w.buttons&P)!==P}(l,this._eventButton))this.reset();else if(this._moved||!(d.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(g,d)}}mouseupWindow(l){this._lastPoint&&y.mouseButton(l)===this._eventButton&&(this._moved&&y.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sl extends Uu{mousedown(l,d){super.mousedown(l,d),this._lastPoint&&(this._active=!0)}_correctButton(l,d){return d===0&&!l.ctrlKey}_move(l,d){return{around:d,panDelta:d.sub(l)}}}class za extends Uu{_correctButton(l,d){return d===0&&l.ctrlKey||d===2}_move(l,d){const g=.8*(d.x-l.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(l){l.preventDefault()}}class ht extends Uu{_correctButton(l,d){return d===0&&l.ctrlKey||d===2}_move(l,d){const g=-.5*(d.y-l.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(l){l.preventDefault()}}class gp{constructor(l,d){this._minTouches=l.cooperativeGestures?2:1,this._clickTolerance=l.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(l,d,g){return this._calculateTransform(l,d,g)}touchmove(l,d,g){if(this._map._cooperativeGestures&&(this._minTouches===2&&g.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(l,!1,g.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(g.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,d,g)}touchend(l,d,g){this._calculateTransform(l,d,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,d,g){g.length>0&&(this._active=!0);const w=Ra(g,d),E=new a.pointGeometry(0,0),P=new a.pointGeometry(0,0);let R=0;for(const N in w){const j=w[N],W=this._touches[N];W&&(E._add(j),P._add(j.sub(W)),R++,w[N]=j)}if(this._touches=w,R<this._minTouches||!P.mag())return;const B=P.div(R);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(R),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bo{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(l){}_move(l,d,g){return{}}touchstart(l,d,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([d[0],d[1]]))}touchmove(l,d,g){if(!this._firstTwoTouches)return;l.preventDefault();const[w,E]=this._firstTwoTouches,P=no(g,d,w),R=no(g,d,E);if(!P||!R)return;const B=this._aroundCenter?null:P.add(R).div(2);return this._move([P,R],B,l)}touchend(l,d,g){if(!this._firstTwoTouches)return;const[w,E]=this._firstTwoTouches,P=no(g,d,w),R=no(g,d,E);P&&R||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function no(x,l,d){for(let g=0;g<x.length;g++)if(x[g].identifier===d)return l[g]}function Ch(x,l){return Math.log(x/l)/Math.LN2}class et extends Bo{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,d){const g=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Ch(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ch(this._distance,g),pinchAround:d}}}function $u(x,l){return 180*x.angleWith(l)/Math.PI}class o_ extends Bo{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,d){const g=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$u(this._vector,g),pinchAround:d}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const d=25/(Math.PI*this._minDiameter)*360,g=$u(l,this._startVector);return Math.abs(g)<d}}function Ah(x){return Math.abs(x.y)>Math.abs(x.x)}class Ih extends Bo{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,d,g){super.touchstart(l,d,g),this._currentTouchCount=g.length}_start(l){this._lastPoints=l,Ah(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,d,g){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const w=l[0].sub(this._lastPoints[0]),E=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,E,g.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(l,d,g){if(this._valid!==void 0)return this._valid;const w=l.mag()>=2,E=d.mag()>=2;if(!w&&!E)return;if(!w||!E)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const P=l.y>0==d.y>0;return Ah(l)&&Ah(d)&&P}}const _p={panStep:100,bearingStep:15,pitchStep:10};class yp{constructor(){const l=_p;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let d=0,g=0,w=0,E=0,P=0;switch(l.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:l.shiftKey?g=-1:(l.preventDefault(),E=-1);break;case 39:l.shiftKey?g=1:(l.preventDefault(),E=1);break;case 38:l.shiftKey?w=1:(l.preventDefault(),P=-1);break;case 40:l.shiftKey?w=-1:(l.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(g=0,w=0),{cameraAnimation:R=>{const B=R.getZoom();R.easeTo({duration:300,easeId:"keyboardHandler",easing:s_,zoom:d?Math.round(B)+d*(l.shiftKey?2:1):B,bearing:R.getBearing()+g*this._bearingStep,pitch:R.getPitch()+w*this._pitchStep,offset:[-E*this._panStep,-P*this._panStep],center:R.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function s_(x){return x*(2-x)}const xp=4.000244140625;class Mh{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;l.preventDefault()}let d=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const g=a.exported.now(),w=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,d!==0&&d%xp==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(w*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=y.mousePos(this._el,l);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(d)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;if(this._delta!==0){const R=this._type==="wheel"&&Math.abs(this._delta)>xp?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&B!==0&&(B=1/B);const N=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(N*B))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,g=this._startZoom,w=this._easing;let E,P=!1;if(this._type==="wheel"&&g&&w){const R=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),B=w(R);E=a.number(g,d,B),R<1?this._frameId||(this._frameId=!0):P=!0}else E=d,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:E-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let d=a.ease;if(this._prevEase){const g=this._prevEase,w=(a.exported.now()-g.start)/g.duration,E=g.easing(w+.01)-g.easing(w),P=.27/Math.sqrt(E*E+1e-4)*.01,R=Math.sqrt(.0729-P*P);d=a.bezier(P,R,.25,1)}return this._prevEase={start:a.exported.now(),duration:l,easing:d},d}reset(){this._active=!1}}class Ph{constructor(l,d){this._clickZoom=l,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Dh{constructor(){this.reset()}reset(){this._active=!1}dblclick(l,d){return l.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(l.shiftKey?-1:1),around:g.unproject(d)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kh{constructor(){this._tap=new Eh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(l,d,g){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=d[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(l,d,g))}touchmove(l,d,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const w=d[0],E=w.y-this._swipePoint.y;return this._swipePoint=w,l.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(l,d,g)}touchend(l,d,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(l,d,g)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ni{constructor(l,d,g){this._el=l,this._mousePan=d,this._touchPan=g}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class io{constructor(l,d,g){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class bp{constructor(l,d,g,w){this._el=l,this._touchZoom=d,this._touchRotate=g,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ms=x=>x.zoom||x.drag||x.pitch||x.rotate;class Lh extends a.Event{}function Tl(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta}class wp{constructor(l,d){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new mp(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d),a.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,E,P]of this._listeners)y.addEventListener(w,E,w===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[l,d,g]of this._listeners)y.removeEventListener(l,d,l===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(l){const d=this._map,g=d.getCanvasContainer();this._add("mapEvent",new n_(d,l));const w=d.boxZoom=new vp(d,l);this._add("boxZoom",w);const E=new i_,P=new Dh;d.doubleClickZoom=new Ph(P,E),this._add("tapZoom",E),this._add("clickZoom",P);const R=new kh;this._add("tapDragZoom",R);const B=d.touchPitch=new Ih(d);this._add("touchPitch",B);const N=new za(l),j=new ht(l);d.dragRotate=new io(l,N,j),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",j,["mouseRotate"]);const W=new Sl(l),K=new gp(l,d);d.dragPan=new ni(g,W,K),this._add("mousePan",W),this._add("touchPan",K,["touchZoom","touchRotate"]);const se=new o_,ie=new et;d.touchZoomRotate=new bp(g,ie,se,R),this._add("touchRotate",se,["touchPan","touchZoom"]),this._add("touchZoom",ie,["touchPan","touchRotate"]);const oe=d.scrollZoom=new Mh(d,this);this._add("scrollZoom",oe,["mousePan"]);const ge=d.keyboard=new yp;this._add("keyboard",ge),this._add("blockableMapEvent",new ro(d));for(const Se of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Se]&&d[Se].enable(l[Se])}_add(l,d,g){this._handlers.push({handlerName:l,handler:d,allowed:g}),this._handlersById[l]=d}stop(l){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ms(this._eventsInProgress))||this.isZooming()}_blockedByActive(l,d,g){for(const w in l)if(w!==g&&(!d||d.indexOf(w)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const d=[];for(const g of l)this._el.contains(g.target)&&d.push(g);return d}handleEvent(l,d){if(l.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const g=l.type==="renderFrame"?void 0:l,w={needsRenderFrame:!1},E={},P={},R=l.touches,B=R?this._getMapTouches(R):void 0,N=B?y.touchPos(this._el,B):y.mousePos(this._el,l);for(const{handlerName:K,handler:se,allowed:ie}of this._handlers){if(!se.isEnabled())continue;let oe;this._blockedByActive(P,ie,K)?se.reset():se[d||l.type]&&(oe=se[d||l.type](l,N,B),this.mergeHandlerResult(w,E,oe,K,g),oe&&oe.needsRenderFrame&&this._triggerRenderFrame()),(oe||se.isActive())&&(P[K]=se)}const j={};for(const K in this._previousActiveHandlers)P[K]||(j[K]=g);this._previousActiveHandlers=P,(Object.keys(j).length||Tl(w))&&(this._changes.push([w,E,j]),this._triggerRenderFrame()),(Object.keys(P).length||Tl(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=w;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))}mergeHandlerResult(l,d,g,w,E){if(!g)return;a.extend(l,g);const P={handlerName:w,originalEvent:g.originalEvent||E};g.zoomDelta!==void 0&&(d.zoom=P),g.panDelta!==void 0&&(d.drag=P),g.pitchDelta!==void 0&&(d.pitch=P),g.bearingDelta!==void 0&&(d.rotate=P)}_applyChanges(){const l={},d={},g={};for(const[w,E,P]of this._changes)w.panDelta&&(l.panDelta=(l.panDelta||new a.pointGeometry(0,0))._add(w.panDelta)),w.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(l.around=w.around),w.pinchAround!==void 0&&(l.pinchAround=w.pinchAround),w.noInertia&&(l.noInertia=w.noInertia),a.extend(d,E),a.extend(g,P);this._updateMapTransform(l,d,g),this._changes=[]}_updateMapTransform(l,d,g){const w=this._map,E=w.transform,P=w.style&&w.style.terrain;if(!(Tl(l)||P&&this._drag))return this._fireEvents(d,g,!0);let{panDelta:R,zoomDelta:B,bearingDelta:N,pitchDelta:j,around:W,pinchAround:K}=l;K!==void 0&&(W=K),w._stop(!0),W=W||w.transform.centerPoint;const se=E.pointLocation(R?W.sub(R):W);N&&(E.bearing+=N),j&&(E.pitch+=j),B&&(E.zoom+=B),P?d.drag&&!this._drag?(this._drag={center:E.centerPoint,lngLat:E.pointLocation(W),point:W,handlerName:d.drag.handlerName},w.fire(new a.Event("freezeElevation",{freeze:!0}))):this._drag&&g[this._drag.handlerName]?(w.fire(new a.Event("freezeElevation",{freeze:!1})),this._drag=null):d.drag&&this._drag&&(E.center=E.pointLocation(E.centerPoint.sub(R))):E.setLocationAtPoint(se,W),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,g,!0)}_fireEvents(l,d,g){const w=Ms(this._eventsInProgress),E=Ms(l),P={};for(const j in l){const{originalEvent:W}=l[j];this._eventsInProgress[j]||(P[`${j}start`]=W),this._eventsInProgress[j]=l[j]}!w&&E&&this._fireEvent("movestart",E.originalEvent);for(const j in P)this._fireEvent(j,P[j]);E&&this._fireEvent("move",E.originalEvent);for(const j in l){const{originalEvent:W}=l[j];this._fireEvent(j,W)}const R={};let B;for(const j in this._eventsInProgress){const{handlerName:W,originalEvent:K}=this._eventsInProgress[j];this._handlersById[W].isActive()||(delete this._eventsInProgress[j],B=d[W]||K,R[`${j}end`]=B)}for(const j in R)this._fireEvent(j,R[j]);const N=Ms(this._eventsInProgress);if(g&&(w||E)&&!N){this._updatingCamera=!0;const j=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;j?(W(j.bearing||this._map.getBearing())&&(j.bearing=0),this._map.easeTo(j,{originalEvent:B})):(this._map.fire(new a.Event("moveend",{originalEvent:B})),W(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,d){this._map.fire(new a.Event(l,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new Lh("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Bi={extend:(x,...l)=>a.extend(x,...l),run(x){x()},logToElement(x,l=!1,d="log"){const g=window.document.getElementById(d);g&&(l&&(g.innerHTML=""),g.innerHTML+=`<br>${x}`)}};class Jr extends a.Evented{constructor(l,d){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=d.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,d){return this.jumpTo({center:l},d)}panBy(l,d,g){return l=a.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,a.extend({offset:l},d),g)}panTo(l,d,g){return this.easeTo(a.extend({center:l},d),g)}getZoom(){return this.transform.zoom}setZoom(l,d){return this.jumpTo({zoom:l},d),this}zoomTo(l,d,g){return this.easeTo(a.extend({zoom:l},d),g)}zoomIn(l,d){return this.zoomTo(this.getZoom()+1,l,d),this}zoomOut(l,d){return this.zoomTo(this.getZoom()-1,l,d),this}getBearing(){return this.transform.bearing}setBearing(l,d){return this.jumpTo({bearing:l},d),this}getPadding(){return this.transform.padding}setPadding(l,d){return this.jumpTo({padding:l},d),this}rotateTo(l,d,g){return this.easeTo(a.extend({bearing:l},d),g)}resetNorth(l,d){return this.rotateTo(0,a.extend({duration:1e3},l),d),this}resetNorthPitch(l,d){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},l),d),this}snapToNorth(l,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,d):this}getPitch(){return this.transform.pitch}setPitch(l,d){return this.jumpTo({pitch:l},d),this}cameraForBounds(l,d){l=a.LngLatBounds.convert(l);const g=d&&d.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),g,d)}_cameraForBoxAndBearing(l,d,g,w){const E={top:0,bottom:0,right:0,left:0};if(typeof(w=a.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const Ie=w.padding;w.padding={top:Ie,bottom:Ie,right:Ie,left:Ie}}w.padding=a.extend(E,w.padding);const P=this.transform,R=P.padding,B=P.project(a.LngLat.convert(l)),N=P.project(a.LngLat.convert(d)),j=B.rotate(-g*Math.PI/180),W=N.rotate(-g*Math.PI/180),K=new a.pointGeometry(Math.max(j.x,W.x),Math.max(j.y,W.y)),se=new a.pointGeometry(Math.min(j.x,W.x),Math.min(j.y,W.y)),ie=K.sub(se),oe=(P.width-(R.left+R.right+w.padding.left+w.padding.right))/ie.x,ge=(P.height-(R.top+R.bottom+w.padding.top+w.padding.bottom))/ie.y;if(ge<0||oe<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Se=Math.min(P.scaleZoom(P.scale*Math.min(oe,ge)),w.maxZoom),Ae=a.pointGeometry.convert(w.offset),ue=new a.pointGeometry((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(g*Math.PI/180),De=Ae.add(ue).mult(P.scale/P.zoomScale(Se));return{center:P.unproject(B.add(N).div(2).sub(De)),zoom:Se,bearing:g}}fitBounds(l,d,g){return this._fitInternal(this.cameraForBounds(l,d),d,g)}fitScreenCoordinates(l,d,g,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.pointGeometry.convert(l)),this.transform.pointLocation(a.pointGeometry.convert(d)),g,w),w,E)}_fitInternal(l,d,g){return l?(delete(d=a.extend(l,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this}jumpTo(l,d){this.stop();const g=this.transform;let w=!1,E=!1,P=!1;return"zoom"in l&&g.zoom!==+l.zoom&&(w=!0,g.zoom=+l.zoom),l.center!==void 0&&(g.center=a.LngLat.convert(l.center)),"bearing"in l&&g.bearing!==+l.bearing&&(E=!0,g.bearing=+l.bearing),"pitch"in l&&g.pitch!==+l.pitch&&(P=!0,g.pitch=+l.pitch),l.padding==null||g.isPaddingEqual(l.padding)||(g.padding=l.padding),this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),w&&this.fire(new a.Event("zoomstart",d)).fire(new a.Event("zoom",d)).fire(new a.Event("zoomend",d)),E&&this.fire(new a.Event("rotatestart",d)).fire(new a.Event("rotate",d)).fire(new a.Event("rotateend",d)),P&&this.fire(new a.Event("pitchstart",d)).fire(new a.Event("pitch",d)).fire(new a.Event("pitchend",d)),this.fire(new a.Event("moveend",d))}calculateCameraOptionsFromTo(l,d,g,w=0){const E=a.MercatorCoordinate.fromLngLat(l,d),P=a.MercatorCoordinate.fromLngLat(g,w),R=P.x-E.x,B=P.y-E.y,N=P.z-E.z,j=Math.hypot(R,B,N);if(j===0)throw new Error("Can't calculate camera options with same From and To");const W=Math.hypot(R,B),K=this.transform.scaleZoom(this.transform.cameraToCenterDistance/j/this.transform.tileSize),se=180*Math.atan2(R,-B)/Math.PI;let ie=180*Math.acos(W/j)/Math.PI;return ie=N<0?90-ie:90+ie,{center:P.toLngLat(),zoom:K,pitch:ie,bearing:se}}easeTo(l,d){this._stop(!1,l.easeId),((l=a.extend({offset:[0,0],duration:500,easing:a.ease},l)).animate===!1||!l.essential&&a.exported.prefersReducedMotion)&&(l.duration=0);const g=this.transform,w=this.getZoom(),E=this.getBearing(),P=this.getPitch(),R=this.getPadding(),B="zoom"in l?+l.zoom:w,N="bearing"in l?this._normalizeBearing(l.bearing,E):E,j="pitch"in l?+l.pitch:P,W="padding"in l?l.padding:g.padding,K=a.pointGeometry.convert(l.offset);let se=g.centerPoint.add(K);const ie=g.pointLocation(se),oe=a.LngLat.convert(l.center||ie);this._normalizeCenter(oe);const ge=g.project(ie),Se=g.project(oe).sub(ge),Ae=g.zoomScale(B-w);let ue,De;l.around&&(ue=a.LngLat.convert(l.around),De=g.locationPoint(ue));const Ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||B!==w,this._rotating=this._rotating||E!==N,this._pitching=this._pitching||j!==P,this._padding=!g.isPaddingEqual(W),this._easeId=l.easeId,this._prepareEase(d,l.noMoveStart,Ie),this._ease(Be=>{if(this._zooming&&(g.zoom=a.number(w,B,Be)),this._rotating&&(g.bearing=a.number(E,N,Be)),this._pitching&&(g.pitch=a.number(P,j,Be)),this._padding&&(g.interpolatePadding(R,W,Be),se=g.centerPoint.add(K)),ue)g.setLocationAtPoint(ue,De);else{const Fe=g.zoomScale(g.zoom-w),He=B>w?Math.min(2,Ae):Math.max(.5,Ae),ze=Math.pow(He,1-Be),ot=g.unproject(ge.add(Se.mult(Be*ze)).mult(Fe));g.setLocationAtPoint(g.renderWorldCopies?ot.wrap():ot,se)}this._fireMoveEvents(d)},Be=>{this._afterEase(d,Be)},l),this}_prepareEase(l,d,g={}){this._moving=!0,this.fire(new a.Event("freezeElevation",{freeze:!0})),d||g.moving||this.fire(new a.Event("movestart",l)),this._zooming&&!g.zooming&&this.fire(new a.Event("zoomstart",l)),this._rotating&&!g.rotating&&this.fire(new a.Event("rotatestart",l)),this._pitching&&!g.pitching&&this.fire(new a.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new a.Event("move",l)),this._zooming&&this.fire(new a.Event("zoom",l)),this._rotating&&this.fire(new a.Event("rotate",l)),this._pitching&&this.fire(new a.Event("pitch",l))}_afterEase(l,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId,this.fire(new a.Event("freezeElevation",{freeze:!1}));const g=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new a.Event("zoomend",l)),w&&this.fire(new a.Event("rotateend",l)),E&&this.fire(new a.Event("pitchend",l)),this.fire(new a.Event("moveend",l))}flyTo(l,d){if(!l.essential&&a.exported.prefersReducedMotion){const Et=a.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Et,d)}this.stop(),l=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},l);const g=this.transform,w=this.getZoom(),E=this.getBearing(),P=this.getPitch(),R=this.getPadding(),B="zoom"in l?a.clamp(+l.zoom,g.minZoom,g.maxZoom):w,N="bearing"in l?this._normalizeBearing(l.bearing,E):E,j="pitch"in l?+l.pitch:P,W="padding"in l?l.padding:g.padding,K=g.zoomScale(B-w),se=a.pointGeometry.convert(l.offset);let ie=g.centerPoint.add(se);const oe=g.pointLocation(ie),ge=a.LngLat.convert(l.center||oe);this._normalizeCenter(ge);const Se=g.project(oe),Ae=g.project(ge).sub(Se);let ue=l.curve;const De=Math.max(g.width,g.height),Ie=De/K,Be=Ae.mag();if("minZoom"in l){const Et=a.clamp(Math.min(l.minZoom,w,B),g.minZoom,g.maxZoom),xr=De/g.zoomScale(Et-w);ue=Math.sqrt(xr/Be*2)}const Fe=ue*ue;function He(Et){const xr=(Ie*Ie-De*De+(Et?-1:1)*Fe*Fe*Be*Be)/(2*(Et?Ie:De)*Fe*Be);return Math.log(Math.sqrt(xr*xr+1)-xr)}function ze(Et){return(Math.exp(Et)-Math.exp(-Et))/2}function ot(Et){return(Math.exp(Et)+Math.exp(-Et))/2}const Ye=He(0);let ut=function(Et){return ot(Ye)/ot(Ye+ue*Et)},$t=function(Et){return De*((ot(Ye)*(ze(xr=Ye+ue*Et)/ot(xr))-ze(Ye))/Fe)/Be;var xr},Ht=(He(1)-Ye)/ue;if(Math.abs(Be)<1e-6||!isFinite(Ht)){if(Math.abs(De-Ie)<1e-6)return this.easeTo(l,d);const Et=Ie<De?-1:1;Ht=Math.abs(Math.log(Ie/De))/ue,$t=function(){return 0},ut=function(xr){return Math.exp(Et*ue*xr)}}return l.duration="duration"in l?+l.duration:1e3*Ht/("screenSpeed"in l?+l.screenSpeed/ue:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=E!==N,this._pitching=j!==P,this._padding=!g.isPaddingEqual(W),this._prepareEase(d,!1),this._ease(Et=>{const xr=Et*Ht,br=1/ut(xr);g.zoom=Et===1?B:w+g.scaleZoom(br),this._rotating&&(g.bearing=a.number(E,N,Et)),this._pitching&&(g.pitch=a.number(P,j,Et)),this._padding&&(g.interpolatePadding(R,W,Et),ie=g.centerPoint.add(se));const er=Et===1?ge:g.unproject(Se.add(Ae.mult($t(xr))).mult(br));g.setLocationAtPoint(g.renderWorldCopies?er.wrap():er,ie),this._fireMoveEvents(d)},()=>this._afterEase(d),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,d)}if(!l){const g=this.handlers;g&&g.stop(!1)}return this}_ease(l,d,g){g.animate===!1||g.duration===0?(l(1),d()):(this._easeStart=a.exported.now(),this._easeOptions=g,this._onEaseFrame=l,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,d){l=a.wrap(l,-180,180);const g=Math.abs(l-d);return Math.abs(l-360-d)<g&&(l-=360),Math.abs(l+360-d)<g&&(l+=360),l}_normalizeCenter(l){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const g=l.lng-d.center.lng;l.lng+=g>180?-360:g<-180?360:0}}class El{constructor(l={}){this.options=l,a.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,d){const g=this._map._getUIString(`AttributionControl.${d}`);l.title=g,l.setAttribute("aria-label",g)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const d=this._map.style.sourceCaches;for(const w in d){const E=d[w];if(E.used||E.usedForTerrain){const P=E.getSource();P.attribution&&l.indexOf(P.attribution)<0&&l.push(P.attribution)}}l=l.filter(w=>String(w).trim()),l.sort((w,E)=>w.length-E.length),l=l.filter((w,E)=>{for(let P=E+1;P<l.length;P++)if(l[P].indexOf(w)>=0)return!1;return!0});const g=l.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,l.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ju{constructor(l={}){this.options=l,a.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl mapboxgl-ctrl");const d=y.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact","mapboxgl-compact"):d.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Sp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d}remove(l){const d=this._currentlyRunning,g=d?this._queue.concat(d):this._queue;for(const w of g)if(w.id===l)return void(w.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const g of d)if(!g.cancelled&&(g.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Tp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Ep={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},l_={showCompass:!0,showZoom:!0,visualizePitch:!1};class ha{constructor(l,d,g=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new za({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,g&&(this.mousePitch=new ht({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),y.addEventListener(d,"mousedown",this.mousedown),y.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(d,"touchmove",this.touchmove),y.addEventListener(d,"touchend",this.touchend),y.addEventListener(d,"touchcancel",this.reset)}down(l,d){this.mouseRotate.mousedown(l,d),this.mousePitch&&this.mousePitch.mousedown(l,d),y.disableDrag()}move(l,d){const g=this.map,w=this.mouseRotate.mousemoveWindow(l,d);if(w&&w.bearingDelta&&g.setBearing(g.getBearing()+w.bearingDelta),this.mousePitch){const E=this.mousePitch.mousemoveWindow(l,d);E&&E.pitchDelta&&g.setPitch(g.getPitch()+E.pitchDelta)}}off(){const l=this.element;y.removeEventListener(l,"mousedown",this.mousedown),y.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(l,"touchmove",this.touchmove),y.removeEventListener(l,"touchend",this.touchend),y.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup)}mousedown(l){this.down(a.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),y.mousePos(this.element,l)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)}mousemove(l){this.move(l,y.mousePos(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Cl(x,l,d){if(x=new a.LngLat(x.lng,x.lat),l){const g=new a.LngLat(x.lng-360,x.lat),w=new a.LngLat(x.lng+360,x.lat),E=d.locationPoint(x).distSqr(l);d.locationPoint(g).distSqr(l)<E?x=g:d.locationPoint(w).distSqr(l)<E&&(x=w)}for(;Math.abs(x.lng-d.center.lng)>180;){const g=d.locationPoint(x);if(g.x>=0&&g.y>=0&&g.x<=d.width&&g.y<=d.height)break;x.lng>d.center.lng?x.lng-=360:x.lng+=360}return x}const gt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Mt(x,l,d){const g=x.classList;for(const w in gt)g.remove(`maplibregl-${d}-anchor-${w}`,`mapboxgl-${d}-anchor-${w}`);g.add(`maplibregl-${d}-anchor-${l}`,`mapboxgl-${d}-anchor-${l}`)}class Ps extends a.Evented{constructor(l,d){if(super(),(l instanceof HTMLElement||d)&&(l=a.extend({element:l},d)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,l&&l.element)this._element=l.element,this._offset=a.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const g=y.createNS("http://www.w3.org/2000/svg","svg"),w=41,E=27;g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height",`${w}px`),g.setAttributeNS(null,"width",`${E}px`),g.setAttributeNS(null,"viewBox",`0 0 ${E} ${w}`);const P=y.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const R=y.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill-rule","nonzero");const B=y.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"transform","translate(3.0, 29.0)"),B.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ae of N){const ue=y.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",Ae.rx),ue.setAttributeNS(null,"ry",Ae.ry),B.appendChild(ue)}const j=y.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const W=y.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(W);const K=y.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const se=y.createNS("http://www.w3.org/2000/svg","path");se.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(se);const ie=y.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ie.setAttributeNS(null,"fill","#FFFFFF");const oe=y.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ge=y.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#000000"),ge.setAttributeNS(null,"opacity","0.25"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962");const Se=y.createNS("http://www.w3.org/2000/svg","circle");Se.setAttributeNS(null,"fill","#FFFFFF"),Se.setAttributeNS(null,"cx","5.5"),Se.setAttributeNS(null,"cy","5.5"),Se.setAttributeNS(null,"r","5.4999962"),oe.appendChild(ge),oe.appendChild(Se),R.appendChild(B),R.appendChild(j),R.appendChild(K),R.appendChild(ie),R.appendChild(oe),g.appendChild(R),g.setAttributeNS(null,"height",w*this._scale+"px"),g.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(g),this._offset=a.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",g=>{g.preventDefault()}),this._element.addEventListener("mousedown",g=>{g.preventDefault()}),Mt(this._element,this._anchor,"marker"),this._popup=null}addTo(l){return this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=a.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const w=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(l){const d=l.code,g=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(l){const d=l.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?l.remove():l.addTo(this._map),this):this}_update(l){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Cl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${gt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${g} ${d}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const w=this._map.unproject(this._pos),E=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=w.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(l){return this._offset=a.pointGeometry.convert(l),this._update(),this}_onMove(l){if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(l){this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Oh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ao,On=0,oo=!1;const fa={maxWidth:100,unit:"metric"};function Cp(x,l,d){const g=d&&d.maxWidth||100,w=x._container.clientHeight/2,E=x.unproject([0,w]),P=x.unproject([g,w]),R=E.distanceTo(P);if(d&&d.unit==="imperial"){const B=3.2808*R;B>5280?so(l,g,B/5280,x._getUIString("ScaleControl.Miles")):so(l,g,B,x._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?so(l,g,R/1852,x._getUIString("ScaleControl.NauticalMiles")):R>=1e3?so(l,g,R/1e3,x._getUIString("ScaleControl.Kilometers")):so(l,g,R,x._getUIString("ScaleControl.Meters"))}function so(x,l,d,g){const w=function(E){const P=Math.pow(10,`${Math.floor(E)}`.length-1);let R=E/P;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(B){const N=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*N)/N}(R),P*R}(d);x.style.width=l*(w/d)+"px",x.innerHTML=`${w}&nbsp;${g}`}const on={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},dn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Rh(x){if(x){if(typeof x=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(x,2)));return{center:new a.pointGeometry(0,0),top:new a.pointGeometry(0,x),"top-left":new a.pointGeometry(l,l),"top-right":new a.pointGeometry(-l,l),bottom:new a.pointGeometry(0,-x),"bottom-left":new a.pointGeometry(l,-l),"bottom-right":new a.pointGeometry(-l,-l),left:new a.pointGeometry(x,0),right:new a.pointGeometry(-x,0)}}if(x instanceof a.pointGeometry||Array.isArray(x)){const l=a.pointGeometry.convert(x);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:a.pointGeometry.convert(x.center||[0,0]),top:a.pointGeometry.convert(x.top||[0,0]),"top-left":a.pointGeometry.convert(x["top-left"]||[0,0]),"top-right":a.pointGeometry.convert(x["top-right"]||[0,0]),bottom:a.pointGeometry.convert(x.bottom||[0,0]),"bottom-left":a.pointGeometry.convert(x["bottom-left"]||[0,0]),"bottom-right":a.pointGeometry.convert(x["bottom-right"]||[0,0]),left:a.pointGeometry.convert(x.left||[0,0]),right:a.pointGeometry.convert(x.right||[0,0])}}return Rh(new a.pointGeometry(0,0))}const Fo={supported:f,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends Jr{constructor(x){var l;if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(x=a.extend({},Ep,x)).minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new gl(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies),{bearingSnap:x.bearingSnap}),this._interactive=x.interactive,this._cooperativeGestures=x.cooperativeGestures,this._maxTileCacheSize=x.maxTileCacheSize,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=x.collectResourceTiming,this._renderTaskQueue=new Sp,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Tp,x.locale),this._clickTolerance=x.clickTolerance,this._pixelRatio=(l=x.pixelRatio)!==null&&l!==void 0?l:devicePixelRatio,this._requestManager=new S(x.transformRequest),typeof x.container=="string"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new wp(this,x),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=x.hash&&new hp(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,a.extend({},x.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=x.localIdeographFontFamily,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new El({customAttribution:x.customAttribution})),x.maplibreLogo&&this.addControl(new ju,x.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new a.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new a.Event(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new a.Event("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(x,l){if(l===void 0&&(l=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=x.onAdd(this);this._controls.push(x);const g=this._controlPositions[l];return l.indexOf("bottom")!==-1?g.insertBefore(d,g.firstChild):g.appendChild(d),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(x);return l>-1&&this._controls.splice(l,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}calculateCameraOptionsFromTo(x,l,d,g){return g==null&&this.style.terrain&&(g=this.transform.getElevation(d,this.style.terrain)),super.calculateCameraOptionsFromTo(x,l,d,g)}resize(x){const l=this._containerDimensions(),d=l[0],g=l[1];this._resizeCanvas(d,g,this.getPixelRatio()),this.transform.resize(d,g),this.painter.resize(d,g,this.getPixelRatio());const w=!this._moving;return w&&(this.stop(),this.fire(new a.Event("movestart",x)).fire(new a.Event("move",x))),this.fire(new a.Event("resize",x)),w&&this.fire(new a.Event("moveend",x)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(x){const[l,d]=this._containerDimensions();this._pixelRatio=x,this._resizeCanvas(l,d,x),this.painter.resize(l,d,x)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(a.LngLatBounds.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.renderWorldCopies=x,this._update()}project(x){return this.transform.locationPoint(a.LngLat.convert(x),this.style&&this.style.terrain)}unproject(x){return this.transform.pointLocation(a.pointGeometry.convert(x),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(x,l,d){if(x==="mouseenter"||x==="mouseover"){let g=!1;return{layer:l,listener:d,delegates:{mousemove:E=>{const P=this.getLayer(l)?this.queryRenderedFeatures(E.point,{layers:[l]}):[];P.length?g||(g=!0,d.call(this,new _i(x,this,E.originalEvent,{features:P}))):g=!1},mouseout:()=>{g=!1}}}}if(x==="mouseleave"||x==="mouseout"){let g=!1;return{layer:l,listener:d,delegates:{mousemove:P=>{(this.getLayer(l)?this.queryRenderedFeatures(P.point,{layers:[l]}):[]).length?g=!0:g&&(g=!1,d.call(this,new _i(x,this,P.originalEvent)))},mouseout:P=>{g&&(g=!1,d.call(this,new _i(x,this,P.originalEvent)))}}}}{const g=w=>{const E=this.getLayer(l)?this.queryRenderedFeatures(w.point,{layers:[l]}):[];E.length&&(w.features=E,d.call(this,w),delete w.features)};return{layer:l,listener:d,delegates:{[x]:g}}}}on(x,l,d){if(d===void 0)return super.on(x,l);const g=this._createDelegatedListener(x,l,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(g);for(const w in g.delegates)this.on(w,g.delegates[w]);return this}once(x,l,d){if(d===void 0)return super.once(x,l);const g=this._createDelegatedListener(x,l,d);for(const w in g.delegates)this.once(w,g.delegates[w]);return this}off(x,l,d){return d===void 0?super.off(x,l):(this._delegatedListeners&&this._delegatedListeners[x]&&(g=>{const w=this._delegatedListeners[x];for(let E=0;E<w.length;E++){const P=w[E];if(P.layer===l&&P.listener===d){for(const R in P.delegates)this.off(R,P.delegates[R]);return w.splice(E,1),this}}})(),this)}queryRenderedFeatures(x,l){if(!this.style)return[];let d;if(l!==void 0||x===void 0||x instanceof a.pointGeometry||Array.isArray(x)||(l=x,x=void 0),l=l||{},(x=x||[[0,0],[this.transform.width,this.transform.height]])instanceof a.pointGeometry||typeof x[0]=="number")d=[a.pointGeometry.convert(x)];else{const g=a.pointGeometry.convert(x[0]),w=a.pointGeometry.convert(x[1]);d=[g,new a.pointGeometry(w.x,g.y),w,new a.pointGeometry(g.x,w.y),g]}return this.style.queryRenderedFeatures(d,l,this.transform)}querySourceFeatures(x,l){return this.style.querySourceFeatures(x,l)}setStyle(x,l){return(l=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(x,l))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){const l=this._locale[x];if(l==null)throw new Error(`Missing UI string '${x}'`);return l}_updateStyle(x,l){return this.style&&(this.style.setEventedParent(null),this.style._remove()),x?(this.style=new Un(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x):this.style.loadJSON(x),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Un(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,l){if(typeof x=="string"){const d=this._requestManager.transformRequest(x,a.ResourceType.Style);a.getJSON(d,(g,w)=>{g?this.fire(new a.ErrorEvent(g)):w&&this._updateDiff(w,l)})}else typeof x=="object"&&this._updateDiff(x,l)}_updateDiff(x,l){try{this.style.setState(x)&&this._update(!0)}catch(d){a.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(x,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(x,l){return this._lazyInitEmptyStyle(),this.style.addSource(x,l),this._update(!0)}isSourceLoaded(x){const l=this.style&&this.style.sourceCaches[x];if(l!==void 0)return l.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${x}'`)))}setTerrain(x){return this.style.setTerrain(x),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const x=this.style&&this.style.sourceCaches;for(const l in x){const d=x[l]._tiles;for(const g in d){const w=d[g];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}addSourceType(x,l,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(x,l,d)}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}addImage(x,l,{pixelRatio:d=1,sdf:g=!1,stretchX:w,stretchY:E,content:P}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||a.isImageBitmap(l)){const{width:R,height:B,data:N}=a.exported.getImageData(l);this.style.addImage(x,{data:new a.RGBAImage({width:R,height:B},N),pixelRatio:d,stretchX:w,stretchY:E,content:P,sdf:g,version:0})}else{if(l.width===void 0||l.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:B,data:N}=l,j=l;this.style.addImage(x,{data:new a.RGBAImage({width:R,height:B},new Uint8Array(N)),pixelRatio:d,stretchX:w,stretchY:E,content:P,sdf:g,version:0,userImage:j}),j.onAdd&&j.onAdd(this,x)}}}updateImage(x,l){const d=this.style.getImage(x);if(!d)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=l instanceof HTMLImageElement||a.isImageBitmap(l)?a.exported.getImageData(l):l,{width:w,height:E,data:P}=g;if(w===void 0||E===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==d.data.width||E!==d.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const R=!(l instanceof HTMLImageElement||a.isImageBitmap(l));d.data.replace(P,R),this.style.updateImage(x,d)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x,l){a.getImage(this._requestManager.transformRequest(x,a.ResourceType.Image),l)}listImages(){return this.style.listImages()}addLayer(x,l){return this._lazyInitEmptyStyle(),this.style.addLayer(x,l),this._update(!0)}moveLayer(x,l){return this.style.moveLayer(x,l),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}setLayerZoomRange(x,l,d){return this.style.setLayerZoomRange(x,l,d),this._update(!0)}setFilter(x,l,d={}){return this.style.setFilter(x,l,d),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,l,d,g={}){return this.style.setPaintProperty(x,l,d,g),this._update(!0)}getPaintProperty(x,l){return this.style.getPaintProperty(x,l)}setLayoutProperty(x,l,d,g={}){return this.style.setLayoutProperty(x,l,d,g),this._update(!0)}getLayoutProperty(x,l){return this.style.getLayoutProperty(x,l)}setLight(x,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,l),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(x,l){return this.style.setFeatureState(x,l),this._update()}removeFeatureState(x,l){return this.style.removeFeatureState(x,l),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,l=0;return this._container&&(x=this._container.clientWidth||400,l=this._container.clientHeight||300),[x,l]}_setupContainer(){const x=this._container;x.classList.add("maplibregl-map","mapboxgl-map");const l=this._canvasContainer=y.create("div","maplibregl-canvas-container mapboxgl-canvas-container",x);this._interactive&&l.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions();this._resizeCanvas(d[0],d[1],this.getPixelRatio());const g=this._controlContainer=y.create("div","maplibregl-control-container mapboxgl-control-container",x),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{w[E]=y.create("div",`maplibregl-ctrl-${E} mapboxgl-ctrl-${E}`,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const x=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",x);let l="Control",d=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(d=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",l="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${d}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",g=>{g.key===l&&(this._metaPress=!0)}),document.addEventListener("keyup",g=>{g.key===l&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",g=>{this._onCooperativeGesture(g,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(x,l,d){this._canvas.width=d*x,this._canvas.height=d*l,this._canvas.style.width=`${x}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const x=a.extend({},f.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl",x)||this._canvas.getContext("experimental-webgl",x);l?(this.painter=new Th(l,this.transform),a.exported$1.testSupport(l)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(x){x.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:x}))}_contextRestored(x){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:x}))}_onMapScroll(x){if(x.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(x,l,d){return!l&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){let l,d=0;const g=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(l=g.createQueryEXT(),g.beginQueryEXT(g.TIME_ELAPSED_EXT,l),d=a.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),this._removed)return;let w=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,R=a.exported.now();this.style.zoomHistory.update(P,R);const B=new a.EvaluationParameters(P,{now:R,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),N=B.crossFadingFactor();N===1&&N===this._crossFadingFactor||(w=!0,this._crossFadingFactor=N),this.style.update(B)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||w)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const P=a.exported.now()-d;g.endQueryEXT(g.TIME_ELAPSED_EXT,l),setTimeout(()=>{const R=g.getQueryObjectEXT(l,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(l),this.fire(new a.Event("gpu-timing-frame",{cpuTime:P,gpuTime:R}))},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const R=this.painter.queryGpuTimers(P);this.fire(new a.Event("gpu-timing-layer",{layerTimes:R}))},50)}const E=this._sourcesDirty||this._styleDirty||this._placementDirty;return E||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||E||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const x=this.painter.context.gl.getExtension("WEBGL_lose_context");x&&x.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&y.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.exported.frame(x=>{a.PerformanceUtils.frame(x),this._frame=null,this._render(x)}))}_onWindowOnline(){this._update()}_onWindowResize(x){this._trackResize&&this.resize({originalEvent:x})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}_setCacheLimits(x,l){a.setCacheLimits(x,l)}get version(){return"2.4.0"}},NavigationControl:class{constructor(x){this.options=a.extend({},l_,x),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const x=this._map.getZoom(),l=x===this._map.getMaxZoom(),d=x===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())}_rotateCompassArrow(){const x=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=x}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ha(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,l){const d=y.create("button",x,this._container);return d.type="button",d.addEventListener("click",l),d}_setButtonTitle(x,l){const d=this._map._getUIString(`NavigationControl.${l}`);x.title=d,x.setAttribute("aria-label",d)}},GeolocateControl:class extends a.Evented{constructor(x){super(),this.options=a.extend({},Oh,x),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(x){var l;return this._map=x,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),l=this._setupUI,ao!==void 0?l(ao):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{ao=d.state!=="denied",l(ao)}):(ao=!!window.navigator.geolocation,l(ao)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,On=0,oo=!1}_isOutOfMapMaxBounds(x){const l=this._map.getMaxBounds(),d=x.coords;return l&&(d.longitude<l.getWest()||d.longitude>l.getEast()||d.latitude<l.getSouth()||d.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(x){if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(x),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",x)),this._finish()}}_updateCamera(x){const l=new a.LngLat(x.coords.longitude,x.coords.latitude),d=x.coords.accuracy,g=this._map.getBearing(),w=a.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(d),w,{geolocateSource:!0})}_updateMarker(x){if(x){const l=new a.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const x=this._map._container.clientHeight/2,l=this._map.unproject([0,x]),d=this._map.unproject([1,x]),g=l.distanceTo(d),w=Math.ceil(2*this._accuracy/g);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(x){if(this._map){if(this.options.trackUserLocation)if(x.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(x.code===3&&oo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",x)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(x){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",x===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ps(this._dotElement),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ps({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":On--,oo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let x;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),On++,On>1?(x={maximumAge:6e5,timeout:0},oo=!0):(x=this.options.positionOptions,oo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:El,LogoControl:ju,ScaleControl:class{constructor(x){this.options=a.extend({},fa,x),a.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Cp(this._map,this._container,this.options)}onAdd(x){return this._map=x,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(x){this.options.unit=x,Cp(this._map,this._container,this.options)}},FullscreenControl:class{constructor(x){this._fullscreen=!1,x&&x.container&&(x.container instanceof HTMLElement?this._container=x.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const x=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(x){this.options=x,a.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(x){return this._map=x,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends a.Evented{constructor(x){super(),this.options=a.extend(Object.create(on),x),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=a.LngLat.convert(x),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(document.createTextNode(x))}setHTML(x){const l=document.createDocumentFragment(),d=document.createElement("body");let g;for(d.innerHTML=x;g=d.firstChild,g;)l.appendChild(g);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(x){this._container&&this._container.classList.add(x)}removeClassName(x){this._container&&this._container.classList.remove(x)}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){if(this._container)return this._container.classList.toggle(x)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(x){this._update(x.point)}_onMouseMove(x){this._update(x.point)}_onDrag(x){this._update(x.point)}_update(x){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=y.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(E=>this._container.classList.add(E)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Cl(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!x))return;const l=this._pos=this._trackPointer&&x?x:this._map.project(this._lngLat);let d=this.options.anchor;const g=Rh(this.options.offset);if(!d){const E=this._container.offsetWidth,P=this._container.offsetHeight;let R;R=l.y+g.bottom.y<P?["top"]:l.y>this._map.transform.height-P?["bottom"]:[],l.x<E/2?R.push("left"):l.x>this._map.transform.width-E/2&&R.push("right"),d=R.length===0?"bottom":R.join("-")}const w=l.add(g[d]).round();y.setTransform(this._container,`${gt[d]} translate(${w.x}px,${w.y}px)`),Mt(this._container,d,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(dn);x&&x.focus()}_onClose(){this.remove()}},Marker:Ps,Style:Un,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,AJAXError:a.AJAXError,config:a.config,CanvasSource:Xt,GeoJSONSource:at,ImageSource:xt,RasterDEMTileSource:Ce,RasterTileSource:Pe,VectorTileSource:ve,VideoSource:St,prewarm:function(){yr().acquire(kt)},clearPrewarmedResources:function(){const x=hr;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(kt),hr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Tt.workerCount},set workerCount(x){Tt.workerCount=x},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(x){a.config.MAX_PARALLEL_IMAGE_REQUESTS=x},clearStorage(x){a.clearTileCache(x)},workerUrl:"",addProtocol(x,l){a.config.REGISTERED_PROTOCOLS[x]=l},removeProtocol(x){delete a.config.REGISTERED_PROTOCOLS[x]}};return Bi.extend(Fo,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),Fo});var u=i;return u})})(_F);const ic=Z0;const yF={name:"MyMap",data:()=>({map_style_url:"https://mirrors.sustech.edu.cn/osm-tile/styles/osm-bright/style.json",map_text_colour:"#000000",bus_location_data_api:[],bus_location_data_display:[],bus_plate_hash:{298:{plate:"粤BDF298"},363:{plate:"粤BDF363"},8040:{plate:"粤BDF040"},8147:{plate:"粤BDF147"},8267:{plate:"粤BDF267"},8330:{plate:"粤BDF330"},8335:{plate:"粤BDF335"},8338:{plate:"粤BDF338"},8345:{plate:"粤BDF345"},8365:{plate:"粤BDF365"},8371:{plate:"粤BDF371"},8411:{plate:"粤BDF411"},8421:{plate:"粤BDF421"},8430:{plate:"粤BDF430"},8447:{plate:"粤BDE447"},8458:{plate:"粤BDF458"},8470:{plate:"粤BDF470"},8471:{plate:"粤BDF471"},18447:{plate:"粤BDF447"}},geojson_line_1:[[113.99739584160139,22.610765716856296],[113.99770244929088,22.610602750604695],[113.99771094950285,22.61059767778233],[113.99771890653385,22.610591789421974],[113.99772624241524,22.61058514322198],[113.99773288526481,22.610577804306548],[113.99773876999119,22.610569844587616],[113.99824514560808,22.609808813574297],[113.998249208217,22.609802159245984],[113.99825274007058,22.60979520864264],[113.99898879543889,22.60819510708253],[113.99899240486543,22.608186143427105],[113.99899513228698,22.608176873246407],[113.99899695223624,22.60816738310082],[113.9989978477194,22.608157761604655],[113.99899781037489,22.60814809859871],[113.99899684055141,22.608138484311375],[113.99876376465981,22.606584405046835],[113.99876186005746,22.60657488398115],[113.99875904105679,22.60656559250995],[113.9987553342348,22.606556618231554],[113.99875077453878,22.606548045753847],[113.9987454049567,22.606539955896604],[113.99840124581259,22.606072409367975],[113.99839530892635,22.606065092796133],[113.9983887097732,22.60605836746942],[113.99838150693964,22.606052293094507],[113.9983737643716,22.606046923598996],[113.99836555080671,22.606042306652647],[113.99835693916405,22.60603848324417],[113.99834800589677,22.606035487317342],[113.99774294809698,22.605863822610463],[113.99773312637,22.605861563911226],[113.99772312717697,22.605860305268262],[113.99771305207776,22.60586005946536],[113.99770300340316,22.605860828999095],[113.99769308321561,22.605862606053456],[113.9976833922725,22.605865372579256],[113.996462081496,22.60628164325351],[113.99540699384544,22.60655007340282],[113.99537688636465,22.60638436471066],[113.99537457846512,22.606374521317747],[113.99537128843397,22.606364961271755],[113.99536704990152,22.60635578229431],[113.99536190619351,22.606347078211808],[113.99535590988829,22.606338937996323],[113.99534912227939,22.606331444856142],[113.99534161274892,22.60632467538524],[113.99533345805837,22.60631869878032],[113.995324741564,22.606313576133513],[113.99531555236477,22.60630935980789],[113.99491868014185,22.60615102642152],[113.99446803578164,22.605922922486105],[113.993628105381,22.605432281601264],[113.99361436378835,22.60541624974317],[113.99361283376653,22.605399929510398],[113.99403523011212,22.604697356220907],[113.99427914343141,22.604297776694622],[113.99454570612934,22.60407119840138],[113.99455101208882,22.604066349285663],[113.99481121659123,22.60381079129223],[113.99481565952753,22.603806137576637],[113.99515576701069,22.603426136652367],[113.99549648383878,22.60304833084697],[113.99570726599393,22.60298417975627],[113.99623267681147,22.60298349183956],[113.99686127008054,22.603078201644227],[113.99770971150042,22.60339811537432],[113.9977201426685,22.603401409146592],[113.99773087118898,22.603403543871796],[113.99774176868631,22.603404494006192],[113.99787229266123,22.603408704456996],[113.99788215074415,22.603408536156227],[113.9978919443383,22.60340739789566],[113.99790157824009,22.603405300740327],[113.99791095879819,22.603402265076713],[113.9979199948241,22.603398320414538],[113.9979285984785,22.60339350509991],[113.99793668612513,22.60338786594256],[113.99794417914393,22.60338145776082],[113.9980199672584,22.603309880097154],[113.99802683618526,22.603302715227613],[113.99803296099675,22.603294904709315],[113.99803828135273,22.603286525489548],[113.99804274483841,22.603277660118295],[113.9980463074806,22.603268395934986],[113.99804893418107,22.603258824208055],[113.99810024403767,22.60302739683338],[113.99810134953593,22.603021608404344],[113.99816665521513,22.602614977726315],[113.99835030416712,22.60216721735362],[113.99856193554633,22.601842951121434],[113.99880470491176,22.601545730488308],[113.99881031760918,22.601538156502247],[113.99881519216395,22.60153008765145],[113.99881928525701,22.6015215956419],[113.99882256051407,22.601512755940064],[113.99882498882864,22.601503647102295],[113.9988265486209,22.601494350076678],[113.99882722602932,22.60148494748368],[113.9988344317295,22.601194082723367],[113.99895072783376,22.600790214181995],[113.99965135994073,22.60015739690114],[113.9997487439255,22.600094924156195],[113.99975662585287,22.600089311655786],[113.99976392845348,22.6000829636668],[113.99977058335678,22.600075939622243],[113.99977652825628,22.600068305284697],[113.99978170749289,22.600060132130594],[113.99978607257604,22.600051496681044],[113.99978958263767,22.600042479785387],[113.99979220481484,22.60003316586426],[113.99979391455744,22.600023642119194],[113.99979469585801,22.60001399771619],[113.99979454140164,22.600004322950916],[113.9997934526344,22.599994708403305],[113.9997914397499,22.5999852440895],[113.99978852159374,22.599976018619078],[113.99978472548715,22.599967118365456],[113.99978008697113,22.5999586266572],[113.99977464947378,22.599950622997884],[113.99976846390364,22.599943182321713],[113.99976158817306,22.599936374291982],[113.99975408665603,22.59993026264882],[113.99974602958545,22.59992490461245],[113.99973749239562,22.59992035034746],[113.9997285550159,22.599916642493127],[113.99931433242868,22.59976784741106],[113.9988527029684,22.59945117882353],[113.99885252734994,22.599451058627373],[113.99811209682619,22.59894545191823],[113.99660435988763,22.59725046170577],[113.9966030867808,22.597249057512315],[113.99536067582889,22.595904550009735],[113.9953541984203,22.59589815108709],[113.99534716583669,22.59589236785265],[113.99533963638028,22.595887248251184],[113.99460302843119,22.595434010528884],[113.99459456469982,22.595429350779234],[113.99458569078772,22.595425529562213],[113.9945764895311,22.59542258254812],[113.99456704682186,22.595420537246756],[113.99455745080581,22.59541941275059],[113.99454779105987,22.59541921955658],[113.99453815775585,22.59541995946815],[113.99452864081873,22.59542162557837],[113.99451932908723,22.595424202334442],[113.9945103094845,22.595427665682845],[113.99450166620676,22.59543198329392],[113.99449347993728,22.59543711486362],[113.99448582709327,22.59544301248976],[113.99447877911251,22.595449621119172],[113.99447240178651,22.59545687906161],[113.99446675464631,22.595464718565623],[113.99446189040688,22.595473066451],[113.99420385593578,22.595969591352997],[113.99382768199821,22.59595993652297],[113.9938169603822,22.59596023674876],[113.99380633259398,22.59596168357378],[113.99379592089899,22.59596426035329],[113.99378584507669,22.595967937443213],[113.99321594303598,22.596211295714554],[113.99320787618828,22.59621517605677],[113.99320018866534,22.59621976224022],[113.99319294206812,22.596225017515316],[113.9931861944644,22.596230899770962],[113.99265363550316,22.596738860232236],[113.99200633643709,22.59716671060916],[113.99157366427197,22.5971462468509],[113.99090478252046,22.5969456920235],[113.99089489978897,22.59694326928491],[113.99088482201618,22.596941863390235],[113.9908746535454,22.596941488895837],[113.99086449965898,22.596942149679155],[113.99039476525739,22.596996829390125],[113.99038484213679,22.596998494112995],[113.99037513653565,22.597001147588333],[113.99036574671312,22.59700476295245],[113.99035676773141,22.597009303603546],[113.99034829049342,22.59701472357223],[113.99034040082233,22.597020967986946],[113.99033317859293,22.597027973629473],[113.99032669692278,22.59703566957495],[113.99032102143205,22.597043977909916],[113.99031620957922,22.597052814521092],[113.9903123100793,22.597062089946967],[113.99030936241067,22.59707171028347],[113.99020088374516,22.59750194984639],[113.99019873660492,22.597513104722935],[113.99019786842672,22.597524431141103],[113.99019829041364,22.59753578294312],[113.99030139387085,22.59862956838946],[113.99030286538937,22.59863964935582],[113.9903053549666,22.598649528285655],[113.99030883676294,22.59865910264432],[113.99048378356784,22.59907317753902],[113.99048795907763,22.599081866470787],[113.99049295183752,22.59909011297101],[113.99049871544861,22.599097840402962],[113.99050519634824,22.599104976953754],[113.99051233430787,22.599111456301692],[113.99052006299269,22.59911721823263],[113.99075599101839,22.599276010611053],[113.99076619844251,22.59928203412041],[113.99126127611241,22.599535900836155],[113.9917686585336,22.6000105337692],[113.99191211157755,22.60053218120178],[113.99183362959826,22.601016496848214],[113.99144872111891,22.60153952301182],[113.99077751816642,22.602118998056795],[113.99045237812743,22.602377905865616],[113.9904454049912,22.602384007276413],[113.99043902651476,22.60239072790739],[113.9904332974585,22.6023980100607],[113.99025180113084,22.60265210491943],[113.99024623928223,22.60266080939295],[113.99024160504972,22.60267004118088],[113.99023794788148,22.602679701778165],[113.99023530680027,22.60268968810428],[113.99010219314502,22.60332391993846]],geojson_line_2:[[113.9914596783045,22.59960492109923],[113.9918969233072,22.59993661748595],[113.9920105698998,22.6005318195689],[113.9919172423369,22.60102266627295],[113.9917196221943,22.601431625928],[113.9915262747645,22.601612498395962],[113.99204584987558,22.60262745159568],[113.99233952276445,22.60296808489611],[113.99279885728298,22.603280910653833],[113.99298710913483,22.60350336409337],[113.99385306765333,22.603677155592816],[113.99419945106074,22.60426804504929],[113.99386414857948,22.604784676421257],[113.9934784038899,22.60548092977822],[113.995278497141,22.60640224097063],[113.9953277666447,22.60667341560261],[113.9964905851169,22.6063775771138],[113.9977156537446,22.60596002561628],[113.9983207115444,22.60613169032316],[113.9986648706885,22.60659923685179],[113.9988979465801,22.60815331611633],[113.9981618912118,22.60975341767644],[113.9976555155949,22.61051444868976],[113.9973489079054,22.61067741494136]],bldg_geojson:{},gate_geojson:{},stations_geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[113.9902,22.60336]},properties:{name:"工学院 COE"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99153,22.599643]},properties:{name:"科研楼 Research Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.990399,22.597132]},properties:{name:"七号门 Gate7"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.992403,22.597011]},properties:{name:"行政楼 Administration Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.994898,22.59569]},properties:{name:"1号门 Gate1"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99939,22.599893]},properties:{name:"3号门 Gate3"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998329,22.601975]},properties:{name:"专家公寓 Guest Houses"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997811,22.603325]},properties:{name:"教工餐厅 Faculty Cafteria"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995981,22.60293]},properties:{name:"社康中心 C.Health.Center"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.993824,22.604854]},properties:{name:"学生宿舍 Stu. Dormitories"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995238,22.606518]},properties:{name:"荔园 Lychee Hill"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.996732,22.606278]},properties:{name:"创园 Chuang Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998372,22.606102]},properties:{name:"慧园 Hui Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997473,22.610667]},properties:{name:"欣园 Joy Highland"}}]},bus_marker_arr:[],map:[],time_difference:0,timer:{}}),async created(){const e=await ji.get("https://bus.sustcra.com/geojson/sustech_bldg.json");this.bldg_geojson=e.data;const t=await ji.get("https://bus.sustcra.com/geojson/sustech_gate.json");this.gate_geojson=t.data,console.log("Fetch geojson of sustech complete")},methods:{async fetch_bus(){const e=await ji.get("https://bus.sustcra.com/api/v2/monitor_osm/");this.bus_location_data_api=e.data;const t=new Date;console.log("bus location data fetched at "+parseInt(t.getTime()/1e3)),typeof this.bus_location_data_api[0].time_rt<"u"&&(this.time_difference=parseInt(t.getTime()/1e3-this.bus_location_data_api[0].time_rt),console.log("The clock drift is "+this.time_difference+" seconds")),this.update_location()},update_location:function(){this.display_data=[],this.bus_marker_arr.forEach(o=>o.remove());let e;for(e=0;e<this.bus_location_data_api.length;e++)if(this.bus_location_data_api[e].time_rt-this.bus_location_data_api[e].time_mt<300){var t=document.createElement("div");t.className="marker",t.style.backgroundImage="url(https://bus.sustcra.com/bus-top-line1.png)",t.style.width=35+"px",t.style.height=35+"px",t.style.backgroundSize="cover";var r=document.createElement("div");r.className="marker",r.style.backgroundImage="url(https://bus.sustcra.com/bus-top-line2.png)",r.style.width=35+"px",r.style.height=35+"px",r.style.backgroundSize="cover";var n=document.createElement("div");n.className="marker",n.style.backgroundImage="url(https://bus.sustcra.com/bus-top-view.png)",n.style.width=35+"px",n.style.height=35+"px",n.style.backgroundSize="cover";var i=new ic.Marker(n).setLngLat([this.bus_location_data_api[e].lng,this.bus_location_data_api[e].lat]).setRotation(parseInt(this.bus_location_data_api[e].course)).setPopup(new ic.Popup({offset:25}).setHTML('<p class="car-plate">Plate: <b>'+this.bus_plate_hash[this.bus_location_data_api[e].id].plate+"</b></p><p>Speed: <b>"+this.bus_location_data_api[e].speed+"km/h</b></p>")).addTo(this.map);this.bus_marker_arr.push(i)}},async refresh(){await this.fetch_bus()}},async mounted(){const e={lng:113.99373,lat:22.60308,zoom:14},t={bus_location_data:this.bus_location_data,geojson_line_1:this.geojson_line_1,geojson_line_2:this.geojson_line_2},r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,await r&&(console.log("dark mode enabled."),this.map_text_colour="#FFFFFF",this.map_style_url="https://mirrors.sustech.edu.cn/osm-tile/styles/osm-blue/style.json"),this.map=new ic.Map({container:this.$refs.myMap,style:this.map_style_url,center:[e.lng,e.lat],zoom:e.zoom});var n=new ic.NavigationControl;this.map.addControl(n,"top-left"),this.map.addControl(new ic.FullscreenControl,"top-left"),this.map.addControl(new ic.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),this.map.on("load",()=>{this.map.addSource("line1",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_1}}}),this.map.addSource("line2",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_2}}}),this.map.addLayer({id:"line1",type:"line",source:"line1",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f7911d","line-width":3}}),this.map.addLayer({id:"line2",type:"line",source:"line2",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#29abe2","line-width":3}}),this.map.loadImage("https://bus.sustcra.com/station_icon.png",(i,o)=>{if(i)throw i;this.map.addImage("bus-station",o),this.map.loadImage("https://bus.sustcra.com/bldg_icon.png",(u,a)=>{this.map.addImage("bldg-icon",a)}),this.map.loadImage("https://bus.sustcra.com/gate_icon.png",(u,a)=>{this.map.addImage("gate-icon",a)}),this.map.addSource("stations",{type:"geojson",data:this.stations_geojson}),this.map.addSource("bldgs",{type:"geojson",data:this.bldg_geojson}),this.map.addSource("gates",{type:"geojson",data:this.gate_geojson}),this.map.addLayer({id:"bus-station",type:"symbol",source:"stations",layout:{"icon-size":.075,"icon-image":"bus-station","text-field":["get","name"],"text-size":10,"text-offset":[0,1.25],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]}),this.map.addLayer({id:"bldgs",type:"symbol",source:"bldgs",layout:{"icon-size":.02,"icon-image":"bldg-icon","text-field":["get","name"],"text-size":9,"text-offset":[0,.3],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]}),this.map.addLayer({id:"gates",type:"symbol",source:"gates",layout:{"icon-size":.05,"icon-image":"gate-icon","text-field":["get","name"],"text-size":10,"text-offset":[0,.6],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]})})}),await this.fetch_bus(),this.timer=setInterval(()=>{this.refresh()},5e3)},async unmounted(){clearInterval(this.timer)}},xF={class:"map-container",ref:"myMap"};function bF(e,t,r,n,i,o){return Ze(),yt(Zn,null,[Wt("div",xF,null,512),Wt("span",null,"Time drift: "+Mr(e.time_difference)+" sec.",1),Tr('  <div id="map-style-menu">'),Tr('    <input id="osm-street" type="radio" name="rtoggle" value="light">'),Tr('    <label for="osm-street">light</label>'),Tr('    <input id="osm-blue" type="radio" name="rtoggle" value="dark">'),Tr('    <label for="osm-blue">dark</label>'),Tr("  </div>")],64)}const wF=Dr(yF,[["render",bF],["__scopeId","data-v-d1b770c2"],["__file","Realtime-map.vue"]]),SF={name:"weather-span",data:()=>({text:""}),mounted(){this.load_weather()},methods:{load_weather(){ji.get("https://api.sustech.online/weather").then(e=>{this.text=e.data.msg})}}},TF={id:"weather-container"},EF={id:"weather"};function CF(e,t,r,n,i,o){return Ze(),yt("div",TF,[Wt("span",EF,Mr(e.text),1)])}const AF=Dr(SF,[["render",CF],["__file","weather-span.vue"]]);var hi=63710088e-1,Cx={centimeters:hi*100,centimetres:hi*100,degrees:hi/111325,feet:hi*3.28084,inches:hi*39.37,kilometers:hi/1e3,kilometres:hi/1e3,meters:hi,metres:hi,miles:hi/1609.344,millimeters:hi*1e3,millimetres:hi*1e3,nauticalmiles:hi/1852,radians:1,yards:hi*1.0936},IF={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/hi,yards:1.0936133},X0={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Da(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function MF(e,t,r){switch(e){case"Point":return qn(t).geometry;case"LineString":return Ma(t).geometry;case"Polygon":return Ax(t).geometry;case"MultiPoint":return zM(t).geometry;case"MultiLineString":return RM(t).geometry;case"MultiPolygon":return BM(t).geometry;default:throw new Error(e+" is invalid")}}function qn(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ov(e[0])||!Ov(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return Da(n,t,r)}function PF(e,t,r){return r===void 0&&(r={}),gu(e.map(function(n){return qn(n,t)}),r)}function Ax(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var o=i[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<o[o.length-1].length;u++)if(o[o.length-1][u]!==o[0][u])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:e};return Da(a,t,r)}function DF(e,t,r){return r===void 0&&(r={}),gu(e.map(function(n){return Ax(n,t)}),r)}function Ma(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return Da(n,t,r)}function kF(e,t,r){return r===void 0&&(r={}),gu(e.map(function(n){return Ma(n,t)}),r)}function gu(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function RM(e,t,r){r===void 0&&(r={});var n={type:"MultiLineString",coordinates:e};return Da(n,t,r)}function zM(e,t,r){r===void 0&&(r={});var n={type:"MultiPoint",coordinates:e};return Da(n,t,r)}function BM(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return Da(n,t,r)}function LF(e,t,r){r===void 0&&(r={});var n={type:"GeometryCollection",geometries:e};return Da(n,t,r)}function OF(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function Ix(e,t){t===void 0&&(t="kilometers");var r=Cx[t];if(!r)throw new Error(t+" units is invalid");return e*r}function gg(e,t){t===void 0&&(t="kilometers");var r=Cx[t];if(!r)throw new Error(t+" units is invalid");return e/r}function RF(e,t){return Nc(gg(e,t))}function zF(e){var t=e%360;return t<0&&(t+=360),t}function Nc(e){var t=e%(2*Math.PI);return t*180/Math.PI}function Mi(e){var t=e%360;return t*Math.PI/180}function BF(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return Ix(gg(e,t),r)}function FF(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=X0[t];if(!n)throw new Error("invalid original units");var i=X0[r];if(!i)throw new Error("invalid final units");return e/n*i}function Ov(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Mx(e){return!!e&&e.constructor===Object}function NF(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!Ov(t))throw new Error("bbox must only contain numbers")})}function VF(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const UF=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:X0,bearingToAzimuth:zF,convertArea:FF,convertLength:BF,degreesToRadians:Mi,earthRadius:hi,factors:Cx,feature:Da,featureCollection:gu,geometry:MF,geometryCollection:LF,isNumber:Ov,isObject:Mx,lengthToDegrees:RF,lengthToRadians:gg,lineString:Ma,lineStrings:kF,multiLineString:RM,multiPoint:zM,multiPolygon:BM,point:qn,points:PF,polygon:Ax,polygons:DF,radiansToDegrees:Nc,radiansToLength:Ix,round:OF,unitsFactors:IF,validateBBox:NF,validateId:VF},Symbol.toStringTag,{value:"Module"}));function Xc(e,t,r){if(e!==null)for(var n,i,o,u,a,f,p,v=0,_=0,y,S=e.type,A=S==="FeatureCollection",I=S==="Feature",M=A?e.features.length:1,k=0;k<M;k++){p=A?e.features[k].geometry:I?e.geometry:e,y=p?p.type==="GeometryCollection":!1,a=y?p.geometries.length:1;for(var L=0;L<a;L++){var z=0,V=0;if(u=y?p.geometries[L]:p,u!==null){f=u.coordinates;var H=u.type;switch(v=r&&(H==="Polygon"||H==="MultiPolygon")?1:0,H){case null:break;case"Point":if(t(f,_,k,z,V)===!1)return!1;_++,z++;break;case"LineString":case"MultiPoint":for(n=0;n<f.length;n++){if(t(f[n],_,k,z,V)===!1)return!1;_++,H==="MultiPoint"&&z++}H==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(n=0;n<f.length;n++){for(i=0;i<f[n].length-v;i++){if(t(f[n][i],_,k,z,V)===!1)return!1;_++}H==="MultiLineString"&&z++,H==="Polygon"&&V++}H==="Polygon"&&z++;break;case"MultiPolygon":for(n=0;n<f.length;n++){for(V=0,i=0;i<f[n].length;i++){for(o=0;o<f[n][i].length-v;o++){if(t(f[n][i][o],_,k,z,V)===!1)return!1;_++}V++}z++}break;case"GeometryCollection":for(n=0;n<u.geometries.length;n++)if(Xc(u.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function $F(e,t,r,n){var i=r;return Xc(e,function(o,u,a,f,p){u===0&&r===void 0?i=o:i=t(i,o,u,a,f,p)},n),i}function FM(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function jF(e,t,r){var n=r;return FM(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function od(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function GF(e,t,r){var n=r;return od(e,function(i,o){o===0&&r===void 0?n=i:n=t(n,i,o)}),n}function HF(e){var t=[];return Xc(e,function(r){t.push(r)}),t}function Px(e,t){var r,n,i,o,u,a,f,p,v,_,y=0,S=e.type==="FeatureCollection",A=e.type==="Feature",I=S?e.features.length:1;for(r=0;r<I;r++){for(a=S?e.features[r].geometry:A?e.geometry:e,p=S?e.features[r].properties:A?e.properties:{},v=S?e.features[r].bbox:A?e.bbox:void 0,_=S?e.features[r].id:A?e.id:void 0,f=a?a.type==="GeometryCollection":!1,u=f?a.geometries.length:1,i=0;i<u;i++){if(o=f?a.geometries[i]:a,o===null){if(t(null,y,p,v,_)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,y,p,v,_)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<o.geometries.length;n++)if(t(o.geometries[n],y,p,v,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function qF(e,t,r){var n=r;return Px(e,function(i,o,u,a,f){o===0&&r===void 0?n=i:n=t(n,i,o,u,a,f)}),n}function Yc(e,t){Px(e,function(r,n,i,o,u){var a=r===null?null:r.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return t(Da(r,i,{bbox:o,id:u}),n,0)===!1?!1:void 0}var f;switch(a){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var p=0;p<r.coordinates.length;p++){var v=r.coordinates[p],_={type:f,coordinates:v};if(t(Da(_,i),n,p)===!1)return!1}})}function WF(e,t,r){var n=r;return Yc(e,function(i,o,u){o===0&&u===0&&r===void 0?n=i:n=t(n,i,o,u)}),n}function NM(e,t){Yc(e,function(r,n,i){var o=0;if(r.geometry){var u=r.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var a,f=0,p=0,v=0;if(Xc(r,function(_,y,S,A,I){if(a===void 0||n>f||A>p||I>v){a=_,f=n,p=A,v=I,o=0;return}var M=Ma([a,_],r.properties);if(t(M,n,i,I,o)===!1)return!1;o++,a=_})===!1)return!1}}})}function VM(e,t,r){var n=r,i=!1;return NM(e,function(o,u,a,f,p){i===!1&&r===void 0?n=o:n=t(n,o,u,a,f,p),i=!0}),n}function UM(e,t){if(!e)throw new Error("geojson is required");Yc(e,function(r,n,i){if(r.geometry!==null){var o=r.geometry.type,u=r.geometry.coordinates;switch(o){case"LineString":if(t(r,n,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<u.length;a++)if(t(Ma(u[a],r.properties),n,i,a)===!1)return!1;break}}})}function ZF(e,t,r){var n=r;return UM(e,function(i,o,u,a){o===0&&r===void 0?n=i:n=t(n,i,o,u,a)}),n}function XF(e,t){if(t=t||{},!Mx(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.segmentIndex||0,u=t.properties,a;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),u=u||e.features[r].properties,a=e.features[r].geometry;break;case"Feature":u=u||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var f=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=f.length+o-1),Ma([f[o],f[o+1]],u,t);case"Polygon":return i<0&&(i=f.length+i),o<0&&(o=f[i].length+o-1),Ma([f[i][o],f[i][o+1]],u,t);case"MultiLineString":return n<0&&(n=f.length+n),o<0&&(o=f[n].length+o-1),Ma([f[n][o],f[n][o+1]],u,t);case"MultiPolygon":return n<0&&(n=f.length+n),i<0&&(i=f[n].length+i),o<0&&(o=f[n][i].length-o-1),Ma([f[n][i][o],f[n][i][o+1]],u,t)}throw new Error("geojson is invalid")}function YF(e,t){if(t=t||{},!Mx(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,o=t.coordIndex||0,u=t.properties,a;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),u=u||e.features[r].properties,a=e.features[r].geometry;break;case"Feature":u=u||e.properties,a=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=e;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var f=a.coordinates;switch(a.type){case"Point":return qn(f,u,t);case"MultiPoint":return n<0&&(n=f.length+n),qn(f[n],u,t);case"LineString":return o<0&&(o=f.length+o),qn(f[o],u,t);case"Polygon":return i<0&&(i=f.length+i),o<0&&(o=f[i].length+o),qn(f[i][o],u,t);case"MultiLineString":return n<0&&(n=f.length+n),o<0&&(o=f[n].length+o),qn(f[n][o],u,t);case"MultiPolygon":return n<0&&(n=f.length+n),i<0&&(i=f[n].length+i),o<0&&(o=f[n][i].length-o),qn(f[n][i][o],u,t)}throw new Error("geojson is invalid")}const KF=Object.freeze(Object.defineProperty({__proto__:null,coordAll:HF,coordEach:Xc,coordReduce:$F,featureEach:od,featureReduce:GF,findPoint:YF,findSegment:XF,flattenEach:Yc,flattenReduce:WF,geomEach:Px,geomReduce:qF,lineEach:UM,lineReduce:ZF,propEach:FM,propReduce:jF,segmentEach:NM,segmentReduce:VM},Symbol.toStringTag,{value:"Module"}));function Y0(e){var t=[1/0,1/0,-1/0,-1/0];return Xc(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}Y0.default=Y0;const JF=Object.freeze(Object.defineProperty({__proto__:null,default:Y0},Symbol.toStringTag,{value:"Module"}));function es(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Vc(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function QF(e){return e.type==="Feature"?e.geometry:e}function Ws(e,t,r){r===void 0&&(r={});var n=es(e),i=es(t),o=Mi(i[1]-n[1]),u=Mi(i[0]-n[0]),a=Mi(n[1]),f=Mi(i[1]),p=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(a)*Math.cos(f);return Ix(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),r.units)}function eN(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return $M(e);case"FeatureCollection":return tN(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Dx(e);default:throw new Error("unknown GeoJSON type")}}function $M(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=jM(e.properties),t.geometry=Dx(e.geometry),t}function jM(e){var t={};return e&&Object.keys(e).forEach(function(r){var n=e[r];typeof n=="object"?n===null?t[r]=null:Array.isArray(n)?t[r]=n.map(function(i){return i}):t[r]=jM(n):t[r]=n}),t}function tN(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(r){return $M(r)}),t}function Dx(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(r){return Dx(r)}),t):(t.coordinates=GM(e.coordinates),t)}function GM(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(r){return GM(r)})}function K0(e,t,r,n){n===void 0&&(n={});var i=es(e),o=Mi(i[0]),u=Mi(i[1]),a=Mi(r),f=gg(t,n.units),p=Math.asin(Math.sin(u)*Math.cos(f)+Math.cos(u)*Math.sin(f)*Math.cos(a)),v=o+Math.atan2(Math.sin(a)*Math.sin(f)*Math.cos(u),Math.cos(f)-Math.sin(u)*Math.sin(p)),_=Nc(v),y=Nc(p);return qn([_,y],n.properties)}function kx(e,t,r){if(r===void 0&&(r={}),r.final===!0)return rN(e,t);var n=es(e),i=es(t),o=Mi(n[0]),u=Mi(i[0]),a=Mi(n[1]),f=Mi(i[1]),p=Math.sin(u-o)*Math.cos(f),v=Math.cos(a)*Math.sin(f)-Math.sin(a)*Math.cos(f)*Math.cos(u-o);return Nc(Math.atan2(p,v))}function rN(e,t){var r=kx(t,e);return r=(r+180)%360,r}function iT(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var r,n=1/0,i=0;return od(t,function(o,u){var a=Ws(e,o);a<n&&(i=u,n=a)}),r=eN(t.features[i]),r.properties.featureIndex=i,r.properties.distanceToPoint=n,r}function aT(e){if(!e)throw new Error("geojson is required");var t=[];return Yc(e,function(r){nN(r,t)}),gu(t)}function nN(e,t){var r=[],n=e.geometry;if(n!==null){switch(n.type){case"Polygon":r=Vc(n);break;case"LineString":r=[Vc(n)]}r.forEach(function(i){var o=iN(i,e.properties);o.forEach(function(u){u.id=t.length,t.push(u)})})}}function iN(e,t){var r=[];return e.reduce(function(n,i){var o=Ma([n,i],t);return o.bbox=aN(n,i),r.push(o),i}),r}function aN(e,t){var r=e[0],n=e[1],i=t[0],o=t[1],u=r<i?r:i,a=n<o?n:o,f=r>i?r:i,p=n>o?n:o;return[u,a,f,p]}var Rv={},oN={get exports(){return Rv},set exports(e){Rv=e}},J0={},sN={get exports(){return J0},set exports(e){J0=e}};(function(e,t){(function(r,n){e.exports=n()})(SM,function(){function r(L,z,V,H,Z){(function ee(Y,ae,le,pe,ye){for(;pe>le;){if(pe-le>600){var ve=pe-le+1,Pe=ae-le+1,$e=Math.log(ve),Ce=.5*Math.exp(2*$e/3),at=.5*Math.sqrt($e*Ce*(ve-Ce)/ve)*(Pe-ve/2<0?-1:1),st=Math.max(le,Math.floor(ae-Pe*Ce/ve+at)),xt=Math.min(pe,Math.floor(ae+(ve-Pe)*Ce/ve+at));ee(Y,ae,st,xt,ye)}var St=Y[ae],Xt=le,Dt=pe;for(n(Y,le,ae),ye(Y[pe],St)>0&&n(Y,le,pe);Xt<Dt;){for(n(Y,Xt,Dt),Xt++,Dt--;ye(Y[Xt],St)<0;)Xt++;for(;ye(Y[Dt],St)>0;)Dt--}ye(Y[le],St)===0?n(Y,le,Dt):n(Y,++Dt,pe),Dt<=ae&&(le=Dt+1),ae<=Dt&&(pe=Dt-1)}})(L,z,V||0,H||L.length-1,Z||i)}function n(L,z,V){var H=L[z];L[z]=L[V],L[V]=H}function i(L,z){return L<z?-1:L>z?1:0}var o=function(L){L===void 0&&(L=9),this._maxEntries=Math.max(4,L),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function u(L,z,V){if(!V)return z.indexOf(L);for(var H=0;H<z.length;H++)if(V(L,z[H]))return H;return-1}function a(L,z){f(L,0,L.children.length,z,L)}function f(L,z,V,H,Z){Z||(Z=M(null)),Z.minX=1/0,Z.minY=1/0,Z.maxX=-1/0,Z.maxY=-1/0;for(var ee=z;ee<V;ee++){var Y=L.children[ee];p(Z,L.leaf?H(Y):Y)}return Z}function p(L,z){return L.minX=Math.min(L.minX,z.minX),L.minY=Math.min(L.minY,z.minY),L.maxX=Math.max(L.maxX,z.maxX),L.maxY=Math.max(L.maxY,z.maxY),L}function v(L,z){return L.minX-z.minX}function _(L,z){return L.minY-z.minY}function y(L){return(L.maxX-L.minX)*(L.maxY-L.minY)}function S(L){return L.maxX-L.minX+(L.maxY-L.minY)}function A(L,z){return L.minX<=z.minX&&L.minY<=z.minY&&z.maxX<=L.maxX&&z.maxY<=L.maxY}function I(L,z){return z.minX<=L.maxX&&z.minY<=L.maxY&&z.maxX>=L.minX&&z.maxY>=L.minY}function M(L){return{children:L,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function k(L,z,V,H,Z){for(var ee=[z,V];ee.length;)if(!((V=ee.pop())-(z=ee.pop())<=H)){var Y=z+Math.ceil((V-z)/H/2)*H;r(L,Y,z,V,Z),ee.push(z,Y,Y,V)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(L){var z=this.data,V=[];if(!I(L,z))return V;for(var H=this.toBBox,Z=[];z;){for(var ee=0;ee<z.children.length;ee++){var Y=z.children[ee],ae=z.leaf?H(Y):Y;I(L,ae)&&(z.leaf?V.push(Y):A(L,ae)?this._all(Y,V):Z.push(Y))}z=Z.pop()}return V},o.prototype.collides=function(L){var z=this.data;if(!I(L,z))return!1;for(var V=[];z;){for(var H=0;H<z.children.length;H++){var Z=z.children[H],ee=z.leaf?this.toBBox(Z):Z;if(I(L,ee)){if(z.leaf||A(L,ee))return!0;V.push(Z)}}z=V.pop()}return!1},o.prototype.load=function(L){if(!L||!L.length)return this;if(L.length<this._minEntries){for(var z=0;z<L.length;z++)this.insert(L[z]);return this}var V=this._build(L.slice(),0,L.length-1,0);if(this.data.children.length)if(this.data.height===V.height)this._splitRoot(this.data,V);else{if(this.data.height<V.height){var H=this.data;this.data=V,V=H}this._insert(V,this.data.height-V.height-1,!0)}else this.data=V;return this},o.prototype.insert=function(L){return L&&this._insert(L,this.data.height-1),this},o.prototype.clear=function(){return this.data=M([]),this},o.prototype.remove=function(L,z){if(!L)return this;for(var V,H,Z,ee=this.data,Y=this.toBBox(L),ae=[],le=[];ee||ae.length;){if(ee||(ee=ae.pop(),H=ae[ae.length-1],V=le.pop(),Z=!0),ee.leaf){var pe=u(L,ee.children,z);if(pe!==-1)return ee.children.splice(pe,1),ae.push(ee),this._condense(ae),this}Z||ee.leaf||!A(ee,Y)?H?(V++,ee=H.children[V],Z=!1):ee=null:(ae.push(ee),le.push(V),V=0,H=ee,ee=ee.children[0])}return this},o.prototype.toBBox=function(L){return L},o.prototype.compareMinX=function(L,z){return L.minX-z.minX},o.prototype.compareMinY=function(L,z){return L.minY-z.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(L){return this.data=L,this},o.prototype._all=function(L,z){for(var V=[];L;)L.leaf?z.push.apply(z,L.children):V.push.apply(V,L.children),L=V.pop();return z},o.prototype._build=function(L,z,V,H){var Z,ee=V-z+1,Y=this._maxEntries;if(ee<=Y)return a(Z=M(L.slice(z,V+1)),this.toBBox),Z;H||(H=Math.ceil(Math.log(ee)/Math.log(Y)),Y=Math.ceil(ee/Math.pow(Y,H-1))),(Z=M([])).leaf=!1,Z.height=H;var ae=Math.ceil(ee/Y),le=ae*Math.ceil(Math.sqrt(Y));k(L,z,V,le,this.compareMinX);for(var pe=z;pe<=V;pe+=le){var ye=Math.min(pe+le-1,V);k(L,pe,ye,ae,this.compareMinY);for(var ve=pe;ve<=ye;ve+=ae){var Pe=Math.min(ve+ae-1,ye);Z.children.push(this._build(L,ve,Pe,H-1))}}return a(Z,this.toBBox),Z},o.prototype._chooseSubtree=function(L,z,V,H){for(;H.push(z),!z.leaf&&H.length-1!==V;){for(var Z=1/0,ee=1/0,Y=void 0,ae=0;ae<z.children.length;ae++){var le=z.children[ae],pe=y(le),ye=(ve=L,Pe=le,(Math.max(Pe.maxX,ve.maxX)-Math.min(Pe.minX,ve.minX))*(Math.max(Pe.maxY,ve.maxY)-Math.min(Pe.minY,ve.minY))-pe);ye<ee?(ee=ye,Z=pe<Z?pe:Z,Y=le):ye===ee&&pe<Z&&(Z=pe,Y=le)}z=Y||z.children[0]}var ve,Pe;return z},o.prototype._insert=function(L,z,V){var H=V?L:this.toBBox(L),Z=[],ee=this._chooseSubtree(H,this.data,z,Z);for(ee.children.push(L),p(ee,H);z>=0&&Z[z].children.length>this._maxEntries;)this._split(Z,z),z--;this._adjustParentBBoxes(H,Z,z)},o.prototype._split=function(L,z){var V=L[z],H=V.children.length,Z=this._minEntries;this._chooseSplitAxis(V,Z,H);var ee=this._chooseSplitIndex(V,Z,H),Y=M(V.children.splice(ee,V.children.length-ee));Y.height=V.height,Y.leaf=V.leaf,a(V,this.toBBox),a(Y,this.toBBox),z?L[z-1].children.push(Y):this._splitRoot(V,Y)},o.prototype._splitRoot=function(L,z){this.data=M([L,z]),this.data.height=L.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(L,z,V){for(var H,Z,ee,Y,ae,le,pe,ye=1/0,ve=1/0,Pe=z;Pe<=V-z;Pe++){var $e=f(L,0,Pe,this.toBBox),Ce=f(L,Pe,V,this.toBBox),at=(Z=$e,ee=Ce,Y=void 0,ae=void 0,le=void 0,pe=void 0,Y=Math.max(Z.minX,ee.minX),ae=Math.max(Z.minY,ee.minY),le=Math.min(Z.maxX,ee.maxX),pe=Math.min(Z.maxY,ee.maxY),Math.max(0,le-Y)*Math.max(0,pe-ae)),st=y($e)+y(Ce);at<ye?(ye=at,H=Pe,ve=st<ve?st:ve):at===ye&&st<ve&&(ve=st,H=Pe)}return H||V-z},o.prototype._chooseSplitAxis=function(L,z,V){var H=L.leaf?this.compareMinX:v,Z=L.leaf?this.compareMinY:_;this._allDistMargin(L,z,V,H)<this._allDistMargin(L,z,V,Z)&&L.children.sort(H)},o.prototype._allDistMargin=function(L,z,V,H){L.children.sort(H);for(var Z=this.toBBox,ee=f(L,0,z,Z),Y=f(L,V-z,V,Z),ae=S(ee)+S(Y),le=z;le<V-z;le++){var pe=L.children[le];p(ee,L.leaf?Z(pe):pe),ae+=S(ee)}for(var ye=V-z-1;ye>=z;ye--){var ve=L.children[ye];p(Y,L.leaf?Z(ve):ve),ae+=S(Y)}return ae},o.prototype._adjustParentBBoxes=function(L,z,V){for(var H=V;H>=0;H--)p(z[H],L)},o.prototype._condense=function(L){for(var z=L.length-1,V=void 0;z>=0;z--)L[z].children.length===0?z>0?(V=L[z-1].children).splice(V.indexOf(L[z]),1):this.clear():a(L[z],this.toBBox)},o})})(sN);const lN=xx(UF),uN=xx(KF),cN=xx(JF);var ho=J0,HM=lN,qM=uN,ac=cN.default,hN=qM.featureEach;qM.coordEach;HM.polygon;var oT=HM.featureCollection;function WM(e){var t=new ho(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:ac(r),ho.prototype.insert.call(this,r)},t.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:ac(i),n.push(i)}):hN(r,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:ac(i),n.push(i)}),ho.prototype.load.call(this,n)},t.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:ac(r),ho.prototype.remove.call(this,r,n)},t.clear=function(){return ho.prototype.clear.call(this)},t.search=function(r){var n=ho.prototype.search.call(this,this.toBBox(r));return oT(n)},t.collides=function(r){return ho.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=ho.prototype.all.call(this);return oT(r)},t.toJSON=function(){return ho.prototype.toJSON.call(this)},t.fromJSON=function(r){return ho.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=ac(r);else if(r.type==="FeatureCollection")n=ac(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}oN.exports=WM;Rv.default=WM;function fN(e,t){var r={},n=[];if(e.type==="LineString"&&(e=Da(e)),t.type==="LineString"&&(t=Da(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var i=sT(e,t);return i&&n.push(i),gu(n)}var o=Rv();return o.load(aT(t)),od(aT(e),function(u){od(o.search(u),function(a){var f=sT(u,a);if(f){var p=Vc(f).join(",");r[p]||(r[p]=!0,n.push(f))}})}),gu(n)}function sT(e,t){var r=Vc(e),n=Vc(t);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],o=r[0][1],u=r[1][0],a=r[1][1],f=n[0][0],p=n[0][1],v=n[1][0],_=n[1][1],y=(_-p)*(u-i)-(v-f)*(a-o),S=(v-f)*(o-p)-(_-p)*(i-f),A=(u-i)*(o-p)-(a-o)*(i-f);if(y===0)return S===0&&A===0,null;var I=S/y,M=A/y;if(I>=0&&I<=1&&M>=0&&M<=1){var k=i+I*(u-i),L=o+I*(a-o);return qn([k,L])}return null}function fo(e,t,r){r===void 0&&(r={});var n=qn([1/0,1/0],{dist:1/0}),i=0;return Yc(e,function(o){for(var u=Vc(o),a=0;a<u.length-1;a++){var f=qn(u[a]);f.properties.dist=Ws(t,f,r);var p=qn(u[a+1]);p.properties.dist=Ws(t,p,r);var v=Ws(f,p,r),_=Math.max(f.properties.dist,p.properties.dist),y=kx(f,p),S=K0(t,_,y+90,r),A=K0(t,_,y-90,r),I=fN(Ma([S.geometry.coordinates,A.geometry.coordinates]),Ma([f.geometry.coordinates,p.geometry.coordinates])),M=null;I.features.length>0&&(M=I.features[0],M.properties.dist=Ws(t,M,r),M.properties.location=i+Ws(f,M,r)),f.properties.dist<n.properties.dist&&(n=f,n.properties.index=a,n.properties.location=i),p.properties.dist<n.properties.dist&&(n=p,n.properties.index=a+1,n.properties.location=i+v),M&&M.properties.dist<n.properties.dist&&(n=M,n.properties.index=a),i+=v}}),n}function dN(e,t,r){r===void 0&&(r={});for(var n=QF(e),i=n.coordinates,o=0,u=0;u<i.length&&!(t>=o&&u===i.length-1);u++)if(o>=t){var a=t-o;if(a){var f=kx(i[u],i[u-1])-180,p=K0(i[u],a,f,r);return p}else return qn(i[u])}else o+=Ws(i[u],i[u+1],r);return qn(i[i.length-1])}function ga(e,t){return t===void 0&&(t={}),VM(e,function(r,n){var i=n.geometry.coordinates;return r+Ws(i[0],i[1],t)},0)}function pN(e,t,r){r===void 0&&(r={});var n;r.final?n=lT(es(t),es(e)):n=lT(es(e),es(t));var i=n>180?-(360-n):n;return i}function lT(e,t){var r=Mi(e[1]),n=Mi(t[1]),i=Mi(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),u=Math.atan2(i,o);return(Nc(u)+360)%360}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Q0=function(e,t){return Q0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Q0(e,t)};function mt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Q0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var mN=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),vN=function(){function e(){this.browser=new mN,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),au=new vN;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(au.wxa=!0,au.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?au.worker=!0:typeof navigator>"u"?(au.node=!0,au.svgSupported=!0):gN(navigator.userAgent,au);function gN(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),u=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),u&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var a=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in a||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in a)&&!("OTransition"in a),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const ar=au;var Lx=12,ZM="sans-serif",tl=Lx+"px "+ZM,_N=20,yN=100,xN="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function bN(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-_N)/yN;t[n]=i}return t}var wN=bN(xN),Kc={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=Kc.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||tl),e.measureText(r);r=r||"",n=n||tl;var o=/(\d+)px/.exec(n),u=o&&+o[1]||Lx,a=0;if(n.indexOf("mono")>=0)a=u*r.length;else for(var f=0;f<r.length;f++){var p=wN[r[f]];a+=p==null?u:p*u}return{width:a}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},XM=Jc(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),YM=Jc(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),Od=Object.prototype.toString,_g=Array.prototype,SN=_g.forEach,TN=_g.filter,Ox=_g.slice,EN=_g.map,uT=function(){}.constructor,om=uT?uT.prototype:null,Rx="__proto__",CN=2311;function KM(){return CN++}function JM(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function mr(e){if(e==null||typeof e!="object")return e;var t=e,r=Od.call(e);if(r==="[object Array]"){if(!Uf(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=mr(e[n])}}else if(YM[r]){if(!Uf(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!XM[r]&&!Uf(e)&&!zv(e)){t={};for(var u in e)e.hasOwnProperty(u)&&u!==Rx&&(t[u]=mr(e[u]))}return t}function un(e,t,r){if(!Vt(t)||!Vt(e))return r?mr(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==Rx){var i=e[n],o=t[n];Vt(o)&&Vt(i)&&!wt(o)&&!wt(i)&&!zv(o)&&!zv(i)&&!cT(o)&&!cT(i)&&!Uf(o)&&!Uf(i)?un(i,o,r):(r||!(n in e))&&(e[n]=mr(t[n]))}return e}function AN(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=un(r,e[n],t);return r}function lt(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==Rx&&(e[r]=t[r]);return e}function an(e,t,r){for(var n=Pr(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}Kc.createCanvas;function qr(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function IN(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Ja(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else an(e,t,r)}function Wi(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function we(e,t,r){if(e&&t)if(e.forEach&&e.forEach===SN)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function Bt(e,t,r){if(!e)return[];if(!t)return Bx(e);if(e.map&&e.map===EN)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function Jc(e,t,r,n){if(e&&t){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function di(e,t,r){if(!e)return[];if(!t)return Bx(e);if(e.filter&&e.filter===TN)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function Pr(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function MN(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(Ox.call(arguments)))}}var vn=om&&Zt(om.bind)?om.call.bind(om.bind):MN;function Wn(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(Ox.call(arguments)))}}function wt(e){return Array.isArray?Array.isArray(e):Od.call(e)==="[object Array]"}function Zt(e){return typeof e=="function"}function Rt(e){return typeof e=="string"}function e1(e){return Od.call(e)==="[object String]"}function gn(e){return typeof e=="number"}function Vt(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function cT(e){return!!XM[Od.call(e)]}function ua(e){return!!YM[Od.call(e)]}function zv(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function zx(e){return e.colorStops!=null}function Bv(e){return e!==e}function Uc(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function or(e,t){return e??t}function iv(e,t,r){return e??t??r}function Bx(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Ox.apply(e,t)}function QM(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Xa(e,t){if(!e)throw new Error(t)}function So(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var eP="__ec_primitive__";function t1(e){e[eP]=!0}function Uf(e){return e[eP]}var PN=function(){function e(){this.data={}}return e.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,r){return this.data[t]=r,this},e.prototype.keys=function(){return Pr(this.data)},e.prototype.forEach=function(t){var r=this.data;for(var n in r)r.hasOwnProperty(n)&&t(r[n],n)},e}(),tP=typeof Map=="function";function DN(){return tP?new Map:new PN}var kN=function(){function e(t){var r=wt(t);this.data=DN();var n=this;t instanceof e?t.each(i):t&&we(t,i);function i(o,u){r?n.set(o,u):n.set(u,o)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,r){return this.data.set(t,r),r},e.prototype.each=function(t,r){this.data.forEach(function(n,i){t.call(r,n,i)})},e.prototype.keys=function(){var t=this.data.keys();return tP?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function sr(e){return new kN(e)}function r1(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function yg(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&lt(r,t),r}function $c(e,t){return e.hasOwnProperty(t)}function ki(){}var av=180/Math.PI;function Qc(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function LN(e){return[e[0],e[1]]}function hT(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function rP(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function ON(e){return Math.sqrt(RN(e))}function RN(e){return e[0]*e[0]+e[1]*e[1]}function iy(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Fx(e,t){var r=ON(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function n1(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Ec=n1;function zN(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Dc=zN;function Pa(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function Cc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Ac(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var oc=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),BN=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new oc(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,u=i-this._y;this._x=n,this._y=i,r.drift(o,u,t),this.handler.dispatchToElement(new oc(r,t),"drag",t.event);var a=this.handler.findHover(n,i,r).target,f=this._dropTarget;this._dropTarget=a,r!==a&&(f&&a!==f&&this.handler.dispatchToElement(new oc(f,t),"dragleave",t.event),a&&a!==f&&this.handler.dispatchToElement(new oc(a,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new oc(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new oc(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const FN=BN;var NN=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var u=this._$eventProcessor;r!=null&&u&&u.normalizeQuery&&(r=u.normalizeQuery(r)),o[t]||(o[t]=[]);for(var a=0;a<o[t].length;a++)if(o[t][a].h===n)return this;var f={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},p=o[t].length-1,v=o[t][p];return v&&v.callAtLast?o[t].splice(p,0,f):o[t].push(f),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,u=n[t].length;o<u;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var u=r.length,a=i.length,f=0;f<a;f++){var p=i[f];if(!(o&&o.filter&&p.query!=null&&!o.filter(t,p.query)))switch(u){case 0:p.h.call(p.ctx);break;case 1:p.h.call(p.ctx,r[0]);break;case 2:p.h.call(p.ctx,r[0],r[1]);break;default:p.h.apply(p.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var u=r.length,a=r[u-1],f=i.length,p=0;p<f;p++){var v=i[p];if(!(o&&o.filter&&v.query!=null&&!o.filter(t,v.query)))switch(u){case 0:v.h.call(a);break;case 1:v.h.call(a,r[0]);break;case 2:v.h.call(a,r[0],r[1]);break;default:v.h.apply(a,r.slice(1,u-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const hs=NN;var VN=Math.log(2);function i1(e,t,r,n,i,o){var u=n+"-"+i,a=e.length;if(o.hasOwnProperty(u))return o[u];if(t===1){var f=Math.round(Math.log((1<<a)-1&~i)/VN);return e[r][f]}for(var p=n|1<<r,v=r+1;n&1<<v;)v++;for(var _=0,y=0,S=0;y<a;y++){var A=1<<y;A&i||(_+=(S%2?-1:1)*e[r][y]*i1(e,t-1,v,p,i|A,o),S++)}return o[u]=_,_}function fT(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=i1(r,8,0,0,0,n);if(i!==0){for(var o=[],u=0;u<8;u++)for(var a=0;a<8;a++)o[a]==null&&(o[a]=0),o[a]+=((u+a)%2?-1:1)*i1(r,7,u===0?1:0,1<<u,1<<a,n)/i*t[u];return function(f,p,v){var _=p*o[6]+v*o[7]+1;f[0]=(p*o[0]+v*o[1]+o[2])/_,f[1]=(p*o[3]+v*o[4]+o[5])/_}}}var dT="___zrEVENTSAVED",ay=[];function UN(e,t,r,n,i){return a1(ay,t,n,i,!0)&&a1(e,r,ay[0],ay[1])}function a1(e,t,r,n,i){if(t.getBoundingClientRect&&ar.domSupported&&!nP(t)){var o=t[dT]||(t[dT]={}),u=$N(t,o),a=jN(u,o,i);if(a)return a(e,r,n),!0}return!1}function $N(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var u=document.createElement("div"),a=u.style,f=o%2,p=(o>>1)%2;a.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[f]+":0",i[p]+":0",n[1-f]+":auto",i[1-p]+":auto",""].join("!important;"),e.appendChild(u),r.push(u)}return r}function jN(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,u=[],a=[],f=!0,p=0;p<4;p++){var v=e[p].getBoundingClientRect(),_=2*p,y=v.left,S=v.top;u.push(y,S),f=f&&o&&y===o[_]&&S===o[_+1],a.push(e[p].offsetLeft,e[p].offsetTop)}return f&&i?i:(t.srcCoords=u,t[n]=r?fT(a,u):fT(u,a))}function nP(e){return e.nodeName.toUpperCase()==="CANVAS"}var GN=/([&<>"'])/g,HN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function aa(e){return e==null?"":(e+"").replace(GN,function(t,r){return HN[r]})}var qN=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oy=[],WN=ar.browser.firefox&&+ar.browser.version.split(".")[0]<39;function o1(e,t,r,n){return r=r||{},n?pT(e,t,r):WN&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):pT(e,t,r),r}function pT(e,t,r){if(ar.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(nP(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(a1(oy,e,n,i)){r.zrX=oy[0],r.zrY=oy[1];return}}r.zrX=r.zrY=0}function Nx(e){return e||window.event}function ba(e,t,r){if(t=Nx(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var u=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];u&&o1(e,u,t,r)}else{o1(e,t,t,r);var o=ZN(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var a=t.button;return t.which==null&&a!==void 0&&qN.test(t.type)&&(t.which=a&1?1:a&2?3:a&4?2:0),t}function ZN(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function XN(e,t,r,n){e.addEventListener(t,r,n)}function YN(e,t,r,n){e.removeEventListener(t,r,n)}var iP=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0},KN=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(i){for(var o={points:[],touches:[],target:r,event:t},u=0,a=i.length;u<a;u++){var f=i[u],p=o1(n,f,{});o.points.push([p.zrX,p.zrY]),o.touches.push(f)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in sy)if(sy.hasOwnProperty(r)){var n=sy[r](this._track,t);if(n)return n}},e}();function mT(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function JN(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var sy={pinch:function(e,t){var r=e.length;if(r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=mT(n)/mT(i);!isFinite(o)&&(o=1),t.pinchScale=o;var u=JN(n);return t.pinchX=u[0],t.pinchY=u[1],{type:"pinch",target:e[0].target,event:t}}}}};function sd(){return[1,0,0,1,0,0]}function Vx(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function QN(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function kc(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],u=t[1]*r[2]+t[3]*r[3],a=t[0]*r[4]+t[2]*r[5]+t[4],f=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=u,e[4]=a,e[5]=f,e}function s1(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function Ux(e,t,r){var n=t[0],i=t[2],o=t[4],u=t[1],a=t[3],f=t[5],p=Math.sin(r),v=Math.cos(r);return e[0]=n*v+u*p,e[1]=-n*p+u*v,e[2]=i*v+a*p,e[3]=-i*p+v*a,e[4]=v*o+p*f,e[5]=v*f-p*o,e}function e7(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function $x(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],u=t[3],a=t[5],f=r*u-o*n;return f?(f=1/f,e[0]=u*f,e[1]=-o*f,e[2]=-n*f,e[3]=r*f,e[4]=(n*a-u*i)*f,e[5]=(o*i-r*a)*f,e):null}var t7=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const tn=t7;var sm=Math.min,lm=Math.max,Rl=new tn,zl=new tn,Bl=new tn,Fl=new tn,sf=new tn,lf=new tn,r7=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=sm(t.x,this.x),n=sm(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=lm(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=lm(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=sd();return s1(o,o,[-r.x,-r.y]),e7(o,o,[n,i]),s1(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,u=n.y,a=n.y+n.height,f=t.x,p=t.x+t.width,v=t.y,_=t.y+t.height,y=!(o<f||p<i||a<v||_<u);if(r){var S=1/0,A=0,I=Math.abs(o-f),M=Math.abs(p-i),k=Math.abs(a-v),L=Math.abs(_-u),z=Math.min(I,M),V=Math.min(k,L);o<f||p<i?z>A&&(A=z,I<M?tn.set(lf,-I,0):tn.set(lf,M,0)):z<S&&(S=z,I<M?tn.set(sf,I,0):tn.set(sf,-M,0)),a<v||_<u?V>A&&(A=V,k<L?tn.set(lf,0,-k):tn.set(lf,0,L)):z<S&&(S=z,k<L?tn.set(sf,0,k):tn.set(sf,0,-L))}return r&&tn.copy(r,y?sf:lf),y},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],u=n[4],a=n[5];t.x=r.x*i+u,t.y=r.y*o+a,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Rl.x=Bl.x=r.x,Rl.y=Fl.y=r.y,zl.x=Fl.x=r.x+r.width,zl.y=Bl.y=r.y+r.height,Rl.transform(n),Fl.transform(n),zl.transform(n),Bl.transform(n),t.x=sm(Rl.x,zl.x,Bl.x,Fl.x),t.y=sm(Rl.y,zl.y,Bl.y,Fl.y);var f=lm(Rl.x,zl.x,Bl.x,Fl.x),p=lm(Rl.y,zl.y,Bl.y,Fl.y);t.width=f-t.x,t.height=p-t.y},e}();const Zr=r7;var aP="silent";function n7(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:i7}}function i7(){iP(this.event)}var a7=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(hs),uf=function(){function e(t,r){this.x=t,this.y=r}return e}(),o7=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],ly=new Zr(0,0,0,0),oP=function(e){mt(t,e);function t(r,n,i,o,u){var a=e.call(this)||this;return a._hovered=new uf(0,0),a.storage=r,a.painter=n,a.painterRoot=o,a._pointerSize=u,i=i||new a7,a.proxy=null,a.setHandlerProxy(i),a._draggingMgr=new FN(a),a}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(we(o7,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=sP(this,n,i),u=this._hovered,a=u.target;a&&!a.__zr&&(u=this.findHover(u.x,u.y),a=u.target);var f=this._hovered=o?new uf(n,i):this.findHover(n,i),p=f.target,v=this.proxy;v.setCursor&&v.setCursor(p?p.cursor:"default"),a&&p!==a&&this.dispatchToElement(u,"mouseout",r),this.dispatchToElement(f,"mousemove",r),p&&p!==a&&this.dispatchToElement(f,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new uf(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var u="on"+n,a=n7(n,r,i);o&&(o[u]&&(a.cancelBubble=!!o[u].call(o,a)),o.trigger(n,a),o=o.__hostTarget?o.__hostTarget:o.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(n,a),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(f){typeof f[u]=="function"&&f[u].call(f,a),f.trigger&&f.trigger(n,a)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),u=new uf(r,n);if(vT(o,u,r,n,i),this._pointerSize&&!u.target){for(var a=[],f=this._pointerSize,p=f/2,v=new Zr(r-p,n-p,f,f),_=o.length-1;_>=0;_--){var y=o[_];y!==i&&!y.ignore&&!y.ignoreCoarsePointer&&(!y.parent||!y.parent.ignoreCoarsePointer)&&(ly.copy(y.getBoundingRect()),y.transform&&ly.applyTransform(y.transform),ly.intersect(v)&&a.push(y))}if(a.length)for(var S=4,A=Math.PI/12,I=Math.PI*2,M=0;M<p;M+=S)for(var k=0;k<I;k+=A){var L=r+M*Math.cos(k),z=n+M*Math.sin(k);if(vT(a,u,L,z,i),u.target)return u}}return u},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new KN);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var u=o.type;r.gestureEvent=u;var a=new uf;a.target=o.target,this.dispatchToElement(a,u,o.event)}},t}(hs);we(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){oP.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=sP(this,r,n),o,u;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),u=o.target),e==="mousedown")this._downEl=u,this._downPoint=[t.zrX,t.zrY],this._upEl=u;else if(e==="mouseup")this._upEl=u;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||Ec(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function s7(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var u=n.getClipPath();if(u&&!u.contain(t,r))return!1;n.silent&&(i=!0)}var a=n.__hostTarget;n=a||n.parent}return i?aP:!0}return!1}function vT(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var u=e[o],a=void 0;if(u!==i&&!u.ignore&&(a=s7(u,r,n))&&(!t.topTarget&&(t.topTarget=u),a!==aP)){t.target=u;break}}}function sP(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const l7=oP;var lP=32,cf=7;function u7(e){for(var t=0;e>=lP;)t|=e&1,e>>=1;return e+t}function gT(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;c7(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function c7(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function _T(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],u=t,a=n,f;u<a;)f=u+a>>>1,i(o,e[f])<0?a=f:u=f+1;var p=n-u;switch(p){case 3:e[u+3]=e[u+2];case 2:e[u+2]=e[u+1];case 1:e[u+1]=e[u];break;default:for(;p>0;)e[u+p]=e[u+p-1],p--}e[u]=o}}function uy(e,t,r,n,i,o){var u=0,a=0,f=1;if(o(e,t[r+i])>0){for(a=n-i;f<a&&o(e,t[r+i+f])>0;)u=f,f=(f<<1)+1,f<=0&&(f=a);f>a&&(f=a),u+=i,f+=i}else{for(a=i+1;f<a&&o(e,t[r+i-f])<=0;)u=f,f=(f<<1)+1,f<=0&&(f=a);f>a&&(f=a);var p=u;u=i-f,f=i-p}for(u++;u<f;){var v=u+(f-u>>>1);o(e,t[r+v])>0?u=v+1:f=v}return f}function cy(e,t,r,n,i,o){var u=0,a=0,f=1;if(o(e,t[r+i])<0){for(a=i+1;f<a&&o(e,t[r+i-f])<0;)u=f,f=(f<<1)+1,f<=0&&(f=a);f>a&&(f=a);var p=u;u=i-f,f=i-p}else{for(a=n-i;f<a&&o(e,t[r+i+f])>=0;)u=f,f=(f<<1)+1,f<=0&&(f=a);f>a&&(f=a),u+=i,f+=i}for(u++;u<f;){var v=u+(f-u>>>1);o(e,t[r+v])<0?f=v:u=v+1}return f}function h7(e,t){var r=cf,n,i,o=0;e.length;var u=[];n=[],i=[];function a(S,A){n[o]=S,i[o]=A,o+=1}function f(){for(;o>1;){var S=o-2;if(S>=1&&i[S-1]<=i[S]+i[S+1]||S>=2&&i[S-2]<=i[S]+i[S-1])i[S-1]<i[S+1]&&S--;else if(i[S]>i[S+1])break;v(S)}}function p(){for(;o>1;){var S=o-2;S>0&&i[S-1]<i[S+1]&&S--,v(S)}}function v(S){var A=n[S],I=i[S],M=n[S+1],k=i[S+1];i[S]=I+k,S===o-3&&(n[S+1]=n[S+2],i[S+1]=i[S+2]),o--;var L=cy(e[M],e,A,I,0,t);A+=L,I-=L,I!==0&&(k=uy(e[A+I-1],e,M,k,k-1,t),k!==0&&(I<=k?_(A,I,M,k):y(A,I,M,k)))}function _(S,A,I,M){var k=0;for(k=0;k<A;k++)u[k]=e[S+k];var L=0,z=I,V=S;if(e[V++]=e[z++],--M===0){for(k=0;k<A;k++)e[V+k]=u[L+k];return}if(A===1){for(k=0;k<M;k++)e[V+k]=e[z+k];e[V+M]=u[L];return}for(var H=r,Z,ee,Y;;){Z=0,ee=0,Y=!1;do if(t(e[z],u[L])<0){if(e[V++]=e[z++],ee++,Z=0,--M===0){Y=!0;break}}else if(e[V++]=u[L++],Z++,ee=0,--A===1){Y=!0;break}while((Z|ee)<H);if(Y)break;do{if(Z=cy(e[z],u,L,A,0,t),Z!==0){for(k=0;k<Z;k++)e[V+k]=u[L+k];if(V+=Z,L+=Z,A-=Z,A<=1){Y=!0;break}}if(e[V++]=e[z++],--M===0){Y=!0;break}if(ee=uy(u[L],e,z,M,0,t),ee!==0){for(k=0;k<ee;k++)e[V+k]=e[z+k];if(V+=ee,z+=ee,M-=ee,M===0){Y=!0;break}}if(e[V++]=u[L++],--A===1){Y=!0;break}H--}while(Z>=cf||ee>=cf);if(Y)break;H<0&&(H=0),H+=2}if(r=H,r<1&&(r=1),A===1){for(k=0;k<M;k++)e[V+k]=e[z+k];e[V+M]=u[L]}else{if(A===0)throw new Error;for(k=0;k<A;k++)e[V+k]=u[L+k]}}function y(S,A,I,M){var k=0;for(k=0;k<M;k++)u[k]=e[I+k];var L=S+A-1,z=M-1,V=I+M-1,H=0,Z=0;if(e[V--]=e[L--],--A===0){for(H=V-(M-1),k=0;k<M;k++)e[H+k]=u[k];return}if(M===1){for(V-=A,L-=A,Z=V+1,H=L+1,k=A-1;k>=0;k--)e[Z+k]=e[H+k];e[V]=u[z];return}for(var ee=r;;){var Y=0,ae=0,le=!1;do if(t(u[z],e[L])<0){if(e[V--]=e[L--],Y++,ae=0,--A===0){le=!0;break}}else if(e[V--]=u[z--],ae++,Y=0,--M===1){le=!0;break}while((Y|ae)<ee);if(le)break;do{if(Y=A-cy(u[z],e,S,A,A-1,t),Y!==0){for(V-=Y,L-=Y,A-=Y,Z=V+1,H=L+1,k=Y-1;k>=0;k--)e[Z+k]=e[H+k];if(A===0){le=!0;break}}if(e[V--]=u[z--],--M===1){le=!0;break}if(ae=M-uy(e[L],u,0,M,M-1,t),ae!==0){for(V-=ae,z-=ae,M-=ae,Z=V+1,H=z+1,k=0;k<ae;k++)e[Z+k]=u[H+k];if(M<=1){le=!0;break}}if(e[V--]=e[L--],--A===0){le=!0;break}ee--}while(Y>=cf||ae>=cf);if(le)break;ee<0&&(ee=0),ee+=2}if(r=ee,r<1&&(r=1),M===1){for(V-=A,L-=A,Z=V+1,H=L+1,k=A-1;k>=0;k--)e[Z+k]=e[H+k];e[V]=u[z]}else{if(M===0)throw new Error;for(H=V-(M-1),k=0;k<M;k++)e[H+k]=u[k]}}return{mergeRuns:f,forceMergeRuns:p,pushRun:a}}function ov(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<lP){o=gT(e,r,n,t),_T(e,r,n,r+o,t);return}var u=h7(e,t),a=u7(i);do{if(o=gT(e,r,n,t),o<a){var f=i;f>a&&(f=a),_T(e,r,r+f,r+o,t),o=f}u.pushRun(r,o),u.mergeRuns(),i-=o,r+=o}while(i!==0);u.forceMergeRuns()}}var yo=1,Pf=2,yc=4,yT=!1;function hy(){yT||(yT=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function xT(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var f7=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=xT}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,ov(n,xT)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,u=t;o;)o.parent=u,o.updateTransform(),r.push(o),u=o,o=o.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),f=0;f<a.length;f++){var p=a[f];t.__dirty&&(p.__dirty|=yo),this._updateAndAddDisplayable(p,r,n)}t.__dirty=0}else{var v=t;r&&r.length?v.__clipPaths=r:v.__clipPaths&&v.__clipPaths.length>0&&(v.__clipPaths=[]),isNaN(v.z)&&(hy(),v.z=0),isNaN(v.z2)&&(hy(),v.z2=0),isNaN(v.zlevel)&&(hy(),v.zlevel=0),this._displayList[this._displayListLen++]=v}var _=t.getDecalElement&&t.getDecalElement();_&&this._updateAndAddDisplayable(_,r,n);var y=t.getTextGuideLine();y&&this._updateAndAddDisplayable(y,r,n);var S=t.getTextContent();S&&this._updateAndAddDisplayable(S,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=qr(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const d7=f7;var uP;uP=ar.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const bT=uP;var sv={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-sv.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?sv.bounceIn(e*2)*.5:sv.bounceOut(e*2-1)*.5+.5}};const cP=sv;var um=Math.pow,Js=Math.sqrt,Fv=1e-8,hP=1e-4,wT=Js(3),cm=1/3,xo=Qc(),Ta=Qc(),Lc=Qc();function Zs(e){return e>-Fv&&e<Fv}function fP(e){return e>Fv||e<-Fv}function Qn(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function ST(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function dP(e,t,r,n,i,o){var u=n+3*(t-r)-e,a=3*(r-t*2+e),f=3*(t-e),p=e-i,v=a*a-3*u*f,_=a*f-9*u*p,y=f*f-3*a*p,S=0;if(Zs(v)&&Zs(_))if(Zs(a))o[0]=0;else{var A=-f/a;A>=0&&A<=1&&(o[S++]=A)}else{var I=_*_-4*v*y;if(Zs(I)){var M=_/v,A=-a/u+M,k=-M/2;A>=0&&A<=1&&(o[S++]=A),k>=0&&k<=1&&(o[S++]=k)}else if(I>0){var L=Js(I),z=v*a+1.5*u*(-_+L),V=v*a+1.5*u*(-_-L);z<0?z=-um(-z,cm):z=um(z,cm),V<0?V=-um(-V,cm):V=um(V,cm);var A=(-a-(z+V))/(3*u);A>=0&&A<=1&&(o[S++]=A)}else{var H=(2*v*a-3*u*_)/(2*Js(v*v*v)),Z=Math.acos(H)/3,ee=Js(v),Y=Math.cos(Z),A=(-a-2*ee*Y)/(3*u),k=(-a+ee*(Y+wT*Math.sin(Z)))/(3*u),ae=(-a+ee*(Y-wT*Math.sin(Z)))/(3*u);A>=0&&A<=1&&(o[S++]=A),k>=0&&k<=1&&(o[S++]=k),ae>=0&&ae<=1&&(o[S++]=ae)}}return S}function pP(e,t,r,n,i){var o=6*r-12*t+6*e,u=9*t+3*n-3*e-9*r,a=3*t-3*e,f=0;if(Zs(u)){if(fP(o)){var p=-a/o;p>=0&&p<=1&&(i[f++]=p)}}else{var v=o*o-4*u*a;if(Zs(v))i[0]=-o/(2*u);else if(v>0){var _=Js(v),p=(-o+_)/(2*u),y=(-o-_)/(2*u);p>=0&&p<=1&&(i[f++]=p),y>=0&&y<=1&&(i[f++]=y)}}return f}function Nv(e,t,r,n,i,o){var u=(t-e)*i+e,a=(r-t)*i+t,f=(n-r)*i+r,p=(a-u)*i+u,v=(f-a)*i+a,_=(v-p)*i+p;o[0]=e,o[1]=u,o[2]=p,o[3]=_,o[4]=_,o[5]=v,o[6]=f,o[7]=n}function p7(e,t,r,n,i,o,u,a,f,p,v){var _,y=.005,S=1/0,A,I,M,k;xo[0]=f,xo[1]=p;for(var L=0;L<1;L+=.05)Ta[0]=Qn(e,r,i,u,L),Ta[1]=Qn(t,n,o,a,L),M=Dc(xo,Ta),M<S&&(_=L,S=M);S=1/0;for(var z=0;z<32&&!(y<hP);z++)A=_-y,I=_+y,Ta[0]=Qn(e,r,i,u,A),Ta[1]=Qn(t,n,o,a,A),M=Dc(Ta,xo),A>=0&&M<S?(_=A,S=M):(Lc[0]=Qn(e,r,i,u,I),Lc[1]=Qn(t,n,o,a,I),k=Dc(Lc,xo),I<=1&&k<S?(_=I,S=k):y*=.5);return v&&(v[0]=Qn(e,r,i,u,_),v[1]=Qn(t,n,o,a,_)),Js(S)}function m7(e,t,r,n,i,o,u,a,f){for(var p=e,v=t,_=0,y=1/f,S=1;S<=f;S++){var A=S*y,I=Qn(e,r,i,u,A),M=Qn(t,n,o,a,A),k=I-p,L=M-v;_+=Math.sqrt(k*k+L*L),p=I,v=M}return _}function ei(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function l1(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function v7(e,t,r,n,i){var o=e-2*t+r,u=2*(t-e),a=e-n,f=0;if(Zs(o)){if(fP(u)){var p=-a/u;p>=0&&p<=1&&(i[f++]=p)}}else{var v=u*u-4*o*a;if(Zs(v)){var p=-u/(2*o);p>=0&&p<=1&&(i[f++]=p)}else if(v>0){var _=Js(v),p=(-u+_)/(2*o),y=(-u-_)/(2*o);p>=0&&p<=1&&(i[f++]=p),y>=0&&y<=1&&(i[f++]=y)}}return f}function mP(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Vv(e,t,r,n,i){var o=(t-e)*n+e,u=(r-t)*n+t,a=(u-o)*n+o;i[0]=e,i[1]=o,i[2]=a,i[3]=a,i[4]=u,i[5]=r}function g7(e,t,r,n,i,o,u,a,f){var p,v=.005,_=1/0;xo[0]=u,xo[1]=a;for(var y=0;y<1;y+=.05){Ta[0]=ei(e,r,i,y),Ta[1]=ei(t,n,o,y);var S=Dc(xo,Ta);S<_&&(p=y,_=S)}_=1/0;for(var A=0;A<32&&!(v<hP);A++){var I=p-v,M=p+v;Ta[0]=ei(e,r,i,I),Ta[1]=ei(t,n,o,I);var S=Dc(Ta,xo);if(I>=0&&S<_)p=I,_=S;else{Lc[0]=ei(e,r,i,M),Lc[1]=ei(t,n,o,M);var k=Dc(Lc,xo);M<=1&&k<_?(p=M,_=k):v*=.5}}return f&&(f[0]=ei(e,r,i,p),f[1]=ei(t,n,o,p)),Js(_)}function _7(e,t,r,n,i,o,u){for(var a=e,f=t,p=0,v=1/u,_=1;_<=u;_++){var y=_*v,S=ei(e,r,i,y),A=ei(t,n,o,y),I=S-a,M=A-f;p+=Math.sqrt(I*I+M*M),a=S,f=A}return p}var y7=/cubic-bezier\(([0-9,\.e ]+)\)/;function jx(e){var t=e&&y7.exec(e);if(t){var r=t[1].split(","),n=+So(r[0]),i=+So(r[1]),o=+So(r[2]),u=+So(r[3]);if(isNaN(n+i+o+u))return;var a=[];return function(f){return f<=0?0:f>=1?1:dP(0,n,o,1,f,a)&&Qn(0,i,u,1,a[0])}}}var x7=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||ki,this.ondestroy=t.ondestroy||ki,this.onrestart=t.onrestart||ki,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var u=this.easingFunc,a=u?u(o):o;if(this.onframe(a),o===1)if(this.loop){var f=i%n;this._startTime=t-f,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Zt(t)?t:cP[t]||jx(t)},e}();const b7=x7;var vP=function(){function e(t){this.value=t}return e}(),w7=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new vP(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),S7=function(){function e(t){this._list=new w7,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var u=n.len(),a=this._lastRemovedEntry;if(u>=this._maxSize&&u>0){var f=n.head;n.remove(f),delete i[f.key],o=f.value,this._lastRemovedEntry=f}a?a.value=r:a=new vP(r),a.key=t,n.insertEntry(a),i[t]=a}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const Rd=S7;var TT={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $f(e){return e=Math.round(e),e<0?0:e>255?255:e}function ET(e){return e<0?0:e>1?1:e}function fy(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?$f(parseFloat(t)/100*255):$f(parseInt(t,10))}function jf(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?ET(parseFloat(t)/100):ET(parseFloat(t))}function dy(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function xa(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function u1(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var gP=new Rd(20),hm=null;function sc(e,t){hm&&u1(hm,t),hm=gP.put(e,hm||t.slice())}function hu(e,t){if(e){t=t||[];var r=gP.get(e);if(r)return u1(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in TT)return u1(t,TT[n]),sc(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){xa(t,0,0,0,1);return}return xa(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),sc(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){xa(t,0,0,0,1);return}return xa(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),sc(e,t),t}return}var u=n.indexOf("("),a=n.indexOf(")");if(u!==-1&&a+1===i){var f=n.substr(0,u),p=n.substr(u+1,a-(u+1)).split(","),v=1;switch(f){case"rgba":if(p.length!==4)return p.length===3?xa(t,+p[0],+p[1],+p[2],1):xa(t,0,0,0,1);v=jf(p.pop());case"rgb":if(p.length>=3)return xa(t,fy(p[0]),fy(p[1]),fy(p[2]),p.length===3?v:jf(p[3])),sc(e,t),t;xa(t,0,0,0,1);return;case"hsla":if(p.length!==4){xa(t,0,0,0,1);return}return p[3]=jf(p[3]),CT(p,t),sc(e,t),t;case"hsl":if(p.length!==3){xa(t,0,0,0,1);return}return CT(p,t),sc(e,t),t;default:return}}xa(t,0,0,0,1)}}function CT(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=jf(e[1]),i=jf(e[2]),o=i<=.5?i*(n+1):i+n-i*n,u=i*2-o;return t=t||[],xa(t,$f(dy(u,o,r+1/3)*255),$f(dy(u,o,r)*255),$f(dy(u,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function AT(e,t){var r=hu(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return _P(r,r.length===4?"rgba":"rgb")}}function _P(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function Uv(e,t){var r=hu(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var $v=Math.round;function ld(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var r=hu(e);r&&(e="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:e,opacity:t??1}}var IT=1e-4;function Xs(e){return e<IT&&e>-IT}function fm(e){return $v(e*1e3)/1e3}function c1(e){return $v(e*1e4)/1e4}function T7(e){return"matrix("+fm(e[0])+","+fm(e[1])+","+fm(e[2])+","+fm(e[3])+","+c1(e[4])+","+c1(e[5])+")"}var E7={left:"start",right:"end",center:"middle",middle:"middle"};function C7(e,t,r){return r==="top"?e+=t/2:r==="bottom"&&(e-=t/2),e}function A7(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function I7(e){var t=e.style,r=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function yP(e){return e&&!!e.image}function M7(e){return e&&!!e.svgElement}function Gx(e){return yP(e)||M7(e)}function xP(e){return e.type==="linear"}function bP(e){return e.type==="radial"}function wP(e){return e&&(e.type==="linear"||e.type==="radial")}function xg(e){return"url(#"+e+")"}function SP(e){var t=e.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function TP(e){var t=e.x||0,r=e.y||0,n=(e.rotation||0)*av,i=or(e.scaleX,1),o=or(e.scaleY,1),u=e.skewX||0,a=e.skewY||0,f=[];return(t||r)&&f.push("translate("+t+"px,"+r+"px)"),n&&f.push("rotate("+n+")"),(i!==1||o!==1)&&f.push("scale("+i+","+o+")"),(u||a)&&f.push("skew("+$v(u*av)+"deg, "+$v(a*av)+"deg)"),f.join(" ")}var P7=function(){return ar.hasGlobalWindow&&Zt(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}(),h1=Array.prototype.slice;function Ko(e,t,r){return(t-e)*r+e}function py(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=Ko(t[o],r[o],n);return e}function D7(e,t,r,n){for(var i=t.length,o=i&&t[0].length,u=0;u<i;u++){e[u]||(e[u]=[]);for(var a=0;a<o;a++)e[u][a]=Ko(t[u][a],r[u][a],n)}return e}function dm(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function MT(e,t,r,n){for(var i=t.length,o=i&&t[0].length,u=0;u<i;u++){e[u]||(e[u]=[]);for(var a=0;a<o;a++)e[u][a]=t[u][a]+r[u][a]*n}return e}function k7(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),u=i[o-1]||{color:[0,0,0,0],offset:0},a=o;a<Math.max(r,n);a++)i.push({offset:u.offset,color:u.color.slice()})}function L7(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,u=i.length;if(o!==u){var a=o>u;if(a)n.length=u;else for(var f=o;f<u;f++)n.push(r===1?i[f]:h1.call(i[f]))}for(var p=n[0]&&n[0].length,f=0;f<n.length;f++)if(r===1)isNaN(n[f])&&(n[f]=i[f]);else for(var v=0;v<p;v++)isNaN(n[f][v])&&(n[f][v]=i[f][v])}}function lv(e){if(Wi(e)){var t=e.length;if(Wi(e[0])){for(var r=[],n=0;n<t;n++)r.push(h1.call(e[n]));return r}return h1.call(e)}return e}function uv(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function O7(e){return Wi(e&&e[0])?2:1}var pm=0,cv=1,EP=2,Df=3,f1=4,d1=5,PT=6;function DT(e){return e===f1||e===d1}function mm(e){return e===cv||e===EP}var hf=[0,0,0,0],R7=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,u=!1,a=PT,f=r;if(Wi(r)){var p=O7(r);a=p,(p===1&&!gn(r[0])||p===2&&!gn(r[0][0]))&&(u=!0)}else if(gn(r)&&!Bv(r))a=pm;else if(Rt(r))if(!isNaN(+r))a=pm;else{var v=hu(r);v&&(f=v,a=Df)}else if(zx(r)){var _=lt({},f);_.colorStops=Bt(r.colorStops,function(S){return{offset:S.offset,color:hu(S.color)}}),xP(r)?a=f1:bP(r)&&(a=d1),f=_}o===0?this.valType=a:(a!==this.valType||a===PT)&&(u=!0),this.discrete=this.discrete||u;var y={time:t,value:f,rawValue:r,percent:0};return n&&(y.easing=n,y.easingFunc=Zt(n)?n:cP[n]||jx(n)),i.push(y),y},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(I,M){return I.time-M.time});for(var i=this.valType,o=n.length,u=n[o-1],a=this.discrete,f=mm(i),p=DT(i),v=0;v<o;v++){var _=n[v],y=_.value,S=u.value;_.percent=_.time/t,a||(f&&v!==o-1?L7(y,S,i):p&&k7(y.colorStops,S.colorStops))}if(!a&&i!==d1&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var A=n[0].value,v=0;v<o;v++)i===pm?n[v].additiveValue=n[v].value-A:i===Df?n[v].additiveValue=dm([],n[v].value,A,-1):mm(i)&&(n[v].additiveValue=i===cv?dm([],n[v].value,A,-1):MT([],n[v].value,A,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,u=this.keyframes,a=u.length,f=this.propName,p=o===Df,v,_=this._lastFr,y=Math.min,S,A;if(a===1)S=A=u[0];else{if(r<0)v=0;else if(r<this._lastFrP){var I=y(_+1,a-1);for(v=I;v>=0&&!(u[v].percent<=r);v--);v=y(v,a-2)}else{for(v=_;v<a&&!(u[v].percent>r);v++);v=y(v-1,a-2)}A=u[v+1],S=u[v]}if(S&&A){this._lastFr=v,this._lastFrP=r;var M=A.percent-S.percent,k=M===0?1:y((r-S.percent)/M,1);A.easingFunc&&(k=A.easingFunc(k));var L=n?this._additiveValue:p?hf:t[f];if((mm(o)||p)&&!L&&(L=this._additiveValue=[]),this.discrete)t[f]=k<1?S.rawValue:A.rawValue;else if(mm(o))o===cv?py(L,S[i],A[i],k):D7(L,S[i],A[i],k);else if(DT(o)){var z=S[i],V=A[i],H=o===f1;t[f]={type:H?"linear":"radial",x:Ko(z.x,V.x,k),y:Ko(z.y,V.y,k),colorStops:Bt(z.colorStops,function(ee,Y){var ae=V.colorStops[Y];return{offset:Ko(ee.offset,ae.offset,k),color:uv(py([],ee.color,ae.color,k))}}),global:V.global},H?(t[f].x2=Ko(z.x2,V.x2,k),t[f].y2=Ko(z.y2,V.y2,k)):t[f].r=Ko(z.r,V.r,k)}else if(p)py(L,S[i],A[i],k),n||(t[f]=uv(L));else{var Z=Ko(S[i],A[i],k);n?this._additiveValue=Z:t[f]=Z}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===pm?t[n]=t[n]+i:r===Df?(hu(t[n],hf),dm(hf,hf,i,1),t[n]=uv(hf)):r===cv?dm(t[n],t[n],i,1):r===EP&&MT(t[n],t[n],i,1)},e}(),z7=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){JM("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,Pr(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,u=0;u<n.length;u++){var a=n[u],f=o[a];if(!f){f=o[a]=new R7(a);var p=void 0,v=this._getAdditiveTrack(a);if(v){var _=v.keyframes,y=_[_.length-1];p=y&&y.value,v.valType===Df&&p&&(p=uv(p))}else p=this._target[a];if(p==null)continue;t>0&&f.addKeyframe(0,lv(p),i),this._trackKeys.push(a)}f.addKeyframe(t,lv(r[a]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var u=this._trackKeys[o],a=this._tracks[u],f=this._getAdditiveTrack(u),p=a.keyframes,v=p.length;if(a.prepare(i,f),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var _=p[v-1];_&&(r._target[a.propName]=_.rawValue),a.setFinished()}else n.push(a)}if(n.length||this._force){var y=new b7({life:i,loop:this._loop,delay:this._delay||0,onframe:function(S){r._started=2;var A=r._additiveAnimators;if(A){for(var I=!1,M=0;M<A.length;M++)if(A[M]._clip){I=!0;break}I||(r._additiveAnimators=null)}for(var M=0;M<n.length;M++)n[M].step(r._target,S);var k=r._onframeCbs;if(k)for(var M=0;M<k.length;M++)k[M](r._target,S)},ondestroy:function(){r._doneCallback()}});this._clip=y,this.animation&&this.animation.addClip(y),t&&y.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Bt(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var u=n[t[o]];u&&!u.isFinished()&&(r?u.step(this._target,1):this._started===1&&u.step(this._target,0),u.setFinished())}for(var a=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},e.prototype.saveTo=function(t,r,n){if(t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],u=this._tracks[o];if(!(!u||u.isFinished())){var a=u.keyframes,f=a[n?0:a.length-1];f&&(t[o]=lv(f.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||Pr(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(o){var u=o.keyframes;if(u.length>1){var a=u.pop();o.addKeyframe(a.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const Hx=z7;function Ic(){return new Date().getTime()}var B7=function(e){mt(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=Ic()-this._pausedTime,i=n-this._time,o=this._head;o;){var u=o.next,a=o.step(n,i);a&&(o.ondestroy(),this.removeClip(o)),o=u}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(bT(n),!r._paused&&r.update())}bT(n)},t.prototype.start=function(){this._running||(this._time=Ic(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=Ic(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=Ic()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new Hx(r,n.loop);return this.addAnimator(i),i},t}(hs);const F7=B7;var N7=300,my=ar.domSupported,vy=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Bt(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),kT={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},LT=!1;function p1(e){var t=e.pointerType;return t==="pen"||t==="touch"}function V7(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function gy(e){e&&(e.zrByTouch=!0)}function U7(e,t){return ba(e.dom,new $7(e,t),!0)}function CP(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var $7=function(){function e(t,r){this.stopPropagation=ki,this.stopImmediatePropagation=ki,this.preventDefault=ki,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),Ha={mousedown:function(e){e=ba(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=ba(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=ba(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=ba(this.dom,e);var t=e.toElement||e.relatedTarget;CP(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){LT=!0,e=ba(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){LT||(e=ba(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=ba(this.dom,e),gy(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),Ha.mousemove.call(this,e),Ha.mousedown.call(this,e)},touchmove:function(e){e=ba(this.dom,e),gy(e),this.handler.processGesture(e,"change"),Ha.mousemove.call(this,e)},touchend:function(e){e=ba(this.dom,e),gy(e),this.handler.processGesture(e,"end"),Ha.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<N7&&Ha.click.call(this,e)},pointerdown:function(e){Ha.mousedown.call(this,e)},pointermove:function(e){p1(e)||Ha.mousemove.call(this,e)},pointerup:function(e){Ha.mouseup.call(this,e)},pointerout:function(e){p1(e)||Ha.mouseout.call(this,e)}};we(["click","dblclick","contextmenu"],function(e){Ha[e]=function(t){t=ba(this.dom,t),this.trigger(e,t)}});var m1={pointermove:function(e){p1(e)||m1.mousemove.call(this,e)},pointerup:function(e){m1.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function j7(e,t){var r=t.domHandlers;ar.pointerEventsSupported?we(vy.pointer,function(n){hv(t,n,function(i){r[n].call(e,i)})}):(ar.touchEventsSupported&&we(vy.touch,function(n){hv(t,n,function(i){r[n].call(e,i),V7(t)})}),we(vy.mouse,function(n){hv(t,n,function(i){i=Nx(i),t.touching||r[n].call(e,i)})}))}function G7(e,t){ar.pointerEventsSupported?we(kT.pointer,r):ar.touchEventsSupported||we(kT.mouse,r);function r(n){function i(o){o=Nx(o),CP(e,o.target)||(o=U7(e,o),t.domHandlers[n].call(e,o))}hv(t,n,i,{capture:!0})}}function hv(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,XN(e.domTarget,t,r,n)}function _y(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&YN(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var OT=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),H7=function(e){mt(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new OT(r,Ha),my&&(i._globalHandlerScope=new OT(document,m1)),j7(i,i._localHandlerScope),i}return t.prototype.dispose=function(){_y(this._localHandlerScope),my&&_y(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,my&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?G7(this,n):_y(n)}},t}(hs);const q7=H7;var AP=1;ar.hasGlobalWindow&&(AP=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var RT=AP,v1=.4,g1="#333",_1="#ccc",W7="#eee",zT=Vx,BT=5e-5;function Nl(e){return e>BT||e<-BT}var Vl=[],lc=[],yy=sd(),xy=Math.abs,qx=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Nl(this.rotation)||Nl(this.x)||Nl(this.y)||Nl(this.scaleX-1)||Nl(this.scaleY-1)||Nl(this.skewX)||Nl(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&zT(n);return}n=n||sd(),r?this.getLocalTransform(n):zT(n),t&&(r?kc(n,t,n):QN(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Vl);var n=Vl[0]<0?-1:1,i=Vl[1]<0?-1:1,o=((Vl[0]-n)*r+n)/Vl[0]||0,u=((Vl[1]-i)*r+i)/Vl[1]||0;t[0]*=o,t[1]*=o,t[2]*=u,t[3]*=u}this.invTransform=this.invTransform||sd(),$x(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(kc(lc,t.invTransform,r),r=lc);var n=this.originX,i=this.originY;(n||i)&&(yy[4]=n,yy[5]=i,kc(lc,r,yy),lc[4]-=n,lc[5]-=i,r=lc),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&Pa(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&Pa(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&xy(t[0]-1)>1e-10&&xy(t[3]-1)>1e-10?Math.sqrt(xy(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){IP(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,u=t.scaleY,a=t.anchorX,f=t.anchorY,p=t.rotation||0,v=t.x,_=t.y,y=t.skewX?Math.tan(t.skewX):0,S=t.skewY?Math.tan(-t.skewY):0;if(n||i||a||f){var A=n+a,I=i+f;r[4]=-A*o-y*I*u,r[5]=-I*u-S*A*o}else r[4]=r[5]=0;return r[0]=o,r[3]=u,r[1]=S*o,r[2]=y*u,p&&Ux(r,r,p),r[4]+=n+v,r[5]+=i+_,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),ud=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function IP(e,t){for(var r=0;r<ud.length;r++){var n=ud[r];e[n]=t[n]}}var FT={};function la(e,t){t=t||tl;var r=FT[t];r||(r=FT[t]=new Rd(500));var n=r.get(e);return n==null&&(n=Kc.measureText(e,t).width,r.put(e,n)),n}function NT(e,t,r,n){var i=la(e,t),o=bg(t),u=kf(0,i,r),a=xc(0,o,n),f=new Zr(u,a,i,o);return f}function Wx(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return NT(i[0],t,r,n);for(var u=new Zr(0,0,0,0),a=0;a<i.length;a++){var f=NT(i[a],t,r,n);a===0?u.copy(f):u.union(f)}return u}function kf(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function xc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function bg(e){return la("国",e)}function _u(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function MP(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,u=r.width,a=o/2,f=r.x,p=r.y,v="left",_="top";if(n instanceof Array)f+=_u(n[0],r.width),p+=_u(n[1],r.height),v=null,_=null;else switch(n){case"left":f-=i,p+=a,v="right",_="middle";break;case"right":f+=i+u,p+=a,_="middle";break;case"top":f+=u/2,p-=i,v="center",_="bottom";break;case"bottom":f+=u/2,p+=o+i,v="center";break;case"inside":f+=u/2,p+=a,v="center",_="middle";break;case"insideLeft":f+=i,p+=a,_="middle";break;case"insideRight":f+=u-i,p+=a,v="right",_="middle";break;case"insideTop":f+=u/2,p+=i,v="center";break;case"insideBottom":f+=u/2,p+=o-i,v="center",_="bottom";break;case"insideTopLeft":f+=i,p+=i;break;case"insideTopRight":f+=u-i,p+=i,v="right";break;case"insideBottomLeft":f+=i,p+=o-i,_="bottom";break;case"insideBottomRight":f+=u-i,p+=o-i,v="right",_="bottom";break}return e=e||{},e.x=f,e.y=p,e.align=v,e.verticalAlign=_,e}var by="__zr_normal__",wy=ud.concat(["ignore"]),Z7=Jc(ud,function(e,t){return e[t]=!0,e},{ignore:!1}),uc={},X7=new Zr(0,0,0,0),Zx=function(){function e(t){this.id=KM(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,u=void 0,a=void 0,f=!1;o.parent=i?this:null;var p=!1;if(o.copyTransform(r),n.position!=null){var v=X7;n.layoutRect?v.copy(n.layoutRect):v.copy(this.getBoundingRect()),i||v.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(uc,n,v):MP(uc,n,v),o.x=uc.x,o.y=uc.y,u=uc.align,a=uc.verticalAlign;var _=n.origin;if(_&&n.rotation!=null){var y=void 0,S=void 0;_==="center"?(y=v.width*.5,S=v.height*.5):(y=_u(_[0],v.width),S=_u(_[1],v.height)),p=!0,o.originX=-o.x+y+(i?0:v.x),o.originY=-o.y+S+(i?0:v.y)}}n.rotation!=null&&(o.rotation=n.rotation);var A=n.offset;A&&(o.x+=A[0],o.y+=A[1],p||(o.originX=-A[0],o.originY=-A[1]));var I=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,M=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),k=void 0,L=void 0,z=void 0;I&&this.canBeInsideText()?(k=n.insideFill,L=n.insideStroke,(k==null||k==="auto")&&(k=this.getInsideTextFill()),(L==null||L==="auto")&&(L=this.getInsideTextStroke(k),z=!0)):(k=n.outsideFill,L=n.outsideStroke,(k==null||k==="auto")&&(k=this.getOutsideFill()),(L==null||L==="auto")&&(L=this.getOutsideStroke(k),z=!0)),k=k||"#000",(k!==M.fill||L!==M.stroke||z!==M.autoStroke||u!==M.align||a!==M.verticalAlign)&&(f=!0,M.fill=k,M.stroke=L,M.autoStroke=z,M.align=u,M.verticalAlign=a,r.setDefaultTextStyle(M)),r.__dirty|=yo,f&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?_1:g1},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&hu(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),u=0;u<3;u++)n[u]=n[u]*i+(o?0:255)*(1-i);return n[3]=1,_P(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},lt(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(Vt(t))for(var n=t,i=Pr(n),o=0;o<i.length;o++){var u=i[o];this.attrKV(u,t[u])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==by)){var u=i.targetName,a=u?r[u]:r;i.saveTo(a)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,wy)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(by,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===by,u=this.hasState();if(!(!u&&o)){var a=this.currentStates,f=this.stateTransition;if(!(qr(a,t)>=0&&(r||a.length===1))){var p;if(this.stateProxy&&!o&&(p=this.stateProxy(t)),p||(p=this.states&&this.states[t]),!p&&!o){JM("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(p);var v=!!(p&&p.hoverLayer||i);v&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,p,this._normalState,r,!n&&!this.__inHover&&f&&f.duration>0,f);var _=this._textContent,y=this._textGuide;return _&&_.useState(t,r,n,v),y&&y.useState(t,r,n,v),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!v&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~yo),p}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,u=t.length,a=u===o.length;if(a){for(var f=0;f<u;f++)if(t[f]!==o[f]){a=!1;break}}if(a)return;for(var f=0;f<u;f++){var p=t[f],v=void 0;this.stateProxy&&(v=this.stateProxy(p,t)),v||(v=this.states[p]),v&&i.push(v)}var _=i[u-1],y=!!(_&&_.hoverLayer||n);y&&this._toggleHoverLayerFlag(!0);var S=this._mergeStates(i),A=this.stateTransition;this.saveCurrentToNormalState(S),this._applyStateObj(t.join(","),S,this._normalState,!1,!r&&!this.__inHover&&A&&A.duration>0,A);var I=this._textContent,M=this._textGuide;I&&I.useStates(t,r,y),M&&M.useStates(t,r,y),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!y&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~yo)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=qr(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=qr(i,t),u=qr(i,r)>=0;o>=0?u?i.splice(o,1):i[o]=r:n&&!u&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];lt(r,o),o.textConfig&&(n=n||{},lt(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,u){var a=!(r&&i);r&&r.textConfig?(this.textConfig=lt({},i?this.textConfig:n.textConfig),lt(this.textConfig,r.textConfig)):a&&n.textConfig&&(this.textConfig=n.textConfig);for(var f={},p=!1,v=0;v<wy.length;v++){var _=wy[v],y=o&&Z7[_];r&&r[_]!=null?y?(p=!0,f[_]=r[_]):this[_]=r[_]:a&&n[_]!=null&&(y?(p=!0,f[_]=n[_]):this[_]=n[_])}if(!o)for(var v=0;v<this.animators.length;v++){var S=this.animators[v],A=S.targetName;S.getLoop()||S.__changeFinalValue(A?(r||n)[A]:r||n)}p&&this._transitionState(t,f,u)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new qx,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),lt(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=yo;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new Hx(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,u=qr(o,t);u>=0&&o.splice(u,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],u=0;u<i;u++){var a=n[u];!t||t===a.scope?a.stop(r):o.push(a)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){Sy(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){Sy(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=Sy(this,r,n,i),u=0;u<o.length;u++)o[u].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=yo;function r(n,i,o,u){Object.defineProperty(t,n,{get:function(){if(!this[i]){var f=this[i]=[];a(this,f)}return this[i]},set:function(f){this[o]=f[0],this[u]=f[1],this[i]=f,a(this,f)}});function a(f,p){Object.defineProperty(p,0,{get:function(){return f[o]},set:function(v){f[o]=v}}),Object.defineProperty(p,1,{get:function(){return f[u]},set:function(v){f[u]=v}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Ja(Zx,hs);Ja(Zx,qx);function Sy(e,t,r,n,i){r=r||{};var o=[];PP(e,"",e,t,r,n,o,i);var u=o.length,a=!1,f=r.done,p=r.aborted,v=function(){a=!0,u--,u<=0&&(a?f&&f():p&&p())},_=function(){u--,u<=0&&(a?f&&f():p&&p())};u||f&&f(),o.length>0&&r.during&&o[0].during(function(A,I){r.during(I)});for(var y=0;y<o.length;y++){var S=o[y];v&&S.done(v),_&&S.aborted(_),r.force&&S.duration(r.duration),S.start(r.easing)}return o}function Ty(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function Y7(e){return Wi(e[0])}function K7(e,t,r){if(Wi(t[r]))if(Wi(e[r])||(e[r]=[]),ua(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),Ty(e[r],t[r],n))}else{var i=t[r],o=e[r],u=i.length;if(Y7(i))for(var a=i[0].length,f=0;f<u;f++)o[f]?Ty(o[f],i[f],a):o[f]=Array.prototype.slice.call(i[f]);else Ty(o,i,u);o.length=i.length}else e[r]=t[r]}function J7(e,t){return e===t||Wi(e)&&Wi(t)&&Q7(e,t)}function Q7(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function PP(e,t,r,n,i,o,u,a){for(var f=Pr(n),p=i.duration,v=i.delay,_=i.additive,y=i.setToFinal,S=!Vt(o),A=e.animators,I=[],M=0;M<f.length;M++){var k=f[M],L=n[k];if(L!=null&&r[k]!=null&&(S||o[k]))if(Vt(L)&&!Wi(L)&&!zx(L)){if(t){a||(r[k]=L,e.updateDuringAnimation(t));continue}PP(e,k,r[k],L,i,o&&o[k],u,a)}else I.push(k);else a||(r[k]=L,e.updateDuringAnimation(t),I.push(k))}var z=I.length;if(!_&&z)for(var V=0;V<A.length;V++){var H=A[V];if(H.targetName===t){var Z=H.stopTracks(I);if(Z){var ee=qr(A,H);A.splice(ee,1)}}}if(i.force||(I=di(I,function(pe){return!J7(n[pe],r[pe])}),z=I.length),z>0||i.force&&!u.length){var Y=void 0,ae=void 0,le=void 0;if(a){ae={},y&&(Y={});for(var V=0;V<z;V++){var k=I[V];ae[k]=r[k],y?Y[k]=n[k]:r[k]=n[k]}}else if(y){le={};for(var V=0;V<z;V++){var k=I[V];le[k]=lv(r[k]),K7(r,n,k)}}var H=new Hx(r,!1,!1,_?di(A,function(ye){return ye.targetName===t}):null);H.targetName=t,i.scope&&(H.scope=i.scope),y&&Y&&H.whenWithKeys(0,Y,I),le&&H.whenWithKeys(0,le,I),H.whenWithKeys(p??500,a?ae:n,I).delay(v||0),e.addAnimator(H,t),u.push(H)}}const DP=Zx;var kP=function(e){mt(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=qr(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var u=this.__zr;u&&o.removeSelfFromZr(u),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=qr(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var u=i[o];r.call(n,u,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],u=r.call(n,o);o.isGroup&&!u&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new Zr(0,0,0,0),i=r||this._children,o=[],u=null,a=0;a<i.length;a++){var f=i[a];if(!(f.ignore||f.invisible)){var p=f.getBoundingRect(),v=f.getLocalTransform(o);v?(Zr.applyTransform(n,p,v),u=u||n.clone(),u.union(n)):(u=u||p.clone(),u.union(p))}}return u||n},t}(DP);kP.prototype.type="group";const ri=kP;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var fv={},LP={};function eV(e){delete LP[e]}function tV(e){if(!e)return!1;if(typeof e=="string")return Uv(e,1)<v1;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=Uv(t[i].color,1);return r/=n,r<v1}return!1}var rV=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new d7,u=n.renderer||"canvas";fv[u]||(u=Pr(fv)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var a=new fv[u](r,o,n,t),f=n.ssr||a.ssrOnly;this.storage=o,this.painter=a;var p=!ar.node&&!ar.worker&&!f?new q7(a.getViewportRoot(),a.root):null,v=n.useCoarsePointer,_=v==null||v==="auto"?ar.touchEventsSupported:!!v,y=44,S;_&&(S=or(n.pointerSize,y)),this.handler=new l7(o,a,p,a.root,S),this.animation=new F7({stage:{update:f?null:function(){return i._flush(!0)}}}),f||this.animation.start()}return e.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=tV(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=Ic();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=Ic();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof ri&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,eV(this.id)},e}();function VT(e,t){var r=new rV(KM(),e,t);return LP[r.id]=r,r}function nV(e,t){fv[e]=t}var UT=1e-4,OP=20;function iV(e){return e.replace(/^\s+|\s+$/g,"")}function $T(e,t,r,n){var i=t[0],o=t[1],u=r[0],a=r[1],f=o-i,p=a-u;if(f===0)return p===0?u:(u+a)/2;if(n)if(f>0){if(e<=i)return u;if(e>=o)return a}else{if(e>=i)return u;if(e<=o)return a}else{if(e===i)return u;if(e===o)return a}return(e-i)/f*p+u}function ti(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Rt(e)?iV(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function Bn(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),OP),e=(+e).toFixed(t),r?e:+e}function jc(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return aV(e)}function aV(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),u=o<0?0:i-1-o;return Math.max(0,u-n)}function oV(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),u=Math.min(Math.max(-i+o,0),20);return isFinite(u)?u:20}function sV(e,t){var r=Math.max(jc(e),jc(t)),n=e+t;return r>OP?n:Bn(n,r)}function RP(e){var t=Math.PI*2;return(e%t+t)%t}function jv(e){return e>-UT&&e<UT}var lV=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ss(e){if(e instanceof Date)return e;if(Rt(e)){var t=lV.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function uV(e){return Math.pow(10,Xx(e))}function Xx(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function zP(e,t){var r=Xx(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function Gv(e){var t=parseFloat(e);return t==e&&(t!==0||!Rt(e)||e.indexOf("x")<=0)?t:NaN}function cV(e){return!isNaN(Gv(e))}function BP(){return Math.round(Math.random()*9)}function FP(e,t){return t===0?e:FP(t,e%t)}function jT(e,t){return e==null?t:t==null?e:e*t/FP(e,t)}function Gi(e){throw new Error(e)}var NP="series\0",hV="\0_ec_\0";function Li(e){return e instanceof Array?e:e==null?[]:[e]}function y1(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var GT=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function zd(e){return Vt(e)&&!wt(e)&&!(e instanceof Date)?e.value:e}function fV(e){return Vt(e)&&!(e instanceof Array)}function dV(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var u=sr();we(t,function(f,p){if(!Vt(f)){t[p]=null;return}});var a=pV(e,u,r);return(n||i)&&mV(a,e,u,t),n&&vV(a,t),n||i?gV(a,t,i):o&&_V(a,t),yV(a),a}function pV(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||cd(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function mV(e,t,r,n){we(n,function(i,o){if(!(!i||i.id==null)){var u=Gf(i.id),a=r.get(u);if(a!=null){var f=e[a];Xa(!f.newOption,'Duplicated option on id "'+u+'".'),f.newOption=i,f.existing=t[a],n[o]=null}}})}function vV(e,t){we(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!cd(r)&&!cd(o)&&VP("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function gV(e,t,r){we(t,function(n){if(n){for(var i,o=0;(i=e[o])&&(i.newOption||cd(i.existing)||i.existing&&n.id!=null&&!VP("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function _V(e,t){we(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function yV(e){var t=sr();we(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),we(e,function(r){var n=r.newOption;Xa(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),we(e,function(r,n){var i=r.existing,o=r.newOption,u=r.keyInfo;if(Vt(o)){if(u.name=o.name!=null?Gf(o.name):i?i.name:NP+n,i)u.id=Gf(i.id);else if(o.id!=null)u.id=Gf(o.id);else{var a=0;do u.id="\0"+u.name+"\0"+a++;while(t.get(u.id))}t.set(u.id,r)}})}function VP(e,t,r){var n=Ao(t[e],null),i=Ao(r[e],null);return n!=null&&i!=null&&n===i}function Gf(e){return Ao(e,"")}function Ao(e,t){return e==null?t:Rt(e)?e:gn(e)||e1(e)?e+"":t}function UP(e){var t=e.name;return!!(t&&t.indexOf(NP))}function cd(e){return e&&e.id!=null&&Gf(e.id).indexOf(hV)===0}function xV(e,t,r){we(e,function(n){var i=n.newOption;Vt(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=bV(t,i,n.existing,r))})}function bV(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function Bd(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return wt(t.dataIndex)?Bt(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return wt(t.name)?Bt(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function En(){var e="__ec_inner_"+wV++;return function(t){return t[e]||(t[e]={})}}var wV=BP();function Ey(e,t,r){var n=Yx(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,u=n.others,a=u,f=r?r.defaultMainType:null;return!i&&f&&o.set(f,{}),o.each(function(p,v){var _=Fd(e,v,p,{useDefault:f===v,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});a[v+"Models"]=_.models,a[v+"Model"]=_.models[0]}),a}function Yx(e,t){var r;if(Rt(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=sr(),o={},u=!1;return we(r,function(a,f){if(f==="dataIndex"||f==="dataIndexInside"){o[f]=a;return}var p=f.match(/^(\w+)(Index|Id|Name)$/)||[],v=p[1],_=(p[2]||"").toLowerCase();if(!(!v||!_||t&&t.includeMainTypes&&qr(t.includeMainTypes,v)<0)){u=u||!!v;var y=i.get(v)||i.set(v,{});y[_]=a}}),{mainTypeSpecified:u,queryOptionMap:i,others:o}}var Wa={useDefault:!0,enableAll:!1,enableNone:!1};function Fd(e,t,r,n){n=n||Wa;var i=r.index,o=r.id,u=r.name,a={models:null,specified:i!=null||o!=null||u!=null};if(!a.specified){var f=void 0;return a.models=n.useDefault&&(f=e.getComponent(t))?[f]:[],a}return i==="none"||i===!1?(Xa(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),a.models=[],a):(i==="all"&&(Xa(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=u=null),a.models=e.queryComponents({mainType:t,index:i,id:o,name:u}),a)}function $P(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function SV(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function TV(e){return e==="auto"?ar.domSupported?"html":"richText":e||"html"}var EV=".",Ul="___EC__COMPONENT__CONTAINER___",jP="___EC__EXTENDED_CLASS___";function To(e){var t={main:"",sub:""};if(e){var r=e.split(EV);t.main=r[0]||"",t.sub=r[1]||""}return t}function CV(e){Xa(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function AV(e){return!!(e&&e[jP])}function Kx(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return IV(n)?i=function(o){mt(u,o);function u(){return o.apply(this,arguments)||this}return u}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},IN(i,this)),lt(i.prototype,r),i[jP]=!0,i.extend=this.extend,i.superCall=DV,i.superApply=kV,i.superClass=n,i}}function IV(e){return Zt(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function GP(e,t){e.extend=t.extend}var MV=Math.round(Math.random()*10);function PV(e){var t=["__\0is_clz",MV++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function DV(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function kV(e,t,r){return this.superClass.prototype[t].apply(e,r)}function wg(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){CV(i),n.prototype.type=i;var o=To(i);if(!o.sub)t[o.main]=n;else if(o.sub!==Ul){var u=r(o);u[o.sub]=n}}return n},e.getClass=function(n,i,o){var u=t[n];if(u&&u[Ul]&&(u=i?u[i]:null),o&&!u)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return u},e.getClassesByMainType=function(n){var i=To(n),o=[],u=t[i.main];return u&&u[Ul]?we(u,function(a,f){f!==Ul&&o.push(a)}):o.push(u),o},e.hasClass=function(n){var i=To(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return we(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=To(n),o=t[i.main];return o&&o[Ul]};function r(n){var i=t[n.main];return(!i||!i[Ul])&&(i=t[n.main]={},i[Ul]=!0),i}}function hd(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var u={},a=0;a<e.length;a++){var f=e[a][1];if(!(i&&qr(i,f)>=0||o&&qr(o,f)<0)){var p=n.getShallow(f,t);p!=null&&(u[e[a][0]]=p)}}return u}}var LV=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],OV=hd(LV),RV=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return OV(this,t,r)},e}(),x1=new Rd(50);function zV(e){if(typeof e=="string"){var t=x1.get(e);return t&&t.image}else return e}function Jx(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=x1.get(e),u={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!Sg(t)&&o.pending.push(u)):(t=Kc.loadImage(e,HT,HT),t.__zrImageSrc=e,x1.put(e,t.__cachedImgObj={image:t,pending:[u]})),t}else return e;else return t}function HT(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function Sg(e){return e&&e.width&&e.height}var Cy=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function BV(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=HP(t,r,n,i);for(var u=0,a=o.length;u<a;u++)o[u]=qP(o[u],i);return o.join(`
`)}function HP(e,t,r,n){n=n||{};var i=lt({},n);i.font=t,r=or(r,"..."),i.maxIterations=or(n.maxIterations,2);var o=i.minChar=or(n.minChar,0);i.cnCharWidth=la("国",t);var u=i.ascCharWidth=la("a",t);i.placeholder=or(n.placeholder,"");for(var a=e=Math.max(0,e-1),f=0;f<o&&a>=u;f++)a-=u;var p=la(r,t);return p>a&&(r="",p=0),a=e-p,i.ellipsis=r,i.ellipsisWidth=p,i.contentWidth=a,i.containerWidth=e,i}function qP(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=la(e,n);if(o<=r)return e;for(var u=0;;u++){if(o<=i||u>=t.maxIterations){e+=t.ellipsis;break}var a=u===0?FV(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,a),o=la(e,n)}return e===""&&(e=t.placeholder),e}function FV(e,t,r,n){for(var i=0,o=0,u=e.length;o<u&&i<t;o++){var a=e.charCodeAt(o);i+=0<=a&&a<=127?r:n}return o}function NV(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",u=bg(i),a=or(t.lineHeight,u),f=!!t.backgroundColor,p=t.lineOverflow==="truncate",v=t.width,_;v!=null&&(r==="break"||r==="breakAll")?_=e?WP(e,t.font,v,r==="breakAll",0).lines:[]:_=e?e.split(`
`):[];var y=_.length*a,S=or(t.height,y);if(y>S&&p){var A=Math.floor(S/a);_=_.slice(0,A)}if(e&&o&&v!=null)for(var I=HP(v,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),M=0;M<_.length;M++)_[M]=qP(_[M],I);for(var k=S,L=0,M=0;M<_.length;M++)L=Math.max(la(_[M],i),L);v==null&&(v=L);var z=L;return n&&(k+=n[0]+n[2],z+=n[1]+n[3],v+=n[1]+n[3]),f&&(z=v),{lines:_,height:S,outerWidth:z,outerHeight:k,lineHeight:a,calculatedLineHeight:u,contentWidth:L,contentHeight:y,width:v}}var VV=function(){function e(){}return e}(),qT=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),UV=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function $V(e,t){var r=new UV;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,u=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,a=Cy.lastIndex=0,f;(f=Cy.exec(e))!=null;){var p=f.index;p>a&&Ay(r,e.substring(a,p),t,u),Ay(r,f[2],t,u,f[1]),a=Cy.lastIndex}a<e.length&&Ay(r,e.substring(a,e.length),t,u);var v=[],_=0,y=0,S=t.padding,A=o==="truncate",I=t.lineOverflow==="truncate";function M(st,xt,St){st.width=xt,st.lineHeight=St,_+=St,y=Math.max(y,xt)}e:for(var k=0;k<r.lines.length;k++){for(var L=r.lines[k],z=0,V=0,H=0;H<L.tokens.length;H++){var Z=L.tokens[H],ee=Z.styleName&&t.rich[Z.styleName]||{},Y=Z.textPadding=ee.padding,ae=Y?Y[1]+Y[3]:0,le=Z.font=ee.font||t.font;Z.contentHeight=bg(le);var pe=or(ee.height,Z.contentHeight);if(Z.innerHeight=pe,Y&&(pe+=Y[0]+Y[2]),Z.height=pe,Z.lineHeight=iv(ee.lineHeight,t.lineHeight,pe),Z.align=ee&&ee.align||t.align,Z.verticalAlign=ee&&ee.verticalAlign||"middle",I&&i!=null&&_+Z.lineHeight>i){H>0?(L.tokens=L.tokens.slice(0,H),M(L,V,z),r.lines=r.lines.slice(0,k+1)):r.lines=r.lines.slice(0,k);break e}var ye=ee.width,ve=ye==null||ye==="auto";if(typeof ye=="string"&&ye.charAt(ye.length-1)==="%")Z.percentWidth=ye,v.push(Z),Z.contentWidth=la(Z.text,le);else{if(ve){var Pe=ee.backgroundColor,$e=Pe&&Pe.image;$e&&($e=zV($e),Sg($e)&&(Z.width=Math.max(Z.width,$e.width*pe/$e.height)))}var Ce=A&&n!=null?n-V:null;Ce!=null&&Ce<Z.width?!ve||Ce<ae?(Z.text="",Z.width=Z.contentWidth=0):(Z.text=BV(Z.text,Ce-ae,le,t.ellipsis,{minChar:t.truncateMinChar}),Z.width=Z.contentWidth=la(Z.text,le)):Z.contentWidth=la(Z.text,le)}Z.width+=ae,V+=Z.width,ee&&(z=Math.max(z,Z.lineHeight))}M(L,V,z)}r.outerWidth=r.width=or(n,y),r.outerHeight=r.height=or(i,_),r.contentHeight=_,r.contentWidth=y,S&&(r.outerWidth+=S[1]+S[3],r.outerHeight+=S[0]+S[2]);for(var k=0;k<v.length;k++){var Z=v[k],at=Z.percentWidth;Z.width=parseInt(at,10)/100*r.width}return r}function Ay(e,t,r,n,i){var o=t==="",u=i&&r.rich[i]||{},a=e.lines,f=u.font||r.font,p=!1,v,_;if(n){var y=u.padding,S=y?y[1]+y[3]:0;if(u.width!=null&&u.width!=="auto"){var A=_u(u.width,n.width)+S;a.length>0&&A+n.accumWidth>n.width&&(v=t.split(`
`),p=!0),n.accumWidth=A}else{var I=WP(t,f,n.width,n.breakAll,n.accumWidth);n.accumWidth=I.accumWidth+S,_=I.linesWidths,v=I.lines}}else v=t.split(`
`);for(var M=0;M<v.length;M++){var k=v[M],L=new VV;if(L.styleName=i,L.text=k,L.isLineHolder=!k&&!o,typeof u.width=="number"?L.width=u.width:L.width=_?_[M]:la(k,f),!M&&!p){var z=(a[a.length-1]||(a[0]=new qT)).tokens,V=z.length;V===1&&z[0].isLineHolder?z[0]=L:(k||!V||o)&&z.push(L)}else a.push(new qT([L]))}}function jV(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var GV=Jc(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function HV(e){return jV(e)?!!GV[e]:!0}function WP(e,t,r,n,i){for(var o=[],u=[],a="",f="",p=0,v=0,_=0;_<e.length;_++){var y=e.charAt(_);if(y===`
`){f&&(a+=f,v+=p),o.push(a),u.push(v),a="",f="",p=0,v=0;continue}var S=la(y,t),A=n?!1:!HV(y);if(o.length?v+S>r:i+v+S>r){v?(a||f)&&(A?(a||(a=f,f="",p=0,v=p),o.push(a),u.push(v-p),f+=y,p+=S,a="",v=p):(f&&(a+=f,f="",p=0),o.push(a),u.push(v),a=y,v=S)):A?(o.push(f),u.push(p),f=y,p=S):(o.push(y),u.push(S));continue}v+=S,A?(f+=y,p+=S):(f&&(a+=f,f="",p=0),a+=y)}return!o.length&&!a&&(a=e,f="",p=0),f&&(a+=f),a&&(o.push(a),u.push(v)),o.length===1&&(v+=i),{accumWidth:v,lines:o,linesWidths:u}}var b1="__zr_style_"+Math.round(Math.random()*10),fu={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Tg={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};fu[b1]=!0;var WT=["z","z2","invisible"],qV=["invisible"],WV=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=Pr(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var u=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&ZV(this,r,n)||u&&!u[0]&&!u[3])return!1;if(i&&this.__clipPaths){for(var a=0;a<this.__clipPaths.length;++a)if(this.__clipPaths[a].isZeroArea())return!1}if(o&&this.parent)for(var f=this.parent;f;){if(f.ignore)return!1;f=f.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,u=o.shadowBlur||0,a=o.shadowOffsetX||0,f=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new Zr(0,0,0,0)),n?Zr.applyTransform(r,i,n):r.copy(i),(u||a||f)&&(r.width+=u*2+Math.abs(a),r.height+=u*2+Math.abs(f),r.x=Math.min(r.x,r.x+a-u),r.y=Math.min(r.y,r.y+f-u));var p=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-p),r.y=Math.floor(r.y-p),r.width=Math.ceil(r.width+1+p*2),r.height=Math.ceil(r.height+1+p*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new Zr(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:lt(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Pf,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Pf)},t.prototype.styleUpdated=function(){this.__dirty&=~Pf},t.prototype.createStyle=function(r){return yg(fu,r)},t.prototype.useStyle=function(r){r[b1]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[b1]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,WT)},t.prototype._applyStateObj=function(r,n,i,o,u,a){e.prototype._applyStateObj.call(this,r,n,i,o,u,a);var f=!(n&&o),p;if(n&&n.style?u?o?p=n.style:(p=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(p,n.style)):(p=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(p,n.style)):f&&(p=i.style),p)if(u){var v=this.style;if(this.style=this.createStyle(f?{}:v),f)for(var _=Pr(v),y=0;y<_.length;y++){var S=_[y];S in p&&(p[S]=p[S],this.style[S]=v[S])}for(var A=Pr(p),y=0;y<A.length;y++){var S=A[y];this.style[S]=this.style[S]}this._transitionState(r,{style:p},a,this.getAnimationStyleProps())}else this.useStyle(p);for(var I=this.__inHover?qV:WT,y=0;y<I.length;y++){var S=I[y];n&&n[S]!=null?this[S]=n[S]:f&&i[S]!=null&&(this[S]=i[S])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var u=r[o];u.style&&(i=i||{},this._mergeStyle(i,u.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return lt(r,n),r},t.prototype.getAnimationStyleProps=function(){return Tg},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=yo|Pf}(),t}(DP),Iy=new Zr(0,0,0,0),My=new Zr(0,0,0,0);function ZV(e,t,r){return Iy.copy(e.getBoundingRect()),e.transform&&Iy.applyTransform(e.transform),My.width=t,My.height=r,!Iy.intersect(My)}const Nd=WV;var Ea=Math.min,Ca=Math.max,Py=Math.sin,Dy=Math.cos,$l=Math.PI*2,vm=Qc(),gm=Qc(),_m=Qc();function ZT(e,t,r,n,i,o){i[0]=Ea(e,r),i[1]=Ea(t,n),o[0]=Ca(e,r),o[1]=Ca(t,n)}var XT=[],YT=[];function XV(e,t,r,n,i,o,u,a,f,p){var v=pP,_=Qn,y=v(e,r,i,u,XT);f[0]=1/0,f[1]=1/0,p[0]=-1/0,p[1]=-1/0;for(var S=0;S<y;S++){var A=_(e,r,i,u,XT[S]);f[0]=Ea(A,f[0]),p[0]=Ca(A,p[0])}y=v(t,n,o,a,YT);for(var S=0;S<y;S++){var I=_(t,n,o,a,YT[S]);f[1]=Ea(I,f[1]),p[1]=Ca(I,p[1])}f[0]=Ea(e,f[0]),p[0]=Ca(e,p[0]),f[0]=Ea(u,f[0]),p[0]=Ca(u,p[0]),f[1]=Ea(t,f[1]),p[1]=Ca(t,p[1]),f[1]=Ea(a,f[1]),p[1]=Ca(a,p[1])}function YV(e,t,r,n,i,o,u,a){var f=mP,p=ei,v=Ca(Ea(f(e,r,i),1),0),_=Ca(Ea(f(t,n,o),1),0),y=p(e,r,i,v),S=p(t,n,o,_);u[0]=Ea(e,i,y),u[1]=Ea(t,o,S),a[0]=Ca(e,i,y),a[1]=Ca(t,o,S)}function KV(e,t,r,n,i,o,u,a,f){var p=Cc,v=Ac,_=Math.abs(i-o);if(_%$l<1e-4&&_>1e-4){a[0]=e-r,a[1]=t-n,f[0]=e+r,f[1]=t+n;return}if(vm[0]=Dy(i)*r+e,vm[1]=Py(i)*n+t,gm[0]=Dy(o)*r+e,gm[1]=Py(o)*n+t,p(a,vm,gm),v(f,vm,gm),i=i%$l,i<0&&(i=i+$l),o=o%$l,o<0&&(o=o+$l),i>o&&!u?o+=$l:i<o&&u&&(i+=$l),u){var y=o;o=i,i=y}for(var S=0;S<o;S+=Math.PI/2)S>i&&(_m[0]=Dy(S)*r+e,_m[1]=Py(S)*n+t,p(a,_m,a),v(f,_m,f))}var zr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},jl=[],Gl=[],po=[],Fs=[],mo=[],vo=[],ky=Math.min,Ly=Math.max,Hl=Math.cos,ql=Math.sin,Zo=Math.abs,w1=Math.PI,js=w1*2,Oy=typeof Float32Array<"u",ff=[];function Ry(e){var t=Math.round(e/w1*1e8)/1e8;return t%2*w1}function JV(e,t){var r=Ry(e[0]);r<0&&(r+=js);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=js?i=r+js:t&&r-i>=js?i=r-js:!t&&r>i?i=r+(js-Ry(r-i)):t&&r<i&&(i=r-(js-Ry(i-r))),e[0]=r,e[1]=i}var QV=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=Zo(n/RT/t)||0,this._uy=Zo(n/RT/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(zr.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=Zo(t-this._xi),i=Zo(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(zr.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var u=n*n+i*i;u>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=u)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,u){return this._drawPendingPt(),this.addData(zr.C,t,r,n,i,o,u),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,u),this._xi=o,this._yi=u,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(zr.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,u){this._drawPendingPt(),ff[0]=i,ff[1]=o,JV(ff,u),i=ff[0],o=ff[1];var a=o-i;return this.addData(zr.A,t,r,n,n,i,a,0,u?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,u),this._xi=Hl(o)*n+t,this._yi=ql(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(zr.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(zr.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&Oy&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();Oy&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var u=t[o].data,a=0;a<u.length;a++)this.data[i++]=u[a];this._len=i},e.prototype.addData=function(t,r,n,i,o,u,a,f,p){if(this._saveData){var v=this.data;this._len+arguments.length>v.length&&(this._expandData(),v=this.data);for(var _=0;_<arguments.length;_++)v[this._len++]=arguments[_]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Oy&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){po[0]=po[1]=mo[0]=mo[1]=Number.MAX_VALUE,Fs[0]=Fs[1]=vo[0]=vo[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,u;for(u=0;u<this._len;){var a=t[u++],f=u===1;switch(f&&(r=t[u],n=t[u+1],i=r,o=n),a){case zr.M:r=i=t[u++],n=o=t[u++],mo[0]=i,mo[1]=o,vo[0]=i,vo[1]=o;break;case zr.L:ZT(r,n,t[u],t[u+1],mo,vo),r=t[u++],n=t[u++];break;case zr.C:XV(r,n,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],mo,vo),r=t[u++],n=t[u++];break;case zr.Q:YV(r,n,t[u++],t[u++],t[u],t[u+1],mo,vo),r=t[u++],n=t[u++];break;case zr.A:var p=t[u++],v=t[u++],_=t[u++],y=t[u++],S=t[u++],A=t[u++]+S;u+=1;var I=!t[u++];f&&(i=Hl(S)*_+p,o=ql(S)*y+v),KV(p,v,_,y,S,A,I,mo,vo),r=Hl(A)*_+p,n=ql(A)*y+v;break;case zr.R:i=r=t[u++],o=n=t[u++];var M=t[u++],k=t[u++];ZT(i,o,i+M,o+k,mo,vo);break;case zr.Z:r=i,n=o;break}Cc(po,po,mo),Ac(Fs,Fs,vo)}return u===0&&(po[0]=po[1]=Fs[0]=Fs[1]=0),new Zr(po[0],po[1],Fs[0]-po[0],Fs[1]-po[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,u=0,a=0,f=0;this._pathSegLen||(this._pathSegLen=[]);for(var p=this._pathSegLen,v=0,_=0,y=0;y<r;){var S=t[y++],A=y===1;A&&(o=t[y],u=t[y+1],a=o,f=u);var I=-1;switch(S){case zr.M:o=a=t[y++],u=f=t[y++];break;case zr.L:{var M=t[y++],k=t[y++],L=M-o,z=k-u;(Zo(L)>n||Zo(z)>i||y===r-1)&&(I=Math.sqrt(L*L+z*z),o=M,u=k);break}case zr.C:{var V=t[y++],H=t[y++],M=t[y++],k=t[y++],Z=t[y++],ee=t[y++];I=m7(o,u,V,H,M,k,Z,ee,10),o=Z,u=ee;break}case zr.Q:{var V=t[y++],H=t[y++],M=t[y++],k=t[y++];I=_7(o,u,V,H,M,k,10),o=M,u=k;break}case zr.A:var Y=t[y++],ae=t[y++],le=t[y++],pe=t[y++],ye=t[y++],ve=t[y++],Pe=ve+ye;y+=1,t[y++],A&&(a=Hl(ye)*le+Y,f=ql(ye)*pe+ae),I=Ly(le,pe)*ky(js,Math.abs(ve)),o=Hl(Pe)*le+Y,u=ql(Pe)*pe+ae;break;case zr.R:{a=o=t[y++],f=u=t[y++];var $e=t[y++],Ce=t[y++];I=$e*2+Ce*2;break}case zr.Z:{var L=a-o,z=f-u;I=Math.sqrt(L*L+z*z),o=a,u=f;break}}I>=0&&(p[_++]=I,v+=I)}return this._pathLen=v,v},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,u=this._len,a,f,p,v,_,y,S=r<1,A,I,M=0,k=0,L,z=0,V,H;if(S&&(this._pathSegLen||this._calculateLength(),A=this._pathSegLen,I=this._pathLen,L=r*I,!L))return;e:for(var Z=0;Z<u;){var ee=n[Z++],Y=Z===1;switch(Y&&(p=n[Z],v=n[Z+1],a=p,f=v),ee!==zr.L&&z>0&&(t.lineTo(V,H),z=0),ee){case zr.M:a=p=n[Z++],f=v=n[Z++],t.moveTo(p,v);break;case zr.L:{_=n[Z++],y=n[Z++];var ae=Zo(_-p),le=Zo(y-v);if(ae>i||le>o){if(S){var pe=A[k++];if(M+pe>L){var ye=(L-M)/pe;t.lineTo(p*(1-ye)+_*ye,v*(1-ye)+y*ye);break e}M+=pe}t.lineTo(_,y),p=_,v=y,z=0}else{var ve=ae*ae+le*le;ve>z&&(V=_,H=y,z=ve)}break}case zr.C:{var Pe=n[Z++],$e=n[Z++],Ce=n[Z++],at=n[Z++],st=n[Z++],xt=n[Z++];if(S){var pe=A[k++];if(M+pe>L){var ye=(L-M)/pe;Nv(p,Pe,Ce,st,ye,jl),Nv(v,$e,at,xt,ye,Gl),t.bezierCurveTo(jl[1],Gl[1],jl[2],Gl[2],jl[3],Gl[3]);break e}M+=pe}t.bezierCurveTo(Pe,$e,Ce,at,st,xt),p=st,v=xt;break}case zr.Q:{var Pe=n[Z++],$e=n[Z++],Ce=n[Z++],at=n[Z++];if(S){var pe=A[k++];if(M+pe>L){var ye=(L-M)/pe;Vv(p,Pe,Ce,ye,jl),Vv(v,$e,at,ye,Gl),t.quadraticCurveTo(jl[1],Gl[1],jl[2],Gl[2]);break e}M+=pe}t.quadraticCurveTo(Pe,$e,Ce,at),p=Ce,v=at;break}case zr.A:var St=n[Z++],Xt=n[Z++],Dt=n[Z++],Br=n[Z++],cr=n[Z++],vr=n[Z++],Fr=n[Z++],Ur=!n[Z++],gr=Dt>Br?Dt:Br,Yt=Zo(Dt-Br)>.001,_r=cr+vr,At=!1;if(S){var pe=A[k++];M+pe>L&&(_r=cr+vr*(L-M)/pe,At=!0),M+=pe}if(Yt&&t.ellipse?t.ellipse(St,Xt,Dt,Br,Fr,cr,_r,Ur):t.arc(St,Xt,gr,cr,_r,Ur),At)break e;Y&&(a=Hl(cr)*Dt+St,f=ql(cr)*Br+Xt),p=Hl(_r)*Dt+St,v=ql(_r)*Br+Xt;break;case zr.R:a=p=n[Z],f=v=n[Z+1],_=n[Z++],y=n[Z++];var kt=n[Z++],Tt=n[Z++];if(S){var pe=A[k++];if(M+pe>L){var zt=L-M;t.moveTo(_,y),t.lineTo(_+ky(zt,kt),y),zt-=kt,zt>0&&t.lineTo(_+kt,y+ky(zt,Tt)),zt-=Tt,zt>0&&t.lineTo(_+Ly(kt-zt,0),y+Tt),zt-=kt,zt>0&&t.lineTo(_,y+Ly(Tt-zt,0));break e}M+=pe}t.rect(_,y,kt,Tt);break;case zr.Z:if(S){var pe=A[k++];if(M+pe>L){var ye=(L-M)/pe;t.lineTo(p*(1-ye)+a*ye,v*(1-ye)+f*ye);break e}M+=pe}t.closePath(),p=a,v=f}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=zr,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const yu=QV;function qs(e,t,r,n,i,o,u){if(i===0)return!1;var a=i,f=0,p=e;if(u>t+a&&u>n+a||u<t-a&&u<n-a||o>e+a&&o>r+a||o<e-a&&o<r-a)return!1;if(e!==r)f=(t-n)/(e-r),p=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=a/2;var v=f*o-u+p,_=v*v/(f*f+1);return _<=a/2*a/2}function eU(e,t,r,n,i,o,u,a,f,p,v){if(f===0)return!1;var _=f;if(v>t+_&&v>n+_&&v>o+_&&v>a+_||v<t-_&&v<n-_&&v<o-_&&v<a-_||p>e+_&&p>r+_&&p>i+_&&p>u+_||p<e-_&&p<r-_&&p<i-_&&p<u-_)return!1;var y=p7(e,t,r,n,i,o,u,a,p,v,null);return y<=_/2}function ZP(e,t,r,n,i,o,u,a,f){if(u===0)return!1;var p=u;if(f>t+p&&f>n+p&&f>o+p||f<t-p&&f<n-p&&f<o-p||a>e+p&&a>r+p&&a>i+p||a<e-p&&a<r-p&&a<i-p)return!1;var v=g7(e,t,r,n,i,o,a,f,null);return v<=p/2}var KT=Math.PI*2;function ym(e){return e%=KT,e<0&&(e+=KT),e}var df=Math.PI*2;function tU(e,t,r,n,i,o,u,a,f){if(u===0)return!1;var p=u;a-=e,f-=t;var v=Math.sqrt(a*a+f*f);if(v-p>r||v+p<r)return!1;if(Math.abs(n-i)%df<1e-4)return!0;if(o){var _=n;n=ym(i),i=ym(_)}else n=ym(n),i=ym(i);n>i&&(i+=df);var y=Math.atan2(f,a);return y<0&&(y+=df),y>=n&&y<=i||y+df>=n&&y+df<=i}function Wl(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var u=(o-t)/(n-t),a=n<t?1:-1;(u===1||u===0)&&(a=n<t?.5:-.5);var f=u*(r-e)+e;return f===i?1/0:f>i?a:0}var Ns=yu.CMD,Zl=Math.PI*2,rU=1e-4;function nU(e,t){return Math.abs(e-t)<rU}var Ci=[-1,-1,-1],Sa=[-1,-1];function iU(){var e=Sa[0];Sa[0]=Sa[1],Sa[1]=e}function aU(e,t,r,n,i,o,u,a,f,p){if(p>t&&p>n&&p>o&&p>a||p<t&&p<n&&p<o&&p<a)return 0;var v=dP(t,n,o,a,p,Ci);if(v===0)return 0;for(var _=0,y=-1,S=void 0,A=void 0,I=0;I<v;I++){var M=Ci[I],k=M===0||M===1?.5:1,L=Qn(e,r,i,u,M);L<f||(y<0&&(y=pP(t,n,o,a,Sa),Sa[1]<Sa[0]&&y>1&&iU(),S=Qn(t,n,o,a,Sa[0]),y>1&&(A=Qn(t,n,o,a,Sa[1]))),y===2?M<Sa[0]?_+=S<t?k:-k:M<Sa[1]?_+=A<S?k:-k:_+=a<A?k:-k:M<Sa[0]?_+=S<t?k:-k:_+=a<S?k:-k)}return _}function oU(e,t,r,n,i,o,u,a){if(a>t&&a>n&&a>o||a<t&&a<n&&a<o)return 0;var f=v7(t,n,o,a,Ci);if(f===0)return 0;var p=mP(t,n,o);if(p>=0&&p<=1){for(var v=0,_=ei(t,n,o,p),y=0;y<f;y++){var S=Ci[y]===0||Ci[y]===1?.5:1,A=ei(e,r,i,Ci[y]);A<u||(Ci[y]<p?v+=_<t?S:-S:v+=o<_?S:-S)}return v}else{var S=Ci[0]===0||Ci[0]===1?.5:1,A=ei(e,r,i,Ci[0]);return A<u?0:o<t?S:-S}}function sU(e,t,r,n,i,o,u,a){if(a-=t,a>r||a<-r)return 0;var f=Math.sqrt(r*r-a*a);Ci[0]=-f,Ci[1]=f;var p=Math.abs(n-i);if(p<1e-4)return 0;if(p>=Zl-1e-4){n=0,i=Zl;var v=o?1:-1;return u>=Ci[0]+e&&u<=Ci[1]+e?v:0}if(n>i){var _=n;n=i,i=_}n<0&&(n+=Zl,i+=Zl);for(var y=0,S=0;S<2;S++){var A=Ci[S];if(A+e>u){var I=Math.atan2(a,A),v=o?1:-1;I<0&&(I=Zl+I),(I>=n&&I<=i||I+Zl>=n&&I+Zl<=i)&&(I>Math.PI/2&&I<Math.PI*1.5&&(v=-v),y+=v)}}return y}function XP(e,t,r,n,i){for(var o=e.data,u=e.len(),a=0,f=0,p=0,v=0,_=0,y,S,A=0;A<u;){var I=o[A++],M=A===1;switch(I===Ns.M&&A>1&&(r||(a+=Wl(f,p,v,_,n,i))),M&&(f=o[A],p=o[A+1],v=f,_=p),I){case Ns.M:v=o[A++],_=o[A++],f=v,p=_;break;case Ns.L:if(r){if(qs(f,p,o[A],o[A+1],t,n,i))return!0}else a+=Wl(f,p,o[A],o[A+1],n,i)||0;f=o[A++],p=o[A++];break;case Ns.C:if(r){if(eU(f,p,o[A++],o[A++],o[A++],o[A++],o[A],o[A+1],t,n,i))return!0}else a+=aU(f,p,o[A++],o[A++],o[A++],o[A++],o[A],o[A+1],n,i)||0;f=o[A++],p=o[A++];break;case Ns.Q:if(r){if(ZP(f,p,o[A++],o[A++],o[A],o[A+1],t,n,i))return!0}else a+=oU(f,p,o[A++],o[A++],o[A],o[A+1],n,i)||0;f=o[A++],p=o[A++];break;case Ns.A:var k=o[A++],L=o[A++],z=o[A++],V=o[A++],H=o[A++],Z=o[A++];A+=1;var ee=!!(1-o[A++]);y=Math.cos(H)*z+k,S=Math.sin(H)*V+L,M?(v=y,_=S):a+=Wl(f,p,y,S,n,i);var Y=(n-k)*V/z+k;if(r){if(tU(k,L,V,H,H+Z,ee,t,Y,i))return!0}else a+=sU(k,L,V,H,H+Z,ee,Y,i);f=Math.cos(H+Z)*z+k,p=Math.sin(H+Z)*V+L;break;case Ns.R:v=f=o[A++],_=p=o[A++];var ae=o[A++],le=o[A++];if(y=v+ae,S=_+le,r){if(qs(v,_,y,_,t,n,i)||qs(y,_,y,S,t,n,i)||qs(y,S,v,S,t,n,i)||qs(v,S,v,_,t,n,i))return!0}else a+=Wl(y,_,y,S,n,i),a+=Wl(v,S,v,_,n,i);break;case Ns.Z:if(r){if(qs(f,p,v,_,t,n,i))return!0}else a+=Wl(f,p,v,_,n,i);f=v,p=_;break}}return!r&&!nU(p,_)&&(a+=Wl(f,p,v,_,n,i)||0),a!==0}function lU(e,t,r){return XP(e,0,!1,t,r)}function uU(e,t,r,n){return XP(e,t,!0,r,n)}var Hv=an({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},fu),cU={style:an({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Tg.style)},zy=ud.concat(["invisible","culling","z","z2","zlevel","parent"]),hU=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(f){r.buildPath(f,r.shape)}),i.silent=!0;var o=i.style;for(var u in n)o[u]!==n[u]&&(o[u]=n[u]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var a=0;a<zy.length;++a)i[zy[a]]=this[zy[a]];i.__dirty|=yo}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=Pr(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var u=n[o],a=r[u];u==="style"?this.style?lt(this.style,a):this.useStyle(a):u==="shape"?lt(this.shape,a):e.prototype.attrKV.call(this,u,a)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Rt(r)){var n=Uv(r,0);return n>.5?g1:n>.2?W7:_1}else if(r)return _1}return g1},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Rt(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),u=Uv(r,0)<v1;if(o===u)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~yc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new yu(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var u=this.path;(o||this.__dirty&yc)&&(u.beginPath(),this.buildPath(u,this.shape,!1),this.pathUpdated()),r=u.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var a=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){a.copy(r);var f=n.strokeNoScale?this.getLineScale():1,p=n.lineWidth;if(!this.hasFill()){var v=this.strokeContainThreshold;p=Math.max(p,v??4)}f>1e-10&&(a.width+=p/f,a.height+=p/f,a.x-=p/f/2,a.y-=p/f/2)}return a}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),u=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var a=this.path;if(this.hasStroke()){var f=u.lineWidth,p=u.strokeNoScale?this.getLineScale():1;if(p>1e-10&&(this.hasFill()||(f=Math.max(f,this.strokeContainThreshold)),uU(a,f/p,r,n)))return!0}if(this.hasFill())return lU(a,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=yc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:lt(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&yc)},t.prototype.createStyle=function(r){return yg(Hv,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=lt({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,u,a){e.prototype._applyStateObj.call(this,r,n,i,o,u,a);var f=!(n&&o),p;if(n&&n.shape?u?o?p=n.shape:(p=lt({},i.shape),lt(p,n.shape)):(p=lt({},o?this.shape:i.shape),lt(p,n.shape)):f&&(p=i.shape),p)if(u){this.shape=lt({},this.shape);for(var v={},_=Pr(p),y=0;y<_.length;y++){var S=_[y];typeof p[S]=="object"?this.shape[S]=p[S]:v[S]=p[S]}this._transitionState(r,{shape:v},a)}else this.shape=p,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var u=r[o];u.shape&&(i=i||{},this._mergeStyle(i,u.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return cU},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){mt(u,o);function u(a){var f=o.call(this,a)||this;return r.init&&r.init.call(f,a),f}return u.prototype.getDefaultStyle=function(){return mr(r.style)},u.prototype.getDefaultShape=function(){return mr(r.shape)},u}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=yo|Pf|yc}(),t}(Nd);const Vr=hU;var fU=an({strokeFirst:!0,font:tl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Hv),YP=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return yg(fU,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=Wx(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Nd);YP.prototype.type="tspan";const qv=YP;var dU=an({x:0,y:0},fu),pU={style:an({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Tg.style)};function mU(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var KP=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return yg(dU,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=mU(n.image)?n.image:this.__image;if(!o)return 0;var u=r==="width"?"height":"width",a=n[u];return a==null?o[r]:o[r]/o[u]*a},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return pU},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new Zr(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Nd);KP.prototype.type="image";const fs=KP;function vU(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,u=t.r,a,f,p,v;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof u=="number"?a=f=p=v=u:u instanceof Array?u.length===1?a=f=p=v=u[0]:u.length===2?(a=p=u[0],f=v=u[1]):u.length===3?(a=u[0],f=v=u[1],p=u[2]):(a=u[0],f=u[1],p=u[2],v=u[3]):a=f=p=v=0;var _;a+f>i&&(_=a+f,a*=i/_,f*=i/_),p+v>i&&(_=p+v,p*=i/_,v*=i/_),f+p>o&&(_=f+p,f*=o/_,p*=o/_),a+v>o&&(_=a+v,a*=o/_,v*=o/_),e.moveTo(r+a,n),e.lineTo(r+i-f,n),f!==0&&e.arc(r+i-f,n+f,f,-Math.PI/2,0),e.lineTo(r+i,n+o-p),p!==0&&e.arc(r+i-p,n+o-p,p,0,Math.PI/2),e.lineTo(r+v,n+o),v!==0&&e.arc(r+v,n+o-v,v,Math.PI/2,Math.PI),e.lineTo(r,n+a),a!==0&&e.arc(r+a,n+a,a,Math.PI,Math.PI*1.5)}var Mc=Math.round;function JP(e,t,r){if(t){var n=t.x1,i=t.x2,o=t.y1,u=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=u;var a=r&&r.lineWidth;return a&&(Mc(n*2)===Mc(i*2)&&(e.x1=e.x2=uu(n,a,!0)),Mc(o*2)===Mc(u*2)&&(e.y1=e.y2=uu(o,a,!0))),e}}function QP(e,t,r){if(t){var n=t.x,i=t.y,o=t.width,u=t.height;e.x=n,e.y=i,e.width=o,e.height=u;var a=r&&r.lineWidth;return a&&(e.x=uu(n,a,!0),e.y=uu(i,a,!0),e.width=Math.max(uu(n+o,a,!1)-e.x,o===0?0:1),e.height=Math.max(uu(i+u,a,!1)-e.y,u===0?0:1)),e}}function uu(e,t,r){if(!t)return e;var n=Mc(e*2);return(n+Mc(t))%2===0?n/2:(n+(r?1:-1))/2}var gU=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),_U={},eD=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new gU},t.prototype.buildPath=function(r,n){var i,o,u,a;if(this.subPixelOptimize){var f=QP(_U,n,this.style);i=f.x,o=f.y,u=f.width,a=f.height,f.r=n.r,n=f}else i=n.x,o=n.y,u=n.width,a=n.height;n.r?vU(r,n):r.rect(i,o,u,a)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Vr);eD.prototype.type="rect";const qi=eD;var JT={fill:"#000"},QT=2,yU={style:an({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Tg.style)},tD=function(e){mt(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=JT,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,wU(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new Zr(0,0,0,0),n=this._children,i=[],o=null,u=0;u<n.length;u++){var a=n[u],f=a.getBoundingRect(),p=a.getLocalTransform(i);p?(r.copy(f),r.applyTransform(p),o=o||r.clone(),o.union(r)):(o=o||f.clone(),o.union(f))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||JT},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return lt(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=Pr(n),o=0;o<i.length;o++){var u=i[o];r[u]=r[u]||{},lt(r[u],n[u])}},t.prototype.getAnimationStyleProps=function(){return yU},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||tl,i=r.padding,o=oE(r),u=NV(o,r),a=By(r),f=!!r.backgroundColor,p=u.outerHeight,v=u.outerWidth,_=u.contentWidth,y=u.lines,S=u.lineHeight,A=this._defaultStyle,I=r.x||0,M=r.y||0,k=r.align||A.align||"left",L=r.verticalAlign||A.verticalAlign||"top",z=I,V=xc(M,u.contentHeight,L);if(a||i){var H=kf(I,v,k),Z=xc(M,p,L);a&&this._renderBackground(r,r,H,Z,v,p)}V+=S/2,i&&(z=aE(I,k,i),L==="top"?V+=i[0]:L==="bottom"&&(V-=i[2]));for(var ee=0,Y=!1,ae=iE("fill"in r?r.fill:(Y=!0,A.fill)),le=nE("stroke"in r?r.stroke:!f&&(!A.autoStroke||Y)?(ee=QT,A.stroke):null),pe=r.textShadowBlur>0,ye=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),ve=u.calculatedLineHeight,Pe=0;Pe<y.length;Pe++){var $e=this._getOrCreateChild(qv),Ce=$e.createStyle();$e.useStyle(Ce),Ce.text=y[Pe],Ce.x=z,Ce.y=V,k&&(Ce.textAlign=k),Ce.textBaseline="middle",Ce.opacity=r.opacity,Ce.strokeFirst=!0,pe&&(Ce.shadowBlur=r.textShadowBlur||0,Ce.shadowColor=r.textShadowColor||"transparent",Ce.shadowOffsetX=r.textShadowOffsetX||0,Ce.shadowOffsetY=r.textShadowOffsetY||0),Ce.stroke=le,Ce.fill=ae,le&&(Ce.lineWidth=r.lineWidth||ee,Ce.lineDash=r.lineDash,Ce.lineDashOffset=r.lineDashOffset||0),Ce.font=n,tE(Ce,r),V+=S,ye&&$e.setBoundingRect(new Zr(kf(Ce.x,r.width,Ce.textAlign),xc(Ce.y,ve,Ce.textBaseline),_,ve))}},t.prototype._updateRichTexts=function(){var r=this.style,n=oE(r),i=$V(n,r),o=i.width,u=i.outerWidth,a=i.outerHeight,f=r.padding,p=r.x||0,v=r.y||0,_=this._defaultStyle,y=r.align||_.align,S=r.verticalAlign||_.verticalAlign,A=kf(p,u,y),I=xc(v,a,S),M=A,k=I;f&&(M+=f[3],k+=f[0]);var L=M+o;By(r)&&this._renderBackground(r,r,A,I,u,a);for(var z=!!r.backgroundColor,V=0;V<i.lines.length;V++){for(var H=i.lines[V],Z=H.tokens,ee=Z.length,Y=H.lineHeight,ae=H.width,le=0,pe=M,ye=L,ve=ee-1,Pe=void 0;le<ee&&(Pe=Z[le],!Pe.align||Pe.align==="left");)this._placeToken(Pe,r,Y,k,pe,"left",z),ae-=Pe.width,pe+=Pe.width,le++;for(;ve>=0&&(Pe=Z[ve],Pe.align==="right");)this._placeToken(Pe,r,Y,k,ye,"right",z),ae-=Pe.width,ye-=Pe.width,ve--;for(pe+=(o-(pe-M)-(L-ye)-ae)/2;le<=ve;)Pe=Z[le],this._placeToken(Pe,r,Y,k,pe+Pe.width/2,"center",z),pe+=Pe.width,le++;k+=Y}},t.prototype._placeToken=function(r,n,i,o,u,a,f){var p=n.rich[r.styleName]||{};p.text=r.text;var v=r.verticalAlign,_=o+i/2;v==="top"?_=o+r.height/2:v==="bottom"&&(_=o+i-r.height/2);var y=!r.isLineHolder&&By(p);y&&this._renderBackground(p,n,a==="right"?u-r.width:a==="center"?u-r.width/2:u,_-r.height/2,r.width,r.height);var S=!!p.backgroundColor,A=r.textPadding;A&&(u=aE(u,a,A),_-=r.height/2-A[0]-r.innerHeight/2);var I=this._getOrCreateChild(qv),M=I.createStyle();I.useStyle(M);var k=this._defaultStyle,L=!1,z=0,V=iE("fill"in p?p.fill:"fill"in n?n.fill:(L=!0,k.fill)),H=nE("stroke"in p?p.stroke:"stroke"in n?n.stroke:!S&&!f&&(!k.autoStroke||L)?(z=QT,k.stroke):null),Z=p.textShadowBlur>0||n.textShadowBlur>0;M.text=r.text,M.x=u,M.y=_,Z&&(M.shadowBlur=p.textShadowBlur||n.textShadowBlur||0,M.shadowColor=p.textShadowColor||n.textShadowColor||"transparent",M.shadowOffsetX=p.textShadowOffsetX||n.textShadowOffsetX||0,M.shadowOffsetY=p.textShadowOffsetY||n.textShadowOffsetY||0),M.textAlign=a,M.textBaseline="middle",M.font=r.font||tl,M.opacity=iv(p.opacity,n.opacity,1),tE(M,p),H&&(M.lineWidth=iv(p.lineWidth,n.lineWidth,z),M.lineDash=or(p.lineDash,n.lineDash),M.lineDashOffset=n.lineDashOffset||0,M.stroke=H),V&&(M.fill=V);var ee=r.contentWidth,Y=r.contentHeight;I.setBoundingRect(new Zr(kf(M.x,ee,M.textAlign),xc(M.y,Y,M.textBaseline),ee,Y))},t.prototype._renderBackground=function(r,n,i,o,u,a){var f=r.backgroundColor,p=r.borderWidth,v=r.borderColor,_=f&&f.image,y=f&&!_,S=r.borderRadius,A=this,I,M;if(y||r.lineHeight||p&&v){I=this._getOrCreateChild(qi),I.useStyle(I.createStyle()),I.style.fill=null;var k=I.shape;k.x=i,k.y=o,k.width=u,k.height=a,k.r=S,I.dirtyShape()}if(y){var L=I.style;L.fill=f||null,L.fillOpacity=or(r.fillOpacity,1)}else if(_){M=this._getOrCreateChild(fs),M.onload=function(){A.dirtyStyle()};var z=M.style;z.image=f.image,z.x=i,z.y=o,z.width=u,z.height=a}if(p&&v){var L=I.style;L.lineWidth=p,L.stroke=v,L.strokeOpacity=or(r.strokeOpacity,1),L.lineDash=r.borderDash,L.lineDashOffset=r.borderDashOffset||0,I.strokeContainThreshold=0,I.hasFill()&&I.hasStroke()&&(L.strokeFirst=!0,L.lineWidth*=2)}var V=(I||M).style;V.shadowBlur=r.shadowBlur||0,V.shadowColor=r.shadowColor||"transparent",V.shadowOffsetX=r.shadowOffsetX||0,V.shadowOffsetY=r.shadowOffsetY||0,V.opacity=iv(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return nD(r)&&(n=[r.fontStyle,r.fontWeight,rD(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&So(n)||r.textFont||r.font},t}(Nd),xU={left:!0,right:1,center:1},bU={top:1,bottom:1,middle:1},eE=["fontStyle","fontWeight","fontSize","fontFamily"];function rD(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?Lx+"px":e+"px"}function tE(e,t){for(var r=0;r<eE.length;r++){var n=eE[r],i=t[n];i!=null&&(e[n]=i)}}function nD(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function wU(e){return rE(e),we(e.rich,rE),e}function rE(e){if(e){e.font=tD.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||xU[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||bU[r]?r:"top";var n=e.padding;n&&(e.padding=QM(e.padding))}}function nE(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function iE(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function aE(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function oE(e){var t=e.text;return t!=null&&(t+=""),t}function By(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const Ya=tD;var nn=En(),SU=function(e,t,r,n){if(n){var i=nn(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var u=nn(o);u.seriesIndex=e,u.dataIndex=r,u.dataType=t})}},sE=1,lE={},iD=En(),Qx=En(),aD=0,eb=1,tb=2,Io=["emphasis","blur","select"],uE=["normal","emphasis","blur","select"],TU=10,EU=9,du="highlight",dv="downplay",Hf="select",pv="unselect",qf="toggleSelect";function cc(e){return e!=null&&e!=="none"}var cE=new Rd(100);function hE(e){if(Rt(e)){var t=cE.get(e);return t||(t=AT(e,-.1),cE.put(e,t)),t}else if(zx(e)){var r=lt({},e);return r.colorStops=Bt(e.colorStops,function(n){return{offset:n.offset,color:AT(n.color,-.1)}}),r}return e}function Eg(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function oD(e){Eg(e,"emphasis",tb)}function sD(e){e.hoverState===tb&&Eg(e,"normal",aD)}function rb(e){Eg(e,"blur",eb)}function lD(e){e.hoverState===eb&&Eg(e,"normal",aD)}function CU(e){e.selected=!0}function AU(e){e.selected=!1}function fE(e,t,r){t(e,r)}function ds(e,t,r){fE(e,t,r),e.isGroup&&e.traverse(function(n){fE(n,t,r)})}function IU(e,t,r,n){for(var i=e.style,o={},u=0;u<t.length;u++){var a=t[u],f=i[a];o[a]=f??(n&&n[a])}for(var u=0;u<e.animators.length;u++){var p=e.animators[u];p.__fromStateTransition&&p.__fromStateTransition.indexOf(r)<0&&p.targetName==="style"&&p.saveTo(o,t)}return o}function MU(e,t,r,n){var i=r&&qr(r,"select")>=0,o=!1;if(e instanceof Vr){var u=iD(e),a=i&&u.selectFill||u.normalFill,f=i&&u.selectStroke||u.normalStroke;if(cc(a)||cc(f)){n=n||{};var p=n.style||{};p.fill==="inherit"?(o=!0,n=lt({},n),p=lt({},p),p.fill=a):!cc(p.fill)&&cc(a)?(o=!0,n=lt({},n),p=lt({},p),p.fill=hE(a)):!cc(p.stroke)&&cc(f)&&(o||(n=lt({},n),p=lt({},p)),p.stroke=hE(f)),n.style=p}}if(n&&n.z2==null){o||(n=lt({},n));var v=e.z2EmphasisLift;n.z2=e.z2+(v??TU)}return n}function PU(e,t,r){if(r&&r.z2==null){r=lt({},r);var n=e.z2SelectLift;r.z2=e.z2+(n??EU)}return r}function DU(e,t,r){var n=qr(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:IU(e,["opacity"],t,{opacity:1});r=r||{};var u=r.style||{};return u.opacity==null&&(r=lt({},r),u=lt({opacity:n?i:o.opacity*.1},u),r.style=u),r}function Fy(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return MU(this,e,t,r);if(e==="blur")return DU(this,e,r);if(e==="select")return PU(this,e,r)}return r}function kU(e){e.stateProxy=Fy;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=Fy),r&&(r.stateProxy=Fy)}function dE(e,t){!fD(e,t)&&!e.__highByOuter&&ds(e,oD)}function pE(e,t){!fD(e,t)&&!e.__highByOuter&&ds(e,sD)}function fd(e,t){e.__highByOuter|=1<<(t||0),ds(e,oD)}function dd(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&ds(e,sD)}function uD(e){ds(e,rb)}function nb(e){ds(e,lD)}function cD(e){ds(e,CU)}function hD(e){ds(e,AU)}function fD(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function dD(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var u=Qx(o),a=i==="series",f=a?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!a&&n.push(f),u.isBlured&&(f.group.traverse(function(p){lD(p)}),a&&r.push(o)),u.isBlured=!1}),we(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function S1(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(p,v){for(var _=0;_<v.length;_++){var y=p.getItemGraphicEl(v[_]);y&&nb(y)}}if(e!=null&&!(!t||t==="none")){var u=i.getSeriesByIndex(e),a=u.coordinateSystem;a&&a.master&&(a=a.master);var f=[];i.eachSeries(function(p){var v=u===p,_=p.coordinateSystem;_&&_.master&&(_=_.master);var y=_&&a?_===a:v;if(!(r==="series"&&!v||r==="coordinateSystem"&&!y||t==="series"&&v)){var S=n.getViewOfSeriesModel(p);if(S.group.traverse(function(M){rb(M)}),Wi(t))o(p.getData(),t);else if(Vt(t))for(var A=Pr(t),I=0;I<A.length;I++)o(p.getData(A[I]),t[A[I]]);f.push(p),Qx(p).isBlured=!0}}),i.eachComponent(function(p,v){if(p!=="series"){var _=n.getViewOfComponentModel(v);_&&_.toggleBlurSeries&&_.toggleBlurSeries(f,!0,i)}})}}function T1(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(n){Qx(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){rb(o)})}}}function LU(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(i){var o=Bd(i,t);o=(wt(o)?o[0]:o)||0;var u=i.getItemGraphicEl(o);if(!u)for(var a=i.count(),f=0;!u&&f<a;)u=i.getItemGraphicEl(f++);if(u){var p=nn(u);S1(n,p.focus,p.blurScope,r)}else{var v=e.get(["emphasis","focus"]),_=e.get(["emphasis","blurScope"]);v!=null&&S1(n,v,_,r)}}}function ib(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var u=n.getViewOfComponentModel(o);if(!u||!u.findHighDownDispatchers)return i;for(var a=u.findHighDownDispatchers(r),f,p=0;p<a.length;p++)if(nn(a[p]).focus==="self"){f=!0;break}return{focusSelf:f,dispatchers:a}}function OU(e,t,r){var n=nn(e),i=ib(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,u=i.focusSelf;o?(u&&T1(n.componentMainType,n.componentIndex,r),we(o,function(a){return dE(a,t)})):(S1(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&T1(n.componentMainType,n.componentIndex,r),dE(e,t))}function RU(e,t,r){dD(r);var n=nn(e),i=ib(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?we(i,function(o){return pE(o,t)}):pE(e,t)}function zU(e,t,r){if(C1(t)){var n=t.dataType,i=e.getData(n),o=Bd(i,t);wt(o)||(o=[o]),e[t.type===qf?"toggleSelect":t.type===Hf?"select":"unselect"](o,n)}}function mE(e){var t=e.getAllData();we(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,u){e.isSelected(u,i)?cD(o):hD(o)})})}function BU(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();we(n,function(i){i.data;var o=i.type,u=r.getSelectedDataIndices();if(u.length>0){var a={dataIndex:u,seriesIndex:r.seriesIndex};o!=null&&(a.dataType=o),t.push(a)}})}),t}function FU(e,t,r){pD(e,!0),ds(e,kU),VU(e,t,r)}function NU(e){pD(e,!1)}function ab(e,t,r,n){n?NU(e):FU(e,t,r)}function VU(e,t,r){var n=nn(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}function pD(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function E1(e){return!!(e&&e.__highDownDispatcher)}function UU(e){var t=lE[e];return t==null&&sE<=32&&(t=lE[e]=sE++),t}function C1(e){var t=e.type;return t===Hf||t===pv||t===qf}function vE(e){var t=e.type;return t===du||t===dv}function $U(e){var t=iD(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var hc=yu.CMD,jU=[[],[],[]],gE=Math.sqrt,GU=Math.atan2;function HU(e,t){if(t){var r=e.data,n=e.len(),i,o,u,a,f,p,v=hc.M,_=hc.C,y=hc.L,S=hc.R,A=hc.A,I=hc.Q;for(u=0,a=0;u<n;){switch(i=r[u++],a=u,o=0,i){case v:o=1;break;case y:o=1;break;case _:o=3;break;case I:o=2;break;case A:var M=t[4],k=t[5],L=gE(t[0]*t[0]+t[1]*t[1]),z=gE(t[2]*t[2]+t[3]*t[3]),V=GU(-t[1]/z,t[0]/L);r[u]*=L,r[u++]+=M,r[u]*=z,r[u++]+=k,r[u++]*=L,r[u++]*=z,r[u++]+=V,r[u++]+=V,u+=2,a=u;break;case S:p[0]=r[u++],p[1]=r[u++],Pa(p,p,t),r[a++]=p[0],r[a++]=p[1],p[0]+=r[u++],p[1]+=r[u++],Pa(p,p,t),r[a++]=p[0],r[a++]=p[1]}for(f=0;f<o;f++){var H=jU[f];H[0]=r[u++],H[1]=r[u++],Pa(H,H,t),r[a++]=H[0],r[a++]=H[1]}}e.increaseVersion()}}var Ny=Math.sqrt,xm=Math.sin,bm=Math.cos,pf=Math.PI;function _E(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function A1(e,t){return(e[0]*t[0]+e[1]*t[1])/(_E(e)*_E(t))}function yE(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(A1(e,t))}function xE(e,t,r,n,i,o,u,a,f,p,v){var _=f*(pf/180),y=bm(_)*(e-r)/2+xm(_)*(t-n)/2,S=-1*xm(_)*(e-r)/2+bm(_)*(t-n)/2,A=y*y/(u*u)+S*S/(a*a);A>1&&(u*=Ny(A),a*=Ny(A));var I=(i===o?-1:1)*Ny((u*u*(a*a)-u*u*(S*S)-a*a*(y*y))/(u*u*(S*S)+a*a*(y*y)))||0,M=I*u*S/a,k=I*-a*y/u,L=(e+r)/2+bm(_)*M-xm(_)*k,z=(t+n)/2+xm(_)*M+bm(_)*k,V=yE([1,0],[(y-M)/u,(S-k)/a]),H=[(y-M)/u,(S-k)/a],Z=[(-1*y-M)/u,(-1*S-k)/a],ee=yE(H,Z);if(A1(H,Z)<=-1&&(ee=pf),A1(H,Z)>=1&&(ee=0),ee<0){var Y=Math.round(ee/pf*1e6)/1e6;ee=pf*2+Y%2*pf}v.addData(p,L,z,u,a,V,ee,_,o)}var qU=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,WU=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function ZU(e){var t=new yu;if(!e)return t;var r=0,n=0,i=r,o=n,u,a=yu.CMD,f=e.match(qU);if(!f)return t;for(var p=0;p<f.length;p++){for(var v=f[p],_=v.charAt(0),y=void 0,S=v.match(WU)||[],A=S.length,I=0;I<A;I++)S[I]=parseFloat(S[I]);for(var M=0;M<A;){var k=void 0,L=void 0,z=void 0,V=void 0,H=void 0,Z=void 0,ee=void 0,Y=r,ae=n,le=void 0,pe=void 0;switch(_){case"l":r+=S[M++],n+=S[M++],y=a.L,t.addData(y,r,n);break;case"L":r=S[M++],n=S[M++],y=a.L,t.addData(y,r,n);break;case"m":r+=S[M++],n+=S[M++],y=a.M,t.addData(y,r,n),i=r,o=n,_="l";break;case"M":r=S[M++],n=S[M++],y=a.M,t.addData(y,r,n),i=r,o=n,_="L";break;case"h":r+=S[M++],y=a.L,t.addData(y,r,n);break;case"H":r=S[M++],y=a.L,t.addData(y,r,n);break;case"v":n+=S[M++],y=a.L,t.addData(y,r,n);break;case"V":n=S[M++],y=a.L,t.addData(y,r,n);break;case"C":y=a.C,t.addData(y,S[M++],S[M++],S[M++],S[M++],S[M++],S[M++]),r=S[M-2],n=S[M-1];break;case"c":y=a.C,t.addData(y,S[M++]+r,S[M++]+n,S[M++]+r,S[M++]+n,S[M++]+r,S[M++]+n),r+=S[M-2],n+=S[M-1];break;case"S":k=r,L=n,le=t.len(),pe=t.data,u===a.C&&(k+=r-pe[le-4],L+=n-pe[le-3]),y=a.C,Y=S[M++],ae=S[M++],r=S[M++],n=S[M++],t.addData(y,k,L,Y,ae,r,n);break;case"s":k=r,L=n,le=t.len(),pe=t.data,u===a.C&&(k+=r-pe[le-4],L+=n-pe[le-3]),y=a.C,Y=r+S[M++],ae=n+S[M++],r+=S[M++],n+=S[M++],t.addData(y,k,L,Y,ae,r,n);break;case"Q":Y=S[M++],ae=S[M++],r=S[M++],n=S[M++],y=a.Q,t.addData(y,Y,ae,r,n);break;case"q":Y=S[M++]+r,ae=S[M++]+n,r+=S[M++],n+=S[M++],y=a.Q,t.addData(y,Y,ae,r,n);break;case"T":k=r,L=n,le=t.len(),pe=t.data,u===a.Q&&(k+=r-pe[le-4],L+=n-pe[le-3]),r=S[M++],n=S[M++],y=a.Q,t.addData(y,k,L,r,n);break;case"t":k=r,L=n,le=t.len(),pe=t.data,u===a.Q&&(k+=r-pe[le-4],L+=n-pe[le-3]),r+=S[M++],n+=S[M++],y=a.Q,t.addData(y,k,L,r,n);break;case"A":z=S[M++],V=S[M++],H=S[M++],Z=S[M++],ee=S[M++],Y=r,ae=n,r=S[M++],n=S[M++],y=a.A,xE(Y,ae,r,n,Z,ee,z,V,H,y,t);break;case"a":z=S[M++],V=S[M++],H=S[M++],Z=S[M++],ee=S[M++],Y=r,ae=n,r+=S[M++],n+=S[M++],y=a.A,xE(Y,ae,r,n,Z,ee,z,V,H,y,t);break}}(_==="z"||_==="Z")&&(y=a.Z,t.addData(y),r=i,n=o),u=y}return t.toStatic(),t}var mD=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(Vr);function vD(e){return e.setData!=null}function gD(e,t){var r=ZU(e),n=lt({},t);return n.buildPath=function(i){if(vD(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){HU(r,i),this.dirtyShape()},n}function XU(e,t){return new mD(gD(e,t))}function YU(e,t){var r=gD(e,t),n=function(i){mt(o,i);function o(u){var a=i.call(this,u)||this;return a.applyTransform=r.applyTransform,a.buildPath=r.buildPath,a}return o}(mD);return n}function KU(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var u=new Vr(t);return u.createPathProxy(),u.buildPath=function(a){if(vD(a)){a.appendPath(r);var f=a.getContext();f&&a.rebuildPath(f,1)}},u}var JU=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),_D=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new JU},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(Vr);_D.prototype.type="circle";const ob=_D;var QU=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),yD=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new QU},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,u=n.cy,a=n.rx,f=n.ry,p=a*i,v=f*i;r.moveTo(o-a,u),r.bezierCurveTo(o-a,u-v,o-p,u-f,o,u-f),r.bezierCurveTo(o+p,u-f,o+a,u-v,o+a,u),r.bezierCurveTo(o+a,u+v,o+p,u+f,o,u+f),r.bezierCurveTo(o-p,u+f,o-a,u+v,o-a,u),r.closePath()},t}(Vr);yD.prototype.type="ellipse";const xD=yD;var bD=Math.PI,Vy=bD*2,Xl=Math.sin,fc=Math.cos,e$=Math.acos,ui=Math.atan2,bE=Math.abs,Wf=Math.sqrt,Lf=Math.max,go=Math.min,Ga=1e-4;function t$(e,t,r,n,i,o,u,a){var f=r-e,p=n-t,v=u-i,_=a-o,y=_*f-v*p;if(!(y*y<Ga))return y=(v*(t-o)-_*(e-i))/y,[e+y*f,t+y*p]}function wm(e,t,r,n,i,o,u){var a=e-r,f=t-n,p=(u?o:-o)/Wf(a*a+f*f),v=p*f,_=-p*a,y=e+v,S=t+_,A=r+v,I=n+_,M=(y+A)/2,k=(S+I)/2,L=A-y,z=I-S,V=L*L+z*z,H=i-o,Z=y*I-A*S,ee=(z<0?-1:1)*Wf(Lf(0,H*H*V-Z*Z)),Y=(Z*z-L*ee)/V,ae=(-Z*L-z*ee)/V,le=(Z*z+L*ee)/V,pe=(-Z*L+z*ee)/V,ye=Y-M,ve=ae-k,Pe=le-M,$e=pe-k;return ye*ye+ve*ve>Pe*Pe+$e*$e&&(Y=le,ae=pe),{cx:Y,cy:ae,x0:-v,y0:-_,x1:Y*(i/H-1),y1:ae*(i/H-1)}}function r$(e){var t;if(wt(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function n$(e,t){var r,n=Lf(t.r,0),i=Lf(t.r0||0,0),o=n>0,u=i>0;if(!(!o&&!u)){if(o||(n=i,i=0),i>n){var a=n;n=i,i=a}var f=t.startAngle,p=t.endAngle;if(!(isNaN(f)||isNaN(p))){var v=t.cx,_=t.cy,y=!!t.clockwise,S=bE(p-f),A=S>Vy&&S%Vy;if(A>Ga&&(S=A),!(n>Ga))e.moveTo(v,_);else if(S>Vy-Ga)e.moveTo(v+n*fc(f),_+n*Xl(f)),e.arc(v,_,n,f,p,!y),i>Ga&&(e.moveTo(v+i*fc(p),_+i*Xl(p)),e.arc(v,_,i,p,f,y));else{var I=void 0,M=void 0,k=void 0,L=void 0,z=void 0,V=void 0,H=void 0,Z=void 0,ee=void 0,Y=void 0,ae=void 0,le=void 0,pe=void 0,ye=void 0,ve=void 0,Pe=void 0,$e=n*fc(f),Ce=n*Xl(f),at=i*fc(p),st=i*Xl(p),xt=S>Ga;if(xt){var St=t.cornerRadius;St&&(r=r$(St),I=r[0],M=r[1],k=r[2],L=r[3]);var Xt=bE(n-i)/2;if(z=go(Xt,k),V=go(Xt,L),H=go(Xt,I),Z=go(Xt,M),ae=ee=Lf(z,V),le=Y=Lf(H,Z),(ee>Ga||Y>Ga)&&(pe=n*fc(p),ye=n*Xl(p),ve=i*fc(f),Pe=i*Xl(f),S<bD)){var Dt=t$($e,Ce,ve,Pe,pe,ye,at,st);if(Dt){var Br=$e-Dt[0],cr=Ce-Dt[1],vr=pe-Dt[0],Fr=ye-Dt[1],Ur=1/Xl(e$((Br*vr+cr*Fr)/(Wf(Br*Br+cr*cr)*Wf(vr*vr+Fr*Fr)))/2),gr=Wf(Dt[0]*Dt[0]+Dt[1]*Dt[1]);ae=go(ee,(n-gr)/(Ur+1)),le=go(Y,(i-gr)/(Ur-1))}}}if(!xt)e.moveTo(v+$e,_+Ce);else if(ae>Ga){var Yt=go(k,ae),_r=go(L,ae),At=wm(ve,Pe,$e,Ce,n,Yt,y),kt=wm(pe,ye,at,st,n,_r,y);e.moveTo(v+At.cx+At.x0,_+At.cy+At.y0),ae<ee&&Yt===_r?e.arc(v+At.cx,_+At.cy,ae,ui(At.y0,At.x0),ui(kt.y0,kt.x0),!y):(Yt>0&&e.arc(v+At.cx,_+At.cy,Yt,ui(At.y0,At.x0),ui(At.y1,At.x1),!y),e.arc(v,_,n,ui(At.cy+At.y1,At.cx+At.x1),ui(kt.cy+kt.y1,kt.cx+kt.x1),!y),_r>0&&e.arc(v+kt.cx,_+kt.cy,_r,ui(kt.y1,kt.x1),ui(kt.y0,kt.x0),!y))}else e.moveTo(v+$e,_+Ce),e.arc(v,_,n,f,p,!y);if(!(i>Ga)||!xt)e.lineTo(v+at,_+st);else if(le>Ga){var Yt=go(I,le),_r=go(M,le),At=wm(at,st,pe,ye,i,-_r,y),kt=wm($e,Ce,ve,Pe,i,-Yt,y);e.lineTo(v+At.cx+At.x0,_+At.cy+At.y0),le<Y&&Yt===_r?e.arc(v+At.cx,_+At.cy,le,ui(At.y0,At.x0),ui(kt.y0,kt.x0),!y):(_r>0&&e.arc(v+At.cx,_+At.cy,_r,ui(At.y0,At.x0),ui(At.y1,At.x1),!y),e.arc(v,_,i,ui(At.cy+At.y1,At.cx+At.x1),ui(kt.cy+kt.y1,kt.cx+kt.x1),y),Yt>0&&e.arc(v+kt.cx,_+kt.cy,Yt,ui(kt.y1,kt.x1),ui(kt.y0,kt.x0),!y))}else e.lineTo(v+at,_+st),e.arc(v,_,i,p,f,y)}e.closePath()}}}var i$=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),wD=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new i$},t.prototype.buildPath=function(r,n){n$(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Vr);wD.prototype.type="sector";const sb=wD;var a$=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),SD=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new a$},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,u=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,u,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,u,!0)},t}(Vr);SD.prototype.type="ring";const TD=SD;function o$(e,t,r,n){var i=[],o=[],u=[],a=[],f,p,v,_;if(n){v=[1/0,1/0],_=[-1/0,-1/0];for(var y=0,S=e.length;y<S;y++)Cc(v,v,e[y]),Ac(_,_,e[y]);Cc(v,v,n[0]),Ac(_,_,n[1])}for(var y=0,S=e.length;y<S;y++){var A=e[y];if(r)f=e[y?y-1:S-1],p=e[(y+1)%S];else if(y===0||y===S-1){i.push(LN(e[y]));continue}else f=e[y-1],p=e[y+1];rP(o,p,f),iy(o,o,t);var I=n1(A,f),M=n1(A,p),k=I+M;k!==0&&(I/=k,M/=k),iy(u,o,-I),iy(a,o,M);var L=hT([],A,u),z=hT([],A,a);n&&(Ac(L,L,v),Cc(L,L,_),Ac(z,z,v),Cc(z,z,_)),i.push(L),i.push(z)}return r&&i.push(i.shift()),i}function ED(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=o$(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var u=i.length,a=0;a<(r?u:u-1);a++){var f=o[a*2],p=o[a*2+1],v=i[(a+1)%u];e.bezierCurveTo(f[0],f[1],p[0],p[1],v[0],v[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var a=1,_=i.length;a<_;a++)e.lineTo(i[a][0],i[a][1])}r&&e.closePath()}}var s$=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),CD=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new s$},t.prototype.buildPath=function(r,n){ED(r,n,!0)},t}(Vr);CD.prototype.type="polygon";const AD=CD;var l$=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),ID=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new l$},t.prototype.buildPath=function(r,n){ED(r,n,!1)},t}(Vr);ID.prototype.type="polyline";const lb=ID;var u$={},c$=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),MD=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new c$},t.prototype.buildPath=function(r,n){var i,o,u,a;if(this.subPixelOptimize){var f=JP(u$,n,this.style);i=f.x1,o=f.y1,u=f.x2,a=f.y2}else i=n.x1,o=n.y1,u=n.x2,a=n.y2;var p=n.percent;p!==0&&(r.moveTo(i,o),p<1&&(u=i*(1-p)+u*p,a=o*(1-p)+a*p),r.lineTo(u,a))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(Vr);MD.prototype.type="line";const rl=MD;var Ui=[],h$=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function wE(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?ST:Qn)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?ST:Qn)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?l1:ei)(e.x1,e.cpx1,e.x2,t),(r?l1:ei)(e.y1,e.cpy1,e.y2,t)]}var PD=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new h$},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,u=n.x2,a=n.y2,f=n.cpx1,p=n.cpy1,v=n.cpx2,_=n.cpy2,y=n.percent;y!==0&&(r.moveTo(i,o),v==null||_==null?(y<1&&(Vv(i,f,u,y,Ui),f=Ui[1],u=Ui[2],Vv(o,p,a,y,Ui),p=Ui[1],a=Ui[2]),r.quadraticCurveTo(f,p,u,a)):(y<1&&(Nv(i,f,v,u,y,Ui),f=Ui[1],v=Ui[2],u=Ui[3],Nv(o,p,_,a,y,Ui),p=Ui[1],_=Ui[2],a=Ui[3]),r.bezierCurveTo(f,p,v,_,u,a)))},t.prototype.pointAt=function(r){return wE(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=wE(this.shape,r,!0);return Fx(n,n)},t}(Vr);PD.prototype.type="bezier-curve";const ub=PD;var f$=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),DD=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new f$},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,u=Math.max(n.r,0),a=n.startAngle,f=n.endAngle,p=n.clockwise,v=Math.cos(a),_=Math.sin(a);r.moveTo(v*u+i,_*u+o),r.arc(i,o,u,a,f,!p)},t}(Vr);DD.prototype.type="arc";const cb=DD;var d$=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Vr.prototype.getBoundingRect.call(this)},t}(Vr);const kD=d$;var p$=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const LD=p$;var m$=function(e){mt(t,e);function t(r,n,i,o,u,a){var f=e.call(this,u)||this;return f.x=r??0,f.y=n??0,f.x2=i??1,f.y2=o??0,f.type="linear",f.global=a||!1,f}return t}(LD);const v$=m$;var g$=function(e){mt(t,e);function t(r,n,i,o,u){var a=e.call(this,o)||this;return a.x=r??.5,a.y=n??.5,a.r=i??.5,a.type="radial",a.global=u||!1,a}return t}(LD);const _$=g$;var Yl=[0,0],Kl=[0,0],Sm=new tn,Tm=new tn,y$=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new tn;for(var n=0;n<2;n++)this._axes[n]=new tn;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,u=t.y,a=o+t.width,f=u+t.height;if(n[0].set(o,u),n[1].set(a,u),n[2].set(a,f),n[3].set(o,f),r)for(var p=0;p<4;p++)n[p].transform(r);tn.sub(i[0],n[1],n[0]),tn.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var p=0;p<2;p++)this._origin[p]=i[p].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return Sm.set(1/0,1/0),Tm.set(0,0),!this._intersectCheckOneSide(this,t,Sm,Tm,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,Sm,Tm,i,-1)&&(n=!1,i)||i||tn.copy(r,n?Sm:Tm),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,u){for(var a=!0,f=0;f<2;f++){var p=this._axes[f];if(this._getProjMinMaxOnAxis(f,t._corners,Yl),this._getProjMinMaxOnAxis(f,r._corners,Kl),Yl[1]<Kl[0]||Yl[0]>Kl[1]){if(a=!1,o)return a;var v=Math.abs(Kl[0]-Yl[1]),_=Math.abs(Yl[0]-Kl[1]);Math.min(v,_)>i.len()&&(v<_?tn.scale(i,p,-v*u):tn.scale(i,p,_*u))}else if(n){var v=Math.abs(Kl[0]-Yl[1]),_=Math.abs(Yl[0]-Kl[1]);Math.min(v,_)<n.len()&&(v<_?tn.scale(n,p,v*u):tn.scale(n,p,-_*u))}}return a},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,u=r[0].dot(i)+o[t],a=u,f=u,p=1;p<r.length;p++){var v=r[p].dot(i)+o[t];a=Math.min(v,a),f=Math.max(v,f)}n[0]=a,n[1]=f},e}();const Wv=y$;var x$=[],b$=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new Zr(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(x$)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var u=0;u<this._displayables.length;u++){var a=this._displayables[u];if(a.contain(r,n))return!0}return!1},t}(Nd);const w$=b$;var S$=En();function T$(e,t,r,n,i){var o;if(t&&t.ecModel){var u=t.ecModel.getUpdatePayload();o=u&&u.animation}var a=t&&t.isAnimationEnabled(),f=e==="update";if(a){var p=void 0,v=void 0,_=void 0;n?(p=or(n.duration,200),v=or(n.easing,"cubicOut"),_=0):(p=t.getShallow(f?"animationDurationUpdate":"animationDuration"),v=t.getShallow(f?"animationEasingUpdate":"animationEasing"),_=t.getShallow(f?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(p=o.duration),o.easing!=null&&(v=o.easing),o.delay!=null&&(_=o.delay)),Zt(_)&&(_=_(r,i)),Zt(p)&&(p=p(r));var y={duration:p||0,delay:_,easing:v};return y}else return null}function hb(e,t,r,n,i,o,u){var a=!1,f;Zt(i)?(u=o,o=i,i=null):Vt(i)&&(o=i.cb,u=i.during,a=i.isFrom,f=i.removeOpt,i=i.dataIndex);var p=e==="leave";p||t.stopAnimation("leave");var v=T$(e,n,i,p?f||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(v&&v.duration>0){var _=v.duration,y=v.delay,S=v.easing,A={duration:_,delay:y||0,easing:S,done:o,force:!!o||!!u,setToFinal:!p,scope:e,during:u};a?t.animateFrom(r,A):t.animateTo(r,A)}else t.stopAnimation(),!a&&t.attr(r),u&&u(1),o&&o()}function wu(e,t,r,n,i,o){hb("update",e,t,r,n,i,o)}function Vd(e,t,r,n,i,o){hb("enter",e,t,r,n,i,o)}function Zf(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function Zv(e,t,r,n,i,o){Zf(e)||hb("leave",e,t,r,n,i,o)}function SE(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),Zv(e,{style:{opacity:0}},t,r,n)}function E$(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||SE(i,t,r,n)}):SE(e,t,r,n)}function C$(e){S$(e).oldStyle=e.style}var Xv=Math.max,Yv=Math.min,I1={};function A$(e){return Vr.extend(e)}var I$=YU;function M$(e,t){return I$(e,t)}function Qa(e,t){I1[e]=t}function P$(e){if(I1.hasOwnProperty(e))return I1[e]}function fb(e,t,r,n){var i=XU(e,t);return r&&(n==="center"&&(r=RD(r,i.getBoundingRect())),zD(i,r)),i}function OD(e,t,r){var n=new fs({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(RD(t,o))}}});return n}function RD(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,u=e.y+e.height/2;return{x:o-n/2,y:u-i/2,width:n,height:i}}var D$=KU;function zD(e,t){if(e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function pd(e,t){return JP(e,e,{lineWidth:t}),e}function k$(e){return QP(e.shape,e.shape,e.style),e}var L$=uu;function O$(e,t){for(var r=Vx([]);e&&e!==t;)kc(r,e.getLocalTransform(),r),e=e.parent;return r}function db(e,t,r){return t&&!Wi(t)&&(t=qx.getLocalTransform(t)),r&&(t=$x([],t)),Pa([],e,t)}function R$(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=db(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function TE(e){return!e.isGroup}function z$(e){return e.shape!=null}function BD(e,t,r){if(!e||!t)return;function n(u){var a={};return u.traverse(function(f){TE(f)&&f.anid&&(a[f.anid]=f)}),a}function i(u){var a={x:u.x,y:u.y,rotation:u.rotation};return z$(u)&&(a.shape=lt({},u.shape)),a}var o=n(e);t.traverse(function(u){if(TE(u)&&u.anid){var a=o[u.anid];if(a){var f=i(u);u.attr(i(a)),wu(u,f,r,nn(u).dataIndex)}}})}function B$(e,t){return Bt(e,function(r){var n=r[0];n=Xv(n,t.x),n=Yv(n,t.x+t.width);var i=r[1];return i=Xv(i,t.y),i=Yv(i,t.y+t.height),[n,i]})}function F$(e,t){var r=Xv(e.x,t.x),n=Yv(e.x+e.width,t.x+t.width),i=Xv(e.y,t.y),o=Yv(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function FD(e,t,r){var n=lt({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),an(i,r),new fs(n)):fb(e.replace("path://",""),n,r,"center")}function N$(e,t,r,n,i){for(var o=0,u=i[i.length-1];o<i.length;o++){var a=i[o];if(ND(e,t,r,n,a[0],a[1],u[0],u[1]))return!0;u=a}}function ND(e,t,r,n,i,o,u,a){var f=r-e,p=n-t,v=u-i,_=a-o,y=Uy(v,_,f,p);if(V$(y))return!1;var S=e-i,A=t-o,I=Uy(S,A,f,p)/y;if(I<0||I>1)return!1;var M=Uy(S,A,v,_)/y;return!(M<0||M>1)}function Uy(e,t,r,n){return e*n-r*t}function V$(e){return e<=1e-6&&e>=-1e-6}function VD(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Rt(t)?{formatter:t}:t,o=r.mainType,u=r.componentIndex,a={componentType:o,name:n,$vars:["name"]};a[o+"Index"]=u;var f=e.formatterParamsExtra;f&&we(Pr(f),function(v){$c(a,v)||(a[v]=f[v],a.$vars.push(v))});var p=nn(e.el);p.componentMainType=o,p.componentIndex=u,p.tooltipConfig={name:n,option:an({content:n,formatterParams:a},i)}}function EE(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function Cg(e,t){if(e)if(wt(e))for(var r=0;r<e.length;r++)EE(e[r],t);else EE(e,t)}Qa("circle",ob);Qa("ellipse",xD);Qa("sector",sb);Qa("ring",TD);Qa("polygon",AD);Qa("polyline",lb);Qa("rect",qi);Qa("line",rl);Qa("bezierCurve",ub);Qa("arc",cb);const U$=Object.freeze(Object.defineProperty({__proto__:null,Arc:cb,BezierCurve:ub,BoundingRect:Zr,Circle:ob,CompoundPath:kD,Ellipse:xD,Group:ri,Image:fs,IncrementalDisplayable:w$,Line:rl,LinearGradient:v$,OrientedBoundingRect:Wv,Path:Vr,Point:tn,Polygon:AD,Polyline:lb,RadialGradient:_$,Rect:qi,Ring:TD,Sector:sb,Text:Ya,applyTransform:db,clipPointsByRect:B$,clipRectByRect:F$,createIcon:FD,extendPath:M$,extendShape:A$,getShapeClass:P$,getTransform:O$,groupTransition:BD,initProps:Vd,isElementRemoved:Zf,lineLineIntersect:ND,linePolygonIntersect:N$,makeImage:OD,makePath:fb,mergePath:D$,registerShape:Qa,removeElement:Zv,removeElementWithFadeOut:E$,resizePath:zD,setTooltipConfig:VD,subPixelOptimize:L$,subPixelOptimizeLine:pd,subPixelOptimizeRect:k$,transformDirection:R$,traverseElements:Cg,updateProps:wu},Symbol.toStringTag,{value:"Module"}));var Ag={};function $$(e,t){for(var r=0;r<Io.length;r++){var n=Io[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var u=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(u,!0)}function CE(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,u=t.normal,a;n&&(a=n.getFormattedLabel(i,"normal",null,o,u&&u.get("formatter"),r!=null?{interpolatedValue:r}:null)),a==null&&(a=Zt(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var f={normal:a},p=0;p<Io.length;p++){var v=Io[p],_=t[v];f[v]=or(n?n.getFormattedLabel(i,v,null,o,_&&_.get("formatter")):null,a)}return f}function UD(e,t,r,n){r=r||Ag;for(var i=e instanceof Ya,o=!1,u=0;u<uE.length;u++){var a=t[uE[u]];if(a&&a.getShallow("show")){o=!0;break}}var f=i?e:e.getTextContent();if(o){i||(f||(f=new Ya,e.setTextContent(f)),e.stateProxy&&(f.stateProxy=e.stateProxy));var p=CE(r,t),v=t.normal,_=!!v.getShallow("show"),y=xu(v,n&&n.normal,r,!1,!i);y.text=p.normal,i||e.setTextConfig(AE(v,r,!1));for(var u=0;u<Io.length;u++){var S=Io[u],a=t[S];if(a){var A=f.ensureState(S),I=!!or(a.getShallow("show"),_);if(I!==_&&(A.ignore=!I),A.style=xu(a,n&&n[S],r,!0,!i),A.style.text=p[S],!i){var M=e.ensureState(S);M.textConfig=AE(a,r,!0)}}}f.silent=!!v.getShallow("silent"),f.style.x!=null&&(y.x=f.style.x),f.style.y!=null&&(y.y=f.style.y),f.ignore=!_,f.useStyle(y),f.dirty(),r.enableTextSetter&&(q$(f).setLabelText=function(k){var L=CE(r,t,k);$$(f,L)})}else f&&(f.ignore=!0);e.dirty()}function Ig(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<Io.length;n++){var i=Io[n];r[i]=e.getModel([i,t])}return r}function xu(e,t,r,n,i){var o={};return j$(o,e,r,n,i),t&&lt(o,t),o}function AE(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),u=or(e.getShallow("distance"),r?null:5),a=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),a!=null&&(n.offset=a),o!=null&&(o*=Math.PI/180,n.rotation=o),u!=null&&(n.distance=u),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function j$(e,t,r,n,i){r=r||Ag;var o=t.ecModel,u=o&&o.option.textStyle,a=G$(t),f;if(a){f={};for(var p in a)if(a.hasOwnProperty(p)){var v=t.getModel(["rich",p]);DE(f[p]={},v,u,r,n,i,!1,!0)}}f&&(e.rich=f);var _=t.get("overflow");_&&(e.overflow=_);var y=t.get("minMargin");y!=null&&(e.margin=y),DE(e,t,u,r,n,i,!0,!1)}function G$(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||Ag).rich;if(r){t=t||{};for(var n=Pr(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var IE=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],ME=["align","lineHeight","width","height","tag","verticalAlign"],PE=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function DE(e,t,r,n,i,o,u,a){r=!i&&r||Ag;var f=n&&n.inheritColor,p=t.getShallow("color"),v=t.getShallow("textBorderColor"),_=or(t.getShallow("opacity"),r.opacity);(p==="inherit"||p==="auto")&&(f?p=f:p=null),(v==="inherit"||v==="auto")&&(f?v=f:v=null),o||(p=p||r.color,v=v||r.textBorderColor),p!=null&&(e.fill=p),v!=null&&(e.stroke=v);var y=or(t.getShallow("textBorderWidth"),r.textBorderWidth);y!=null&&(e.lineWidth=y);var S=or(t.getShallow("textBorderType"),r.textBorderType);S!=null&&(e.lineDash=S);var A=or(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);A!=null&&(e.lineDashOffset=A),!i&&_==null&&!a&&(_=n&&n.defaultOpacity),_!=null&&(e.opacity=_),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var I=0;I<IE.length;I++){var M=IE[I],k=or(t.getShallow(M),r[M]);k!=null&&(e[M]=k)}for(var I=0;I<ME.length;I++){var M=ME[I],k=t.getShallow(M);k!=null&&(e[M]=k)}if(e.verticalAlign==null){var L=t.getShallow("baseline");L!=null&&(e.verticalAlign=L)}if(!u||!n.disableBox){for(var I=0;I<PE.length;I++){var M=PE[I],k=t.getShallow(M);k!=null&&(e[M]=k)}var z=t.getShallow("borderType");z!=null&&(e.borderDash=z),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&f&&(e.backgroundColor=f),(e.borderColor==="auto"||e.borderColor==="inherit")&&f&&(e.borderColor=f)}}function H$(e,t){var r=t&&t.getModel("textStyle");return So([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var q$=En(),W$=["textStyle","color"],$y=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],jy=new Ya,Z$=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(W$):null)},e.prototype.getFont=function(){return H$({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<$y.length;n++)r[$y[n]]=this.getShallow($y[n]);return jy.useStyle(r),jy.update(),jy.getBoundingRect()},e}();const X$=Z$;var $D=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Y$=hd($D),K$=function(){function e(){}return e.prototype.getLineStyle=function(t){return Y$(this,t)},e}(),jD=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],J$=hd(jD),Q$=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return J$(this,t,r)},e}(),Su=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){un(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(mr(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!ar.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();Kx(Su);PV(Su);Ja(Su,K$);Ja(Su,Q$);Ja(Su,RV);Ja(Su,X$);const Pi=Su;var ej=Math.round(Math.random()*10);function Mg(e){return[e||"",ej++].join("_")}function tj(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=To(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=To(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function rj(e,t){e.topologicalTravel=function(o,u,a,f){if(!o.length)return;var p=r(u),v=p.graph,_=p.noEntryList,y={};for(we(o,function(L){y[L]=!0});_.length;){var S=_.pop(),A=v[S],I=!!y[S];I&&(a.call(f,S,A.originalDeps.slice()),delete y[S]),we(A.successor,I?k:M)}we(y,function(){var L="";throw new Error(L)});function M(L){v[L].entryCount--,v[L].entryCount===0&&_.push(L)}function k(L){y[L]=!0,M(L)}};function r(o){var u={},a=[];return we(o,function(f){var p=n(u,f),v=p.originalDeps=t(f),_=i(v,o);p.entryCount=_.length,p.entryCount===0&&a.push(f),we(_,function(y){qr(p.predecessor,y)<0&&p.predecessor.push(y);var S=n(u,y);qr(S.successor,y)<0&&S.successor.push(f)})}),{graph:u,noEntryList:a}}function n(o,u){return o[u]||(o[u]={predecessor:[],successor:[]}),o[u]}function i(o,u){var a=[];return we(o,function(f){qr(u,f)>=0&&a.push(f)}),a}}const nj={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},ij={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var Kv="ZH",pb="EN",md=pb,mv={},mb={},GD=ar.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(Kv)>-1?Kv:md}():md;function HD(e,t){e=e.toUpperCase(),mb[e]=new Pi(t),mv[e]=t}function aj(e){if(Rt(e)){var t=mv[e.toUpperCase()]||{};return e===Kv||e===pb?mr(t):un(mr(t),mr(mv[md]),!1)}else return un(mr(e),mr(mv[md]),!1)}function oj(e){return mb[e]}function sj(){return mb[md]}HD(pb,nj);HD(Kv,ij);var vb=1e3,gb=vb*60,Xf=gb*60,Aa=Xf*24,kE=Aa*365,Of={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Em="{yyyy}-{MM}-{dd}",LE={year:"{yyyy}",month:"{yyyy}-{MM}",day:Em,hour:Em+" "+Of.hour,minute:Em+" "+Of.minute,second:Em+" "+Of.second,millisecond:Of.none},Gy=["year","month","day","hour","minute","second","millisecond"],qD=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Jl(e,t){return e+="","0000".substr(0,t-e.length)+e}function Oc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function lj(e){return e===Oc(e)}function uj(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function Pg(e,t,r,n){var i=ss(e),o=i[_b(r)](),u=i[Rc(r)]()+1,a=Math.floor((u-1)/3)+1,f=i[Dg(r)](),p=i["get"+(r?"UTC":"")+"Day"](),v=i[vd(r)](),_=(v-1)%12+1,y=i[kg(r)](),S=i[Lg(r)](),A=i[Og(r)](),I=n instanceof Pi?n:oj(n||GD)||sj(),M=I.getModel("time"),k=M.get("month"),L=M.get("monthAbbr"),z=M.get("dayOfWeek"),V=M.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,a+"").replace(/{MMMM}/g,k[u-1]).replace(/{MMM}/g,L[u-1]).replace(/{MM}/g,Jl(u,2)).replace(/{M}/g,u+"").replace(/{dd}/g,Jl(f,2)).replace(/{d}/g,f+"").replace(/{eeee}/g,z[p]).replace(/{ee}/g,V[p]).replace(/{e}/g,p+"").replace(/{HH}/g,Jl(v,2)).replace(/{H}/g,v+"").replace(/{hh}/g,Jl(_+"",2)).replace(/{h}/g,_+"").replace(/{mm}/g,Jl(y,2)).replace(/{m}/g,y+"").replace(/{ss}/g,Jl(S,2)).replace(/{s}/g,S+"").replace(/{SSS}/g,Jl(A,3)).replace(/{S}/g,A+"")}function cj(e,t,r,n,i){var o=null;if(Rt(r))o=r;else if(Zt(r))o=r(e.value,t,{level:e.level});else{var u=lt({},Of);if(e.level>0)for(var a=0;a<Gy.length;++a)u[Gy[a]]="{primary|"+u[Gy[a]]+"}";var f=r?r.inherit===!1?r:an(r,u):u,p=WD(e.value,i);if(f[p])o=f[p];else if(f.inherit){for(var v=qD.indexOf(p),a=v-1;a>=0;--a)if(f[p]){o=f[p];break}o=o||u.none}if(wt(o)){var _=e.level==null?0:e.level>=0?e.level:o.length+e.level;_=Math.min(_,o.length-1),o=o[_]}}return Pg(new Date(e.value),o,i,n)}function WD(e,t){var r=ss(e),n=r[Rc(t)]()+1,i=r[Dg(t)](),o=r[vd(t)](),u=r[kg(t)](),a=r[Lg(t)](),f=r[Og(t)](),p=f===0,v=p&&a===0,_=v&&u===0,y=_&&o===0,S=y&&i===1,A=S&&n===1;return A?"year":S?"month":y?"day":_?"hour":v?"minute":p?"second":"millisecond"}function OE(e,t,r){var n=gn(e)?ss(e):e;switch(t=t||WD(e,r),t){case"year":return n[_b(r)]();case"half-year":return n[Rc(r)]()>=6?1:0;case"quarter":return Math.floor((n[Rc(r)]()+1)/4);case"month":return n[Rc(r)]();case"day":return n[Dg(r)]();case"half-day":return n[vd(r)]()/24;case"hour":return n[vd(r)]();case"minute":return n[kg(r)]();case"second":return n[Lg(r)]();case"millisecond":return n[Og(r)]()}}function _b(e){return e?"getUTCFullYear":"getFullYear"}function Rc(e){return e?"getUTCMonth":"getMonth"}function Dg(e){return e?"getUTCDate":"getDate"}function vd(e){return e?"getUTCHours":"getHours"}function kg(e){return e?"getUTCMinutes":"getMinutes"}function Lg(e){return e?"getUTCSeconds":"getSeconds"}function Og(e){return e?"getUTCMilliseconds":"getMilliseconds"}function hj(e){return e?"setUTCFullYear":"setFullYear"}function ZD(e){return e?"setUTCMonth":"setMonth"}function XD(e){return e?"setUTCDate":"setDate"}function YD(e){return e?"setUTCHours":"setHours"}function KD(e){return e?"setUTCMinutes":"setMinutes"}function JD(e){return e?"setUTCSeconds":"setSeconds"}function QD(e){return e?"setUTCMilliseconds":"setMilliseconds"}function e5(e){if(!cV(e))return Rt(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function t5(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var yb=QM;function M1(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(v){return v&&So(v)?v:"-"}function o(v){return!!(v!=null&&!isNaN(v)&&isFinite(v))}var u=t==="time",a=e instanceof Date;if(u||a){var f=u?ss(e):e;if(isNaN(+f)){if(a)return"-"}else return Pg(f,n,r)}if(t==="ordinal")return e1(e)?i(e):gn(e)&&o(e)?e+"":"-";var p=Gv(e);return o(p)?e5(p):e1(e)?i(e):typeof e=="boolean"?e+"":"-"}var RE=["a","b","c","d","e","f","g"],Hy=function(e,t){return"{"+e+(t??"")+"}"};function r5(e,t,r){wt(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var u=RE[o];e=e.replace(Hy(u),Hy(u,0))}for(var a=0;a<n;a++)for(var f=0;f<i.length;f++){var p=t[a][i[f]];e=e.replace(Hy(RE[f],a),r?aa(p):p)}return e}function fj(e,t){var r=Rt(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+aa(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+aa(n)+";"+(t||"")+'"></span>';var u=r.markerId||"markerX";return{renderMode:o,content:"{"+u+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function gd(e,t){return t=t||"transparent",Rt(e)?e:Vt(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function zE(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var vv=we,dj=["left","right","top","bottom","width","height"],Cm=[["width","left","right"],["height","top","bottom"]];function n5(e,t,r,n,i){var o=0,u=0;n==null&&(n=1/0),i==null&&(i=1/0);var a=0;t.eachChild(function(f,p){var v=f.getBoundingRect(),_=t.childAt(p+1),y=_&&_.getBoundingRect(),S,A;if(e==="horizontal"){var I=v.width+(y?-y.x+v.x:0);S=o+I,S>n||f.newline?(o=0,S=I,u+=a+r,a=v.height):a=Math.max(a,v.height)}else{var M=v.height+(y?-y.y+v.y:0);A=u+M,A>i||f.newline?(o+=a+r,u=0,A=M,a=v.width):a=Math.max(a,v.width)}f.newline||(f.x=o,f.y=u,f.markRedraw(),e==="horizontal"?o=S+r:u=A+r)})}Wn(n5,"vertical");Wn(n5,"horizontal");function xb(e,t,r){r=yb(r||0);var n=t.width,i=t.height,o=ti(e.left,n),u=ti(e.top,i),a=ti(e.right,n),f=ti(e.bottom,i),p=ti(e.width,n),v=ti(e.height,i),_=r[2]+r[0],y=r[1]+r[3],S=e.aspect;switch(isNaN(p)&&(p=n-a-y-o),isNaN(v)&&(v=i-f-_-u),S!=null&&(isNaN(p)&&isNaN(v)&&(S>n/i?p=n*.8:v=i*.8),isNaN(p)&&(p=S*v),isNaN(v)&&(v=p/S)),isNaN(o)&&(o=n-a-p-y),isNaN(u)&&(u=i-f-v-_),e.left||e.right){case"center":o=n/2-p/2-r[3];break;case"right":o=n-p-y;break}switch(e.top||e.bottom){case"middle":case"center":u=i/2-v/2-r[0];break;case"bottom":u=i-v-_;break}o=o||0,u=u||0,isNaN(p)&&(p=n-y-o-(a||0)),isNaN(v)&&(v=i-_-u-(f||0));var A=new Zr(o+r[3],u+r[0],p,v);return A.margin=r,A}function _d(e){var t=e.layoutMode||e.constructor.layoutMode;return Vt(t)?t:t?{type:t}:null}function yd(e,t,r){var n=r&&r.ignoreSize;!wt(n)&&(n=[n,n]);var i=u(Cm[0],0),o=u(Cm[1],1);p(Cm[0],e,i),p(Cm[1],e,o);function u(v,_){var y={},S=0,A={},I=0,M=2;if(vv(v,function(z){A[z]=e[z]}),vv(v,function(z){a(t,z)&&(y[z]=A[z]=t[z]),f(y,z)&&S++,f(A,z)&&I++}),n[_])return f(t,v[1])?A[v[2]]=null:f(t,v[2])&&(A[v[1]]=null),A;if(I===M||!S)return A;if(S>=M)return y;for(var k=0;k<v.length;k++){var L=v[k];if(!a(y,L)&&a(e,L)){y[L]=e[L];break}}return y}function a(v,_){return v.hasOwnProperty(_)}function f(v,_){return v[_]!=null&&v[_]!=="auto"}function p(v,_,y){vv(v,function(S){_[S]=y[S]})}}function bb(e){return pj({},e)}function pj(e,t){return t&&e&&vv(dj,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var mj=En(),eh=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=Mg("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=_d(this),o=i?bb(r):{},u=n.getTheme();un(r,u.get(this.mainType)),un(r,this.getDefaultOption()),i&&yd(r,o,i)},t.prototype.mergeOption=function(r,n){un(this.option,r,!0);var i=_d(this);i&&yd(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!AV(r))return r.defaultOption;var n=mj(this);if(!n.defaultOption){for(var i=[],o=r;o;){var u=o.prototype.defaultOption;u&&i.push(u),o=o.superClass}for(var a={},f=i.length-1;f>=0;f--)a=un(a,i[f],!0);n.defaultOption=a}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return Fd(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Pi);GP(eh,Pi);wg(eh);tj(eh);rj(eh,vj);function vj(e){var t=[];return we(eh.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Bt(t,function(r){return To(r).main}),e!=="dataset"&&qr(t,"dataset")<=0&&t.unshift("dataset"),t}const ln=eh;var i5="";typeof navigator<"u"&&(i5=navigator.platform||"");var dc="rgba(0, 0, 0, 0.2)";const gj={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:dc,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:dc,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:dc,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:dc,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:dc,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:dc,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:i5.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var a5=sr(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),ka="original",Zi="arrayRows",Mo="objectRows",ps="keyedColumns",Qs="typedArray",o5="unknown",os="column",th="row",ia={Must:1,Might:2,Not:3},s5=En();function _j(e){s5(e).datasetMap=sr()}function yj(e,t,r){var n={},i=l5(t);if(!i||!e)return n;var o=[],u=[],a=t.ecModel,f=s5(a).datasetMap,p=i.uid+"_"+r.seriesLayoutBy,v,_;e=e.slice(),we(e,function(I,M){var k=Vt(I)?I:e[M]={name:I};k.type==="ordinal"&&v==null&&(v=M,_=A(k)),n[k.name]=[]});var y=f.get(p)||f.set(p,{categoryWayDim:_,valueWayDim:0});we(e,function(I,M){var k=I.name,L=A(I);if(v==null){var z=y.valueWayDim;S(n[k],z,L),S(u,z,L),y.valueWayDim+=L}else if(v===M)S(n[k],0,L),S(o,0,L);else{var z=y.categoryWayDim;S(n[k],z,L),S(u,z,L),y.categoryWayDim+=L}});function S(I,M,k){for(var L=0;L<k;L++)I.push(M+L)}function A(I){var M=I.dimsDef;return M?M.length:1}return o.length&&(n.itemName=o),u.length&&(n.seriesName=u),n}function l5(e){var t=e.get("data",!0);if(!t)return Fd(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Wa).models[0]}function xj(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:Fd(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Wa).models}function u5(e,t){return bj(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function bj(e,t,r,n,i,o){var u,a=5;if(ua(e))return ia.Not;var f,p;if(n){var v=n[o];Vt(v)?(f=v.name,p=v.type):Rt(v)&&(f=v)}if(p!=null)return p==="ordinal"?ia.Must:ia.Not;if(t===Zi){var _=e;if(r===th){for(var y=_[o],S=0;S<(y||[]).length&&S<a;S++)if((u=V(y[i+S]))!=null)return u}else for(var S=0;S<_.length&&S<a;S++){var A=_[i+S];if(A&&(u=V(A[o]))!=null)return u}}else if(t===Mo){var I=e;if(!f)return ia.Not;for(var S=0;S<I.length&&S<a;S++){var M=I[S];if(M&&(u=V(M[f]))!=null)return u}}else if(t===ps){var k=e;if(!f)return ia.Not;var y=k[f];if(!y||ua(y))return ia.Not;for(var S=0;S<y.length&&S<a;S++)if((u=V(y[S]))!=null)return u}else if(t===ka)for(var L=e,S=0;S<L.length&&S<a;S++){var M=L[S],z=zd(M);if(!wt(z))return ia.Not;if((u=V(z[o]))!=null)return u}function V(H){var Z=Rt(H);if(H!=null&&isFinite(H)&&H!=="")return Z?ia.Might:ia.Not;if(Z&&H!=="-")return ia.Must}return ia.Not}var wj=sr();function Sj(e,t,r){var n=wj.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var BE=En();En();var wb=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=Li(this.get("color",!0)),o=this.get("colorLayer",!0);return Ej(this,BE,i,o,t,r,n)},e.prototype.clearColorPalette=function(){Cj(this,BE)},e}();function Tj(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function Ej(e,t,r,n,i,o,u){o=o||e;var a=t(o),f=a.paletteIdx||0,p=a.paletteNameMap=a.paletteNameMap||{};if(p.hasOwnProperty(i))return p[i];var v=u==null||!n?r:Tj(n,u);if(v=v||r,!(!v||!v.length)){var _=v[f];return i&&(p[i]=_),a.paletteIdx=(f+1)%v.length,_}}function Cj(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var Am,mf,FE,NE="\0_ec_inner",Aj=1,c5=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,u,a){o=o||{},this.option=null,this._theme=new Pi(o),this._locale=new Pi(u),this._optionManager=a},t.prototype.setOption=function(r,n,i){var o=$E(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,$E(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var u=o.mountOption(r==="recreate");!this.option||r==="recreate"?FE(this,u):(this.restoreData(),this._mergeOption(u,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var a=o.getTimelineOption(this);a&&(i=!0,this._mergeOption(a,n))}if(!r||r==="recreate"||r==="media"){var f=o.getMediaOption(this);f.length&&we(f,function(p){i=!0,this._mergeOption(p,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,u=this._componentsCount,a=[],f=sr(),p=n&&n.replaceMergeMainTypeMap;_j(this),we(r,function(_,y){_!=null&&(ln.hasClass(y)?y&&(a.push(y),f.set(y,!0)):i[y]=i[y]==null?mr(_):un(i[y],_,!0))}),p&&p.each(function(_,y){ln.hasClass(y)&&!f.get(y)&&(a.push(y),f.set(y,!0))}),ln.topologicalTravel(a,ln.getAllClassMainTypes(),v,this);function v(_){var y=Sj(this,_,Li(r[_])),S=o.get(_),A=S?p&&p.get(_)?"replaceMerge":"normalMerge":"replaceAll",I=dV(S,y,A);xV(I,_,ln),i[_]=null,o.set(_,null),u.set(_,0);var M=[],k=[],L=0,z;we(I,function(V,H){var Z=V.existing,ee=V.newOption;if(!ee)Z&&(Z.mergeOption({},this),Z.optionUpdated({},!1));else{var Y=_==="series",ae=ln.getClass(_,V.keyInfo.subType,!Y);if(!ae)return;if(_==="tooltip"){if(z)return;z=!0}if(Z&&Z.constructor===ae)Z.name=V.keyInfo.name,Z.mergeOption(ee,this),Z.optionUpdated(ee,!1);else{var le=lt({componentIndex:H},V.keyInfo);Z=new ae(ee,this,this,le),lt(Z,le),V.brandNew&&(Z.__requireNewView=!0),Z.init(ee,this,this),Z.optionUpdated(null,!0)}}Z?(M.push(Z.option),k.push(Z),L++):(M.push(void 0),k.push(void 0))},this),i[_]=M,o.set(_,k),u.set(_,L),_==="series"&&Am(this)}this._seriesIndices||Am(this)},t.prototype.getOption=function(){var r=mr(this.option);return we(r,function(n,i){if(ln.hasClass(i)){for(var o=Li(n),u=o.length,a=!1,f=u-1;f>=0;f--)o[f]&&!cd(o[f])?a=!0:(o[f]=null,!a&&u--);o.length=u,r[i]=o}}),delete r[NE],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var u=0;u<i.length;u++)if(i[u])return i[u]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,u=r.name,a=this._componentsMap.get(n);if(!a||!a.length)return[];var f;return i!=null?(f=[],we(Li(i),function(p){a[p]&&f.push(a[p])})):o!=null?f=VE("id",o,a):u!=null?f=VE("name",u,a):f=di(a,function(p){return!!p}),UE(f,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=a(n),u=o?this.queryComponents(o):di(this._componentsMap.get(i),function(p){return!!p});return f(UE(u,r));function a(p){var v=i+"Index",_=i+"Id",y=i+"Name";return p&&(p[v]!=null||p[_]!=null||p[y]!=null)?{mainType:i,index:p[v],id:p[_],name:p[y]}:null}function f(p){return r.filter?di(p,r.filter):p}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(Zt(r)){var u=n,a=r;o.each(function(_,y){for(var S=0;_&&S<_.length;S++){var A=_[S];A&&a.call(u,y,A,A.componentIndex)}})}else for(var f=Rt(r)?o.get(r):Vt(r)?this.findComponents(r):null,p=0;f&&p<f.length;p++){var v=f[p];v&&n.call(i,v,v.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=Ao(r,null);return di(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return di(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return di(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){mf(this),we(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){we(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){mf(this),we(this._seriesIndices,function(o){var u=this._componentsMap.get("series")[o];u.subType===r&&n.call(i,u,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return we(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return mf(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){mf(this);var i=[];we(this._seriesIndices,function(o){var u=this._componentsMap.get("series")[o];r.call(n,u,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=sr(i)},t.prototype.restoreData=function(r){Am(this);var n=this._componentsMap,i=[];n.each(function(o,u){ln.hasClass(u)&&i.push(u)}),ln.topologicalTravel(i,ln.getAllClassMainTypes(),function(o){we(n.get(o),function(u){u&&(o!=="series"||!Ij(u,r))&&u.restoreData()})})},t.internalField=function(){Am=function(r){var n=r._seriesIndices=[];we(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=sr(n)},mf=function(r){},FE=function(r,n){r.option={},r.option[NE]=Aj,r._componentsMap=sr({series:[]}),r._componentsCount=sr();var i=n.aria;Vt(i)&&i.enabled==null&&(i.enabled=!0),Mj(n,r._theme.option),un(n,gj,!1),r._mergeOption(n,null)}}(),t}(Pi);function Ij(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function Mj(e,t){var r=e.color&&!e.colorLayer;we(t,function(n,i){i==="colorLayer"&&r||ln.hasClass(i)||(typeof n=="object"?e[i]=e[i]?un(e[i],n,!1):mr(n):e[i]==null&&(e[i]=n))})}function VE(e,t,r){if(wt(t)){var n=sr();return we(t,function(o){if(o!=null){var u=Ao(o,null);u!=null&&n.set(o,!0)}}),di(r,function(o){return o&&n.get(o[e])})}else{var i=Ao(t,null);return di(r,function(o){return o&&i!=null&&o[e]===i})}}function UE(e,t){return t.hasOwnProperty("subType")?di(e,function(r){return r&&r.subType===t.subType}):e}function $E(e){var t=sr();return e&&we(Li(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Ja(c5,wb);const h5=c5;var Pj=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Dj=function(){function e(t){we(Pj,function(r){this[r]=vn(t[r],t)},this)}return e}();const f5=Dj;var qy={},kj=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];we(qy,function(i,o){var u=i.create(t,r);n=n.concat(u||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){we(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){qy[t]=r},e.get=function(t){return qy[t]},e}();const Sb=kj;var Lj=/^(min|max)?(.+)$/,Oj=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(we(Li(t.series),function(u){u&&u.data&&ua(u.data)&&t1(u.data)}),we(Li(t.dataset),function(u){u&&u.source&&ua(u.source)&&t1(u.source)})),t=mr(t);var i=this._optionBackup,o=Rj(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],mr(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=mr(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,u=[],a=[];if(!i.length&&!o)return a;for(var f=0,p=i.length;f<p;f++)zj(i[f].query,r,n)&&u.push(f);return!u.length&&o&&(u=[-1]),u.length&&!Fj(u,this._currentMediaIndices)&&(a=Bt(u,function(v){return mr(v===-1?o.option:i[v].option)})),this._currentMediaIndices=u,a},e}();function Rj(e,t,r){var n=[],i,o,u=e.baseOption,a=e.timeline,f=e.options,p=e.media,v=!!e.media,_=!!(f||a||u&&u.timeline);u?(o=u,o.timeline||(o.timeline=a)):((_||v)&&(e.options=e.media=null),o=e),v&&wt(p)&&we(p,function(S){S&&S.option&&(S.query?n.push(S):i||(i=S))}),y(o),we(f,function(S){return y(S)}),we(n,function(S){return y(S.option)});function y(S){we(t,function(A){A(S,r)})}return{baseOption:o,timelineOptions:f||[],mediaDefault:i,mediaList:n}}function zj(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return we(e,function(o,u){var a=u.match(Lj);if(!(!a||!a[1]||!a[2])){var f=a[1],p=a[2].toLowerCase();Bj(n[p],o,f)||(i=!1)}}),i}function Bj(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function Fj(e,t){return e.join(",")===t.join(",")}const Nj=Oj;var $a=we,xd=Vt,jE=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function Wy(e){var t=e&&e.itemStyle;if(t)for(var r=0,n=jE.length;r<n;r++){var i=jE[r],o=t.normal,u=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?un(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),u&&u[i]&&(e[i]=e[i]||{},e[i].emphasis?un(e[i].emphasis,u[i]):e[i].emphasis=u[i],u[i]=null)}}function fi(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,an(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function Rf(e){fi(e,"itemStyle"),fi(e,"lineStyle"),fi(e,"areaStyle"),fi(e,"label"),fi(e,"labelLine"),fi(e,"upperLabel"),fi(e,"edgeLabel")}function wn(e,t){var r=xd(e)&&e[t],n=xd(r)&&r.textStyle;if(n)for(var i=0,o=GT.length;i<o;i++){var u=GT[i];n.hasOwnProperty(u)&&(r[u]=n[u])}}function wa(e){e&&(Rf(e),wn(e,"label"),e.emphasis&&wn(e.emphasis,"label"))}function Vj(e){if(xd(e)){Wy(e),Rf(e),wn(e,"label"),wn(e,"upperLabel"),wn(e,"edgeLabel"),e.emphasis&&(wn(e.emphasis,"label"),wn(e.emphasis,"upperLabel"),wn(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(Wy(t),wa(t));var r=e.markLine;r&&(Wy(r),wa(r));var n=e.markArea;n&&wa(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!ua(o))for(var u=0;u<o.length;u++)wa(o[u]);we(e.categories,function(p){Rf(p)})}if(i&&!ua(i))for(var u=0;u<i.length;u++)wa(i[u]);if(t=e.markPoint,t&&t.data)for(var a=t.data,u=0;u<a.length;u++)wa(a[u]);if(r=e.markLine,r&&r.data)for(var f=r.data,u=0;u<f.length;u++)wt(f[u])?(wa(f[u][0]),wa(f[u][1])):wa(f[u]);e.type==="gauge"?(wn(e,"axisLabel"),wn(e,"title"),wn(e,"detail")):e.type==="treemap"?(fi(e.breadcrumb,"itemStyle"),we(e.levels,function(p){Rf(p)})):e.type==="tree"&&Rf(e.leaves)}}function Xo(e){return wt(e)?e:e?[e]:[]}function GE(e){return(wt(e)?e[0]:e)||{}}function Uj(e,t){$a(Xo(e.series),function(n){xd(n)&&Vj(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),$a(r,function(n){$a(Xo(e[n]),function(i){i&&(wn(i,"axisLabel"),wn(i.axisPointer,"label"))})}),$a(Xo(e.parallel),function(n){var i=n&&n.parallelAxisDefault;wn(i,"axisLabel"),wn(i&&i.axisPointer,"label")}),$a(Xo(e.calendar),function(n){fi(n,"itemStyle"),wn(n,"dayLabel"),wn(n,"monthLabel"),wn(n,"yearLabel")}),$a(Xo(e.radar),function(n){wn(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),$a(Xo(e.geo),function(n){xd(n)&&(wa(n),$a(Xo(n.regions),function(i){wa(i)}))}),$a(Xo(e.timeline),function(n){wa(n),fi(n,"label"),fi(n,"itemStyle"),fi(n,"controlStyle",!0);var i=n.data;wt(i)&&we(i,function(o){Vt(o)&&(fi(o,"label"),fi(o,"itemStyle"))})}),$a(Xo(e.toolbox),function(n){fi(n,"iconStyle"),$a(n.feature,function(i){fi(i,"iconStyle")})}),wn(GE(e.axisPointer),"label"),wn(GE(e.tooltip).axisPointer,"label")}function $j(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function jj(e,t,r,n){for(var i=t.split(","),o=e,u,a=0;a<i.length-1;a++)u=i[a],o[u]==null&&(o[u]={}),o=o[u];(n||o[i[a]]==null)&&(o[i[a]]=r)}function HE(e){e&&we(Gj,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var Gj=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Hj=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Zy=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function vf(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<Zy.length;r++){var n=Zy[r][1],i=Zy[r][0];t[n]!=null&&(t[i]=t[n])}}function qE(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function WE(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function qj(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function d5(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&d5(e[r].children,t)}function p5(e,t){Uj(e,t),e.series=Li(e.series),we(e.series,function(r){if(Vt(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),qE(r.label);var i=r.data;if(i&&!ua(i))for(var o=0;o<i.length;o++)qE(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var u=$j(r,"pointer.color");u!=null&&jj(r,"itemStyle.color",u)}else if(n==="bar"){vf(r),vf(r.backgroundStyle),vf(r.emphasis);var i=r.data;if(i&&!ua(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(vf(i[o]),vf(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var a=r.highlightPolicy;a&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=a)),WE(r),d5(r.data,WE)}else n==="graph"||n==="sankey"?qj(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&an(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),HE(r)}}),e.dataRange&&(e.visualMap=e.dataRange),we(Hj,function(r){var n=e[r];n&&(wt(n)||(n=[n]),we(n,function(i){HE(i)}))})}function Wj(e){var t=sr();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),u={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!u.stackedDimension||!(u.isStackedByIndex||u.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(u)}}),t.each(Zj)}function Zj(e){we(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],u=t.data,a=t.isStackedByIndex,f=t.seriesModel.get("stackStrategy")||"samesign";u.modify(o,function(p,v,_){var y=u.get(t.stackedDimension,_);if(isNaN(y))return i;var S,A;a?A=u.getRawIndex(_):S=u.get(t.stackedByDimension,_);for(var I=NaN,M=r-1;M>=0;M--){var k=e[M];if(a||(A=k.data.rawIndexOf(k.stackedByDimension,S)),A>=0){var L=k.data.getByRawIndex(k.stackResultDimension,A);if(f==="all"||f==="positive"&&L>0||f==="negative"&&L<0||f==="samesign"&&y>=0&&L>0||f==="samesign"&&y<=0&&L<0){y=sV(y,L),I=L;break}}}return n[0]=y,n[1]=I,n})})}var Rg=function(){function e(t){this.data=t.data||(t.sourceFormat===ps?{}:[]),this.sourceFormat=t.sourceFormat||o5,this.seriesLayoutBy=t.seriesLayoutBy||os,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&u5(this,n)===ia.Must&&(i.type="ordinal")}}return e}();function Tb(e){return e instanceof Rg}function P1(e,t,r){r=r||m5(e);var n=t.seriesLayoutBy,i=Yj(e,r,n,t.sourceHeader,t.dimensions),o=new Rg({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:mr(t)});return o}function Eb(e){return new Rg({data:e,sourceFormat:ua(e)?Qs:ka})}function Xj(e){return new Rg({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:mr(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function m5(e){var t=o5;if(ua(e))t=Qs;else if(wt(e)){e.length===0&&(t=Zi);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(wt(i)){t=Zi;break}else if(Vt(i)){t=Mo;break}}}}else if(Vt(e)){for(var o in e)if($c(e,o)&&Wi(e[o])){t=ps;break}}return t}function Yj(e,t,r,n,i){var o,u;if(!e)return{dimensionsDefine:ZE(i),startIndex:u,dimensionsDetectedCount:o};if(t===Zi){var a=e;n==="auto"||n==null?XE(function(p){p!=null&&p!=="-"&&(Rt(p)?u==null&&(u=1):u=0)},r,a,10):u=gn(n)?n:n?1:0,!i&&u===1&&(i=[],XE(function(p,v){i[v]=p!=null?p+"":""},r,a,1/0)),o=i?i.length:r===th?a.length:a[0]?a[0].length:null}else if(t===Mo)i||(i=Kj(e));else if(t===ps)i||(i=[],we(e,function(p,v){i.push(v)}));else if(t===ka){var f=zd(e[0]);o=wt(f)&&f.length||1}return{startIndex:u,dimensionsDefine:ZE(i),dimensionsDetectedCount:o}}function Kj(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return we(r,function(i,o){n.push(o)}),n}}function ZE(e){if(e){var t=sr();return Bt(e,function(r,n){r=Vt(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function XE(e,t,r,n){if(t===th)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function v5(e){var t=e.sourceFormat;return t===Mo||t===ps}var Ql,eu,tu,YE,KE,g5=function(){function e(t,r){var n=Tb(t)?t:Eb(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Qs&&(this._offset=0,this._dimSize=r,this._data=i),KE(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;KE=function(u,a,f){var p=f.sourceFormat,v=f.seriesLayoutBy,_=f.startIndex,y=f.dimensionsDefine,S=YE[Cb(p,v)];if(lt(u,S),p===Qs)u.getItem=r,u.count=i,u.fillStorage=n;else{var A=_5(p,v);u.getItem=vn(A,null,a,_,y);var I=y5(p,v);u.count=vn(I,null,a,_,y)}};var r=function(u,a){u=u-this._offset,a=a||[];for(var f=this._data,p=this._dimSize,v=p*u,_=0;_<p;_++)a[_]=f[v+_];return a},n=function(u,a,f,p){for(var v=this._data,_=this._dimSize,y=0;y<_;y++){for(var S=p[y],A=S[0]==null?1/0:S[0],I=S[1]==null?-1/0:S[1],M=a-u,k=f[y],L=0;L<M;L++){var z=v[L*_+y];k[u+L]=z,z<A&&(A=z),z>I&&(I=z)}S[0]=A,S[1]=I}},i=function(){return this._data?this._data.length/this._dimSize:0};YE=(t={},t[Zi+"_"+os]={pure:!0,appendData:o},t[Zi+"_"+th]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Mo]={pure:!0,appendData:o},t[ps]={pure:!0,appendData:function(u){var a=this._data;we(u,function(f,p){for(var v=a[p]||(a[p]=[]),_=0;_<(f||[]).length;_++)v.push(f[_])})}},t[ka]={appendData:o},t[Qs]={persistent:!1,pure:!0,appendData:function(u){this._data=u},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(u){for(var a=0;a<u.length;a++)this._data.push(u[a])}}(),e}(),JE=function(e,t,r,n){return e[n]},Jj=(Ql={},Ql[Zi+"_"+os]=function(e,t,r,n){return e[n+t]},Ql[Zi+"_"+th]=function(e,t,r,n,i){n+=t;for(var o=i||[],u=e,a=0;a<u.length;a++){var f=u[a];o[a]=f?f[n]:null}return o},Ql[Mo]=JE,Ql[ps]=function(e,t,r,n,i){for(var o=i||[],u=0;u<r.length;u++){var a=r[u].name,f=e[a];o[u]=f?f[n]:null}return o},Ql[ka]=JE,Ql);function _5(e,t){var r=Jj[Cb(e,t)];return r}var QE=function(e,t,r){return e.length},Qj=(eu={},eu[Zi+"_"+os]=function(e,t,r){return Math.max(0,e.length-t)},eu[Zi+"_"+th]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},eu[Mo]=QE,eu[ps]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},eu[ka]=QE,eu);function y5(e,t){var r=Qj[Cb(e,t)];return r}var Xy=function(e,t,r){return e[t]},eG=(tu={},tu[Zi]=Xy,tu[Mo]=function(e,t,r){return e[r]},tu[ps]=Xy,tu[ka]=function(e,t,r){var n=zd(e);return n instanceof Array?n[t]:n},tu[Qs]=Xy,tu);function x5(e){var t=eG[e];return t}function Cb(e,t){return e===Zi?e+"_"+t:e}function Gc(e,t,r){if(e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var u=e.getDimensionIndex(r),a=i.getDimensionProperty(u);return x5(o)(n,u,a)}else{var f=n;return o===ka&&(f=zd(n)),f}}}}var tG=/\{@(.+?)\}/g,b5=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),u=n.getName(t),a=n.getRawDataItem(t),f=n.getItemVisual(t,"style"),p=f&&f[n.getItemVisual(t,"drawType")||"fill"],v=f&&f.stroke,_=this.mainType,y=_==="series",S=n.userOutput&&n.userOutput.get();return{componentType:_,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:y?this.subType:null,seriesIndex:this.seriesIndex,seriesId:y?this.id:null,seriesName:y?this.name:null,name:u,dataIndex:o,data:a,dataType:r,value:i,color:p,borderColor:v,dimensionNames:S?S.fullDimensions:null,encode:S?S.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,u){r=r||"normal";var a=this.getData(n),f=this.getDataParams(t,n);if(u&&(f.value=u.interpolatedValue),i!=null&&wt(f.value)&&(f.value=f.value[i]),!o){var p=a.getItemModel(t);o=p.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Zt(o))return f.status=r,f.dimensionIndex=i,o(f);if(Rt(o)){var v=r5(o,f);return v.replace(tG,function(_,y){var S=y.length,A=y;A.charAt(0)==="["&&A.charAt(S-1)==="]"&&(A=+A.slice(1,S-1));var I=Gc(a,t,A);if(u&&wt(u.interpolatedValue)){var M=a.getDimensionIndex(A);M>=0&&(I=u.interpolatedValue[M])}return I!=null?I+"":""})}},e.prototype.getRawValue=function(t,r){return Gc(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function eC(e){var t,r;return Vt(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Yf(e){return new rG(e)}var rG=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var u=v(this._modBy),a=this._modDataCount||0,f=v(t&&t.modBy),p=t&&t.modDataCount||0;(u!==f||a!==p)&&(o="reset");function v(L){return!(L>=1)&&(L=1),L}var _;(this._dirty||o==="reset")&&(this._dirty=!1,_=this._doReset(n)),this._modBy=f,this._modDataCount=p;var y=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var S=this._dueIndex,A=Math.min(y!=null?this._dueIndex+y:1/0,this._dueEnd);if(!n&&(_||S<A)){var I=this._progress;if(wt(I))for(var M=0;M<I.length;M++)this._doProgress(I[M],S,A,f,p);else this._doProgress(I,S,A,f,p)}this._dueIndex=A;var k=this._settedOutputEnd!=null?this._settedOutputEnd:A;this._outputDueEnd=k}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){tC.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:tC.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),wt(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),tC=function(){var e,t,r,n,i,o={reset:function(f,p,v,_){t=f,e=p,r=v,n=_,i=Math.ceil(n/r),o.next=r>1&&n>0?a:u}};return o;function u(){return t<e?t++:null}function a(){var f=t%i*r+Math.ceil(t/i),p=t>=e?null:f<n?f:t;return t++,p}}();function zc(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!gn(e)&&e!=null&&e!=="-"&&(e=+ss(e)),e==null||e===""?NaN:+e)}sr({number:function(e){return parseFloat(e)},time:function(e){return+ss(e)},trim:function(e){return Rt(e)?So(e):e}});var nG=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=gn(t)?t:Gv(t),i=gn(r)?r:Gv(r),o=isNaN(n),u=isNaN(i);if(o&&(n=this._incomparable),u&&(i=this._incomparable),o&&u){var a=Rt(t),f=Rt(r);a&&(n=f?t:0),f&&(i=a?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),iG=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return zc(t,r)},e}();function aG(e,t){var r=new iG,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,u="";e.seriesLayoutBy!==os&&Gi(u);var a=[],f={},p=e.dimensionsDefine;if(p)we(p,function(I,M){var k=I.name,L={index:M,name:k,displayName:I.displayName};if(a.push(L),k!=null){var z="";$c(f,k)&&Gi(z),f[k]=L}});else for(var v=0;v<e.dimensionsDetectedCount;v++)a.push({index:v});var _=_5(i,os);t.__isBuiltIn&&(r.getRawDataItem=function(I){return _(n,o,a,I)},r.getRawData=vn(oG,null,e)),r.cloneRawData=vn(sG,null,e);var y=y5(i,os);r.count=vn(y,null,n,o,a);var S=x5(i);r.retrieveValue=function(I,M){var k=_(n,o,a,I);return A(k,M)};var A=r.retrieveValueFromItem=function(I,M){if(I!=null){var k=a[M];if(k)return S(I,M,k.name)}};return r.getDimensionInfo=vn(lG,null,a,f),r.cloneAllDimensionInfo=vn(uG,null,a),r}function oG(e){var t=e.sourceFormat;if(!Ab(t)){var r="";Gi(r)}return e.data}function sG(e){var t=e.sourceFormat,r=e.data;if(!Ab(t)){var n="";Gi(n)}if(t===Zi){for(var i=[],o=0,u=r.length;o<u;o++)i.push(r[o].slice());return i}else if(t===Mo){for(var i=[],o=0,u=r.length;o<u;o++)i.push(lt({},r[o]));return i}}function lG(e,t,r){if(r!=null){if(gn(r)||!isNaN(r)&&!$c(t,r))return e[r];if($c(t,r))return t[r]}}function uG(e){return mr(e)}var w5=sr();function cG(e){e=mr(e);var t=e.type,r="";t||Gi(r);var n=t.split(":");n.length!==2&&Gi(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,w5.set(t,e)}function hG(e,t,r){var n=Li(e),i=n.length,o="";i||Gi(o);for(var u=0,a=i;u<a;u++){var f=n[u];t=fG(f,t),u!==a-1&&(t.length=Math.max(t.length,1))}return t}function fG(e,t,r,n){var i="";t.length||Gi(i),Vt(e)||Gi(i);var o=e.type,u=w5.get(o);u||Gi(i);var a=Bt(t,function(p){return aG(p,u)}),f=Li(u.transform({upstream:a[0],upstreamList:a,config:mr(e.config)}));return Bt(f,function(p,v){var _="";Vt(p)||Gi(_),p.data||Gi(_);var y=m5(p.data);Ab(y)||Gi(_);var S,A=t[0];if(A&&v===0&&!p.dimensions){var I=A.startIndex;I&&(p.data=A.data.slice(0,I).concat(p.data)),S={seriesLayoutBy:os,sourceHeader:I,dimensions:A.metaRawOption.dimensions}}else S={seriesLayoutBy:os,sourceHeader:0,dimensions:p.dimensions};return P1(p.data,S,null)})}function Ab(e){return e===Zi||e===Mo}var zg="undefined",dG=typeof Uint32Array===zg?Array:Uint32Array,pG=typeof Uint16Array===zg?Array:Uint16Array,S5=typeof Int32Array===zg?Array:Int32Array,rC=typeof Float64Array===zg?Array:Float64Array,T5={float:rC,int:S5,ordinal:Array,number:Array,time:rC},Yy;function gf(e){return e>65535?dG:pG}function pc(){return[1/0,-1/0]}function mG(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function nC(e,t,r,n,i){var o=T5[r||"float"];if(i){var u=e[t],a=u&&u.length;if(a!==n){for(var f=new o(n),p=0;p<a;p++)f[p]=u[p];e[t]=f}}else e[t]=new o(n)}var D1=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=sr()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=Yy[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],v5(i),this._dimensions=Bt(r,function(u){return{type:u.type,property:u.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new T5[r||"float"](this._rawCount),this._rawExtent[o]=pc(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,u=i.ordinalOffset||0,a=n.length;u===0&&(o[t]=pc());for(var f=o[t],p=u;p<a;p++){var v=n[p]=r.parseAndCollect(n[p]);isNaN(v)||(f[0]=Math.min(v,f[0]),f[1]=Math.max(v,f[1]))}i.ordinalMeta=r,i.ordinalOffset=a,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,u=this._rawExtent,a=this.count(),f=a+Math.max(t.length,r||0),p=0;p<o;p++){var v=i[p];nC(n,p,v.type,f,!0)}for(var _=[],y=a;y<f;y++)for(var S=y-a,A=0;A<o;A++){var v=i[A],I=Yy.arrayRows.call(this,t[S]||_,v.property,S,A);n[A][y]=I;var M=u[A];I<M[0]&&(M[0]=I),I>M[1]&&(M[1]=I)}return this._rawCount=this._count=f,{start:a,end:f}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,u=this._dimensions,a=u.length,f=this._rawExtent,p=Bt(u,function(L){return L.property}),v=0;v<a;v++){var _=u[v];f[v]||(f[v]=pc()),nC(o,v,_.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,f);else for(var y=[],S=t;S<r;S++){y=i.getItem(S,y);for(var A=0;A<a;A++){var I=o[A],M=this._dimValueGetter(y,p[A],S,A);I[S]=M;var k=f[A];M<k[0]&&(k[0]=M),M>k[1]&&(k[1]=M)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,u=i.length;o<u;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var u=this.get(t,i);isNaN(u)||(n+=u)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,u){return o-u}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var u=(i+o)/2|0;if(r[u]<t)i=u+1;else if(r[u]>t)o=u-1;else return u}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],u=[];if(!o)return u;n==null&&(n=1/0);for(var a=1/0,f=-1,p=0,v=0,_=this.count();v<_;v++){var y=this.getRawIndex(v),S=r-o[y],A=Math.abs(S);A<=n&&((A<a||A===a&&S>=0&&f<0)&&(a=A,f=S,p=0),S===f&&(u[p++]=v))}return u.length=p,u},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=gf(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=gf(n._rawCount),u=new o(i),a=[],f=t.length,p=0,v=t[0],_=n._chunks,y=0;y<i;y++){var S=void 0,A=n.getRawIndex(y);if(f===0)S=r(y);else if(f===1){var I=_[v][A];S=r(I,y)}else{for(var M=0;M<f;M++)a[M]=_[t[M]][A];a[M]=y,S=r.apply(null,a)}S&&(u[p++]=A)}return p<i&&(n._indices=u),n._count=p,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=Pr(t),o=i.length;if(!o)return this;var u=r.count(),a=gf(r._rawCount),f=new a(u),p=0,v=i[0],_=t[v][0],y=t[v][1],S=r._chunks,A=!1;if(!r._indices){var I=0;if(o===1){for(var M=S[i[0]],k=0;k<n;k++){var L=M[k];(L>=_&&L<=y||isNaN(L))&&(f[p++]=I),I++}A=!0}else if(o===2){for(var M=S[i[0]],z=S[i[1]],V=t[i[1]][0],H=t[i[1]][1],k=0;k<n;k++){var L=M[k],Z=z[k];(L>=_&&L<=y||isNaN(L))&&(Z>=V&&Z<=H||isNaN(Z))&&(f[p++]=I),I++}A=!0}}if(!A)if(o===1)for(var k=0;k<u;k++){var ee=r.getRawIndex(k),L=S[i[0]][ee];(L>=_&&L<=y||isNaN(L))&&(f[p++]=ee)}else for(var k=0;k<u;k++){for(var Y=!0,ee=r.getRawIndex(k),ae=0;ae<o;ae++){var le=i[ae],L=S[le][ee];(L<t[le][0]||L>t[le][1])&&(Y=!1)}Y&&(f[p++]=r.getRawIndex(k))}return p<u&&(r._indices=f),r._count=p,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],u=r.length,a=t.count(),f=[],p=t._rawExtent,v=0;v<r.length;v++)p[r[v]]=pc();for(var _=0;_<a;_++){for(var y=t.getRawIndex(_),S=0;S<u;S++)f[S]=i[r[S]][y];f[u]=_;var A=n&&n.apply(null,f);if(A!=null){typeof A!="object"&&(o[0]=A,A=o);for(var v=0;v<A.length;v++){var I=r[v],M=A[v],k=p[I],L=i[I];L&&(L[y]=M),M<k[0]&&(k[0]=M),M>k[1]&&(k[1]=M)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],u=this.count(),a=0,f=Math.floor(1/r),p=this.getRawIndex(0),v,_,y,S=new(gf(this._rawCount))(Math.min((Math.ceil(u/f)+2)*2,u));S[a++]=p;for(var A=1;A<u-1;A+=f){for(var I=Math.min(A+f,u-1),M=Math.min(A+f*2,u),k=(M+I)/2,L=0,z=I;z<M;z++){var V=this.getRawIndex(z),H=o[V];isNaN(H)||(L+=H)}L/=M-I;var Z=A,ee=Math.min(A+f,u),Y=A-1,ae=o[p];v=-1,y=Z;for(var le=-1,pe=0,z=Z;z<ee;z++){var V=this.getRawIndex(z),H=o[V];if(isNaN(H)){pe++,le<0&&(le=V);continue}_=Math.abs((Y-k)*(H-ae)-(Y-z)*(L-ae)),_>v&&(v=_,y=V)}pe>0&&pe<ee-Z&&(S[a++]=Math.min(le,y),y=Math.max(le,y)),S[a++]=y,p=y}return S[a++]=this.getRawIndex(u-1),n._count=a,n._indices=S,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),u=o._chunks,a=[],f=Math.floor(1/r),p=u[t],v=this.count(),_=o._rawExtent[t]=pc(),y=new(gf(this._rawCount))(Math.ceil(v/f)),S=0,A=0;A<v;A+=f){f>v-A&&(f=v-A,a.length=f);for(var I=0;I<f;I++){var M=this.getRawIndex(A+I);a[I]=p[M]}var k=n(a),L=this.getRawIndex(Math.min(A+i(a,k)||0,v-1));p[L]=k,k<_[0]&&(_[0]=k),k>_[1]&&(_[1]=k),y[S++]=L}return o._count=S,o._indices=y,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(this._count)for(var n=t.length,i=this._chunks,o=0,u=this.count();o<u;o++){var a=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][a],o);break;case 2:r(i[t[0]][a],i[t[1]][a],o);break;default:for(var f=0,p=[];f<n;f++)p[f]=i[t[f]][a];p[f]=o,r.apply(null,p)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=pc();if(!r)return n;var i=this.count(),o=!this._indices,u;if(o)return this._rawExtent[t].slice();if(u=this._extent[t],u)return u.slice();u=n;for(var a=u[0],f=u[1],p=0;p<i;p++){var v=this.getRawIndex(p),_=r[v];_<a&&(a=_),_>f&&(f=_)}return u=[a,f],this._extent[t]=u,u},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&Jc(t,function(a,f){return a[f]=!0,a},{});if(o)for(var u=0;u<i.length;u++)n._chunks[u]=o[u]?mG(i[u]):i[u];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=mr(this._extent),t._rawExtent=mr(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return zc(r[o],this._dimensions[o])}Yy={arrayRows:t,objectRows:function(r,n,i,o){return zc(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var u=r&&(r.value==null?r:r.value);return zc(u instanceof Array?u[o]:u,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}(),vG=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(Im(t)){var u=t,a=void 0,f=void 0,p=void 0;if(n){var v=r[0];v.prepareSource(),p=v.getSource(),a=p.data,f=p.sourceFormat,o=[v._getVersionSign()]}else a=u.get("data",!0),f=ua(a)?Qs:ka,o=[];var _=this._getSourceMetaRawOption()||{},y=p&&p.metaRawOption||{},S=or(_.seriesLayoutBy,y.seriesLayoutBy)||null,A=or(_.sourceHeader,y.sourceHeader),I=or(_.dimensions,y.dimensions),M=S!==y.seriesLayoutBy||!!A!=!!y.sourceHeader||I;i=M?[P1(a,{seriesLayoutBy:S,sourceHeader:A,dimensions:I},f)]:[]}else{var k=t;if(n){var L=this._applyTransform(r);i=L.sourceList,o=L.upstreamSignList}else{var z=k.get("source",!0);i=[P1(z,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&iC(o)}var u,a=[],f=[];return we(t,function(p){p.prepareSource();var v=p.getSource(i||0),_="";i!=null&&!v&&iC(_),a.push(v),f.push(p._getVersionSign())}),n?u=hG(n,a,{datasetIndex:r.componentIndex}):i!=null&&(u=[Xj(a[0])]),{sourceList:u,upstreamSignList:f}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,u=o[i];u||(u=o[i]={});var a=u[n];if(!a){var f=this._getUpstreamSourceManagers()[0];Im(this._sourceHost)&&f?a=f._innerGetDataStore(t,r,n):(a=new D1,a.initData(new g5(r,t.length),t)),u[n]=a}return a},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Im(t)){var r=l5(t);return r?[r.getSourceManager()]:[]}else return Bt(xj(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(Im(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function Im(e){return e.mainType==="series"}function iC(e){throw new Error(e)}var E5="line-height:1";function C5(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",u=e.fontSize||14,a=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+aa(n+"")+"px;color:"+aa(r)+";font-weight:"+aa(i+""),valueStyle:"font-size:"+aa(u+"")+"px;color:"+aa(o)+";font-weight:"+aa(a+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:u,fill:o,fontWeight:a}}}var gG=[0,10,20,30],_G=["",`
`,`

`,`


`];function nl(e,t){return t.type=e,t}function k1(e){return e.type==="section"}function A5(e){return k1(e)?yG:xG}function I5(e){if(k1(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return we(e.blocks,function(i){var o=I5(i);o>=t&&(t=o+ +(n&&(!o||k1(i)&&!i.noHeader)))}),t}return 0}function yG(e,t,r,n){var i=t.noHeader,o=bG(I5(t)),u=[],a=t.blocks||[];Xa(!a||wt(a)),a=a||[];var f=e.orderMode;if(t.sortBlocks&&f){a=a.slice();var p={valueAsc:"asc",valueDesc:"desc"};if($c(p,f)){var v=new nG(p[f],null);a.sort(function(A,I){return v.evaluate(A.sortParam,I.sortParam)})}else f==="seriesDesc"&&a.reverse()}we(a,function(A,I){var M=t.valueFormatter,k=A5(A)(M?lt(lt({},e),{valueFormatter:M}):e,A,I>0?o.html:0,n);k!=null&&u.push(k)});var _=e.renderMode==="richText"?u.join(o.richText):L1(u.join(""),i?r:o.html);if(i)return _;var y=M1(t.header,"ordinal",e.useUTC),S=C5(n,e.renderMode).nameStyle;return e.renderMode==="richText"?M5(e,y,S)+o.richText+_:L1('<div style="'+S+";"+E5+';">'+aa(y)+"</div>"+_,r)}function xG(e,t,r,n){var i=e.renderMode,o=t.noName,u=t.noValue,a=!t.markerType,f=t.name,p=e.useUTC,v=t.valueFormatter||e.valueFormatter||function(V){return V=wt(V)?V:[V],Bt(V,function(H,Z){return M1(H,wt(S)?S[Z]:S,p)})};if(!(o&&u)){var _=a?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),y=o?"":M1(f,"ordinal",p),S=t.valueType,A=u?[]:v(t.value),I=!a||!o,M=!a&&o,k=C5(n,i),L=k.nameStyle,z=k.valueStyle;return i==="richText"?(a?"":_)+(o?"":M5(e,y,L))+(u?"":TG(e,A,I,M,z)):L1((a?"":_)+(o?"":wG(y,!a,L))+(u?"":SG(A,I,M,z)),r)}}function aC(e,t,r,n,i,o){if(e){var u=A5(e),a={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return u(a,e,0,o)}}function bG(e){return{html:gG[e],richText:_G[e]}}function L1(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+E5+';">'+e+r+"</div>"}function wG(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+aa(e)+"</span>"}function SG(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=wt(e)?e:[e],'<span style="'+o+";"+n+'">'+Bt(e,function(u){return aa(u)}).join("&nbsp;&nbsp;")+"</span>"}function M5(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function TG(e,t,r,n,i){var o=[i],u=n?10:20;return r&&o.push({padding:[0,0,0,u],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(wt(t)?t.join("  "):t,o)}function EG(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return gd(n)}function P5(e,t){var r=e.get("padding");return r??(t==="richText"?[8,10]:10)}var Ky=function(){function e(){this.richTextStyles={},this._nextStyleNameId=BP()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=fj({color:r,type:t,renderMode:n,markerId:i});return Rt(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};wt(r)?we(r,function(o){return lt(n,o)}):lt(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function CG(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),u=o.length,a=t.getRawValue(r),f=wt(a),p=EG(t,r),v,_,y,S;if(u>1||f&&!u){var A=AG(a,t,r,o,p);v=A.inlineValues,_=A.inlineValueTypes,y=A.blocks,S=A.inlineValues[0]}else if(u){var I=i.getDimensionInfo(o[0]);S=v=Gc(i,r,o[0]),_=I.type}else S=v=f?a[0]:a;var M=UP(t),k=M&&t.name||"",L=i.getName(r),z=n?k:L;return nl("section",{header:k,noHeader:n||!M,sortParam:S,blocks:[nl("nameValue",{markerType:"item",markerColor:p,name:z,noName:!So(z),value:v,valueType:_})].concat(y||[])})}function AG(e,t,r,n,i){var o=t.getData(),u=Jc(e,function(_,y,S){var A=o.getDimensionInfo(S);return _=_||A&&A.tooltip!==!1&&A.displayName!=null},!1),a=[],f=[],p=[];n.length?we(n,function(_){v(Gc(o,r,_),_)}):we(e,v);function v(_,y){var S=o.getDimensionInfo(y);!S||S.otherDims.tooltip===!1||(u?p.push(nl("nameValue",{markerType:"subItem",markerColor:i,name:S.displayName,value:_,valueType:S.type})):(a.push(_),f.push(S.type)))}return{inlineValues:a,inlineValueTypes:f,blocks:p}}var Vs=En();function Mm(e,t){return e.getName(t)||e.getId(t)}var IG="__universalTransitionEnabled",Bg=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Yf({count:PG,reset:DG}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=Vs(this).sourceManager=new vG(this);o.prepareSource();var u=this.getInitialData(r,i);sC(u,this),this.dataTask.context.data=u,Vs(this).dataBeforeProcessed=u,oC(this),this._initSelectedMapFromData(u)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=_d(this),o=i?bb(r):{},u=this.subType;ln.hasClass(u)&&(u+="Series"),un(r,n.getTheme().get(this.subType)),un(r,this.getDefaultOption()),y1(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&yd(r,o,i)},t.prototype.mergeOption=function(r,n){r=un(this.option,r,!0),this.fillDataTextStyle(r.data);var i=_d(this);i&&yd(this.option,r,i);var o=Vs(this).sourceManager;o.dirty(),o.prepareSource();var u=this.getInitialData(r,n);sC(u,this),this.dataTask.dirty(),this.dataTask.context.data=u,Vs(this).dataBeforeProcessed=u,oC(this),this._initSelectedMapFromData(u)},t.prototype.fillDataTextStyle=function(r){if(r&&!ua(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&y1(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=O1(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return Vs(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=O1(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}Vs(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return sr(r)},t.prototype.getSourceManager=function(){return Vs(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Vs(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return CG({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(ar.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,u=wb.prototype.getColorFromPalette.call(this,r,n,i);return u||(u=o.getColorFromPalette(r,n,i)),u},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(i){var o=this.option.selectedMode,u=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var a=0;a<r.length;a++){var f=r[a],p=Mm(u,f);i[p]=!1,this._selectedDataIndicesMap[p]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=Pr(r),i=[],o=0;o<n.length;o++){var u=r[n[o]];u>=0&&i.push(u)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[Mm(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[IG])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,u=this.option,a=u.selectedMode,f=n.length;if(!(!a||!f)){if(a==="series")u.selectedMap="all";else if(a==="multiple"){Vt(u.selectedMap)||(u.selectedMap={});for(var p=u.selectedMap,v=0;v<f;v++){var _=n[v],y=Mm(r,_);p[y]=!0,this._selectedDataIndicesMap[y]=r.getRawIndex(_)}}else if(a==="single"||a===!0){var S=n[f-1],y=Mm(r,S);u.selectedMap=(i={},i[y]=!0,i),this._selectedDataIndicesMap=(o={},o[y]=r.getRawIndex(S),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return ln.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(ln);Ja(Bg,b5);Ja(Bg,wb);GP(Bg,ln);function oC(e){var t=e.name;UP(e)||(e.name=MG(e)||t)}function MG(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return we(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function PG(e){return e.model.getRawData().count()}function DG(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),kG}function kG(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function sC(e,t){we(r1(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,Wn(LG,t))})}function LG(e,t){var r=O1(e);return r&&r.setOutputEnd((t||this).count()),t}function O1(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const Hc=Bg;var Ib=function(){function e(){this.group=new ri,this.uid=Mg("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();Kx(Ib);wg(Ib);const ls=Ib;function Mb(){var e=En();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,u=r.large=!!(n&&n.large),a=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==u||o!==a)&&"reset"}}var D5=En(),OG=Mb(),Pb=function(){function e(){this.group=new ri,this.uid=Mg("viewChart"),this.renderTask=Yf({plan:RG,reset:zG}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);o&&uC(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);o&&uC(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){Cg(this.group,t)},e.markUpdateMethod=function(t,r){D5(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function lC(e,t,r){e&&E1(e)&&(t==="emphasis"?fd:dd)(e,r)}function uC(e,t,r){var n=Bd(e,t),i=t&&t.highlightKey!=null?UU(t.highlightKey):null;n!=null?we(Li(n),function(o){lC(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){lC(o,r,i)})}Kx(Pb);wg(Pb);function RG(e){return OG(e.model)}function zG(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,u=e.view,a=i&&D5(i).updateMethod,f=o?"incrementalPrepareRender":a&&u[a]?a:"render";return f!=="render"&&u[f](t,r,n,i),BG[f]}var BG={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const pu=Pb;var Jv="\0__throttleOriginMethod",cC="\0__throttleRate",hC="\0__throttleType";function Db(e,t,r){var n,i=0,o=0,u=null,a,f,p,v;t=t||0;function _(){o=new Date().getTime(),u=null,e.apply(f,p||[])}var y=function(){for(var S=[],A=0;A<arguments.length;A++)S[A]=arguments[A];n=new Date().getTime(),f=this,p=S;var I=v||t,M=v||r;v=null,a=n-(M?i:o)-I,clearTimeout(u),M?u=setTimeout(_,I):a>=0?_():u=setTimeout(_,-a),i=n};return y.clear=function(){u&&(clearTimeout(u),u=null)},y.debounceNextCall=function(S){v=S},y}function k5(e,t,r,n){var i=e[t];if(i){var o=i[Jv]||i,u=i[hC],a=i[cC];if(a!==r||u!==n){if(r==null||!n)return e[t]=o;i=e[t]=Db(o,r,n==="debounce"),i[Jv]=o,i[hC]=n,i[cC]=r}return i}}function R1(e,t){var r=e[t];r&&r[Jv]&&(r.clear&&r.clear(),e[t]=r[Jv])}var fC=En(),dC={itemStyle:hd(jD,!0),lineStyle:hd($D,!0)},FG={lineStyle:"stroke",itemStyle:"fill"};function L5(e,t){var r=e.visualStyleMapper||dC[t];return r||(console.warn("Unknown style type '"+t+"'."),dC.itemStyle)}function O5(e,t){var r=e.visualDrawType||FG[t];return r||(console.warn("Unknown style type '"+t+"'."),"fill")}var NG={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=L5(e,n),u=o(i),a=i.getShallow("decal");a&&(r.setVisual("decal",a),a.dirty=!0);var f=O5(e,n),p=u[f],v=Zt(p)?p:null,_=u.fill==="auto"||u.stroke==="auto";if(!u[f]||v||_){var y=e.getColorFromPalette(e.name,null,t.getSeriesCount());u[f]||(u[f]=y,r.setVisual("colorFromPalette",!0)),u.fill=u.fill==="auto"||Zt(u.fill)?y:u.fill,u.stroke=u.stroke==="auto"||Zt(u.stroke)?y:u.stroke}if(r.setVisual("style",u),r.setVisual("drawType",f),!t.isSeriesFiltered(e)&&v)return r.setVisual("colorFromPalette",!1),{dataEach:function(S,A){var I=e.getDataParams(A),M=lt({},u);M[f]=v(I),S.setItemVisual(A,"style",M)}}}},_f=new Pi,VG={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=L5(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(u,a){var f=u.getRawDataItem(a);if(f&&f[n]){_f.option=f[n];var p=i(_f),v=u.ensureUniqueItemVisual(a,"style");lt(v,p),_f.option.decal&&(u.setItemVisual(a,"decal",_f.option.decal),_f.option.decal.dirty=!0),o in p&&u.setItemVisual(a,"colorFromPalette",!1)}}:null}}}},UG={performRawSeries:!0,overallReset:function(e){var t=sr();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),fC(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),u=fC(r).scope,a=r.visualStyleAccessPath||"itemStyle",f=O5(r,a);o.each(function(p){var v=o.getRawIndex(p);i[v]=p}),n.each(function(p){var v=i[p],_=o.getItemVisual(v,"colorFromPalette");if(_){var y=o.ensureUniqueItemVisual(v,"style"),S=n.getName(p)||p+"",A=n.count();y[f]=r.getColorFromPalette(S,u,A)}})}})}},Pm=Math.PI;function $G(e,t){t=t||{},an(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new ri,n=new qi({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new Ya({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new qi({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var u;return t.showSpinner&&(u=new cb({shape:{startAngle:-Pm/2,endAngle:-Pm/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),u.animateShape(!0).when(1e3,{endAngle:Pm*3/2}).start("circularInOut"),u.animateShape(!0).when(1e3,{startAngle:Pm*3/2}).delay(300).start("circularInOut"),r.add(u)),r.resize=function(){var a=i.getBoundingRect().width,f=t.showSpinner?t.spinnerRadius:0,p=(e.getWidth()-f*2-(t.showSpinner&&a?10:0)-a)/2-(t.showSpinner&&a?0:5+a/2)+(t.showSpinner?0:a/2)+(a?0:f),v=e.getHeight()/2;t.showSpinner&&u.setShape({cx:p,cy:v}),o.setShape({x:p-f,y:v-f,width:f*2,height:f*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var jG=function(){function e(t,r,n,i){this._stageTaskMap=sr(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,u=o?n.step:null,a=i&&i.modDataCount,f=a!=null?Math.ceil(a/u):null;return{step:u,modBy:f,modDataCount:a}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),u=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,a=t.get("large")&&o>=t.get("largeThreshold"),f=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:u,modDataCount:f,large:a}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=sr();t.eachSeries(function(i){var o=i.getProgressive(),u=i.uid;n.set(u,{id:u,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;we(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),u="";Xa(!(i.reset&&i.overallReset),u),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,u=o.context;u.model=r,u.ecModel=n,u.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,u=this;we(t,function(f,p){if(!(i.visualType&&i.visualType!==f.visualType)){var v=u._stageTaskMap.get(f.uid),_=v.seriesTaskMap,y=v.overallTask;if(y){var S,A=y.agentStubMap;A.each(function(M){a(i,M)&&(M.dirty(),S=!0)}),S&&y.dirty(),u.updatePayload(y,n);var I=u.getPerformArgs(y,i.block);A.each(function(M){M.perform(I)}),y.perform(I)&&(o=!0)}else _&&_.each(function(M,k){a(i,M)&&M.dirty();var L=u.getPerformArgs(M,i.block);L.skip=!f.performRawSeries&&r.isSeriesFiltered(M.context.model),u.updatePayload(M,n),M.perform(L)&&(o=!0)})}});function a(f,p){return f.setDirty&&(!f.dirtyMap||f.dirtyMap.get(p.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,u=r.seriesTaskMap,a=r.seriesTaskMap=sr(),f=t.seriesType,p=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(v):f?n.eachRawSeriesByType(f,v):p&&p(n,i).each(v);function v(_){var y=_.uid,S=a.set(y,u&&u.get(y)||Yf({plan:ZG,reset:XG,count:KG}));S.context={model:_,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(_,S)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,u=r.overallTask=r.overallTask||Yf({reset:GG});u.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var a=u.agentStubMap,f=u.agentStubMap=sr(),p=t.seriesType,v=t.getTargetSeries,_=!0,y=!1,S="";Xa(!t.createOnAllSeries,S),p?n.eachRawSeriesByType(p,A):v?v(n,i).each(A):(_=!1,we(n.getSeries(),A));function A(I){var M=I.uid,k=f.set(M,a&&a.get(M)||(y=!0,Yf({reset:HG,onDirty:WG})));k.context={model:I,overallProgress:_},k.agent=u,k.__block=_,o._pipe(I,k)}y&&u.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Zt(t)&&(t={overallReset:t,seriesType:JG(t)}),t.uid=Mg("stageHandler"),r&&(t.visualType=r),t},e}();function GG(e){e.overallReset(e.ecModel,e.api,e.payload)}function HG(e){return e.overallProgress&&qG}function qG(){this.agent.dirty(),this.getDownstream().dirty()}function WG(){this.agent&&this.agent.dirty()}function ZG(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function XG(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Li(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Bt(t,function(r,n){return R5(n)}):YG}var YG=R5(0);function R5(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function KG(e){return e.data.count()}function JG(e){Qv=null;try{e(bd,z5)}catch{}return Qv}var bd={},z5={},Qv;B5(bd,h5);B5(z5,f5);bd.eachSeriesByType=bd.eachRawSeriesByType=function(e){Qv=e};bd.eachComponent=function(e){e.mainType==="series"&&e.subType&&(Qv=e.subType)};function B5(e,t){for(var r in t.prototype)e[r]=ki}const F5=jG;var pC=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const QG={color:pC,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],pC]};var Ei="#B9B8CE",mC="#100C2A",Dm=function(){return{axisLine:{lineStyle:{color:Ei}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},vC=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],N5={darkMode:!0,color:vC,backgroundColor:mC,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Ei}},textStyle:{color:Ei},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Ei}},dataZoom:{borderColor:"#71708A",textStyle:{color:Ei},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Ei}},timeline:{lineStyle:{color:Ei},label:{color:Ei},controlStyle:{color:Ei,borderColor:Ei}},calendar:{itemStyle:{color:mC},dayLabel:{color:Ei},monthLabel:{color:Ei},yearLabel:{color:Ei}},timeAxis:Dm(),logAxis:Dm(),valueAxis:Dm(),categoryAxis:Dm(),line:{symbol:"circle"},graph:{color:vC},gauge:{title:{color:Ei},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Ei},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};N5.categoryAxis.splitLine.show=!1;const eH=N5;var tH=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Rt(t)){var o=To(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var u=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};we(t,function(f,p){for(var v=!1,_=0;_<u.length;_++){var y=u[_],S=p.lastIndexOf(y);if(S>0&&S===p.length-y.length){var A=p.slice(0,S);A!=="data"&&(r.mainType=A,r[y.toLowerCase()]=f,v=!0)}}a.hasOwnProperty(p)&&(n[p]=f,v=!0),v||(i[p]=f)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,u=n.model,a=n.view;if(!u||!a)return!0;var f=r.cptQuery,p=r.dataQuery;return v(f,u,"mainType")&&v(f,u,"subType")&&v(f,u,"index","componentIndex")&&v(f,u,"name")&&v(f,u,"id")&&v(p,o,"name")&&v(p,o,"dataIndex")&&v(p,o,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(t,r.otherQuery,i,o));function v(_,y,S,A){return _[S]==null||y[A||S]===_[S]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),z1=["symbol","symbolSize","symbolRotate","symbolOffset"],gC=z1.concat(["symbolKeepAspect"]),rH={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,u=0;u<z1.length;u++){var a=z1[u],f=e.get(a);Zt(f)?(o=!0,i[a]=f):n[a]=f}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(lt({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var p=Pr(i);function v(_,y){for(var S=e.getRawValue(y),A=e.getDataParams(y),I=0;I<p.length;I++){var M=p[I];_.setItemVisual(y,M,i[M](S,A))}}return{dataEach:o?v:null}}},nH={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var u=i.getItemModel(o),a=0;a<gC.length;a++){var f=gC[a],p=u.getShallow(f,!0);p!=null&&i.setItemVisual(o,f,p)}}return{dataEach:r.hasItemOption?n:null}}};function iH(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function V5(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function mc(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(u){for(var a=u.seriesIndex,f=u.option.selectedMap,p=i.selected,v=0;v<p.length;v++)if(p[v].seriesIndex===a){var _=u.getData(),y=Bd(_,i.fromActionPayload);r.trigger(o,{type:o,seriesId:u.id,name:wt(y)?_.getName(y[0]):_.getName(y),selected:Rt(f)?f:lt({},f)})}})}function aH(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(mc("map","selectchanged",t,i,n),mc("pie","selectchanged",t,i,n)):n.fromAction==="select"?(mc("map","selected",t,i,n),mc("pie","selected",t,i,n)):n.fromAction==="unselect"&&(mc("map","unselected",t,i,n),mc("pie","unselected",t,i,n))})}function zf(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var oH=Math.round(Math.random()*9),sH=typeof Object.defineProperty=="function",lH=function(){function e(){this._id="__ec_inner_"+oH++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return sH?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const uH=lH;var cH=Vr.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),hH=Vr.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),fH=Vr.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),u=i/2,a=u*u/(o-u),f=n-o+u+a,p=Math.asin(a/u),v=Math.cos(p)*u,_=Math.sin(p),y=Math.cos(p),S=u*.6,A=u*.7;e.moveTo(r-v,f+a),e.arc(r,f,u,Math.PI-p,Math.PI*2+p),e.bezierCurveTo(r+v-_*S,f+a+y*S,r,n-A,r,n),e.bezierCurveTo(r,n-A,r-v+_*S,f+a+y*S,r-v,f+a),e.closePath()}}),dH=Vr.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,u=n/3*2;e.moveTo(i,o),e.lineTo(i+u,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-u,o+r),e.lineTo(i,o),e.closePath()}}),pH={line:rl,rect:qi,roundRect:qi,square:qi,circle:ob,diamond:hH,pin:fH,arrow:dH,triangle:cH},mH={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},B1={};we(pH,function(e,t){B1[t]=new e});var vH=Vr.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=MP(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=B1[n];i||(n="rect",i=B1[n]),mH[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function gH(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function rh(e,t,r,n,i,o,u){var a=e.indexOf("empty")===0;a&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var f;return e.indexOf("image://")===0?f=OD(e.slice(8),new Zr(t,r,n,i),u?"center":"cover"):e.indexOf("path://")===0?f=fb(e.slice(7),{},new Zr(t,r,n,i),u?"center":"cover"):f=new vH({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),f.__isEmptyBrush=a,f.setColor=gH,o&&f.setColor(o),f}function U5(e){return wt(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function kb(e,t){if(e!=null)return wt(e)||(e=[e,e]),[ti(e[0],t[0])||0,ti(or(e[1],e[0]),t[1])||0]}function cu(e){return isFinite(e)}function _H(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,u=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,u=u*r.height+r.y),n=cu(n)?n:0,i=cu(i)?i:1,o=cu(o)?o:0,u=cu(u)?u:0;var a=e.createLinearGradient(n,o,i,u);return a}function yH(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),u=t.x==null?.5:t.x,a=t.y==null?.5:t.y,f=t.r==null?.5:t.r;t.global||(u=u*n+r.x,a=a*i+r.y,f=f*o),u=cu(u)?u:.5,a=cu(a)?a:.5,f=f>=0&&cu(f)?f:.5;var p=e.createRadialGradient(u,a,0,u,a,f);return p}function _C(e,t,r){for(var n=t.type==="radial"?yH(e,t,r):_H(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function xH(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function km(e){return parseInt(e,10)}function yC(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],u=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var a=document.defaultView.getComputedStyle(e);return(e[i]||km(a[n])||km(e.style[n]))-(km(a[o])||0)-(km(a[u])||0)|0}function bH(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:gn(e)?[e]:wt(e)?e:null}function Lb(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&bH(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Bt(r,function(o){return o/i}),n/=i)}return[r,n]}var wH=new yu(!0);function eg(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function xC(e){return typeof e=="string"&&e!=="none"}function tg(e){var t=e.fill;return t!=null&&t!=="none"}function bC(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function wC(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function SC(e,t,r){var n=Jx(t.image,t.__image,r);if(Sg(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*av),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function SH(e,t,r,n){var i,o=eg(r),u=tg(r),a=r.strokePercent,f=a<1,p=!t.path;(!t.silent||f)&&p&&t.createPathProxy();var v=t.path||wH,_=t.__dirty;if(!n){var y=r.fill,S=r.stroke,A=u&&!!y.colorStops,I=o&&!!S.colorStops,M=u&&!!y.image,k=o&&!!S.image,L=void 0,z=void 0,V=void 0,H=void 0,Z=void 0;(A||I)&&(Z=t.getBoundingRect()),A&&(L=_?_C(e,y,Z):t.__canvasFillGradient,t.__canvasFillGradient=L),I&&(z=_?_C(e,S,Z):t.__canvasStrokeGradient,t.__canvasStrokeGradient=z),M&&(V=_||!t.__canvasFillPattern?SC(e,y,t):t.__canvasFillPattern,t.__canvasFillPattern=V),k&&(H=_||!t.__canvasStrokePattern?SC(e,S,t):t.__canvasStrokePattern,t.__canvasStrokePattern=V),A?e.fillStyle=L:M&&(V?e.fillStyle=V:u=!1),I?e.strokeStyle=z:k&&(H?e.strokeStyle=H:o=!1)}var ee=t.getGlobalScale();v.setScale(ee[0],ee[1],t.segmentIgnoreThreshold);var Y,ae;e.setLineDash&&r.lineDash&&(i=Lb(t),Y=i[0],ae=i[1]);var le=!0;(p||_&yc)&&(v.setDPR(e.dpr),f?v.setContext(null):(v.setContext(e),le=!1),v.reset(),t.buildPath(v,t.shape,n),v.toStatic(),t.pathUpdated()),le&&v.rebuildPath(e,f?a:1),Y&&(e.setLineDash(Y),e.lineDashOffset=ae),n||(r.strokeFirst?(o&&wC(e,r),u&&bC(e,r)):(u&&bC(e,r),o&&wC(e,r))),Y&&e.setLineDash([])}function TH(e,t,r){var n=t.__image=Jx(r.image,t.__image,t,t.onload);if(!(!n||!Sg(n))){var i=r.x||0,o=r.y||0,u=t.getWidth(),a=t.getHeight(),f=n.width/n.height;if(u==null&&a!=null?u=a*f:a==null&&u!=null?a=u/f:u==null&&a==null&&(u=n.width,a=n.height),r.sWidth&&r.sHeight){var p=r.sx||0,v=r.sy||0;e.drawImage(n,p,v,r.sWidth,r.sHeight,i,o,u,a)}else if(r.sx&&r.sy){var p=r.sx,v=r.sy,_=u-p,y=a-v;e.drawImage(n,p,v,_,y,i,o,u,a)}else e.drawImage(n,i,o,u,a)}}function EH(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||tl,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,u=void 0;e.setLineDash&&r.lineDash&&(n=Lb(t),o=n[0],u=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=u),r.strokeFirst?(eg(r)&&e.strokeText(i,r.x,r.y),tg(r)&&e.fillText(i,r.x,r.y)):(tg(r)&&e.fillText(i,r.x,r.y),eg(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var TC=["shadowBlur","shadowOffsetX","shadowOffsetY"],EC=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function $5(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){Hi(e,i),o=!0;var u=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(u)?fu.opacity:u}(n||t.blend!==r.blend)&&(o||(Hi(e,i),o=!0),e.globalCompositeOperation=t.blend||fu.blend);for(var a=0;a<TC.length;a++){var f=TC[a];(n||t[f]!==r[f])&&(o||(Hi(e,i),o=!0),e[f]=e.dpr*(t[f]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(Hi(e,i),o=!0),e.shadowColor=t.shadowColor||fu.shadowColor),o}function CC(e,t,r,n,i){var o=wd(t,i.inHover),u=n?null:r&&wd(r,i.inHover)||{};if(o===u)return!1;var a=$5(e,o,u,n,i);if((n||o.fill!==u.fill)&&(a||(Hi(e,i),a=!0),xC(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==u.stroke)&&(a||(Hi(e,i),a=!0),xC(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==u.opacity)&&(a||(Hi(e,i),a=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var f=o.lineWidth,p=f/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==p&&(a||(Hi(e,i),a=!0),e.lineWidth=p)}for(var v=0;v<EC.length;v++){var _=EC[v],y=_[0];(n||o[y]!==u[y])&&(a||(Hi(e,i),a=!0),e[y]=o[y]||_[1])}return a}function CH(e,t,r,n,i){return $5(e,wd(t,i.inHover),r&&wd(r,i.inHover),n,i)}function j5(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function AH(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),j5(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function IH(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var AC=1,IC=2,MC=3,PC=4;function MH(e){var t=tg(e),r=eg(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function Hi(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function wd(e,t){return t&&e.__hoverStyle||e.style}function PH(e,t){F1(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function F1(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~yo,t.__isRendered=!1;return}var o=t.__clipPaths,u=r.prevElClipPaths,a=!1,f=!1;if((!u||xH(o,u))&&(u&&u.length&&(Hi(e,r),e.restore(),f=a=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(Hi(e,r),e.save(),AH(o,e,r),a=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var p=r.prevEl;p||(f=a=!0);var v=t instanceof Vr&&t.autoBatch&&MH(t.style);a||IH(i,p.transform)?(Hi(e,r),j5(e,t)):v||Hi(e,r);var _=wd(t,r.inHover);t instanceof Vr?(r.lastDrawType!==AC&&(f=!0,r.lastDrawType=AC),CC(e,t,p,f,r),(!v||!r.batchFill&&!r.batchStroke)&&e.beginPath(),SH(e,t,_,v),v&&(r.batchFill=_.fill||"",r.batchStroke=_.stroke||"")):t instanceof qv?(r.lastDrawType!==MC&&(f=!0,r.lastDrawType=MC),CC(e,t,p,f,r),EH(e,t,_)):t instanceof fs?(r.lastDrawType!==IC&&(f=!0,r.lastDrawType=IC),CH(e,t,p,f,r),TH(e,t,_)):t.getTemporalDisplayables&&(r.lastDrawType!==PC&&(f=!0,r.lastDrawType=PC),DH(e,t,r)),v&&n&&Hi(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function DH(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},u,a;for(u=t.getCursor(),a=n.length;u<a;u++){var f=n[u];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),F1(e,f,o,u===a-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),o.prevEl=f}for(var p=0,v=i.length;p<v;p++){var f=i[p];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),F1(e,f,o,p===v-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),o.prevEl=f}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var Jy=new uH,DC=new Rd(100),kC=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function LC(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&Jy.delete(e);var o=Jy.get(e);if(o)return o;var u=an(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});u.backgroundColor==="none"&&(u.backgroundColor=null);var a={repeat:"repeat"};return f(a),a.rotation=u.rotation,a.scaleX=a.scaleY=i?1:1/r,Jy.set(e,a),e.dirty=!1,a;function f(p){for(var v=[r],_=!0,y=0;y<kC.length;++y){var S=u[kC[y]];if(S!=null&&!wt(S)&&!Rt(S)&&!gn(S)&&typeof S!="boolean"){_=!1;break}v.push(S)}var A;if(_){A=v.join(",")+(i?"-svg":"");var I=DC.get(A);I&&(i?p.svgElement=I:p.image=I)}var M=H5(u.dashArrayX),k=kH(u.dashArrayY),L=G5(u.symbol),z=LH(M),V=q5(k),H=!i&&Kc.createCanvas(),Z=i&&{tag:"g",attrs:{},key:"dcl",children:[]},ee=ae(),Y;H&&(H.width=ee.width*r,H.height=ee.height*r,Y=H.getContext("2d")),le(),_&&DC.put(A,H||Z),p.image=H,p.svgElement=Z,p.svgWidth=ee.width,p.svgHeight=ee.height;function ae(){for(var pe=1,ye=0,ve=z.length;ye<ve;++ye)pe=jT(pe,z[ye]);for(var Pe=1,ye=0,ve=L.length;ye<ve;++ye)Pe=jT(Pe,L[ye].length);pe*=Pe;var $e=V*z.length*L.length;return{width:Math.max(1,Math.min(pe,u.maxTileWidth)),height:Math.max(1,Math.min($e,u.maxTileHeight))}}function le(){Y&&(Y.clearRect(0,0,H.width,H.height),u.backgroundColor&&(Y.fillStyle=u.backgroundColor,Y.fillRect(0,0,H.width,H.height)));for(var pe=0,ye=0;ye<k.length;++ye)pe+=k[ye];if(pe<=0)return;for(var ve=-V,Pe=0,$e=0,Ce=0;ve<ee.height;){if(Pe%2===0){for(var at=$e/2%L.length,st=0,xt=0,St=0;st<ee.width*2;){for(var Xt=0,ye=0;ye<M[Ce].length;++ye)Xt+=M[Ce][ye];if(Xt<=0)break;if(xt%2===0){var Dt=(1-u.symbolSize)*.5,Br=st+M[Ce][xt]*Dt,cr=ve+k[Pe]*Dt,vr=M[Ce][xt]*u.symbolSize,Fr=k[Pe]*u.symbolSize,Ur=St/2%L[at].length;gr(Br,cr,vr,Fr,L[at][Ur])}st+=M[Ce][xt],++St,++xt,xt===M[Ce].length&&(xt=0)}++Ce,Ce===M.length&&(Ce=0)}ve+=k[Pe],++$e,++Pe,Pe===k.length&&(Pe=0)}function gr(Yt,_r,At,kt,Tt){var zt=i?1:r,hr=rh(Tt,Yt*zt,_r*zt,At*zt,kt*zt,u.color,u.symbolKeepAspect);if(i){var yr=n.painter.renderOneToVNode(hr);yr&&Z.children.push(yr)}else PH(Y,hr)}}}}function G5(e){if(!e||e.length===0)return[["rect"]];if(Rt(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Rt(e[r])){t=!1;break}if(t)return G5([e]);for(var n=[],r=0;r<e.length;++r)Rt(e[r])?n.push([e[r]]):n.push(e[r]);return n}function H5(e){if(!e||e.length===0)return[[0,0]];if(gn(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!gn(e[n])){r=!1;break}if(r)return H5([e]);for(var i=[],n=0;n<e.length;++n)if(gn(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Bt(e[n],function(a){return Math.ceil(a)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function kH(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(gn(e)){var t=Math.ceil(e);return[t,t]}var r=Bt(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function LH(e){return Bt(e,function(t){return q5(t)})}function q5(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function OH(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(u){var a=n.getItemVisual(u,"decal");if(a){var f=n.ensureUniqueItemVisual(u,"style");f.decal=LC(a,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=LC(i,t)}}})}var RH=new hs;const qa=RH;var W5={};function zH(e,t){W5[e]=t}function BH(e){return W5[e]}var FH=1,NH=800,VH=900,UH=1e3,$H=2e3,jH=5e3,Z5=1e3,GH=1100,Ob=2e3,X5=3e3,HH=4e3,Fg=4500,qH=4600,WH=5e3,ZH=6e3,Y5=7e3,XH={PROCESSOR:{FILTER:UH,SERIES_FILTER:NH,STATISTIC:jH},VISUAL:{LAYOUT:Z5,PROGRESSIVE_LAYOUT:GH,GLOBAL:Ob,CHART:X5,POST_CHART_LAYOUT:qH,COMPONENT:HH,BRUSH:WH,CHART_ITEM:Fg,ARIA:ZH,DECAL:Y5}},ci="__flagInMainProcess",$i="__pendingUpdate",Qy="__needsUpdateStatus",OC=/^[a-zA-Z0-9_]+$/,e0="__connectUpdateStatus",RC=0,YH=1,KH=2;function K5(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return Q5(this,e,t)}}function J5(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Q5(this,e,t)}}function Q5(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),hs.prototype[t].apply(e,r)}var e3=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(hs),t3=e3.prototype;t3.on=J5("on");t3.off=J5("off");var vc,t0,Lm,Us,r0,n0,i0,yf,xf,zC,BC,a0,FC,Om,NC,r3,_a,VC,n3=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,new tH)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Rt(n)&&(n=i3[n]),o._dom=r;var u="canvas",a="auto",f=!1,p=o._zr=VT(r,{renderer:i.renderer||u,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:or(i.useDirtyRect,f),useCoarsePointer:or(i.useCoarsePointer,a),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=Db(vn(p.flush,p),17),n=mr(n),n&&p5(n,!0),o._theme=n,o._locale=aj(i.locale||GD),o._coordSysMgr=new Sb;var v=o._api=NC(o);function _(y,S){return y.__prio-S.__prio}return ov(ng,_),ov(N1,_),o._scheduler=new F5(o,v,N1,ng),o._messageCenter=new e3,o._initEvents(),o.resize=vn(o.resize,o),p.animation.on("frame",o._onframe,o),zC(p,o),BC(p,o),t1(o),o}return t.prototype._onframe=function(){if(!this._disposed){VC(this);var r=this._scheduler;if(this[$i]){var n=this[$i].silent;this[ci]=!0;try{vc(this),Us.update.call(this,null,this[$i].updateParams)}catch(f){throw this[ci]=!1,this[$i]=null,f}this._zr.flush(),this[ci]=!1,this[$i]=null,yf.call(this,n),xf.call(this,n)}else if(r.unfinished){var i=FH,o=this._model,u=this._api;r.unfinished=!1;do{var a=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),n0(this,o),r.performVisualTasks(o),Om(this,this._model,u,"remain",{}),i-=+new Date-a}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[ci]){if(this._disposed){this.id;return}var o,u,a;if(Vt(n)&&(i=n.lazyUpdate,o=n.silent,u=n.replaceMerge,a=n.transition,n=n.notMerge),this[ci]=!0,!this._model||n){var f=new Nj(this._api),p=this._theme,v=this._model=new h5;v.scheduler=this._scheduler,v.ssr=this._ssr,v.init(null,null,null,p,this._locale,f)}this._model.setOption(r,{replaceMerge:u},V1);var _={seriesTransition:a,optionChanged:!0};if(i)this[$i]={silent:o,updateParams:_},this[ci]=!1,this.getZr().wakeUp();else{try{vc(this),Us.update.call(this,null,_)}catch(y){throw this[$i]=null,this[ci]=!1,y}this._ssr||this._zr.flush(),this[$i]=null,this[ci]=!1,yf.call(this,o),xf.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||ar.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(ar.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return we(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],u=this;we(n,function(f){i.eachComponent({mainType:f},function(p){var v=u._componentsMap[p.__viewId];v.group.ignore||(o.push(v),v.group.ignore=!0)})});var a=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return we(o,function(f){f.group.ignore=!1}),a},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,u=Math.max,a=1/0;if(UC[i]){var f=a,p=a,v=-a,_=-a,y=[],S=r&&r.pixelRatio||this.getDevicePixelRatio();we(Jf,function(z,V){if(z.group===i){var H=n?z.getZr().painter.getSvgDom().innerHTML:z.renderToCanvas(mr(r)),Z=z.getDom().getBoundingClientRect();f=o(Z.left,f),p=o(Z.top,p),v=u(Z.right,v),_=u(Z.bottom,_),y.push({dom:H,left:Z.left,top:Z.top})}}),f*=S,p*=S,v*=S,_*=S;var A=v-f,I=_-p,M=Kc.createCanvas(),k=VT(M,{renderer:n?"svg":"canvas"});if(k.resize({width:A,height:I}),n){var L="";return we(y,function(z){var V=z.left-f,H=z.top-p;L+='<g transform="translate('+V+","+H+')">'+z.dom+"</g>"}),k.painter.getSvgRoot().innerHTML=L,r.connectedBackgroundColor&&k.painter.setBackgroundColor(r.connectedBackgroundColor),k.refreshImmediately(),k.painter.toDataURL()}else return r.connectedBackgroundColor&&k.add(new qi({shape:{x:0,y:0,width:A,height:I},style:{fill:r.connectedBackgroundColor}})),we(y,function(z){var V=new fs({style:{x:z.left*S-f,y:z.top*S-p,image:z.dom}});k.add(V)}),k.refreshImmediately(),M.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return r0(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return r0(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,u=Ey(i,r);return we(u,function(a,f){f.indexOf("Models")>=0&&we(a,function(p){var v=p.coordinateSystem;if(v&&v.containPoint)o=o||!!v.containPoint(n);else if(f==="seriesModels"){var _=this._chartsMap[p.__viewId];_&&_.containPoint&&(o=o||_.containPoint(n,p))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=Ey(i,r,{defaultMainType:"series"}),u=o.seriesModel,a=u.getData(),f=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?a.indexOfRawIndex(o.dataIndex):null;return f!=null?iH(a,f,n):V5(a,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;we(JH,function(n){var i=function(o){var u=r.getModel(),a=o.target,f,p=n==="globalout";if(p?f={}:a&&zf(a,function(A){var I=nn(A);if(I&&I.dataIndex!=null){var M=I.dataModel||u.getSeriesByIndex(I.seriesIndex);return f=M&&M.getDataParams(I.dataIndex,I.dataType)||{},!0}else if(I.eventData)return f=lt({},I.eventData),!0},!0),f){var v=f.componentType,_=f.componentIndex;(v==="markLine"||v==="markPoint"||v==="markArea")&&(v="series",_=f.seriesIndex);var y=v&&_!=null&&u.getComponent(v,_),S=y&&r[y.mainType==="series"?"_chartsMap":"_componentsMap"][y.__viewId];f.event=o,f.type=n,r._$eventProcessor.eventInfo={targetEl:a,packedEvent:f,model:y,view:S},r.trigger(n,f)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),we(Kf,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),we(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),aH(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&$P(this.getDom(),zb,"");var n=this,i=n._api,o=n._model;we(n._componentsViews,function(u){u.dispose(o,i)}),we(n._chartsViews,function(u){u.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Jf[n.id]},t.prototype.resize=function(r){if(!this[ci]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[$i]&&(o==null&&(o=this[$i].silent),i=!0,this[$i]=null),this[ci]=!0;try{i&&vc(this),Us.update.call(this,{type:"resize",animation:lt({duration:0},r&&r.animation)})}catch(u){throw this[ci]=!1,u}this[ci]=!1,yf.call(this,o),xf.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(Vt(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!U1[r]){var i=U1[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=lt({},r);return n.type=Kf[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(Vt(n)||(n={silent:!!n}),!!rg[r.type]&&this._model){if(this[ci]){this._pendingActions.push(r);return}var i=n.silent;i0.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&ar.browser.weChat&&this._throttledZrFlush(),yf.call(this,i),xf.call(this,i)}},t.prototype.updateLabelLayout=function(){qa.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){vc=function(_){var y=_._scheduler;y.restorePipelines(_._model),y.prepareStageTasks(),t0(_,!0),t0(_,!1),y.plan()},t0=function(_,y){for(var S=_._model,A=_._scheduler,I=y?_._componentsViews:_._chartsViews,M=y?_._componentsMap:_._chartsMap,k=_._zr,L=_._api,z=0;z<I.length;z++)I[z].__alive=!1;y?S.eachComponent(function(Z,ee){Z!=="series"&&V(ee)}):S.eachSeries(V);function V(Z){var ee=Z.__requireNewView;Z.__requireNewView=!1;var Y="_ec_"+Z.id+"_"+Z.type,ae=!ee&&M[Y];if(!ae){var le=To(Z.type),pe=y?ls.getClass(le.main,le.sub):pu.getClass(le.sub);ae=new pe,ae.init(S,L),M[Y]=ae,I.push(ae),k.add(ae.group)}Z.__viewId=ae.__id=Y,ae.__alive=!0,ae.__model=Z,ae.group.__ecComponentInfo={mainType:Z.mainType,index:Z.componentIndex},!y&&A.prepareView(ae,Z,S,L)}for(var z=0;z<I.length;){var H=I[z];H.__alive?z++:(!y&&H.renderTask.dispose(),k.remove(H.group),H.dispose(S,L),I.splice(z,1),M[H.__id]===H&&delete M[H.__id],H.__id=H.group.__ecComponentInfo=null)}},Lm=function(_,y,S,A,I){var M=_._model;if(M.setUpdatePayload(S),!A){we([].concat(_._componentsViews).concat(_._chartsViews),H);return}var k={};k[A+"Id"]=S[A+"Id"],k[A+"Index"]=S[A+"Index"],k[A+"Name"]=S[A+"Name"];var L={mainType:A,query:k};I&&(L.subType=I);var z=S.excludeSeriesId,V;z!=null&&(V=sr(),we(Li(z),function(Z){var ee=Ao(Z,null);ee!=null&&V.set(ee,!0)})),M&&M.eachComponent(L,function(Z){var ee=V&&V.get(Z.id)!=null;if(!ee)if(vE(S))if(Z instanceof Hc)S.type===du&&!S.notBlur&&!Z.get(["emphasis","disabled"])&&LU(Z,S,_._api);else{var Y=ib(Z.mainType,Z.componentIndex,S.name,_._api),ae=Y.focusSelf,le=Y.dispatchers;S.type===du&&ae&&!S.notBlur&&T1(Z.mainType,Z.componentIndex,_._api),le&&we(le,function(pe){S.type===du?fd(pe):dd(pe)})}else C1(S)&&Z instanceof Hc&&(zU(Z,S,_._api),mE(Z),_a(_))},_),M&&M.eachComponent(L,function(Z){var ee=V&&V.get(Z.id)!=null;ee||H(_[A==="series"?"_chartsMap":"_componentsMap"][Z.__viewId])},_);function H(Z){Z&&Z.__alive&&Z[y]&&Z[y](Z.__model,M,_._api,S)}},Us={prepareAndUpdate:function(_){vc(this),Us.update.call(this,_,{optionChanged:_.newOption!=null})},update:function(_,y){var S=this._model,A=this._api,I=this._zr,M=this._coordSysMgr,k=this._scheduler;if(S){S.setUpdatePayload(_),k.restoreData(S,_),k.performSeriesTasks(S),M.create(S,A),k.performDataProcessorTasks(S,_),n0(this,S),M.update(S,A),r(S),k.performVisualTasks(S,_),a0(this,S,A,_,y);var L=S.get("backgroundColor")||"transparent",z=S.get("darkMode");I.setBackgroundColor(L),z!=null&&z!=="auto"&&I.setDarkMode(z),qa.trigger("afterupdate",S,A)}},updateTransform:function(_){var y=this,S=this._model,A=this._api;if(S){S.setUpdatePayload(_);var I=[];S.eachComponent(function(k,L){if(k!=="series"){var z=y.getViewOfComponentModel(L);if(z&&z.__alive)if(z.updateTransform){var V=z.updateTransform(L,S,A,_);V&&V.update&&I.push(z)}else I.push(z)}});var M=sr();S.eachSeries(function(k){var L=y._chartsMap[k.__viewId];if(L.updateTransform){var z=L.updateTransform(k,S,A,_);z&&z.update&&M.set(k.uid,1)}else M.set(k.uid,1)}),r(S),this._scheduler.performVisualTasks(S,_,{setDirty:!0,dirtyMap:M}),Om(this,S,A,_,{},M),qa.trigger("afterupdate",S,A)}},updateView:function(_){var y=this._model;y&&(y.setUpdatePayload(_),pu.markUpdateMethod(_,"updateView"),r(y),this._scheduler.performVisualTasks(y,_,{setDirty:!0}),a0(this,y,this._api,_,{}),qa.trigger("afterupdate",y,this._api))},updateVisual:function(_){var y=this,S=this._model;S&&(S.setUpdatePayload(_),S.eachSeries(function(A){A.getData().clearAllVisual()}),pu.markUpdateMethod(_,"updateVisual"),r(S),this._scheduler.performVisualTasks(S,_,{visualType:"visual",setDirty:!0}),S.eachComponent(function(A,I){if(A!=="series"){var M=y.getViewOfComponentModel(I);M&&M.__alive&&M.updateVisual(I,S,y._api,_)}}),S.eachSeries(function(A){var I=y._chartsMap[A.__viewId];I.updateVisual(A,S,y._api,_)}),qa.trigger("afterupdate",S,this._api))},updateLayout:function(_){Us.update.call(this,_)}},r0=function(_,y,S,A){if(_._disposed){_.id;return}for(var I=_._model,M=_._coordSysMgr.getCoordinateSystems(),k,L=Ey(I,S),z=0;z<M.length;z++){var V=M[z];if(V[y]&&(k=V[y](I,L,A))!=null)return k}},n0=function(_,y){var S=_._chartsMap,A=_._scheduler;y.eachSeries(function(I){A.updateStreamModes(I,S[I.__viewId])})},i0=function(_,y){var S=this,A=this.getModel(),I=_.type,M=_.escapeConnect,k=rg[I],L=k.actionInfo,z=(L.update||"update").split(":"),V=z.pop(),H=z[0]!=null&&To(z[0]);this[ci]=!0;var Z=[_],ee=!1;_.batch&&(ee=!0,Z=Bt(_.batch,function(Pe){return Pe=an(lt({},Pe),_),Pe.batch=null,Pe}));var Y=[],ae,le=C1(_),pe=vE(_);if(pe&&dD(this._api),we(Z,function(Pe){if(ae=k.action(Pe,S._model,S._api),ae=ae||lt({},Pe),ae.type=L.event||ae.type,Y.push(ae),pe){var $e=Yx(_),Ce=$e.queryOptionMap,at=$e.mainTypeSpecified,st=at?Ce.keys()[0]:"series";Lm(S,V,Pe,st),_a(S)}else le?(Lm(S,V,Pe,"series"),_a(S)):H&&Lm(S,V,Pe,H.main,H.sub)}),V!=="none"&&!pe&&!le&&!H)try{this[$i]?(vc(this),Us.update.call(this,_),this[$i]=null):Us[V].call(this,_)}catch(Pe){throw this[ci]=!1,Pe}if(ee?ae={type:L.event||I,escapeConnect:M,batch:Y}:ae=Y[0],this[ci]=!1,!y){var ye=this._messageCenter;if(ye.trigger(ae.type,ae),le){var ve={type:"selectchanged",escapeConnect:M,selected:BU(A),isFromClick:_.isFromClick||!1,fromAction:_.type,fromActionPayload:_};ye.trigger(ve.type,ve)}}},yf=function(_){for(var y=this._pendingActions;y.length;){var S=y.shift();i0.call(this,S,_)}},xf=function(_){!_&&this.trigger("updated")},zC=function(_,y){_.on("rendered",function(S){y.trigger("rendered",S),_.animation.isFinished()&&!y[$i]&&!y._scheduler.unfinished&&!y._pendingActions.length&&y.trigger("finished")})},BC=function(_,y){_.on("mouseover",function(S){var A=S.target,I=zf(A,E1);I&&(OU(I,S,y._api),_a(y))}).on("mouseout",function(S){var A=S.target,I=zf(A,E1);I&&(RU(I,S,y._api),_a(y))}).on("click",function(S){var A=S.target,I=zf(A,function(L){return nn(L).dataIndex!=null},!0);if(I){var M=I.selected?"unselect":"select",k=nn(I);y._api.dispatchAction({type:M,dataType:k.dataType,dataIndexInside:k.dataIndex,seriesIndex:k.seriesIndex,isFromClick:!0})}})};function r(_){_.clearColorPalette(),_.eachSeries(function(y){y.clearColorPalette()})}function n(_){var y=[],S=[],A=!1;if(_.eachComponent(function(L,z){var V=z.get("zlevel")||0,H=z.get("z")||0,Z=z.getZLevelKey();A=A||!!Z,(L==="series"?S:y).push({zlevel:V,z:H,idx:z.componentIndex,type:L,key:Z})}),A){var I=y.concat(S),M,k;ov(I,function(L,z){return L.zlevel===z.zlevel?L.z-z.z:L.zlevel-z.zlevel}),we(I,function(L){var z=_.getComponent(L.type,L.idx),V=L.zlevel,H=L.key;M!=null&&(V=Math.max(M,V)),H?(V===M&&H!==k&&V++,k=H):k&&(V===M&&V++,k=""),M=V,z.setZLevel(V)})}}a0=function(_,y,S,A,I){n(y),FC(_,y,S,A,I),we(_._chartsViews,function(M){M.__alive=!1}),Om(_,y,S,A,I),we(_._chartsViews,function(M){M.__alive||M.remove(y,S)})},FC=function(_,y,S,A,I,M){we(M||_._componentsViews,function(k){var L=k.__model;p(L,k),k.render(L,y,S,A),a(L,k),v(L,k)})},Om=function(_,y,S,A,I,M){var k=_._scheduler;I=lt(I||{},{updatedSeries:y.getSeries()}),qa.trigger("series:beforeupdate",y,S,I);var L=!1;y.eachSeries(function(z){var V=_._chartsMap[z.__viewId];V.__alive=!0;var H=V.renderTask;k.updatePayload(H,A),p(z,V),M&&M.get(z.uid)&&H.dirty(),H.perform(k.getPerformArgs(H))&&(L=!0),V.group.silent=!!z.get("silent"),u(z,V),mE(z)}),k.unfinished=L||k.unfinished,qa.trigger("series:layoutlabels",y,S,I),qa.trigger("series:transition",y,S,I),y.eachSeries(function(z){var V=_._chartsMap[z.__viewId];a(z,V),v(z,V)}),o(_,y),qa.trigger("series:afterupdate",y,S,I)},_a=function(_){_[Qy]=!0,_.getZr().wakeUp()},VC=function(_){_[Qy]&&(_.getZr().storage.traverse(function(y){Zf(y)||i(y)}),_[Qy]=!1)};function i(_){for(var y=[],S=_.currentStates,A=0;A<S.length;A++){var I=S[A];I==="emphasis"||I==="blur"||I==="select"||y.push(I)}_.selected&&_.states.select&&y.push("select"),_.hoverState===tb&&_.states.emphasis?y.push("emphasis"):_.hoverState===eb&&_.states.blur&&y.push("blur"),_.useStates(y)}function o(_,y){var S=_._zr,A=S.storage,I=0;A.traverse(function(M){M.isGroup||I++}),I>y.get("hoverLayerThreshold")&&!ar.node&&!ar.worker&&y.eachSeries(function(M){if(!M.preventUsingHoverLayer){var k=_._chartsMap[M.__viewId];k.__alive&&k.eachRendered(function(L){L.states.emphasis&&(L.states.emphasis.hoverLayer=!0)})}})}function u(_,y){var S=_.get("blendMode")||null;y.eachRendered(function(A){A.isGroup||(A.style.blend=S)})}function a(_,y){if(!_.preventAutoZ){var S=_.get("z")||0,A=_.get("zlevel")||0;y.eachRendered(function(I){return f(I,S,A,-1/0),!0})}}function f(_,y,S,A){var I=_.getTextContent(),M=_.getTextGuideLine(),k=_.isGroup;if(k)for(var L=_.childrenRef(),z=0;z<L.length;z++)A=Math.max(f(L[z],y,S,A),A);else _.z=y,_.zlevel=S,A=Math.max(_.z2,A);if(I&&(I.z=y,I.zlevel=S,isFinite(A)&&(I.z2=A+2)),M){var V=_.textGuideLineConfig;M.z=y,M.zlevel=S,isFinite(A)&&(M.z2=A+(V&&V.showAbove?1:-1))}return A}function p(_,y){y.eachRendered(function(S){if(!Zf(S)){var A=S.getTextContent(),I=S.getTextGuideLine();S.stateTransition&&(S.stateTransition=null),A&&A.stateTransition&&(A.stateTransition=null),I&&I.stateTransition&&(I.stateTransition=null),S.hasState()?(S.prevStates=S.currentStates,S.clearStates()):S.prevStates&&(S.prevStates=null)}})}function v(_,y){var S=_.getModel("stateAnimation"),A=_.isAnimationEnabled(),I=S.get("duration"),M=I>0?{duration:I,delay:S.get("delay"),easing:S.get("easing")}:null;y.eachRendered(function(k){if(k.states&&k.states.emphasis){if(Zf(k))return;if(k instanceof Vr&&$U(k),k.__dirty){var L=k.prevStates;L&&k.useStates(L)}if(A){k.stateTransition=M;var z=k.getTextContent(),V=k.getTextGuideLine();z&&(z.stateTransition=M),V&&(V.stateTransition=M)}k.__dirty&&i(k)}})}NC=function(_){return new(function(y){mt(S,y);function S(){return y!==null&&y.apply(this,arguments)||this}return S.prototype.getCoordinateSystems=function(){return _._coordSysMgr.getCoordinateSystems()},S.prototype.getComponentByElement=function(A){for(;A;){var I=A.__ecComponentInfo;if(I!=null)return _._model.getComponent(I.mainType,I.index);A=A.parent}},S.prototype.enterEmphasis=function(A,I){fd(A,I),_a(_)},S.prototype.leaveEmphasis=function(A,I){dd(A,I),_a(_)},S.prototype.enterBlur=function(A){uD(A),_a(_)},S.prototype.leaveBlur=function(A){nb(A),_a(_)},S.prototype.enterSelect=function(A){cD(A),_a(_)},S.prototype.leaveSelect=function(A){hD(A),_a(_)},S.prototype.getModel=function(){return _.getModel()},S.prototype.getViewOfComponentModel=function(A){return _.getViewOfComponentModel(A)},S.prototype.getViewOfSeriesModel=function(A){return _.getViewOfSeriesModel(A)},S}(f5))(_)},r3=function(_){function y(S,A){for(var I=0;I<S.length;I++){var M=S[I];M[e0]=A}}we(Kf,function(S,A){_._messageCenter.on(A,function(I){if(UC[_.group]&&_[e0]!==RC){if(I&&I.escapeConnect)return;var M=_.makeActionFromEvent(I),k=[];we(Jf,function(L){L!==_&&L.group===_.group&&k.push(L)}),y(k,RC),we(k,function(L){L[e0]!==YH&&L.dispatchAction(M)}),y(k,KH)}})})}}(),t}(hs),Rb=n3.prototype;Rb.on=K5("on");Rb.off=K5("off");Rb.one=function(e,t,r){var n=this;function i(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var JH=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var rg={},Kf={},N1=[],V1=[],ng=[],i3={},U1={},Jf={},UC={},QH=+new Date-0,zb="_echarts_instance_";function eq(e,t,r){var n=!(r&&r.ssr);if(n){var i=tq(e);if(i)return i}var o=new n3(e,t,r);return o.id="ec_"+QH++,Jf[o.id]=o,n&&$P(e,zb,o.id),r3(o),qa.trigger("afterinit",o),o}function tq(e){return Jf[SV(e,zb)]}function a3(e,t){i3[e]=t}function o3(e){qr(V1,e)<0&&V1.push(e)}function s3(e,t){Fb(N1,e,t,$H)}function rq(e){Bb("afterinit",e)}function nq(e){Bb("afterupdate",e)}function Bb(e,t){qa.on(e,t)}function nh(e,t,r){Zt(t)&&(r=t,t="");var n=Vt(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!Kf[t]&&(Xa(OC.test(n)&&OC.test(t)),rg[n]||(rg[n]={action:r,actionInfo:e}),Kf[t]=n)}function iq(e,t){Sb.register(e,t)}function aq(e,t){Fb(ng,e,t,Z5,"layout")}function Tu(e,t){Fb(ng,e,t,X5,"visual")}var $C=[];function Fb(e,t,r,n,i){if((Zt(t)||Vt(t))&&(r=t,t=n),!(qr($C,r)>=0)){$C.push(r);var o=F5.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function l3(e,t){U1[e]=t}function oq(e,t,r){var n=BH("registerMap");n&&n(e,t,r)}var sq=cG;Tu(Ob,NG);Tu(Fg,VG);Tu(Fg,UG);Tu(Ob,rH);Tu(Fg,nH);Tu(Y5,OH);o3(p5);s3(VH,Wj);l3("default",$G);nh({type:du,event:du,update:du},ki);nh({type:dv,event:dv,update:dv},ki);nh({type:Hf,event:Hf,update:Hf},ki);nh({type:pv,event:pv,update:pv},ki);nh({type:qf,event:qf,update:qf},ki);a3("light",QG);a3("dark",eH);function bf(e){return e==null?0:e.length||1}function jC(e){return e}var lq=function(){function e(t,r,n,i,o,u){this._old=t,this._new=r,this._oldKeyGetter=n||jC,this._newKeyGetter=i||jC,this.context=o,this._diffModeMultiple=u==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var u=0;u<t.length;u++){var a=i[u],f=n[a],p=bf(f);if(p>1){var v=f.shift();f.length===1&&(n[a]=f[0]),this._update&&this._update(v,u)}else p===1?(n[a]=null,this._update&&this._update(f,u)):this._remove&&this._remove(u)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],u=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,u,"_newKeyGetter");for(var a=0;a<o.length;a++){var f=o[a],p=n[f],v=i[f],_=bf(p),y=bf(v);if(_>1&&y===1)this._updateManyToOne&&this._updateManyToOne(v,p),i[f]=null;else if(_===1&&y>1)this._updateOneToMany&&this._updateOneToMany(v,p),i[f]=null;else if(_===1&&y===1)this._update&&this._update(v,p),i[f]=null;else if(_>1&&y>1)this._updateManyToMany&&this._updateManyToMany(v,p),i[f]=null;else if(_>1)for(var S=0;S<_;S++)this._remove&&this._remove(p[S]);else this._remove&&this._remove(p)}this._performRestAdd(u,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],u=bf(o);if(u>1)for(var a=0;a<u;a++)this._add&&this._add(o[a]);else u===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,u=0;u<t.length;u++){var a="_ec_"+this[i](t[u],u);if(o||(n[u]=a),!!r){var f=r[a],p=bf(f);p===0?(r[a]=u,o&&n.push(a)):p===1?r[a]=[f,u]:f.push(u)}}},e}();const uq=lq;var cq=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function hq(e,t){var r={},n=r.encode={},i=sr(),o=[],u=[],a={};we(e.dimensions,function(y){var S=e.getDimensionInfo(y),A=S.coordDim;if(A){var I=S.coordDimIndex;o0(n,A)[I]=y,S.isExtraCoord||(i.set(A,1),dq(S.type)&&(o[0]=y),o0(a,A)[I]=e.getDimensionIndex(S.name)),S.defaultTooltip&&u.push(y)}a5.each(function(M,k){var L=o0(n,k),z=S.otherDims[k];z!=null&&z!==!1&&(L[z]=S.name)})});var f=[],p={};i.each(function(y,S){var A=n[S];p[S]=A[0],f=f.concat(A)}),r.dataDimsOnCoord=f,r.dataDimIndicesOnCoord=Bt(f,function(y){return e.getDimensionInfo(y).storeDimIndex}),r.encodeFirstDimNotExtra=p;var v=n.label;v&&v.length&&(o=v.slice());var _=n.tooltip;return _&&_.length?u=_.slice():u.length||(u=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=u,r.userOutput=new cq(a,t),r}function o0(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function fq(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function dq(e){return!(e==="ordinal"||e==="time")}var pq=function(){function e(t){this.otherDims={},t!=null&&lt(this,t)}return e}();const gv=pq;var mq=En(),vq={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},u3=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=f3(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return or(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=v5(this.source),n=!d3(t),i="",o=[],u=0,a=0;u<t;u++){var f=void 0,p=void 0,v=void 0,_=this.dimensions[a];if(_&&_.storeDimIndex===u)f=r?_.name:null,p=_.type,v=_.ordinalMeta,a++;else{var y=this.getSourceDimension(u);y&&(f=r?y.name:null,p=y.type)}o.push({property:f,type:p,ordinalMeta:v}),r&&f!=null&&(!_||!_.isCalculationCoord)&&(i+=n?f.replace(/\`/g,"`1").replace(/\$/g,"`2"):f),i+="$",i+=vq[p]||"f",v&&(i+=v.uid),i+="$"}var S=this.source,A=[S.seriesLayoutBy,S.startIndex,i].join("$$");return{dimensions:o,hash:A}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var u=this.getSourceDimension(r);u&&(i=u.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function c3(e){return e instanceof u3}function h3(e){for(var t=sr(),r=0;r<(e||[]).length;r++){var n=e[r],i=Vt(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function f3(e){var t=mq(e);return t.dimNameMap||(t.dimNameMap=h3(e.dimensionsDefine))}function d3(e){return e>30}var wf=Vt,$s=Bt,gq=typeof Int32Array>"u"?Array:Int32Array,_q="e\0\0",GC=-1,yq=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],xq=["_approximateExtent"],HC,Rm,Sf,Tf,s0,zm,l0,bq=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;c3(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},u=[],a={},f=!1,p={},v=0;v<n.length;v++){var _=n[v],y=Rt(_)?new gv({name:_}):_ instanceof gv?_:new gv(_),S=y.name;y.type=y.type||"float",y.coordDim||(y.coordDim=S,y.coordDimIndex=0);var A=y.otherDims=y.otherDims||{};u.push(S),o[S]=y,p[S]!=null&&(f=!0),y.createInvertedIndices&&(a[S]=[]),A.itemName===0&&(this._nameDimIdx=v),A.itemId===0&&(this._idDimIdx=v),i&&(y.storeDimIndex=v)}if(this.dimensions=u,this._dimInfos=o,this._initGetDimensionInfo(f),this.hostModel=r,this._invertedIndicesMap=a,this._dimOmitted){var I=this._dimIdxToName=sr();we(u,function(M){I.set(o[M].storeDimIndex,M)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(gn(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof D1&&(o=t),!o){var u=this.dimensions,a=Tb(t)||Wi(t)?new g5(t,u.length):t;o=new D1;var f=$s(u,function(p){return{type:i._dimInfos[p].type,property:p}});o.initData(a,f,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=hq(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,u=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var a=i;a<o;a++){var f=a-i;this._nameList[a]=r[f],u&&l0(this,a)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Qs&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,u=this._idList,a=i.getSource().sourceFormat,f=a===ka;if(f&&!i.pure)for(var p=[],v=t;v<r;v++){var _=i.getItem(v,p);if(!this.hasItemOption&&fV(_)&&(this.hasItemOption=!0),_){var y=_.name;o[v]==null&&y!=null&&(o[v]=Ao(y,null));var S=_.id;u[v]==null&&S!=null&&(u[v]=Ao(S,null))}}if(this._shouldMakeIdFromName())for(var v=t;v<r;v++)l0(this,v);HC(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){wf(t)?lt(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=Sf(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return Rm(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return wt(t)?i.getValues($s(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?GC:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Zt(t)&&(n=r,r=t,t=[]);var i=n||this,o=$s(Tf(t),this._getStoreDimIndex,this);this._store.each(o,i?vn(r,i):r)},e.prototype.filterSelf=function(t,r,n){Zt(t)&&(n=r,r=t,t=[]);var i=n||this,o=$s(Tf(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?vn(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=Pr(t);return we(i,function(o){var u=r._getStoreDimIndex(o);n[u]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Zt(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,u=$s(Tf(t),this._getStoreDimIndex,this),a=zm(this);return a._store=this._store.map(u,o?vn(r,o):r),a},e.prototype.modify=function(t,r,n,i){var o=n||i||this,u=$s(Tf(t),this._getStoreDimIndex,this);this._store.modify(u,o?vn(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=zm(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=zm(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new Pi(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new uq(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return Rm(t,n)},function(n){return Rm(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},wf(t)?lt(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i??this.getVisual(r)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),wt(o)?o=o.slice():wf(o)&&(o=lt({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,wf(r)?lt(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){wf(t)?lt(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?lt(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;SU(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){we(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:$s(this.dimensions,this._getDimInfo,this),this.hostModel)),s0(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];Zt(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(Bx(arguments)))})},e.internalField=function(){HC=function(t){var r=t._invertedIndicesMap;we(r,function(n,i){var o=t._dimInfos[i],u=o.ordinalMeta,a=t._store;if(u){n=r[i]=new gq(u.categories.length);for(var f=0;f<n.length;f++)n[f]=GC;for(var f=0;f<a.count();f++)n[a.get(o.storeDimIndex,f)]=f}})},Sf=function(t,r,n){return Ao(t._getCategory(r,n),null)},Rm=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=Sf(t,t._idDimIdx,r)),n==null&&(n=_q+r),n},Tf=function(t){return wt(t)||(t=t!=null?[t]:[]),t},zm=function(t){var r=new e(t._schema?t._schema:$s(t.dimensions,t._getDimInfo,t),t.hostModel);return s0(r,t),r},s0=function(t,r){we(yq.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,we(xq,function(n){t[n]=mr(r[n])}),t._calculationInfo=lt({},r._calculationInfo)},l0=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,u=t._idDimIdx,a=n[r],f=i[r];if(a==null&&o!=null&&(n[r]=a=Sf(t,o,r)),f==null&&u!=null&&(i[r]=f=Sf(t,u,r)),f==null&&a!=null){var p=t._nameRepeatCount,v=p[a]=(p[a]||0)+1;f=a,v>1&&(f+="__ec__"+v),i[r]=f}}}(),e}();const Nb=bq;function wq(e,t){Tb(e)||(e=Eb(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=sr(),o=[],u=Tq(e,r,n,t.dimensionsCount),a=t.canOmitUnusedDimensions&&d3(u),f=n===e.dimensionsDefine,p=f?f3(e):h3(n),v=t.encodeDefine;!v&&t.encodeDefaulter&&(v=t.encodeDefaulter(e,u));for(var _=sr(v),y=new S5(u),S=0;S<y.length;S++)y[S]=-1;function A(ae){var le=y[ae];if(le<0){var pe=n[ae],ye=Vt(pe)?pe:{name:pe},ve=new gv,Pe=ye.name;Pe!=null&&p.get(Pe)!=null&&(ve.name=ve.displayName=Pe),ye.type!=null&&(ve.type=ye.type),ye.displayName!=null&&(ve.displayName=ye.displayName);var $e=o.length;return y[ae]=$e,ve.storeDimIndex=ae,o.push(ve),ve}return o[le]}if(!a)for(var S=0;S<u;S++)A(S);_.each(function(ae,le){var pe=Li(ae).slice();if(pe.length===1&&!Rt(pe[0])&&pe[0]<0){_.set(le,!1);return}var ye=_.set(le,[]);we(pe,function(ve,Pe){var $e=Rt(ve)?p.get(ve):ve;$e!=null&&$e<u&&(ye[Pe]=$e,M(A($e),le,Pe))})});var I=0;we(r,function(ae){var le,pe,ye,ve;if(Rt(ae))le=ae,ve={};else{ve=ae,le=ve.name;var Pe=ve.ordinalMeta;ve.ordinalMeta=null,ve=lt({},ve),ve.ordinalMeta=Pe,pe=ve.dimsDef,ye=ve.otherDims,ve.name=ve.coordDim=ve.coordDimIndex=ve.dimsDef=ve.otherDims=null}var $e=_.get(le);if($e!==!1){if($e=Li($e),!$e.length)for(var Ce=0;Ce<(pe&&pe.length||1);Ce++){for(;I<u&&A(I).coordDim!=null;)I++;I<u&&$e.push(I++)}we($e,function(at,st){var xt=A(at);if(f&&ve.type!=null&&(xt.type=ve.type),M(an(xt,ve),le,st),xt.name==null&&pe){var St=pe[st];!Vt(St)&&(St={name:St}),xt.name=xt.displayName=St.name,xt.defaultTooltip=St.defaultTooltip}ye&&an(xt.otherDims,ye)})}});function M(ae,le,pe){a5.get(le)!=null?ae.otherDims[le]=pe:(ae.coordDim=le,ae.coordDimIndex=pe,i.set(le,!0))}var k=t.generateCoord,L=t.generateCoordCount,z=L!=null;L=k?L||1:0;var V=k||"value";function H(ae){ae.name==null&&(ae.name=ae.coordDim)}if(a)we(o,function(ae){H(ae)}),o.sort(function(ae,le){return ae.storeDimIndex-le.storeDimIndex});else for(var Z=0;Z<u;Z++){var ee=A(Z),Y=ee.coordDim;Y==null&&(ee.coordDim=Eq(V,i,z),ee.coordDimIndex=0,(!k||L<=0)&&(ee.isExtraCoord=!0),L--),H(ee),ee.type==null&&(u5(e,Z)===ia.Must||ee.isExtraCoord&&(ee.otherDims.itemName!=null||ee.otherDims.seriesName!=null))&&(ee.type="ordinal")}return Sq(o),new u3({source:e,dimensions:o,fullDimensionCount:u,dimensionOmitted:a})}function Sq(e){for(var t=sr(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function Tq(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return we(t,function(o){var u;Vt(o)&&(u=o.dimsDef)&&(i=Math.max(i,u.length))}),i}function Eq(e,t,r){if(r||t.hasKey(e)){for(var n=0;t.hasKey(e+n);)n++;e+=n}return t.set(e,!0),e}var Cq=function(){function e(t){this.coordSysDims=[],this.axisMap=sr(),this.categoryAxisMap=sr(),this.coordSysName=t}return e}();function Aq(e){var t=e.get("coordinateSystem"),r=new Cq(t),n=Iq[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var Iq={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",Wa).models[0],o=e.getReferringComponents("yAxis",Wa).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),gc(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),gc(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",Wa).models[0];t.coordSysDims=["single"],r.set("single",i),gc(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",Wa).models[0],o=i.findAxisModel("radiusAxis"),u=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",u),gc(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),gc(u)&&(n.set("angle",u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),u=t.coordSysDims=o.dimensions.slice();we(o.parallelAxisIndex,function(a,f){var p=i.getComponent("parallelAxis",a),v=u[f];r.set(v,p),gc(p)&&(n.set(v,p),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=f))})}};function gc(e){return e.get("type")==="category"}function Mq(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,u,a;Pq(t)?o=t:(u=t.schema,o=u.dimensions,a=t.store);var f=!!(e&&e.get("stack")),p,v,_,y;if(we(o,function(L,z){Rt(L)&&(o[z]=L={name:L}),f&&!L.isExtraCoord&&(!n&&!p&&L.ordinalMeta&&(p=L),!v&&L.type!=="ordinal"&&L.type!=="time"&&(!i||i===L.coordDim)&&(v=L))}),v&&!n&&!p&&(n=!0),v){_="__\0ecstackresult_"+e.id,y="__\0ecstackedover_"+e.id,p&&(p.createInvertedIndices=!0);var S=v.coordDim,A=v.type,I=0;we(o,function(L){L.coordDim===S&&I++});var M={name:_,coordDim:S,coordDimIndex:I,type:A,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},k={name:y,coordDim:y,coordDimIndex:I+1,type:A,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};u?(a&&(M.storeDimIndex=a.ensureCalculationDimension(y,A),k.storeDimIndex=a.ensureCalculationDimension(_,A)),u.appendCalculationDimension(M),u.appendCalculationDimension(k)):(o.push(M),o.push(k))}return{stackedDimension:v&&v.name,stackedByDimension:p&&p.name,isStackedByIndex:n,stackedOverDimension:y,stackResultDimension:_}}function Pq(e){return!c3(e.schema)}function ig(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function Dq(e,t){return ig(e,t)?e.getCalculationInfo("stackResultDimension"):t}function kq(e,t){var r=e.get("coordinateSystem"),n=Sb.get(r),i;return t&&t.coordSysDims&&(i=Bt(t.coordSysDims,function(o){var u={name:o},a=t.axisMap.get(o);if(a){var f=a.get("type");u.type=fq(f)}return u})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function Lq(e,t,r){var n,i;return r&&we(e,function(o,u){var a=o.coordDim,f=r.categoryAxisMap.get(a);f&&(n==null&&(n=u),o.ordinalMeta=f.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function Oq(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=Eb(e)):(i=n.getSource(),o=i.sourceFormat===ka);var u=Aq(t),a=kq(t,u),f=r.useEncodeDefaulter,p=Zt(f)?f:f?Wn(yj,a,t):null,v={coordDimensions:a,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:p,canOmitUnusedDimensions:!o},_=wq(i,v),y=Lq(_.dimensions,r.createInvertedIndices,u),S=o?null:n.getSharedDataStore(_),A=Mq(t,{schema:_,store:S}),I=new Nb(_,t);I.setCalculationInfo(A);var M=y!=null&&Rq(i)?function(k,L,z,V){return V===y?z:this.defaultDimValueGetter(k,L,z,V)}:null;return I.hasItemOption=!1,I.initData(o?i:S,null,M),I}function Rq(e){if(e.sourceFormat===ka){var t=zq(e.data||[]);return!wt(zd(t))}}function zq(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var p3=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();wg(p3);const ms=p3;var Bq=0,Fq=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Bq}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Bt(n,Nq);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Rt(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=sr(this.categories))},e}();function Nq(e){return Vt(e)&&e.value!=null?e.value:e+""}const $1=Fq;function j1(e){return e.type==="interval"||e.type==="log"}function Vq(e,t,r,n){var i={},o=e[1]-e[0],u=i.interval=zP(o/t,!0);r!=null&&u<r&&(u=i.interval=r),n!=null&&u>n&&(u=i.interval=n);var a=i.intervalPrecision=m3(u),f=i.niceTickExtent=[Bn(Math.ceil(e[0]/u)*u,a),Bn(Math.floor(e[1]/u)*u,a)];return Uq(f,e),i}function u0(e){var t=Math.pow(10,Xx(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,Bn(r*t)}function m3(e){return jc(e)+2}function qC(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Uq(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),qC(e,0,t),qC(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function Ng(e,t){return e>=t[0]&&e<=t[1]}function Vg(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function Ug(e,t){return e*(t[1]-t[0])+t[0]}var v3=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new $1({})),wt(i)&&(i=new $1({categories:Bt(i,function(o){return Vt(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Rt(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),Ng(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),Vg(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(Ug(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],u=0,a=this._ordinalMeta.categories.length,f=Math.min(a,n.length);u<f;++u){var p=n[u];i[u]=p,o[p]=u}for(var v=0;u<a;++u){for(;o[v]!=null;)v++;i.push(v),o[v]=u}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(ms);ms.registerClass(v3);const g3=v3;var ru=Bn,_3=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return Ng(r,this._extent)},t.prototype.normalize=function(r){return Vg(r,this._extent)},t.prototype.scale=function(r){return Ug(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=m3(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,u=this._intervalPrecision,a=[];if(!n)return a;var f=1e4;i[0]<o[0]&&(r?a.push({value:ru(o[0]-n,u)}):a.push({value:i[0]}));for(var p=o[0];p<=o[1]&&(a.push({value:p}),p=ru(p+n,u),p!==a[a.length-1].value);)if(a.length>f)return[];var v=a.length?a[a.length-1].value:o[1];return i[1]>v&&(r?a.push({value:ru(v+n,u)}):a.push({value:i[1]})),a},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),u=1;u<n.length;u++){for(var a=n[u],f=n[u-1],p=0,v=[],_=a.value-f.value,y=_/r;p<r-1;){var S=ru(f.value+(p+1)*y);S>o[0]&&S<o[1]&&v.push(S),p++}i.push(v)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=jc(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=ru(r.value,i,!0);return e5(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,u=o[1]-o[0];if(isFinite(u)){u<0&&(u=-u,o.reverse());var a=Vq(o,r,n,i);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var u=this._interval;r.fixMin||(n[0]=ru(Math.floor(n[0]/u)*u)),r.fixMax||(n[1]=ru(Math.ceil(n[1]/u)*u))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(ms);ms.registerClass(_3);const Ud=_3;var y3=typeof Float32Array<"u",$q=y3?Float32Array:Array;function jq(e){return wt(e)?y3?new Float32Array(e):e:new $q(e)}var Gq="__ec_stack_";function x3(e){return e.get("stack")||Gq+e.seriesIndex}function b3(e){return e.dim+e.index}function Hq(e,t){var r=[];return t.eachSeriesByType(e,function(n){Yq(n)&&r.push(n)}),r}function qq(e){var t={};we(e,function(f){var p=f.coordinateSystem,v=p.getBaseAxis();if(!(v.type!=="time"&&v.type!=="value"))for(var _=f.getData(),y=v.dim+"_"+v.index,S=_.getDimensionIndex(_.mapDimension(v.dim)),A=_.getStore(),I=0,M=A.count();I<M;++I){var k=A.get(S,I);t[y]?t[y].push(k):t[y]=[k]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(f,p){return f-p});for(var o=null,u=1;u<i.length;++u){var a=i[u]-i[u-1];a>0&&(o=o===null?a:Math.min(o,a))}r[n]=o}}return r}function Wq(e){var t=qq(e),r=[];return we(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),u=o.getExtent(),a;if(o.type==="category")a=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var f=o.dim+"_"+o.index,p=t[f],v=Math.abs(u[1]-u[0]),_=o.scale.getExtent(),y=Math.abs(_[1]-_[0]);a=p?v/y*p:v}else{var S=n.getData();a=Math.abs(u[1]-u[0])/S.count()}var A=ti(n.get("barWidth"),a),I=ti(n.get("barMaxWidth"),a),M=ti(n.get("barMinWidth")||(Kq(n)?.5:1),a),k=n.get("barGap"),L=n.get("barCategoryGap");r.push({bandWidth:a,barWidth:A,barMaxWidth:I,barMinWidth:M,barGap:k,barCategoryGap:L,axisKey:b3(o),stackId:x3(n)})}),Zq(r)}function Zq(e){var t={};we(e,function(n,i){var o=n.axisKey,u=n.bandWidth,a=t[o]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},f=a.stacks;t[o]=a;var p=n.stackId;f[p]||a.autoWidthCount++,f[p]=f[p]||{width:0,maxWidth:0};var v=n.barWidth;v&&!f[p].width&&(f[p].width=v,v=Math.min(a.remainedWidth,v),a.remainedWidth-=v);var _=n.barMaxWidth;_&&(f[p].maxWidth=_);var y=n.barMinWidth;y&&(f[p].minWidth=y);var S=n.barGap;S!=null&&(a.gap=S);var A=n.barCategoryGap;A!=null&&(a.categoryGap=A)});var r={};return we(t,function(n,i){r[i]={};var o=n.stacks,u=n.bandWidth,a=n.categoryGap;if(a==null){var f=Pr(o).length;a=Math.max(35-f*4,15)+"%"}var p=ti(a,u),v=ti(n.gap,1),_=n.remainedWidth,y=n.autoWidthCount,S=(_-p)/(y+(y-1)*v);S=Math.max(S,0),we(o,function(k){var L=k.maxWidth,z=k.minWidth;if(k.width){var V=k.width;L&&(V=Math.min(V,L)),z&&(V=Math.max(V,z)),k.width=V,_-=V+v*V,y--}else{var V=S;L&&L<V&&(V=Math.min(L,_)),z&&z>V&&(V=z),V!==S&&(k.width=V,_-=V+v*V,y--)}}),S=(_-p)/(y+(y-1)*v),S=Math.max(S,0);var A=0,I;we(o,function(k,L){k.width||(k.width=S),I=k,A+=k.width*(1+v)}),I&&(A-=I.width*v);var M=-A/2;we(o,function(k,L){r[i][L]=r[i][L]||{bandWidth:u,offset:M,width:k.width},M+=k.width*(1+v)})}),r}function Xq(e,t,r){if(e&&t){var n=e[b3(t)];return n!=null&&r!=null?n[x3(r)]:n}}function Yq(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function Kq(e){return e.pipelineContext&&e.pipelineContext.large}var Jq=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},w3=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return Pg(r.value,LE[uj(Oc(this._minLevelUnit))]||LE.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),u=this.getSetting("locale");return cj(r,n,i,u,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),u=aW(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(u),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=Aa,n[1]+=Aa),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-Aa}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,u=o[1]-o[0];this._approxInterval=u/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var a=Bm.length,f=Math.min(Jq(Bm,this._approxInterval,0,a),a-1);this._interval=Bm[f][1],this._minLevelUnit=Bm[Math.max(f-1,0)][0]},t.prototype.parse=function(r){return gn(r)?r:+ss(r)},t.prototype.contain=function(r){return Ng(this.parse(r),this._extent)},t.prototype.normalize=function(r){return Vg(this.parse(r),this._extent)},t.prototype.scale=function(r){return Ug(r,this._extent)},t.type="time",t}(Ud),Bm=[["second",vb],["minute",gb],["hour",Xf],["quarter-day",Xf*6],["half-day",Xf*12],["day",Aa*1.2],["half-week",Aa*3.5],["week",Aa*7],["month",Aa*31],["quarter",Aa*95],["half-year",kE/2],["year",kE]];function Qq(e,t,r,n){var i=ss(t),o=ss(r),u=function(A){return OE(i,A,n)===OE(o,A,n)},a=function(){return u("year")},f=function(){return a()&&u("month")},p=function(){return f()&&u("day")},v=function(){return p()&&u("hour")},_=function(){return v()&&u("minute")},y=function(){return _()&&u("second")},S=function(){return y()&&u("millisecond")};switch(e){case"year":return a();case"month":return f();case"day":return p();case"hour":return v();case"minute":return _();case"second":return y();case"millisecond":return S()}}function eW(e,t){return e/=Aa,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function tW(e){var t=30*Aa;return e/=t,e>6?6:e>3?3:e>2?2:1}function rW(e){return e/=Xf,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function WC(e,t){return e/=t?gb:vb,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function nW(e){return zP(e,!0)}function iW(e,t,r){var n=new Date(e);switch(Oc(t)){case"year":case"month":n[ZD(r)](0);case"day":n[XD(r)](1);case"hour":n[YD(r)](0);case"minute":n[KD(r)](0);case"second":n[JD(r)](0),n[QD(r)](0)}return n.getTime()}function aW(e,t,r,n){var i=1e4,o=qD,u=0;function a(le,pe,ye,ve,Pe,$e,Ce){for(var at=new Date(pe),st=pe,xt=at[ve]();st<ye&&st<=n[1];)Ce.push({value:st}),xt+=le,at[Pe](xt),st=at.getTime();Ce.push({value:st,notAdd:!0})}function f(le,pe,ye){var ve=[],Pe=!pe.length;if(!Qq(Oc(le),n[0],n[1],r)){Pe&&(pe=[{value:iW(new Date(n[0]),le,r)},{value:n[1]}]);for(var $e=0;$e<pe.length-1;$e++){var Ce=pe[$e].value,at=pe[$e+1].value;if(Ce!==at){var st=void 0,xt=void 0,St=void 0,Xt=!1;switch(le){case"year":st=Math.max(1,Math.round(t/Aa/365)),xt=_b(r),St=hj(r);break;case"half-year":case"quarter":case"month":st=tW(t),xt=Rc(r),St=ZD(r);break;case"week":case"half-week":case"day":st=eW(t),xt=Dg(r),St=XD(r),Xt=!0;break;case"half-day":case"quarter-day":case"hour":st=rW(t),xt=vd(r),St=YD(r);break;case"minute":st=WC(t,!0),xt=kg(r),St=KD(r);break;case"second":st=WC(t,!1),xt=Lg(r),St=JD(r);break;case"millisecond":st=nW(t),xt=Og(r),St=QD(r);break}a(st,Ce,at,xt,St,Xt,ve),le==="year"&&ye.length>1&&$e===0&&ye.unshift({value:ye[0].value-st})}}for(var $e=0;$e<ve.length;$e++)ye.push(ve[$e]);return ve}}for(var p=[],v=[],_=0,y=0,S=0;S<o.length&&u++<i;++S){var A=Oc(o[S]);if(lj(o[S])){f(o[S],p[p.length-1]||[],v);var I=o[S+1]?Oc(o[S+1]):null;if(A!==I){if(v.length){y=_,v.sort(function(le,pe){return le.value-pe.value});for(var M=[],k=0;k<v.length;++k){var L=v[k].value;(k===0||v[k-1].value!==L)&&(M.push(v[k]),L>=n[0]&&L<=n[1]&&_++)}var z=(n[1]-n[0])/t;if(_>z*1.5&&y>z/1.5||(p.push(M),_>z||e===o[S]))break}v=[]}}}for(var V=di(Bt(p,function(le){return di(le,function(pe){return pe.value>=n[0]&&pe.value<=n[1]&&!pe.notAdd})}),function(le){return le.length>0}),H=[],Z=V.length-1,S=0;S<V.length;++S)for(var ee=V[S],Y=0;Y<ee.length;++Y)H.push({value:ee[Y].value,level:Z-S});H.sort(function(le,pe){return le.value-pe.value});for(var ae=[],S=0;S<H.length;++S)(S===0||H[S].value!==H[S-1].value)&&ae.push(H[S]);return ae}ms.registerClass(w3);const oW=w3;var ZC=ms.prototype,Qf=Ud.prototype,sW=Bn,lW=Math.floor,uW=Math.ceil,Fm=Math.pow,ja=Math.log,Vb=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new Ud,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),u=Qf.getTicks.call(this,r);return Bt(u,function(a){var f=a.value,p=Bn(Fm(this.base,f));return p=f===i[0]&&this._fixMin?Nm(p,o[0]):p,p=f===i[1]&&this._fixMax?Nm(p,o[1]):p,{value:p}},this)},t.prototype.setExtent=function(r,n){var i=ja(this.base);r=ja(Math.max(0,r))/i,n=ja(Math.max(0,n))/i,Qf.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=ZC.getExtent.call(this);n[0]=Fm(r,n[0]),n[1]=Fm(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=Nm(n[0],o[0])),this._fixMax&&(n[1]=Nm(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=ja(r[0])/ja(n),r[1]=ja(r[1])/ja(n),ZC.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=uV(i),u=r/i*o;for(u<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var a=[Bn(uW(n[0]/o)*o),Bn(lW(n[1]/o)*o)];this._interval=o,this._niceExtent=a}},t.prototype.calcNiceExtent=function(r){Qf.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=ja(r)/ja(this.base),Ng(r,this._extent)},t.prototype.normalize=function(r){return r=ja(r)/ja(this.base),Vg(r,this._extent)},t.prototype.scale=function(r){return r=Ug(r,this._extent),Fm(this.base,r)},t.type="log",t}(ms),S3=Vb.prototype;S3.getMinorTicks=Qf.getMinorTicks;S3.getLabel=Qf.getLabel;function Nm(e,t){return sW(e,jc(t))}ms.registerClass(Vb);const cW=Vb;var hW=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);Zt(o)?this._modelMinNum=Vm(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=Vm(t,o));var u=this._modelMaxRaw=r.get("max",!0);if(Zt(u)?this._modelMaxNum=Vm(t,u({min:n[0],max:n[1]})):u!=="dataMax"&&(this._modelMaxNum=Vm(t,u)),i)this._axisDataLen=r.getCategories().length;else{var a=r.get("boundaryGap"),f=wt(a)?a:[a||0,a||0];typeof f[0]=="boolean"||typeof f[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[_u(f[0],1),_u(f[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,u=t?null:n-r||Math.abs(r),a=this._modelMinRaw==="dataMin"?r:this._modelMinNum,f=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,p=a!=null,v=f!=null;a==null&&(a=t?i?0:NaN:r-o[0]*u),f==null&&(f=t?i?i-1:NaN:n+o[1]*u),(a==null||!isFinite(a))&&(a=NaN),(f==null||!isFinite(f))&&(f=NaN);var _=Bv(a)||Bv(f)||t&&!i;this._needCrossZero&&(a>0&&f>0&&!p&&(a=0),a<0&&f<0&&!v&&(f=0));var y=this._determinedMin,S=this._determinedMax;return y!=null&&(a=y,p=!0),S!=null&&(f=S,v=!0),{min:a,max:f,minFixed:p,maxFixed:v,isBlank:_}},e.prototype.modifyDataMinMax=function(t,r){this[dW[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=fW[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),fW={min:"_determinedMin",max:"_determinedMax"},dW={min:"_dataMin",max:"_dataMax"};function pW(e,t,r){var n=e.rawExtentInfo;return n||(n=new hW(e,t,r),e.rawExtentInfo=n,n)}function Vm(e,t){return t==null?null:Bv(t)?NaN:e.parse(t)}function T3(e,t){var r=e.type,n=pW(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,u=t.ecModel;if(u&&r==="time"){var a=Hq("bar",u),f=!1;if(we(a,function(_){f=f||_.getBaseAxis()===t.axis}),f){var p=Wq(a),v=mW(i,o,t,p);i=v.min,o=v.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function mW(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],u=Xq(n,r.axis);if(u===void 0)return{min:e,max:t};var a=1/0;we(u,function(S){a=Math.min(S.offset,a)});var f=-1/0;we(u,function(S){f=Math.max(S.offset+S.width,f)}),a=Math.abs(a),f=Math.abs(f);var p=a+f,v=t-e,_=1-(a+f)/o,y=v/_-v;return t+=y*(f/p),e-=y*(a/p),{min:e,max:t}}function XC(e,t){var r=t,n=T3(e,r),i=n.extent,o=r.get("splitNumber");e instanceof cW&&(e.base=r.get("logBase"));var u=e.type,a=r.get("interval"),f=u==="interval"||u==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:f?r.get("minInterval"):null,maxInterval:f?r.get("maxInterval"):null}),a!=null&&e.setInterval&&e.setInterval(a)}function vW(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new g3({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new oW({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(ms.getClass(t)||Ud)}}function gW(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function $d(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Rt(t)?function(n){return function(i){var o=e.scale.getLabel(i),u=n.replace("{value}",o??"");return u}}(t):Zt(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(Ub(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function Ub(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function _W(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof g3?i=r.count():(n=r.getTicks(),i=n.length);var u=e.getLabelModel(),a=$d(e),f,p=1;i>40&&(p=Math.ceil(i/40));for(var v=0;v<i;v+=p){var _=n?n[v]:{value:o[0]+v},y=a(_,v),S=u.getTextRect(y),A=yW(S,u.get("rotate")||0);f?f.union(A):f=A}return f}}function yW(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),u=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),a=new Zr(e.x,e.y,o,u);return a}function $b(e){var t=e.get("interval");return t??"auto"}function E3(e){return e.type==="category"&&$b(e.getLabelModel())===0}function xW(e,t){var r={};return we(e.mapDimensionsAll(t),function(n){r[Dq(e,n)]=!0}),Pr(r)}var bW=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),YC=[],wW={registerPreprocessor:o3,registerProcessor:s3,registerPostInit:rq,registerPostUpdate:nq,registerUpdateLifecycle:Bb,registerAction:nh,registerCoordinateSystem:iq,registerLayout:aq,registerVisual:Tu,registerTransform:sq,registerLoading:l3,registerMap:oq,registerImpl:zH,PRIORITY:XH,ComponentModel:ln,ComponentView:ls,SeriesModel:Hc,ChartView:pu,registerComponentModel:function(e){ln.registerClass(e)},registerComponentView:function(e){ls.registerClass(e)},registerSeriesModel:function(e){Hc.registerClass(e)},registerChartView:function(e){pu.registerClass(e)},registerSubTypeDefaulter:function(e,t){ln.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){nV(e,t)}};function qc(e){if(wt(e)){we(e,function(t){qc(t)});return}qr(YC,e)>=0||(YC.push(e),Zt(e)&&(e={install:e}),e.install(wW))}var Sd=En();function SW(e){return e.type==="category"?EW(e):AW(e)}function TW(e,t){return e.type==="category"?CW(e,t):{ticks:Bt(e.scale.getTicks(),function(r){return r.value})}}function EW(e){var t=e.getLabelModel(),r=C3(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function C3(e,t){var r=A3(e,"labels"),n=$b(t),i=I3(r,n);if(i)return i;var o,u;return Zt(n)?o=D3(e,n):(u=n==="auto"?IW(e):n,o=P3(e,u)),M3(r,n,{labels:o,labelCategoryInterval:u})}function CW(e,t){var r=A3(e,"ticks"),n=$b(t),i=I3(r,n);if(i)return i;var o,u;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Zt(n))o=D3(e,n,!0);else if(n==="auto"){var a=C3(e,e.getLabelModel());u=a.labelCategoryInterval,o=Bt(a.labels,function(f){return f.tickValue})}else u=n,o=P3(e,u,!0);return M3(r,n,{ticks:o,tickCategoryInterval:u})}function AW(e){var t=e.scale.getTicks(),r=$d(e);return{labels:Bt(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function A3(e,t){return Sd(e)[t]||(Sd(e)[t]=[])}function I3(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function M3(e,t,r){return e.push({key:t,value:r}),r}function IW(e){var t=Sd(e).autoInterval;return t??(Sd(e).autoInterval=e.calculateCategoryInterval())}function MW(e){var t=PW(e),r=$d(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),u=i.count();if(o[1]-o[0]<1)return 0;var a=1;u>40&&(a=Math.max(1,Math.floor(u/40)));for(var f=o[0],p=e.dataToCoord(f+1)-e.dataToCoord(f),v=Math.abs(p*Math.cos(n)),_=Math.abs(p*Math.sin(n)),y=0,S=0;f<=o[1];f+=a){var A=0,I=0,M=Wx(r({value:f}),t.font,"center","top");A=M.width*1.3,I=M.height*1.3,y=Math.max(y,A,7),S=Math.max(S,I,7)}var k=y/v,L=S/_;isNaN(k)&&(k=1/0),isNaN(L)&&(L=1/0);var z=Math.max(0,Math.floor(Math.min(k,L))),V=Sd(e.model),H=e.getExtent(),Z=V.lastAutoInterval,ee=V.lastTickCount;return Z!=null&&ee!=null&&Math.abs(Z-z)<=1&&Math.abs(ee-u)<=1&&Z>z&&V.axisExtent0===H[0]&&V.axisExtent1===H[1]?z=Z:(V.lastTickCount=u,V.lastAutoInterval=z,V.axisExtent0=H[0],V.axisExtent1=H[1]),z}function PW(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function P3(e,t,r){var n=$d(e),i=e.scale,o=i.getExtent(),u=e.getLabelModel(),a=[],f=Math.max((t||0)+1,1),p=o[0],v=i.count();p!==0&&f>1&&v/f>2&&(p=Math.round(Math.ceil(p/f)*f));var _=E3(e),y=u.get("showMinLabel")||_,S=u.get("showMaxLabel")||_;y&&p!==o[0]&&I(o[0]);for(var A=p;A<=o[1];A+=f)I(A);S&&A-f!==o[1]&&I(o[1]);function I(M){var k={value:M};a.push(r?M:{formattedLabel:n(k),rawLabel:i.getLabel(k),tickValue:M})}return a}function D3(e,t,r){var n=e.scale,i=$d(e),o=[];return we(n.getTicks(),function(u){var a=n.getLabel(u),f=u.value;t(u.value,a)&&o.push(r?f:{formattedLabel:i(u),rawLabel:a,tickValue:f})}),o}var KC=[0,1],DW=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return oV(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),JC(n,i.count())),$T(t,KC,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),JC(n,i.count()));var o=$T(t,n,KC,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=TW(this,r),i=n.ticks,o=Bt(i,function(a){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(a):a),tickValue:a}},this),u=r.get("alignWithLabel");return kW(this,o,u,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Bt(n,function(o){return Bt(o,function(u){return{coord:this.dataToCoord(u),tickValue:u}},this)},this);return i},e.prototype.getViewLabels=function(){return SW(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return MW(this)},e}();function JC(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function kW(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),u,a;if(i===1)t[0].coord=o[0],u=t[1]={coord:o[0]};else{var f=t[i-1].tickValue-t[0].tickValue,p=(t[i-1].coord-t[0].coord)/f;we(t,function(S){S.coord-=p/2});var v=e.scale.getExtent();a=1+v[1]-t[i-1].tickValue,u={coord:t[i-1].coord+p*a},t.push(u)}var _=o[0]>o[1];y(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&y(o[0],t[0].coord)&&t.unshift({coord:o[0]}),y(o[1],u.coord)&&(n?u.coord=o[1]:t.pop()),n&&y(u.coord,o[1])&&t.push({coord:o[1]});function y(S,A){return S=Bn(S),A=Bn(A),_?S>A:S<A}}const LW=DW;function OW(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),u=i.getBoundingRect(),a=!o||o[1]<1e-5&&o[2]<1e-5,f=i.style.margin||0,p=u.clone();p.applyTransform(o),p.x-=f/2,p.y-=f/2,p.width+=f,p.height+=f;var v=a?new Wv(u,o):null;t.push({label:i,labelLine:n.labelLine,rect:p,localRect:u,obb:v,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:a,transform:o})}}return t}function RW(e){var t=[];e.sort(function(I,M){return M.priority-I.priority});var r=new Zr(0,0,0,0);function n(I){if(!I.ignore){var M=I.ensureState("emphasis");M.ignore==null&&(M.ignore=!1)}I.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],u=o.axisAligned,a=o.localRect,f=o.transform,p=o.label,v=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var _=o.obb,y=!1,S=0;S<t.length;S++){var A=t[S];if(r.intersect(A.rect)){if(u&&A.axisAligned){y=!0;break}if(A.obb||(A.obb=new Wv(A.localRect,A.transform)),_||(_=new Wv(a,f)),_.intersect(A.obb)){y=!0;break}}}y?(n(p),v&&n(v)):(p.attr("ignore",o.defaultAttr.ignore),v&&v.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}var c0=null;function zW(e){return c0||(c0=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),c0(e)}var h0=null;function BW(e){h0||(h0=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),h0(e)}function FW(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function Um(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function k3(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function G1(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(k3(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var NW='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',H1=0,_v=null;function VW(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=jW.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||ag(e)}),u=G1(e),a=u.detached,f=u.rendered;e.__resize_observer_triggered__=a===!1&&f===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){ag(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(H1||(_v=FW(NW)),GW(e),e.__resize_rendered__=G1(e).rendered,window.MutationObserver){var p=new MutationObserver(e.__resize_mutation_handler__);p.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=p}}e.__resize_listeners__.push(t),H1++}function UW(e,t){var r=e.__resize_listeners__;if(r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",jb),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--H1&&_v&&_v.parentNode.removeChild(_v)}}function $W(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function jW(){var e=G1(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(Gb(this),this.addEventListener("scroll",jb,!0)),this.__resize_rendered__=t,ag(this))}function jb(){var e=this;Gb(this),this.__resize_raf__&&BW(this.__resize_raf__),this.__resize_raf__=zW(function(){var t=$W(e);t&&(e.__resize_last__=t,ag(e))})}function ag(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function GW(e){var t=k3(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=Um("div",{className:"resize-triggers"}),n=Um("div",{className:"resize-expand-trigger"}),i=Um("div"),o=Um("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},Gb(e),e.addEventListener("scroll",jb,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function Gb(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,u=i.scrollHeight,a=r.offsetWidth,f=r.offsetHeight,p=r.scrollWidth,v=r.scrollHeight;i.scrollLeft=o,i.scrollTop=u,n.style.width=a+1+"px",n.style.height=f+1+"px",r.scrollLeft=p,r.scrollTop=v}var Jo=function(){return Jo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Jo.apply(this,arguments)},HW=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function qW(e){return t=Object.create(null),HW.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var WW={autoresize:Boolean},ZW=/^on[^a-z]/,XW=function(e){return ZW.test(e)};function $m(e,t){var r=nt(e);return r&&typeof r=="object"&&"value"in r?r.value||t:r||t}var YW={loading:Boolean,loadingOptions:Object},Ef=null,QC=[],Cf=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var u=QC.indexOf(o);u===-1&&(u=QC.push(o)-1,Cf[u]={}),r=Cf[u]&&Cf[u][n]?Cf[u][n]:Cf[u][n]=a()}else r=a();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function a(){var f=document.createElement("style");if(f.setAttribute("type","text/css"),t.attributes)for(var p=Object.keys(t.attributes),v=0;v<p.length;v++)f.setAttribute(p[v],t.attributes[p[v]]);var _=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(_,f),f}})(`x-vue-echarts{display:block;width:100%;height:100%;min-width:0}
`,{});var KW=function(){if(Ef!=null)return Ef;if(typeof HTMLElement>"u"||typeof customElements>"u")return Ef=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)("x-vue-echarts")}catch{return Ef=!1}return Ef=!0}(),JW=Cr({name:"echarts",props:Jo(Jo({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},WW),YW),emits:[],inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=Zm(),i=Zm(),o=Zm(),u=oa("ecTheme",null),a=oa("ecInitOptions",null),f=oa("ecUpdateOptions",null),p=Md(e),v=p.autoresize,_=p.manualUpdate,y=p.loading,S=p.loadingOptions,A=bt(function(){return o.value||e.option||null}),I=bt(function(){return e.theme||$m(u,{})}),M=bt(function(){return e.initOptions||$m(a,{})}),k=bt(function(){return e.updateOptions||$m(f,{})}),L=bt(function(){return function(Y){var ae={};for(var le in Y)XW(le)||(ae[le]=Y[le]);return ae}(r)}),z=QA().proxy.$listeners;function V(Y){if(n.value){var ae=i.value=eq(n.value,I.value,M.value);e.group&&(ae.group=e.group);var le=z;le||(le={},Object.keys(r).filter(function(ye){return ye.indexOf("on")===0&&ye.length>2}).forEach(function(ye){var ve=ye.charAt(2).toLowerCase()+ye.slice(3);ve.substring(ve.length-4)==="Once"&&(ve="~".concat(ve.substring(0,ve.length-4))),le[ve]=r[ye]})),Object.keys(le).forEach(function(ye){var ve=le[ye];if(ve){var Pe=ye.toLowerCase();Pe.charAt(0)==="~"&&(Pe=Pe.substring(1),ve.__once__=!0);var $e=ae;if(Pe.indexOf("zr:")===0&&($e=ae.getZr(),Pe=Pe.substring(3)),ve.__once__){delete ve.__once__;var Ce=ve;ve=function(){for(var at=[],st=0;st<arguments.length;st++)at[st]=arguments[st];Ce.apply(void 0,at),$e.off(Pe,ve)}}$e.on(Pe,ve)}}),v.value?lg(function(){ae&&!ae.isDisposed()&&ae.resize(),pe()}):pe()}function pe(){var ye=Y||A.value;ye&&ae.setOption(ye,k.value)}}function H(){i.value&&(i.value.dispose(),i.value=void 0)}var Z=null;Ia(_,function(Y){typeof Z=="function"&&(Z(),Z=null),Y||(Z=Ia(function(){return e.option},function(ae,le){ae&&(i.value?i.value.setOption(ae,Jo({notMerge:ae.value!==(le==null?void 0:le.value)},k.value)):V())},{deep:!0}))},{immediate:!0}),Ia([I,M],function(){H(),V()},{deep:!0}),A0(function(){e.group&&i.value&&(i.value.group=e.group)});var ee=qW(i);return function(Y,ae,le){var pe=oa("ecLoadingOptions",{}),ye=bt(function(){return Jo(Jo({},$m(pe,{})),le==null?void 0:le.value)});A0(function(){var ve=Y.value;ve&&(ae.value?ve.showLoading(ye.value):ve.hideLoading())})}(i,y,S),function(Y,ae,le){var pe=null;Ia([le,Y,ae],function(ye,ve,Pe){var $e=ye[0],Ce=ye[1],at=ye[2];$e&&Ce&&at&&(pe=Db(function(){Ce.resize()},100),VW($e,pe)),Pe(function(){pe&&$e&&UW($e,pe)})})}(i,v,n),Xi(function(){V()}),rx(function(){KW&&n.value?n.value.__dispose=H:H()}),Jo({chart:i,root:n,setOption:function(Y,ae){e.manualUpdate&&(o.value=Y),i.value?i.value.setOption(Y,ae||{}):V(Y)},nonEventAttrs:L},ee)},render:function(){var e=Jo({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",Er("x-vue-echarts",e)}}),f0=Math.sin,d0=Math.cos,L3=Math.PI,nu=Math.PI*2,QW=180/L3,eZ=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,r){this._add("M",t,r)},e.prototype.lineTo=function(t,r){this._add("L",t,r)},e.prototype.bezierCurveTo=function(t,r,n,i,o,u){this._add("C",t,r,n,i,o,u)},e.prototype.quadraticCurveTo=function(t,r,n,i){this._add("Q",t,r,n,i)},e.prototype.arc=function(t,r,n,i,o,u){this.ellipse(t,r,n,n,0,i,o,u)},e.prototype.ellipse=function(t,r,n,i,o,u,a,f){var p=a-u,v=!f,_=Math.abs(p),y=Xs(_-nu)||(v?p>=nu:-p>=nu),S=p>0?p%nu:p%nu+nu,A=!1;y?A=!0:Xs(_)?A=!1:A=S>=L3==!!v;var I=t+n*d0(u),M=r+i*f0(u);this._start&&this._add("M",I,M);var k=Math.round(o*QW);if(y){var L=1/this._p,z=(v?1:-1)*(nu-L);this._add("A",n,i,k,1,+v,t+n*d0(u+z),r+i*f0(u+z)),L>.01&&this._add("A",n,i,k,0,+v,I,M)}else{var V=t+n*d0(a),H=r+i*f0(a);this._add("A",n,i,k,+A,+v,V,H)}},e.prototype.rect=function(t,r,n,i){this._add("M",t,r),this._add("l",n,0),this._add("l",0,i),this._add("l",-n,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,r,n,i,o,u,a,f,p){for(var v=[],_=this._p,y=1;y<arguments.length;y++){var S=arguments[y];if(isNaN(S)){this._invalid=!0;return}v.push(Math.round(S*_)/_)}this._d.push(t+v.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}();const O3=eZ;var ed="none",tZ=Math.round;function rZ(e){var t=e.fill;return t!=null&&t!==ed}function nZ(e){var t=e.stroke;return t!=null&&t!==ed}var q1=["lineCap","miterLimit","lineJoin"],iZ=Bt(q1,function(e){return"stroke-"+e.toLowerCase()});function aZ(e,t,r,n){var i=t.opacity==null?1:t.opacity;if(r instanceof fs){e("opacity",i);return}if(rZ(t)){var o=ld(t.fill);e("fill",o.color);var u=t.fillOpacity!=null?t.fillOpacity*o.opacity*i:o.opacity*i;(n||u<1)&&e("fill-opacity",u)}else e("fill",ed);if(nZ(t)){var a=ld(t.stroke);e("stroke",a.color);var f=t.strokeNoScale?r.getLineScale():1,p=f?(t.lineWidth||0)/f:0,v=t.strokeOpacity!=null?t.strokeOpacity*a.opacity*i:a.opacity*i,_=t.strokeFirst;if((n||p!==1)&&e("stroke-width",p),(n||_)&&e("paint-order",_?"stroke":"fill"),(n||v<1)&&e("stroke-opacity",v),t.lineDash){var y=Lb(r),S=y[0],A=y[1];S&&(A=tZ(A||0),e("stroke-dasharray",S.join(",")),(A||n)&&e("stroke-dashoffset",A))}else n&&e("stroke-dasharray",ed);for(var I=0;I<q1.length;I++){var M=q1[I];if(n||t[M]!==Hv[M]){var k=t[M]||Hv[M];k&&e(iZ[I],k)}}}else n&&e("stroke",ed)}var R3="http://www.w3.org/2000/svg",z3="http://www.w3.org/1999/xlink",oZ="http://www.w3.org/2000/xmlns/",sZ="http://www.w3.org/XML/1998/namespace";function B3(e){return document.createElementNS(R3,e)}function Fn(e,t,r,n,i){return{tag:e,attrs:r||{},children:n,text:i,key:t}}function lZ(e,t){var r=[];if(t)for(var n in t){var i=t[n],o=n;i!==!1&&(i!==!0&&i!=null&&(o+='="'+i+'"'),r.push(o))}return"<"+e+" "+r.join(" ")+">"}function uZ(e){return"</"+e+">"}function Hb(e,t){t=t||{};var r=t.newline?`
`:"";function n(i){var o=i.children,u=i.tag,a=i.attrs;return lZ(u,a)+aa(i.text)+(o?""+r+Bt(o,function(f){return n(f)}).join(r)+r:"")+uZ(u)}return n(e)}function cZ(e,t,r){r=r||{};var n=r.newline?`
`:"",i=" {"+n,o=n+"}",u=Bt(Pr(e),function(f){return f+i+Bt(Pr(e[f]),function(p){return p+":"+e[f][p]+";"}).join(n)+o}).join(n),a=Bt(Pr(t),function(f){return"@keyframes "+f+i+Bt(Pr(t[f]),function(p){return p+i+Bt(Pr(t[f][p]),function(v){var _=t[f][p][v];return v==="d"&&(_='path("'+_+'")'),v+":"+_+";"}).join(n)+o}).join(n)+o}).join(n);return!u&&!a?"":["<![CDATA[",u,a,"]]>"].join(n)}function W1(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function eA(e,t,r,n){return Fn("svg","root",{width:e,height:t,xmlns:R3,"xmlns:xlink":z3,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+e+" "+t:!1},r)}var tA={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},ou="transform-origin";function hZ(e,t,r){var n=lt({},e.shape);lt(n,t),e.buildPath(r,n);var i=new O3;return i.reset(SP(e)),r.rebuildPath(i,1),i.generateStr(),i.getStr()}function fZ(e,t){var r=t.originX,n=t.originY;(r||n)&&(e[ou]=r+"px "+n+"px")}var dZ={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function F3(e,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=e,r}function pZ(e,t,r){var n=e.shape.paths,i={},o,u;if(we(n,function(f){var p=W1(r.zrId);p.animation=!0,$g(f,{},p,!0);var v=p.cssAnims,_=p.cssNodes,y=Pr(v),S=y.length;if(S){u=y[S-1];var A=v[u];for(var I in A){var M=A[I];i[I]=i[I]||{d:""},i[I].d+=M.d||""}for(var k in _){var L=_[k].animation;L.indexOf(u)>=0&&(o=L)}}}),!!o){t.d=!1;var a=F3(i,r);return o.replace(u,a)}}function rA(e){return Rt(e)?tA[e]?"cubic-bezier("+tA[e]+")":jx(e)?e:"":""}function $g(e,t,r,n){var i=e.animators,o=i.length,u=[];if(e instanceof kD){var a=pZ(e,t,r);if(a)u.push(a);else if(!o)return}else if(!o)return;for(var f={},p=0;p<o;p++){var v=i[p],_=[v.getMaxTime()/1e3+"s"],y=rA(v.getClip().easing),S=v.getDelay();y?_.push(y):_.push("linear"),S&&_.push(S/1e3+"s"),v.getLoop()&&_.push("infinite");var A=_.join(" ");f[A]=f[A]||[A,[]],f[A][1].push(v)}function I(L){var z=L[1],V=z.length,H={},Z={},ee={},Y="animation-timing-function";function ae(gr,Yt,_r){for(var At=gr.getTracks(),kt=gr.getMaxTime(),Tt=0;Tt<At.length;Tt++){var zt=At[Tt];if(zt.needsAnimate()){var hr=zt.keyframes,yr=zt.propName;if(_r&&(yr=_r(yr)),yr)for(var cn=0;cn<hr.length;cn++){var lr=hr[cn],Pt=Math.round(lr.time/kt*100)+"%",$r=rA(lr.easing),pi=lr.rawValue;(Rt(pi)||gn(pi))&&(Yt[Pt]=Yt[Pt]||{},Yt[Pt][yr]=lr.rawValue,$r&&(Yt[Pt][Y]=$r))}}}}for(var le=0;le<V;le++){var pe=z[le],ye=pe.targetName;ye?ye==="shape"&&ae(pe,Z):!n&&ae(pe,H)}for(var ve in H){var Pe={};IP(Pe,e),lt(Pe,H[ve]);var $e=TP(Pe),Ce=H[ve][Y];ee[ve]=$e?{transform:$e}:{},fZ(ee[ve],Pe),Ce&&(ee[ve][Y]=Ce)}var at,st=!0;for(var ve in Z){ee[ve]=ee[ve]||{};var xt=!at,Ce=Z[ve][Y];xt&&(at=new yu);var St=at.len();at.reset(),ee[ve].d=hZ(e,Z[ve],at);var Xt=at.len();if(!xt&&St!==Xt){st=!1;break}Ce&&(ee[ve][Y]=Ce)}if(!st)for(var ve in ee)delete ee[ve].d;if(!n)for(var le=0;le<V;le++){var pe=z[le],ye=pe.targetName;ye==="style"&&ae(pe,ee,function(At){return dZ[At]})}for(var Dt=Pr(ee),Br=!0,cr,le=1;le<Dt.length;le++){var vr=Dt[le-1],Fr=Dt[le];if(ee[vr][ou]!==ee[Fr][ou]){Br=!1;break}cr=ee[vr][ou]}if(Br&&cr){for(var ve in ee)ee[ve][ou]&&delete ee[ve][ou];t[ou]=cr}if(di(Dt,function(gr){return Pr(ee[gr]).length>0}).length){var Ur=F3(ee,r);return Ur+" "+L[0]+" both"}}for(var M in f){var a=I(f[M]);a&&u.push(a)}if(u.length){var k=r.zrId+"-cls-"+r.cssClassIdx++;r.cssNodes["."+k]={animation:u.join(",")},t.class=k}}var Td=Math.round;function N3(e){return e&&Rt(e.src)}function V3(e){return e&&Zt(e.toDataURL)}function qb(e,t,r,n){aZ(function(i,o){var u=i==="fill"||i==="stroke";u&&wP(o)?$3(t,e,i,n):u&&Gx(o)?j3(r,e,i,n):e[i]=o},t,r,!1),bZ(r,e,n)}function nA(e){return Xs(e[0]-1)&&Xs(e[1])&&Xs(e[2])&&Xs(e[3]-1)}function mZ(e){return Xs(e[4])&&Xs(e[5])}function Wb(e,t,r){if(t&&!(mZ(t)&&nA(t))){var n=r?10:1e4;e.transform=nA(t)?"translate("+Td(t[4]*n)/n+" "+Td(t[5]*n)/n+")":T7(t)}}function iA(e,t,r){for(var n=e.points,i=[],o=0;o<n.length;o++)i.push(Td(n[o][0]*r)/r),i.push(Td(n[o][1]*r)/r);t.points=i.join(" ")}function aA(e){return!e.smooth}function vZ(e){var t=Bt(e,function(r){return typeof r=="string"?[r,r]:r});return function(r,n,i){for(var o=0;o<t.length;o++){var u=t[o],a=r[u[0]];a!=null&&(n[u[1]]=Td(a*i)/i)}}}var gZ={circle:[vZ(["cx","cy","r"])],polyline:[iA,aA],polygon:[iA,aA]};function _Z(e){for(var t=e.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function U3(e,t){var r=e.style,n=e.shape,i=gZ[e.type],o={},u=t.animation,a="path",f=e.style.strokePercent,p=t.compress&&SP(e)||4;if(i&&!t.willUpdate&&!(i[1]&&!i[1](n))&&!(u&&_Z(e))&&!(f<1)){a=e.type;var v=Math.pow(10,p);i[0](n,o,v)}else{var _=!e.path||e.shapeChanged();e.path||e.createPathProxy();var y=e.path;_&&(y.beginPath(),e.buildPath(y,e.shape),e.pathUpdated());var S=y.getVersion(),A=e,I=A.__svgPathBuilder;(A.__svgPathVersion!==S||!I||f!==A.__svgPathStrokePercent)&&(I||(I=A.__svgPathBuilder=new O3),I.reset(p),y.rebuildPath(I,f),I.generateStr(),A.__svgPathVersion=S,A.__svgPathStrokePercent=f),o.d=I.getStr()}return Wb(o,e.transform),qb(o,r,e,t),t.animation&&$g(e,o,t),Fn(a,e.id+"",o)}function yZ(e,t){var r=e.style,n=r.image;if(n&&!Rt(n)&&(N3(n)?n=n.src:V3(n)&&(n=n.toDataURL())),!!n){var i=r.x||0,o=r.y||0,u=r.width,a=r.height,f={href:n,width:u,height:a};return i&&(f.x=i),o&&(f.y=o),Wb(f,e.transform),qb(f,r,e,t),t.animation&&$g(e,f,t),Fn("image",e.id+"",f)}}function xZ(e,t){var r=e.style,n=r.text;if(n!=null&&(n+=""),!(!n||isNaN(r.x)||isNaN(r.y))){var i=r.font||tl,o=r.x||0,u=C7(r.y||0,bg(i),r.textBaseline),a=E7[r.textAlign]||r.textAlign,f={"dominant-baseline":"central","text-anchor":a};if(nD(r)){var p="",v=r.fontStyle,_=rD(r.fontSize);if(!parseFloat(_))return;var y=r.fontFamily||ZM,S=r.fontWeight;p+="font-size:"+_+";font-family:"+y+";",v&&v!=="normal"&&(p+="font-style:"+v+";"),S&&S!=="normal"&&(p+="font-weight:"+S+";"),f.style=p}else f.style="font: "+i;return n.match(/\s/)&&(f["xml:space"]="preserve"),o&&(f.x=o),u&&(f.y=u),Wb(f,e.transform),qb(f,r,e,t),t.animation&&$g(e,f,t),Fn("text",e.id+"",f,void 0,n)}}function oA(e,t){if(e instanceof Vr)return U3(e,t);if(e instanceof fs)return yZ(e,t);if(e instanceof qv)return xZ(e,t)}function bZ(e,t,r){var n=e.style;if(A7(n)){var i=I7(e),o=r.shadowCache,u=o[i];if(!u){var a=e.getGlobalScale(),f=a[0],p=a[1];if(!f||!p)return;var v=n.shadowOffsetX||0,_=n.shadowOffsetY||0,y=n.shadowBlur,S=ld(n.shadowColor),A=S.opacity,I=S.color,M=y/2/f,k=y/2/p,L=M+" "+k;u=r.zrId+"-s"+r.shadowIdx++,r.defs[u]=Fn("filter",u,{id:u,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Fn("feDropShadow","",{dx:v/f,dy:_/p,stdDeviation:L,"flood-color":I,"flood-opacity":A})]),o[i]=u}t.filter=xg(u)}}function $3(e,t,r,n){var i=e[r],o,u={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(xP(i))o="linearGradient",u.x1=i.x,u.y1=i.y,u.x2=i.x2,u.y2=i.y2;else if(bP(i))o="radialGradient",u.cx=or(i.x,.5),u.cy=or(i.y,.5),u.r=or(i.r,.5);else return;for(var a=i.colorStops,f=[],p=0,v=a.length;p<v;++p){var _=c1(a[p].offset)*100+"%",y=a[p].color,S=ld(y),A=S.color,I=S.opacity,M={offset:_};M["stop-color"]=A,I<1&&(M["stop-opacity"]=I),f.push(Fn("stop",p+"",M))}var k=Fn(o,"",u,f),L=Hb(k),z=n.gradientCache,V=z[L];V||(V=n.zrId+"-g"+n.gradientIdx++,z[L]=V,u.id=V,n.defs[V]=Fn(o,V,u,f)),t[r]=xg(V)}function j3(e,t,r,n){var i=e.style[r],o=e.getBoundingRect(),u={},a=i.repeat,f=a==="no-repeat",p=a==="repeat-x",v=a==="repeat-y",_;if(yP(i)){var y=i.imageWidth,S=i.imageHeight,A=void 0,I=i.image;if(Rt(I)?A=I:N3(I)?A=I.src:V3(I)&&(A=I.toDataURL()),typeof Image>"u"){var M="Image width/height must been given explictly in svg-ssr renderer.";Xa(y,M),Xa(S,M)}else if(y==null||S==null){var k=function(le,pe){if(le){var ye=le.elm,ve=y||pe.width,Pe=S||pe.height;le.tag==="pattern"&&(p?(Pe=1,ve/=o.width):v&&(ve=1,Pe/=o.height)),le.attrs.width=ve,le.attrs.height=Pe,ye&&(ye.setAttribute("width",ve),ye.setAttribute("height",Pe))}},L=Jx(A,null,e,function(le){f||k(Z,le),k(_,le)});L&&L.width&&L.height&&(y=y||L.width,S=S||L.height)}_=Fn("image","img",{href:A,width:y,height:S}),u.width=y,u.height=S}else i.svgElement&&(_=mr(i.svgElement),u.width=i.svgWidth,u.height=i.svgHeight);if(_){var z,V;f?z=V=1:p?(V=1,z=u.width/o.width):v?(z=1,V=u.height/o.height):u.patternUnits="userSpaceOnUse",z!=null&&!isNaN(z)&&(u.width=z),V!=null&&!isNaN(V)&&(u.height=V);var H=TP(i);H&&(u.patternTransform=H);var Z=Fn("pattern","",u,[_]),ee=Hb(Z),Y=n.patternCache,ae=Y[ee];ae||(ae=n.zrId+"-p"+n.patternIdx++,Y[ee]=ae,u.id=ae,Z=n.defs[ae]=Fn("pattern",ae,u,[_])),t[r]=xg(ae)}}function wZ(e,t,r){var n=r.clipPathCache,i=r.defs,o=n[e.id];if(!o){o=r.zrId+"-c"+r.clipPathIdx++;var u={id:o};n[e.id]=o,i[o]=Fn("clipPath",o,u,[U3(e,r)])}t["clip-path"]=xg(o)}function sA(e){return document.createTextNode(e)}function su(e,t,r){e.insertBefore(t,r)}function lA(e,t){e.removeChild(t)}function uA(e,t){e.appendChild(t)}function G3(e){return e.parentNode}function H3(e){return e.nextSibling}function p0(e,t){e.textContent=t}var cA=58,SZ=120,TZ=Fn("","");function Z1(e){return e===void 0}function _o(e){return e!==void 0}function EZ(e,t,r){for(var n={},i=t;i<=r;++i){var o=e[i].key;o!==void 0&&(n[o]=i)}return n}function Bf(e,t){var r=e.key===t.key,n=e.tag===t.tag;return n&&r}function Ed(e){var t,r=e.children,n=e.tag;if(_o(n)){var i=e.elm=B3(n);if(Zb(TZ,e),wt(r))for(t=0;t<r.length;++t){var o=r[t];o!=null&&uA(i,Ed(o))}else _o(e.text)&&!Vt(e.text)&&uA(i,sA(e.text))}else e.elm=sA(e.text);return e.elm}function q3(e,t,r,n,i){for(;n<=i;++n){var o=r[n];o!=null&&su(e,Ed(o),t)}}function og(e,t,r,n){for(;r<=n;++r){var i=t[r];if(i!=null)if(_o(i.tag)){var o=G3(i.elm);lA(o,i.elm)}else lA(e,i.elm)}}function Zb(e,t){var r,n=t.elm,i=e&&e.attrs||{},o=t.attrs||{};if(i!==o){for(r in o){var u=o[r],a=i[r];a!==u&&(u===!0?n.setAttribute(r,""):u===!1?n.removeAttribute(r):r.charCodeAt(0)!==SZ?n.setAttribute(r,u):r==="xmlns:xlink"||r==="xmlns"?n.setAttributeNS(oZ,r,u):r.charCodeAt(3)===cA?n.setAttributeNS(sZ,r,u):r.charCodeAt(5)===cA?n.setAttributeNS(z3,r,u):n.setAttribute(r,u))}for(r in i)r in o||n.removeAttribute(r)}}function CZ(e,t,r){for(var n=0,i=0,o=t.length-1,u=t[0],a=t[o],f=r.length-1,p=r[0],v=r[f],_,y,S,A;n<=o&&i<=f;)u==null?u=t[++n]:a==null?a=t[--o]:p==null?p=r[++i]:v==null?v=r[--f]:Bf(u,p)?(bc(u,p),u=t[++n],p=r[++i]):Bf(a,v)?(bc(a,v),a=t[--o],v=r[--f]):Bf(u,v)?(bc(u,v),su(e,u.elm,H3(a.elm)),u=t[++n],v=r[--f]):Bf(a,p)?(bc(a,p),su(e,a.elm,u.elm),a=t[--o],p=r[++i]):(Z1(_)&&(_=EZ(t,n,o)),y=_[p.key],Z1(y)?su(e,Ed(p),u.elm):(S=t[y],S.tag!==p.tag?su(e,Ed(p),u.elm):(bc(S,p),t[y]=void 0,su(e,S.elm,u.elm))),p=r[++i]);(n<=o||i<=f)&&(n>o?(A=r[f+1]==null?null:r[f+1].elm,q3(e,A,r,i,f)):og(e,t,n,o))}function bc(e,t){var r=t.elm=e.elm,n=e.children,i=t.children;e!==t&&(Zb(e,t),Z1(t.text)?_o(n)&&_o(i)?n!==i&&CZ(r,n,i):_o(i)?(_o(e.text)&&p0(r,""),q3(r,null,i,0,i.length-1)):_o(n)?og(r,n,0,n.length-1):_o(e.text)&&p0(r,""):e.text!==t.text&&(_o(n)&&og(r,n,0,n.length-1),p0(r,t.text)))}function AZ(e,t){if(Bf(e,t))bc(e,t);else{var r=e.elm,n=G3(r);Ed(t),n!==null&&(su(n,t.elm,H3(r)),og(n,[e],0,0))}return t}var IZ=0,MZ=function(){function e(t,r,n){if(this.type="svg",this.refreshHover=hA(),this.configLayer=hA(),this.storage=r,this._opts=n=lt({},n),this.root=t,this._id="zr"+IZ++,this._oldVNode=eA(n.width,n.height),t&&!n.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var o=this._svgDom=this._oldVNode.elm=B3("svg");Zb(null,this._oldVNode),i.appendChild(o),t.appendChild(i)}this.resize(n.width,n.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",AZ(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return oA(t,W1(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),n=this._width,i=this._height,o=W1(this._id);o.animation=t.animation,o.willUpdate=t.willUpdate,o.compress=t.compress;var u=[],a=this._bgVNode=PZ(n,i,this._backgroundColor,o);a&&u.push(a);var f=t.compress?null:this._mainVNode=Fn("g","main",{},[]);this._paintList(r,o,f?f.children:u),f&&u.push(f);var p=Bt(Pr(o.defs),function(y){return o.defs[y]});if(p.length&&u.push(Fn("defs","defs",{},p)),t.animation){var v=cZ(o.cssNodes,o.cssAnims,{newline:!0});if(v){var _=Fn("style","stl",{},[],v);u.push(_)}}return eA(n,i,u,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},Hb(this.renderToVNode({animation:or(t.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:or(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,r,n){for(var i=t.length,o=[],u=0,a,f,p=0,v=0;v<i;v++){var _=t[v];if(!_.invisible){var y=_.__clipPaths,S=y&&y.length||0,A=f&&f.length||0,I=void 0;for(I=Math.max(S-1,A-1);I>=0&&!(y&&f&&y[I]===f[I]);I--);for(var M=A-1;M>I;M--)u--,a=o[u-1];for(var k=I+1;k<S;k++){var L={};wZ(y[k],L,r);var z=Fn("g","clip-g-"+p++,L,[]);(a?a.children:n).push(z),o[u++]=z,a=z}f=y;var V=oA(_,r);V&&(a?a.children:n).push(V)}}},e.prototype.resize=function(t,r){var n=this._opts,i=this.root,o=this._viewport;if(t!=null&&(n.width=t),r!=null&&(n.height=r),i&&o&&(o.style.display="none",t=yC(i,0,n),r=yC(i,1,n),o.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,o){var u=o.style;u.width=t+"px",u.height=r+"px"}if(Gx(this._backgroundColor))this.refresh();else{var a=this._svgDom;a&&(a.setAttribute("width",t),a.setAttribute("height",r));var f=this._bgVNode&&this._bgVNode.elm;f&&(f.setAttribute("width",t),f.setAttribute("height",r))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var r=this.renderToString(),n="data:image/svg+xml;";return t?(r=P7(r),r&&n+"base64,"+r):n+"charset=UTF-8,"+encodeURIComponent(r)},e}();function hA(e){return function(){}}function PZ(e,t,r,n){var i;if(r&&r!=="none")if(i=Fn("rect","bg",{width:e,height:t,x:"0",y:"0",id:"0"}),wP(r))$3({fill:r},i.attrs,"fill",n);else if(Gx(r))j3({style:{fill:r},dirty:ki,getBoundingRect:function(){return{width:e,height:t}}},i.attrs,"fill",n);else{var o=ld(r),u=o.color,a=o.opacity;i.attrs.fill=u,a<1&&(i.attrs["fill-opacity"]=a)}return i}const DZ=MZ;function kZ(e){e.registerPainter("svg",DZ)}function LZ(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=Gc(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],u=0;u<r.length;u++)o.push(Gc(e,t,r[u]));return o.join(" ")}}var OZ=function(e){mt(t,e);function t(r,n,i,o){var u=e.call(this)||this;return u.updateData(r,n,i,o),u}return t.prototype._createSymbol=function(r,n,i,o,u){this.removeAll();var a=rh(r,-1,-1,2,2,null,u);a.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),a.drift=RZ,this._symbolType=r,this.add(a)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){fd(this.childAt(0))},t.prototype.downplay=function(){dd(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var u=r.getItemVisual(n,"symbol")||"circle",a=r.hostModel,f=t.getSymbolSize(r,n),p=u!==this._symbolType,v=o&&o.disableAnimation;if(p){var _=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(u,r,n,f,_)}else{var y=this.childAt(0);y.silent=!1;var S={scaleX:f[0]/2,scaleY:f[1]/2};v?y.attr(S):wu(y,S,a,n),C$(y)}if(this._updateCommon(r,n,f,i,o),p){var y=this.childAt(0);if(!v){var S={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:y.style.opacity}};y.scaleX=y.scaleY=0,y.style.opacity=0,Vd(y,S,a,n)}}v&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,u){var a=this.childAt(0),f=r.hostModel,p,v,_,y,S,A,I,M,k;if(o&&(p=o.emphasisItemStyle,v=o.blurItemStyle,_=o.selectItemStyle,y=o.focus,S=o.blurScope,I=o.labelStatesModels,M=o.hoverScale,k=o.cursorStyle,A=o.emphasisDisabled),!o||r.hasItemOption){var L=o&&o.itemModel?o.itemModel:r.getItemModel(n),z=L.getModel("emphasis");p=z.getModel("itemStyle").getItemStyle(),_=L.getModel(["select","itemStyle"]).getItemStyle(),v=L.getModel(["blur","itemStyle"]).getItemStyle(),y=z.get("focus"),S=z.get("blurScope"),A=z.get("disabled"),I=Ig(L),M=z.getShallow("scale"),k=L.getShallow("cursor")}var V=r.getItemVisual(n,"symbolRotate");a.attr("rotation",(V||0)*Math.PI/180||0);var H=kb(r.getItemVisual(n,"symbolOffset"),i);H&&(a.x=H[0],a.y=H[1]),k&&a.attr("cursor",k);var Z=r.getItemVisual(n,"style"),ee=Z.fill;if(a instanceof fs){var Y=a.style;a.useStyle(lt({image:Y.image,x:Y.x,y:Y.y,width:Y.width,height:Y.height},Z))}else a.__isEmptyBrush?a.useStyle(lt({},Z)):a.useStyle(Z),a.style.decal=null,a.setColor(ee,u&&u.symbolInnerColor),a.style.strokeNoScale=!0;var ae=r.getItemVisual(n,"liftZ"),le=this._z2;ae!=null?le==null&&(this._z2=a.z2,a.z2+=ae):le!=null&&(a.z2=le,this._z2=null);var pe=u&&u.useNameLabel;UD(a,I,{labelFetcher:f,labelDataIndex:n,defaultText:ye,inheritColor:ee,defaultOpacity:Z.opacity});function ye($e){return pe?r.getName($e):LZ(r,$e)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var ve=a.ensureState("emphasis");ve.style=p,a.ensureState("select").style=_,a.ensureState("blur").style=v;var Pe=M==null||M===!0?Math.max(1.1,3/this._sizeY):isFinite(M)&&M>0?+M:1;ve.scaleX=this._sizeX*Pe,ve.scaleY=this._sizeY*Pe,this.setSymbolScale(1),ab(this,y,S,A)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),u=nn(this).dataIndex,a=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var f=o.getTextContent();f&&Zv(f,{style:{opacity:0}},n,{dataIndex:u,removeOpt:a,cb:function(){o.removeTextContent()}})}else o.removeTextContent();Zv(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:u,cb:r,removeOpt:a})},t.getSymbolSize=function(r,n){return U5(r.getItemVisual(n,"symbolSize"))},t}(ri);function RZ(e,t){this.parent.drift(e,t)}const zZ=OZ;function m0(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function fA(e){return e!=null&&!Vt(e)&&(e={isIgnore:e}),e||{}}function dA(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:Ig(t),cursorStyle:t.get("cursor")}}var BZ=function(){function e(t){this.group=new ri,this._SymbolCtor=t||zZ}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=fA(r);var n=this.group,i=t.hostModel,o=this._data,u=this._SymbolCtor,a=r.disableAnimation,f=dA(t),p={disableAnimation:a},v=r.getSymbolPoint||function(_){return t.getItemLayout(_)};o||n.removeAll(),t.diff(o).add(function(_){var y=v(_);if(m0(t,y,_,r)){var S=new u(t,_,f,p);S.setPosition(y),t.setItemGraphicEl(_,S),n.add(S)}}).update(function(_,y){var S=o.getItemGraphicEl(y),A=v(_);if(!m0(t,A,_,r)){n.remove(S);return}var I=t.getItemVisual(_,"symbol")||"circle",M=S&&S.getSymbolType&&S.getSymbolType();if(!S||M&&M!==I)n.remove(S),S=new u(t,_,f,p),S.setPosition(A);else{S.updateData(t,_,f,p);var k={x:A[0],y:A[1]};a?S.attr(k):wu(S,k,i)}n.add(S),t.setItemGraphicEl(_,S)}).remove(function(_){var y=o.getItemGraphicEl(_);y&&y.fadeOut(function(){n.remove(y)},i)}).execute(),this._getSymbolPoint=v,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=dA(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=fA(n);function i(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var u=r.getItemLayout(o);if(m0(r,u,o,n)){var a=new this._SymbolCtor(r,o,this._seriesScope);a.traverse(i),a.setPosition(u),this.group.add(a),r.setItemGraphicEl(o,a),this._progressiveEls.push(a)}}},e.prototype.eachRendered=function(t){Cg(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const W3=BZ;function FZ(e,t,r,n,i){var o=e.getArea(),u=o.x,a=o.y,f=o.width,p=o.height,v=r.get(["lineStyle","width"])||2;u-=v/2,a-=v/2,f+=v,p+=v,u=Math.floor(u),f=Math.round(f);var _=new qi({shape:{x:u,y:a,width:f,height:p}});if(t){var y=e.getBaseAxis(),S=y.isHorizontal(),A=y.inverse;S?(A&&(_.shape.x+=f),_.shape.width=0):(A||(_.shape.y+=p),_.shape.height=0);var I=Zt(i)?function(M){i(M,_)}:null;Vd(_,{shape:{width:f,height:p,x:u,y:a}},r,null,n,I)}return _}function NZ(e,t,r){var n=e.getArea(),i=Bn(n.r0,1),o=Bn(n.r,1),u=new sb({shape:{cx:Bn(e.cx,1),cy:Bn(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var a=e.getBaseAxis().dim==="angle";a?u.shape.endAngle=n.startAngle:u.shape.r=i,Vd(u,{shape:{endAngle:n.endAngle,r:o}},r)}return u}function VZ(e,t,r,n,i){if(e){if(e.type==="polar")return NZ(e,t,r);if(e.type==="cartesian2d")return FZ(e,t,r,n,i)}else return null;return null}function Z3(e,t){return{seriesType:e,plan:Mb(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,u=t||o.large;if(i){var a=Bt(i.dimensions,function(S){return n.mapDimension(S)}).slice(0,2),f=a.length,p=n.getCalculationInfo("stackResultDimension");ig(n,a[0])&&(a[0]=p),ig(n,a[1])&&(a[1]=p);var v=n.getStore(),_=n.getDimensionIndex(a[0]),y=n.getDimensionIndex(a[1]);return f&&{progress:function(S,A){for(var I=S.end-S.start,M=u&&jq(I*f),k=[],L=[],z=S.start,V=0;z<S.end;z++){var H=void 0;if(f===1){var Z=v.get(_,z);H=i.dataToPoint(Z,null,L)}else k[0]=v.get(_,z),k[1]=v.get(y,z),H=i.dataToPoint(k,null,L);u?(M[V++]=H[0],M[V++]=H[1]):A.setItemLayout(z,H.slice())}u&&A.setLayout("points",M)}}}}}}var UZ=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return Oq(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Hc);const $Z=UZ;var X3=4,jZ=function(){function e(){}return e}(),GZ=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new jZ},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,u=this.symbolProxy,a=u.shape,f=r.getContext?r.getContext():r,p=f&&o[0]<X3,v=this.softClipShape,_;if(p){this._ctx=f;return}for(this._ctx=null,_=this._off;_<i.length;){var y=i[_++],S=i[_++];isNaN(y)||isNaN(S)||v&&!v.contain(y,S)||(a.x=y-o[0]/2,a.y=S-o[1]/2,a.width=o[0],a.height=o[1],u.buildPath(r,a,!0))}this.incremental&&(this._off=_,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,u=this.softClipShape,a;if(o){for(a=this._off;a<n.length;){var f=n[a++],p=n[a++];isNaN(f)||isNaN(p)||u&&!u.contain(f,p)||o.fillRect(f-i[0]/2,p-i[1]/2,i[0],i[1])}this.incremental&&(this._off=a,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,u=i.size,a=Math.max(u[0],4),f=Math.max(u[1],4),p=o.length/2-1;p>=0;p--){var v=p*2,_=o[v]-a/2,y=o[v+1]-f/2;if(r>=_&&n>=y&&r<=_+a&&n<=y+f)return p}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var u=this.hoverDataIdx=this.findDataIndex(r,n);return u>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,u=o[0],a=o[1],f=1/0,p=1/0,v=-1/0,_=-1/0,y=0;y<i.length;){var S=i[y++],A=i[y++];f=Math.min(S,f),v=Math.max(S,v),p=Math.min(A,p),_=Math.max(A,_)}r=this._rect=new Zr(f-u/2,p-a/2,v-f+u,_-p+a)}return r},t}(Vr),HZ=function(){function e(){this.group=new ri}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),u=i&&i.shape.points;if(u&&u.length<2e4){var a=u.length,f=new Float32Array(a+o.length);f.set(u),f.set(o,a),i.endIndex=t.end,i.setShape({points:f})}else{this._newAdded=[];var p=this._create();p.startIndex=t.start,p.endIndex=t.end,p.incremental=!0,p.setShape({points:o}),this._setCommon(p,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new GZ({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=rh(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var u=t.shape.size[0]<X3;t.useStyle(i.getModel("itemStyle").getItemStyle(u?["color","shadowBlur","shadowColor"]:["color"]));var a=r.getVisual("style"),f=a&&a.fill;f&&t.setColor(f);var p=nn(t);p.seriesIndex=i.seriesIndex,t.on("mousemove",function(v){p.dataIndex=null;var _=t.hoverDataIdx;_>=0&&(p.dataIndex=_+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const qZ=HZ;var WZ=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),u=this._updateSymbolDraw(o,r);u.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),u=this._updateSymbolDraw(o,r);u.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var u=Z3("").reset(r,n,i);u.progress&&u.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,u=o.large;return(!i||u!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=u?new qZ:new W3,this._isLargeDraw=u,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(pu);const ZZ=WZ;var XZ=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(ln);const YZ=XZ;var X1=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Wa).models[0]},t.type="cartesian2dAxis",t}(ln);Ja(X1,bW);var Y3={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},KZ=un({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Y3),Xb=un({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},Y3),JZ=un({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Xb),QZ=an({logBase:10},Xb);const eX={category:KZ,value:Xb,time:JZ,log:QZ};var tX={value:1,category:1,time:1,log:1};function pA(e,t,r,n){we(tX,function(i,o){var u=un(un({},eX[o],!0),n,!0),a=function(f){mt(p,f);function p(){var v=f!==null&&f.apply(this,arguments)||this;return v.type=t+"Axis."+o,v}return p.prototype.mergeDefaultAndTheme=function(v,_){var y=_d(this),S=y?bb(v):{},A=_.getTheme();un(v,A.get(o+"Axis")),un(v,this.getDefaultOption()),v.type=mA(v),y&&yd(v,S,y)},p.prototype.optionUpdated=function(){var v=this.option;v.type==="category"&&(this.__ordinalMeta=$1.createByAxisModel(this))},p.prototype.getCategories=function(v){var _=this.option;if(_.type==="category")return v?_.data:this.__ordinalMeta.categories},p.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},p.type=t+"Axis."+o,p.defaultOption=u,p}(r);e.registerComponentModel(a)}),e.registerSubTypeDefaulter(t+"Axis",mA)}function mA(e){return e.type||(e.data?"category":"value")}var rX=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Bt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),di(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const nX=rX;var Y1=["x","y"];function vA(e){return e.type==="interval"||e.type==="time"}var iX=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=Y1,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!vA(r)||!vA(n))){var i=r.getExtent(),o=n.getExtent(),u=this.dataToPoint([i[0],o[0]]),a=this.dataToPoint([i[1],o[1]]),f=i[1]-i[0],p=o[1]-o[0];if(!(!f||!p)){var v=(a[0]-u[0])/f,_=(a[1]-u[1])/p,y=u[0]-i[0]*v,S=u[1]-o[0]*_,A=this._transform=[v,0,0,_,y,S];this._invTransform=$x([],A)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),u=this.getArea(),a=new Zr(i[0],i[1],o[0]-i[0],o[1]-i[1]);return u.intersect(a)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],u=r[1];if(this._transform&&o!=null&&isFinite(o)&&u!=null&&isFinite(u))return Pa(i,r,this._transform);var a=this.getAxis("x"),f=this.getAxis("y");return i[0]=a.toGlobalCoord(a.dataToCoord(o,n)),i[1]=f.toGlobalCoord(f.dataToCoord(u,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,u=i.getExtent(),a=o.getExtent(),f=i.parse(r[0]),p=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(u[0],u[1]),f),Math.max(u[0],u[1])),n[1]=Math.min(Math.max(Math.min(a[0],a[1]),p),Math.max(a[0],a[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return Pa(i,r,this._invTransform);var o=this.getAxis("x"),u=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=u.coordToData(u.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),u=Math.max(r[0],r[1])-i,a=Math.max(n[0],n[1])-o;return new Zr(i,o,u,a)},t}(nX),aX=function(e){mt(t,e);function t(r,n,i,o,u){var a=e.call(this,r,n,i)||this;return a.index=0,a.type=o||"value",a.position=u||"bottom",a}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(LW);const oX=aX;function K1(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},u=i.getAxesOnZeroOf()[0],a=i.position,f=u?"onZero":a,p=i.dim,v=n.getRect(),_=[v.x,v.x+v.width,v.y,v.y+v.height],y={left:0,right:1,top:0,bottom:1,onZero:2},S=t.get("offset")||0,A=p==="x"?[_[2]-S,_[3]+S]:[_[0]-S,_[1]+S];if(u){var I=u.toGlobalCoord(u.dataToCoord(0));A[y.onZero]=Math.max(Math.min(I,A[1]),A[0])}o.position=[p==="y"?A[y[f]]:_[0],p==="x"?A[y[f]]:_[3]],o.rotation=Math.PI/2*(p==="x"?0:1);var M={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=M[a],o.labelOffset=u?A[y[a]]-A[y.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),Uc(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var k=t.get(["axisLabel","rotate"]);return o.labelRotate=f==="top"?-k:k,o.z2=1,o}function gA(e){return e.get("coordinateSystem")==="cartesian2d"}function _A(e){var t={xAxisModel:null,yAxisModel:null};return we(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,Wa).models[0];t[n]=o}),t}var v0=Math.log;function sX(e,t,r){var n=Ud.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),u=i.length-1,a=n.getInterval.call(r),f=T3(e,t),p=f.extent,v=f.fixMin,_=f.fixMax;if(e.type==="log"){var y=v0(e.base);p=[v0(p[0])/y,v0(p[1])/y]}e.setExtent(p[0],p[1]),e.calcNiceExtent({splitNumber:u,fixMin:v,fixMax:_});var S=n.getExtent.call(e);v&&(p[0]=S[0]),_&&(p[1]=S[1]);var A=n.getInterval.call(e),I=p[0],M=p[1];if(v&&_)A=(M-I)/u;else if(v)for(M=p[0]+A*u;M<p[1]&&isFinite(M)&&isFinite(p[1]);)A=u0(A),M=p[0]+A*u;else if(_)for(I=p[1]-A*u;I>p[0]&&isFinite(I)&&isFinite(p[0]);)A=u0(A),I=p[1]-A*u;else{var k=e.getTicks().length-1;k>u&&(A=u0(A));var L=A*u;M=Math.ceil(p[1]/A)*A,I=Bn(M-L),I<0&&p[0]>=0?(I=0,M=Bn(L)):M>0&&p[1]<=0&&(M=0,I=-Bn(L))}var z=(i[0].value-o[0].value)/a,V=(i[u].value-o[u].value)/a;n.setExtent.call(e,I+A*z,M+A*V),n.setInterval.call(e,A),(z||V)&&n.setNiceExtent.call(e,I+A,M-A)}var lX=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Y1,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(u){var a,f=Pr(u),p=f.length;if(p){for(var v=[],_=p-1;_>=0;_--){var y=+f[_],S=u[y],A=S.model,I=S.scale;j1(I)&&A.get("alignTicks")&&A.get("interval")==null?v.push(S):(XC(I,A),j1(I)&&(a=S))}v.length&&(a||(a=v.pop(),XC(a.scale,a.model)),we(v,function(M){sX(M.scale,M.model,a.scale)}))}}i(n.x),i(n.y);var o={};we(n.x,function(u){yA(n,"y",u,o)}),we(n.y,function(u){yA(n,"x",u,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),u=xb(i,{width:r.getWidth(),height:r.getHeight()});this._rect=u;var a=this._axesList;f(),o&&(we(a,function(p){if(!p.model.get(["axisLabel","inside"])){var v=_W(p);if(v){var _=p.isHorizontal()?"height":"width",y=p.model.get(["axisLabel","margin"]);u[_]-=v[_]+y,p.position==="top"?u.y+=v.height+y:p.position==="left"&&(u.x+=v.width+y)}}}),f()),we(this._coordsList,function(p){p.calcAffineTransform()});function f(){we(a,function(p){var v=p.isHorizontal(),_=v?[0,u.width]:[0,u.height],y=p.inverse?1:0;p.setExtent(_[y],_[1-y]),uX(p,v?u.x:u.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}Vt(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",Wa).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Wa).models[0],o=t.gridModel,u=this._coordsList,a,f;if(r)a=r.coordinateSystem,qr(u,a)<0&&(a=null);else if(n&&i)a=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)f=this.getAxis("x",n.componentIndex);else if(i)f=this.getAxis("y",i.componentIndex);else if(o){var p=o.coordinateSystem;p===this&&(a=this._coordsList[0])}return{cartesian:a,axis:f}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,u={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},f={x:0,y:0};if(r.eachComponent("xAxis",p("x"),this),r.eachComponent("yAxis",p("y"),this),!f.x||!f.y){this._axesMap={},this._axesList=[];return}this._axesMap=a,we(a.x,function(v,_){we(a.y,function(y,S){var A="x"+_+"y"+S,I=new iX(A);I.master=i,I.model=t,i._coordsMap[A]=I,i._coordsList.push(I),I.addAxis(v),I.addAxis(y)})});function p(v){return function(_,y){if(g0(_,t)){var S=_.get("position");v==="x"?S!=="top"&&S!=="bottom"&&(S=u.bottom?"top":"bottom"):S!=="left"&&S!=="right"&&(S=u.left?"right":"left"),u[S]=!0;var A=new oX(v,vW(_),[0,0],_.get("type"),S),I=A.type==="category";A.onBand=I&&_.get("boundaryGap"),A.inverse=_.get("inverse"),_.axis=A,A.model=_,A.grid=o,A.index=y,o._axesList.push(A),a[v][y]=A,f[v]++}}}},e.prototype._updateScale=function(t,r){we(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(gA(i)){var o=_A(i),u=o.xAxisModel,a=o.yAxisModel;if(!g0(u,r)||!g0(a,r))return;var f=this.getCartesian(u.componentIndex,a.componentIndex),p=i.getData(),v=f.getAxis("x"),_=f.getAxis("y");n(p,v),n(p,_)}},this);function n(i,o){we(xW(i,o.dim),function(u){o.scale.unionExtentFromData(i,u)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return we(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),u=i.getOtherAxis(o);qr(r,o)<0&&r.push(o),qr(n,u)<0&&n.push(u)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var u=new e(i,t,r);u.name="grid_"+o,u.resize(i,r,!0),i.coordinateSystem=u,n.push(u)}),t.eachSeries(function(i){if(gA(i)){var o=_A(i),u=o.xAxisModel,a=o.yAxisModel,f=u.getCoordSysModel(),p=f.coordinateSystem;i.coordinateSystem=p.getCartesian(u.componentIndex,a.componentIndex)}}),n},e.dimensions=Y1,e}();function g0(e,t){return e.getCoordSysModel()===t}function yA(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,u=r.model,a=u.get(["axisLine","onZero"]),f=u.get(["axisLine","onZeroAxisIndex"]);if(!a)return;if(f!=null)xA(i[f])&&(o=i[f]);else for(var p in i)if(i.hasOwnProperty(p)&&xA(i[p])&&!n[v(i[p])]){o=i[p];break}o&&(n[v(o)]=!0);function v(_){return _.dim+"_"+_.index}}function xA(e){return e&&e.type!=="category"&&e.type!=="time"&&gW(e)}function uX(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const cX=lX;var Ys=Math.PI,mu=function(){function e(t,r){this.group=new ri,this.opt=r,this.axisModel=t,an(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new ri({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!bA[t]},e.prototype.add=function(t){bA[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=RP(r-t),o,u;return jv(i)?(u=n>0?"top":"bottom",o="center"):jv(i-Ys)?(u=n>0?"bottom":"top",o="center"):(u="middle",i>0&&i<Ys?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:u}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),bA={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),u=n.transform,a=[o[0],0],f=[o[1],0],p=a[0]>f[0];u&&(Pa(a,a,u),Pa(f,f,u));var v=lt({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),_=new rl({shape:{x1:a[0],y1:a[1],x2:f[0],y2:f[1]},style:v,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});pd(_.shape,_.style.lineWidth),_.anid="line",r.add(_);var y=t.get(["axisLine","symbol"]);if(y!=null){var S=t.get(["axisLine","symbolSize"]);Rt(y)&&(y=[y,y]),(Rt(S)||gn(S))&&(S=[S,S]);var A=kb(t.get(["axisLine","symbolOffset"])||0,S),I=S[0],M=S[1];we([{rotate:e.rotation+Math.PI/2,offset:A[0],r:0},{rotate:e.rotation-Math.PI/2,offset:A[1],r:Math.sqrt((a[0]-f[0])*(a[0]-f[0])+(a[1]-f[1])*(a[1]-f[1]))}],function(k,L){if(y[L]!=="none"&&y[L]!=null){var z=rh(y[L],-I/2,-M/2,I,M,v.stroke,!0),V=k.r+k.offset,H=p?f:a;z.attr({rotation:k.rotate,x:H[0]+V*Math.cos(e.rotation),y:H[1]-V*Math.sin(e.rotation),silent:!0,z2:11}),r.add(z)}})}}},axisTickLabel:function(e,t,r,n){var i=dX(r,n,t,e),o=mX(r,n,t,e);if(fX(t,o,i),pX(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var u=OW(Bt(o,function(a){return{label:a,priority:a.z2,defaultAttr:{ignore:a.ignore}}}));RW(u)}},axisName:function(e,t,r,n){var i=Uc(e.axisName,t.get("name"));if(i){var o=t.get("nameLocation"),u=e.nameDirection,a=t.getModel("nameTextStyle"),f=t.get("nameGap")||0,p=t.axis.getExtent(),v=p[0]>p[1]?-1:1,_=[o==="start"?p[0]-v*f:o==="end"?p[1]+v*f:(p[0]+p[1])/2,SA(o)?e.labelOffset+u*f:0],y,S=t.get("nameRotate");S!=null&&(S=S*Ys/180);var A;SA(o)?y=mu.innerTextLayout(e.rotation,S??e.rotation,u):(y=hX(e.rotation,o,S||0,p),A=e.axisNameAvailableWidth,A!=null&&(A=Math.abs(A/Math.sin(y.rotation)),!isFinite(A)&&(A=null)));var I=a.getFont(),M=t.get("nameTruncate",!0)||{},k=M.ellipsis,L=Uc(e.nameTruncateMaxWidth,M.maxWidth,A),z=new Ya({x:_[0],y:_[1],rotation:y.rotation,silent:mu.isLabelSilent(t),style:xu(a,{text:i,font:I,overflow:"truncate",width:L,ellipsis:k,fill:a.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:a.get("align")||y.textAlign,verticalAlign:a.get("verticalAlign")||y.textVerticalAlign}),z2:1});if(VD({el:z,componentModel:t,itemName:i}),z.__fullText=i,z.anid="name",t.get("triggerEvent")){var V=mu.makeAxisEventDataBase(t);V.targetType="axisName",V.name=i,nn(z).eventData=V}n.add(z),z.updateTransform(),r.add(z),z.decomposeTransform()}}};function hX(e,t,r,n){var i=RP(r-e),o,u,a=n[0]>n[1],f=t==="start"&&!a||t!=="start"&&a;return jv(i-Ys/2)?(u=f?"bottom":"top",o="center"):jv(i-Ys*1.5)?(u=f?"top":"bottom",o="center"):(u="middle",i<Ys*1.5&&i>Ys/2?o=f?"left":"right":o=f?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:u}}function fX(e,t,r){if(!E3(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],u=t[1],a=t[t.length-1],f=t[t.length-2],p=r[0],v=r[1],_=r[r.length-1],y=r[r.length-2];n===!1?(ya(o),ya(p)):wA(o,u)&&(n?(ya(u),ya(v)):(ya(o),ya(p))),i===!1?(ya(a),ya(_)):wA(f,a)&&(i?(ya(f),ya(y)):(ya(a),ya(_)))}}function ya(e){e&&(e.ignore=!0)}function wA(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=Vx([]);return Ux(i,i,-e.rotation),r.applyTransform(kc([],i,e.getLocalTransform())),n.applyTransform(kc([],i,t.getLocalTransform())),r.intersect(n)}}function SA(e){return e==="middle"||e==="center"}function K3(e,t,r,n,i){for(var o=[],u=[],a=[],f=0;f<e.length;f++){var p=e[f].coord;u[0]=p,u[1]=0,a[0]=p,a[1]=r,t&&(Pa(u,u,t),Pa(a,a,t));var v=new rl({shape:{x1:u[0],y1:u[1],x2:a[0],y2:a[1]},style:n,z2:2,autoBatch:!0,silent:!0});pd(v.shape,v.style.lineWidth),v.anid=i+"_"+e[f].tickValue,o.push(v)}return o}function dX(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),u=o.get("show");if(u==="auto"&&n.handleAutoShown&&(u=n.handleAutoShown("axisTick")),!(!u||i.scale.isBlank())){for(var a=o.getModel("lineStyle"),f=n.tickDirection*o.get("length"),p=i.getTicksCoords(),v=K3(p,t.transform,f,an(a.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),_=0;_<v.length;_++)e.add(v[_]);return v}}function pX(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var u=i.getMinorTicksCoords();if(u.length)for(var a=o.getModel("lineStyle"),f=n*o.get("length"),p=an(a.getLineStyle(),an(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),v=0;v<u.length;v++)for(var _=K3(u[v],t.transform,f,p,"minorticks_"+v),y=0;y<_.length;y++)e.add(_[y])}}function mX(e,t,r,n){var i=r.axis,o=Uc(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var u=r.getModel("axisLabel"),a=u.get("margin"),f=i.getViewLabels(),p=(Uc(n.labelRotate,u.get("rotate"))||0)*Ys/180,v=mu.innerTextLayout(n.rotation,p,n.labelDirection),_=r.getCategories&&r.getCategories(!0),y=[],S=mu.isLabelSilent(r),A=r.get("triggerEvent");return we(f,function(I,M){var k=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(I.tickValue):I.tickValue,L=I.formattedLabel,z=I.rawLabel,V=u;if(_&&_[k]){var H=_[k];Vt(H)&&H.textStyle&&(V=new Pi(H.textStyle,u,r.ecModel))}var Z=V.getTextColor()||r.get(["axisLine","lineStyle","color"]),ee=i.dataToCoord(k),Y=new Ya({x:ee,y:n.labelOffset+n.labelDirection*a,rotation:v.rotation,silent:S,z2:10+(I.level||0),style:xu(V,{text:L,align:V.getShallow("align",!0)||v.textAlign,verticalAlign:V.getShallow("verticalAlign",!0)||V.getShallow("baseline",!0)||v.textVerticalAlign,fill:Zt(Z)?Z(i.type==="category"?z:i.type==="value"?k+"":k,M):Z})});if(Y.anid="label_"+k,A){var ae=mu.makeAxisEventDataBase(r);ae.targetType="axisLabel",ae.value=z,ae.tickIndex=M,i.type==="category"&&(ae.dataIndex=k),nn(Y).eventData=ae}t.add(Y),Y.updateTransform(),y.push(Y),e.add(Y),Y.decomposeTransform()}),y}}const J3=mu;function vX(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return gX(r,e,t),r.seriesInvolved&&yX(r,e),r}function gX(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],u=[];we(r.getCoordinateSystems(),function(a){if(!a.axisPointerEnabled)return;var f=Cd(a.model),p=e.coordSysAxesInfo[f]={};e.coordSysMap[f]=a;var v=a.model,_=v.getModel("tooltip",n);if(we(a.getAxes(),Wn(I,!1,null)),a.getTooltipAxes&&n&&_.get("show")){var y=_.get("trigger")==="axis",S=_.get(["axisPointer","type"])==="cross",A=a.getTooltipAxes(_.get(["axisPointer","axis"]));(y||S)&&we(A.baseAxes,Wn(I,S?"cross":!0,y)),S&&we(A.otherAxes,Wn(I,"cross",!1))}function I(M,k,L){var z=L.model.getModel("axisPointer",i),V=z.get("show");if(!(!V||V==="auto"&&!M&&!J1(z))){k==null&&(k=z.get("triggerTooltip")),z=M?_X(L,_,i,t,M,k):z;var H=z.get("snap"),Z=Cd(L.model),ee=k||H||L.type==="category",Y=e.axesInfo[Z]={key:Z,axis:L,coordSys:a,axisPointerModel:z,triggerTooltip:k,involveSeries:ee,snap:H,useHandle:J1(z),seriesModels:[],linkGroup:null};p[Z]=Y,e.seriesInvolved=e.seriesInvolved||ee;var ae=xX(o,L);if(ae!=null){var le=u[ae]||(u[ae]={axesInfo:{}});le.axesInfo[Z]=Y,le.mapper=o[ae].mapper,Y.linkGroup=le}}}})}function _X(e,t,r,n,i,o){var u=t.getModel("axisPointer"),a=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],f={};we(a,function(y){f[y]=mr(u.get(y))}),f.snap=e.type!=="category"&&!!o,u.get("type")==="cross"&&(f.type="line");var p=f.label||(f.label={});if(p.show==null&&(p.show=!1),i==="cross"){var v=u.get(["label","show"]);if(p.show=v??!0,!o){var _=f.lineStyle=u.get("crossStyle");_&&an(p,_.textStyle)}}return e.model.getModel("axisPointer",new Pi(f,r,n))}function yX(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||we(e.coordSysAxesInfo[Cd(n.model)],function(u){var a=u.axis;n.getAxis(a.dim)===a&&(u.seriesModels.push(r),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=r.getData().count())})})}function xX(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(_0(o[n+"AxisId"],r.id)||_0(o[n+"AxisIndex"],r.componentIndex)||_0(o[n+"AxisName"],r.name))return i}}function _0(e,t){return e==="all"||wt(e)&&qr(e,t)>=0||e===t}function bX(e){var t=Yb(e);if(t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),u=r.get("value");u!=null&&(u=n.parse(u));var a=J1(r);o==null&&(i.status=a?"show":"hide");var f=n.getExtent().slice();f[0]>f[1]&&f.reverse(),(u==null||u>f[1])&&(u=f[1]),u<f[0]&&(u=f[0]),i.value=u,a&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function Yb(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Cd(e)]}function wX(e){var t=Yb(e);return t&&t.axisPointerModel}function J1(e){return!!e.get(["handle","show"])}function Cd(e){return e.type+"||"+e.id}var TA={},SX=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&bX(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(o){var u=wX(r);u?(this._axisPointer||(this._axisPointer=new o)).render(r,u,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){TA[r]=n},t.getAxisPointerClass=function(r){return r&&TA[r]},t.type="axis",t}(ls);const Q3=SX;var Q1=En();function TX(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),u=o.getModel("areaStyle"),a=u.get("color"),f=n.coordinateSystem.getRect(),p=i.getTicksCoords({tickModel:o,clamp:!0});if(p.length){var v=a.length,_=Q1(e).splitAreaColors,y=sr(),S=0;if(_)for(var A=0;A<p.length;A++){var I=_.get(p[A].tickValue);if(I!=null){S=(I+(v-1)*A)%v;break}}var M=i.toGlobalCoord(p[0].coord),k=u.getAreaStyle();a=wt(a)?a:[a];for(var A=1;A<p.length;A++){var L=i.toGlobalCoord(p[A].coord),z=void 0,V=void 0,H=void 0,Z=void 0;i.isHorizontal()?(z=M,V=f.y,H=L-z,Z=f.height,M=z+H):(z=f.x,V=M,H=f.width,Z=L-V,M=V+Z);var ee=p[A-1].tickValue;ee!=null&&y.set(ee,S),t.add(new qi({anid:ee!=null?"area_"+ee:null,shape:{x:z,y:V,width:H,height:Z},style:an({fill:a[S]},k),autoBatch:!0,silent:!0})),S=(S+1)%v}Q1(e).splitAreaColors=y}}}function EX(e){Q1(e).splitAreaColors=null}var CX=["axisLine","axisTickLabel","axisName"],AX=["splitArea","splitLine","minorSplitLine"],ek=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new ri,this.group.add(this._axisGroup),!!r.get("show")){var a=r.getCoordSysModel(),f=K1(a,r),p=new J3(r,lt({handleAutoShown:function(_){for(var y=a.coordinateSystem.getCartesians(),S=0;S<y.length;S++)if(j1(y[S].getOtherAxis(r.axis).scale))return!0;return!1}},f));we(CX,p.add,p),this._axisGroup.add(p.getGroup()),we(AX,function(_){r.get([_,"show"])&&IX[_](this,this._axisGroup,r,a)},this);var v=o&&o.type==="changeAxisOrder"&&o.isInitSort;v||BD(u,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){EX(this)},t.type="cartesianAxis",t}(Q3),IX={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),u=o.getModel("lineStyle"),a=u.get("color");a=wt(a)?a:[a];for(var f=n.coordinateSystem.getRect(),p=i.isHorizontal(),v=0,_=i.getTicksCoords({tickModel:o}),y=[],S=[],A=u.getLineStyle(),I=0;I<_.length;I++){var M=i.toGlobalCoord(_[I].coord);p?(y[0]=M,y[1]=f.y,S[0]=M,S[1]=f.y+f.height):(y[0]=f.x,y[1]=M,S[0]=f.x+f.width,S[1]=M);var k=v++%a.length,L=_[I].tickValue,z=new rl({anid:L!=null?"line_"+_[I].tickValue:null,autoBatch:!0,shape:{x1:y[0],y1:y[1],x2:S[0],y2:S[1]},style:an({stroke:a[k]},A),silent:!0});pd(z.shape,A.lineWidth),t.add(z)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),u=o.getModel("lineStyle"),a=n.coordinateSystem.getRect(),f=i.isHorizontal(),p=i.getMinorTicksCoords();if(p.length)for(var v=[],_=[],y=u.getLineStyle(),S=0;S<p.length;S++)for(var A=0;A<p[S].length;A++){var I=i.toGlobalCoord(p[S][A].coord);f?(v[0]=I,v[1]=a.y,_[0]=I,_[1]=a.y+a.height):(v[0]=a.x,v[1]=I,_[0]=a.x+a.width,_[1]=I);var M=new rl({anid:"minor_line_"+p[S][A].tickValue,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:_[0],y2:_[1]},style:y,silent:!0});pd(M.shape,y.lineWidth),t.add(M)}},splitArea:function(e,t,r,n){TX(e,t,r,n)}},tk=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(ek),MX=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=tk.type,r}return t.type="yAxis",t}(ek),PX=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new qi({shape:r.coordinateSystem.getRect(),style:an({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ls),EA={offset:0};function rk(e){e.registerComponentView(PX),e.registerComponentModel(YZ),e.registerCoordinateSystem("cartesian2d",cX),pA(e,"x",X1,EA),pA(e,"y",X1,EA),e.registerComponentView(tk),e.registerComponentView(MX),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function DX(e){qc(rk),e.registerSeriesModel($Z),e.registerChartView(ZZ),e.registerLayout(Z3("scatter"))}var CA=rl.prototype,y0=ub.prototype,nk=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(nk);function x0(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var kX=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new nk},t.prototype.buildPath=function(r,n){x0(n)?CA.buildPath.call(this,r,n):y0.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return x0(this.shape)?CA.pointAt.call(this,r):y0.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=x0(n)?[n.x2-n.x1,n.y2-n.y1]:y0.tangentAt.call(this,r);return Fx(i,i)},t}(Vr);const LX=kX;var b0=["fromSymbol","toSymbol"];function AA(e){return"_"+e+"Type"}function IA(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),u=t.getItemVisual(r,e+"Offset"),a=t.getItemVisual(r,e+"KeepAspect"),f=U5(i),p=kb(u||0,f),v=rh(n,-f[0]/2+p[0],-f[1]/2+p[1],f[0],f[1],null,a);return v.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,v.name=e,v}}function OX(e){var t=new LX({name:"line",subPixelOptimize:!0});return ex(t.shape,e),t}function ex(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var RX=function(e){mt(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,u=r.getItemLayout(n),a=OX(u);a.shape.percent=0,Vd(a,{shape:{percent:1}},o,n),this.add(a),we(b0,function(f){var p=IA(f,r,n);this.add(p),this[AA(f)]=r.getItemVisual(n,f)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,u=this.childOfName("line"),a=r.getItemLayout(n),f={shape:{}};ex(f.shape,a),wu(u,f,o,n),we(b0,function(p){var v=r.getItemVisual(n,p),_=AA(p);if(this[_]!==v){this.remove(this.childOfName(p));var y=IA(p,r,n);this.add(y)}this[_]=v},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,u=this.childOfName("line"),a=i&&i.emphasisLineStyle,f=i&&i.blurLineStyle,p=i&&i.selectLineStyle,v=i&&i.labelStatesModels,_=i&&i.emphasisDisabled,y=i&&i.focus,S=i&&i.blurScope;if(!i||r.hasItemOption){var A=r.getItemModel(n),I=A.getModel("emphasis");a=I.getModel("lineStyle").getLineStyle(),f=A.getModel(["blur","lineStyle"]).getLineStyle(),p=A.getModel(["select","lineStyle"]).getLineStyle(),_=I.get("disabled"),y=I.get("focus"),S=I.get("blurScope"),v=Ig(A)}var M=r.getItemVisual(n,"style"),k=M.stroke;u.useStyle(M),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=a,u.ensureState("blur").style=f,u.ensureState("select").style=p,we(b0,function(Z){var ee=this.childOfName(Z);if(ee){ee.setColor(k),ee.style.opacity=M.opacity;for(var Y=0;Y<Io.length;Y++){var ae=Io[Y],le=u.getState(ae);if(le){var pe=le.style||{},ye=ee.ensureState(ae),ve=ye.style||(ye.style={});pe.stroke!=null&&(ve[ee.__isEmptyBrush?"stroke":"fill"]=pe.stroke),pe.opacity!=null&&(ve.opacity=pe.opacity)}}ee.markRedraw()}},this);var L=o.getRawValue(n);UD(this,v,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(Z,ee){return o.getFormattedLabel(Z,ee,r.dataType)}},inheritColor:k||"#000",defaultOpacity:M.opacity,defaultText:(L==null?r.getName(n):isFinite(L)?Bn(L):L)+""});var z=this.getTextContent();if(z){var V=v.normal;z.__align=z.style.align,z.__verticalAlign=z.style.verticalAlign,z.__position=V.get("position")||"middle";var H=V.get("distance");wt(H)||(H=[H,H]),z.__labelDistance=H}this.setTextConfig({position:null,local:!0,inside:!1}),ab(this,y,S,_)},t.prototype.highlight=function(){fd(this)},t.prototype.downplay=function(){dd(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");ex(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var u=1,a=this.parent;a;)a.scaleX&&(u/=a.scaleX),a=a.parent;var f=r.childOfName("line");if(!this.__dirty&&!f.__dirty)return;var p=f.shape.percent,v=f.pointAt(0),_=f.pointAt(p),y=rP([],_,v);Fx(y,y);function S(le,pe){var ye=le.__specifiedRotation;if(ye==null){var ve=f.tangentAt(pe);le.attr("rotation",(pe===1?-1:1)*Math.PI/2-Math.atan2(ve[1],ve[0]))}else le.attr("rotation",ye)}if(n&&(n.setPosition(v),S(n,0),n.scaleX=n.scaleY=u*p,n.markRedraw()),i&&(i.setPosition(_),S(i,1),i.scaleX=i.scaleY=u*p,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var A=void 0,I=void 0,M=o.__labelDistance,k=M[0]*u,L=M[1]*u,z=p/2,V=f.tangentAt(z),H=[V[1],-V[0]],Z=f.pointAt(z);H[1]>0&&(H[0]=-H[0],H[1]=-H[1]);var ee=V[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var Y=-Math.atan2(V[1],V[0]);_[0]<v[0]&&(Y=Math.PI+Y),o.rotation=Y}var ae=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":ae=-L,I="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":ae=L,I="top";break;default:ae=0,I="middle"}switch(o.__position){case"end":o.x=y[0]*k+_[0],o.y=y[1]*L+_[1],A=y[0]>.8?"left":y[0]<-.8?"right":"center",I=y[1]>.8?"top":y[1]<-.8?"bottom":"middle";break;case"start":o.x=-y[0]*k+v[0],o.y=-y[1]*L+v[1],A=y[0]>.8?"right":y[0]<-.8?"left":"center",I=y[1]>.8?"bottom":y[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=k*ee+v[0],o.y=v[1]+ae,A=V[0]<0?"right":"left",o.originX=-k*ee,o.originY=-ae;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=Z[0],o.y=Z[1]+ae,A="center",o.originY=-ae;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-k*ee+_[0],o.y=_[1]+ae,A=V[0]>=0?"right":"left",o.originX=k*ee,o.originY=-ae;break}o.scaleX=o.scaleY=u,o.setStyle({verticalAlign:o.__verticalAlign||I,align:o.__align||A})}},t}(ri);const Kb=RX;var zX=function(){function e(t){this.group=new ri,this._LineCtor=t||Kb}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var u=MA(t);t.diff(o).add(function(a){r._doAdd(t,a,u)}).update(function(a,f){r._doUpdate(o,t,f,a,u)}).remove(function(a){i.remove(o.getItemGraphicEl(a))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=MA(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(a){!a.isGroup&&!BX(a)&&(a.incremental=!0,a.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(w0(o)){var u=new this._LineCtor(r,i,this._seriesScope);u.traverse(n),this.group.add(u),r.setItemGraphicEl(i,u),this._progressiveEls.push(u)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){Cg(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(w0(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var u=t.getItemGraphicEl(n);if(!w0(r.getItemLayout(i))){this.group.remove(u);return}u?u.updateData(r,i,o):u=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,u),this.group.add(u)},e}();function BX(e){return e.animators&&e.animators.length>0}function MA(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:Ig(t)}}function PA(e){return isNaN(e[0])||isNaN(e[1])}function w0(e){return e&&!PA(e[0])&&!PA(e[1])}const FX=zX;var NX=function(e){mt(t,e);function t(r,n,i){var o=e.call(this)||this;return o.add(o.createLine(r,n,i)),o._updateEffectSymbol(r,n),o}return t.prototype.createLine=function(r,n,i){return new Kb(r,n,i)},t.prototype._updateEffectSymbol=function(r,n){var i=r.getItemModel(n),o=i.getModel("effect"),u=o.get("symbolSize"),a=o.get("symbol");wt(u)||(u=[u,u]);var f=r.getItemVisual(n,"style"),p=o.get("color")||f&&f.stroke,v=this.childAt(1);this._symbolType!==a&&(this.remove(v),v=rh(a,-.5,-.5,1,1,p),v.z2=100,v.culling=!0,this.add(v)),v&&(v.setStyle("shadowColor",p),v.setStyle(o.getItemStyle(["color"])),v.scaleX=u[0],v.scaleY=u[1],v.setColor(p),this._symbolType=a,this._symbolScale=u,this._updateEffectAnimation(r,o,n))},t.prototype._updateEffectAnimation=function(r,n,i){var o=this.childAt(1);if(o){var u=r.getItemLayout(i),a=n.get("period")*1e3,f=n.get("loop"),p=n.get("roundTrip"),v=n.get("constantSpeed"),_=Uc(n.get("delay"),function(S){return S/r.count()*a/3});if(o.ignore=!0,this._updateAnimationPoints(o,u),v>0&&(a=this._getLineLength(o)/v*1e3),a!==this._period||f!==this._loop||p!==this._roundTrip){o.stopAnimation();var y=void 0;Zt(_)?y=_(i):y=_,o.__t>0&&(y=-a*o.__t),this._animateSymbol(o,a,y,f,p)}this._period=a,this._loop=f,this._roundTrip=p}},t.prototype._animateSymbol=function(r,n,i,o,u){if(n>0){r.__t=0;var a=this,f=r.animate("",o).when(u?n*2:n,{__t:u?2:1}).delay(i).during(function(){a._updateSymbolPosition(r)});o||f.done(function(){a.remove(r)}),f.start()}},t.prototype._getLineLength=function(r){return Ec(r.__p1,r.__cp1)+Ec(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,n){r.__p1=n[0],r.__p2=n[1],r.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},t.prototype.updateData=function(r,n,i){this.childAt(0).updateData(r,n,i),this._updateEffectSymbol(r,n)},t.prototype._updateSymbolPosition=function(r){var n=r.__p1,i=r.__p2,o=r.__cp1,u=r.__t<1?r.__t:2-r.__t,a=[r.x,r.y],f=a.slice(),p=ei,v=l1;a[0]=p(n[0],o[0],i[0],u),a[1]=p(n[1],o[1],i[1],u);var _=r.__t<1?v(n[0],o[0],i[0],u):v(i[0],o[0],n[0],1-u),y=r.__t<1?v(n[1],o[1],i[1],u):v(i[1],o[1],n[1],1-u);r.rotation=-Math.atan2(y,_)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=Ec(f,a)*1.05,u===1&&(a[0]=f[0]+(a[0]-f[0])/2,a[1]=f[1]+(a[1]-f[1])/2)):r.__lastT===1?r.scaleY=2*Ec(n,a):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=a[0],r.y=a[1]},t.prototype.updateLayout=function(r,n){this.childAt(0).updateLayout(r,n);var i=r.getItemModel(n).getModel("effect");this._updateEffectAnimation(r,i,n)},t}(ri);const ik=NX;var VX=function(e){mt(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createPolyline(r,n,i),o}return t.prototype._createPolyline=function(r,n,i){var o=r.getItemLayout(n),u=new lb({shape:{points:o}});this.add(u),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,u=this.childAt(0),a={shape:{points:r.getItemLayout(n)}};wu(u,a,o,n),this._updateCommonStl(r,n,i)},t.prototype._updateCommonStl=function(r,n,i){var o=this.childAt(0),u=r.getItemModel(n),a=i&&i.emphasisLineStyle,f=i&&i.focus,p=i&&i.blurScope,v=i&&i.emphasisDisabled;if(!i||r.hasItemOption){var _=u.getModel("emphasis");a=_.getModel("lineStyle").getLineStyle(),v=_.get("disabled"),f=_.get("focus"),p=_.get("blurScope")}o.useStyle(r.getItemVisual(n,"style")),o.style.fill=null,o.style.strokeNoScale=!0;var y=o.ensureState("emphasis");y.style=a,ab(this,f,p,v)},t.prototype.updateLayout=function(r,n){var i=this.childAt(0);i.setShape("points",r.getItemLayout(n))},t}(ri);const ak=VX;var UX=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,n,i){return new ak(r,n,i)},t.prototype._updateAnimationPoints=function(r,n){this._points=n;for(var i=[0],o=0,u=1;u<n.length;u++){var a=n[u-1],f=n[u];o+=Ec(a,f),i.push(o)}if(o===0){this._length=0;return}for(var u=0;u<i.length;u++)i[u]/=o;this._offsets=i,this._length=o},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var n=r.__t<1?r.__t:2-r.__t,i=this._points,o=this._offsets,u=i.length;if(o){var a=this._lastFrame,f;if(n<this._lastFramePercent){var p=Math.min(a+1,u-1);for(f=p;f>=0&&!(o[f]<=n);f--);f=Math.min(f,u-2)}else{for(f=a;f<u&&!(o[f]>n);f++);f=Math.min(f-1,u-2)}var v=(n-o[f])/(o[f+1]-o[f]),_=i[f],y=i[f+1];r.x=_[0]*(1-v)+v*y[0],r.y=_[1]*(1-v)+v*y[1];var S=r.__t<1?y[0]-_[0]:_[0]-y[0],A=r.__t<1?y[1]-_[1]:_[1]-y[1];r.rotation=-Math.atan2(A,S)-Math.PI/2,this._lastFrame=f,this._lastFramePercent=n,r.ignore=!1}},t}(ik);const $X=UX;var jX=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),GX=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new jX},t.prototype.buildPath=function(r,n){var i=n.segs,o=n.curveness,u;if(n.polyline)for(u=this._off;u<i.length;){var a=i[u++];if(a>0){r.moveTo(i[u++],i[u++]);for(var f=1;f<a;f++)r.lineTo(i[u++],i[u++])}}else for(u=this._off;u<i.length;){var p=i[u++],v=i[u++],_=i[u++],y=i[u++];if(r.moveTo(p,v),o>0){var S=(p+_)/2-(v-y)*o,A=(v+y)/2-(_-p)*o;r.quadraticCurveTo(S,A,_,y)}else r.lineTo(_,y)}this.incremental&&(this._off=u,this.notClear=!0)},t.prototype.findDataIndex=function(r,n){var i=this.shape,o=i.segs,u=i.curveness,a=this.style.lineWidth;if(i.polyline)for(var f=0,p=0;p<o.length;){var v=o[p++];if(v>0)for(var _=o[p++],y=o[p++],S=1;S<v;S++){var A=o[p++],I=o[p++];if(qs(_,y,A,I,a,r,n))return f}f++}else for(var f=0,p=0;p<o.length;){var _=o[p++],y=o[p++],A=o[p++],I=o[p++];if(u>0){var M=(_+A)/2-(y-I)*u,k=(y+I)/2-(A-_)*u;if(ZP(_,y,M,k,A,I,a,r,n))return f}else if(qs(_,y,A,I,a,r,n))return f;f++}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var u=this.hoverDataIdx=this.findDataIndex(r,n);return u>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.segs,o=1/0,u=1/0,a=-1/0,f=-1/0,p=0;p<i.length;){var v=i[p++],_=i[p++];o=Math.min(v,o),a=Math.max(v,a),u=Math.min(_,u),f=Math.max(_,f)}r=this._rect=new Zr(o,u,a,f)}return r},t}(Vr),HX=function(){function e(){this.group=new ri}return e.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,r){var n=this._newAdded[0],i=r.getLayout("linesPoints"),o=n&&n.shape.segs;if(o&&o.length<2e4){var u=o.length,a=new Float32Array(u+i.length);a.set(o),a.set(i,u),n.setShape({segs:a})}else{this._newAdded=[];var f=this._create();f.incremental=!0,f.setShape({segs:i}),this._setCommon(f,r),f.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new GX({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var o=r.getVisual("style");o&&o.stroke&&t.setStyle("stroke",o.stroke),t.setStyle("fill",null);var u=nn(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(a){u.dataIndex=null;var f=t.hoverDataIdx;f>0&&(u.dataIndex=f+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const qX=HX;var WX={seriesType:"lines",plan:Mb(),reset:function(e){var t=e.coordinateSystem;if(t){var r=e.get("polyline"),n=e.pipelineContext.large;return{progress:function(i,o){var u=[];if(n){var a=void 0,f=i.end-i.start;if(r){for(var p=0,v=i.start;v<i.end;v++)p+=e.getLineCoordsCount(v);a=new Float32Array(f+p*2)}else a=new Float32Array(f*4);for(var _=0,y=[],v=i.start;v<i.end;v++){var S=e.getLineCoords(v,u);r&&(a[_++]=S);for(var A=0;A<S;A++)y=t.dataToPoint(u[A],!1,y),a[_++]=y[0],a[_++]=y[1]}o.setLayout("linesPoints",a)}else for(var v=i.start;v<i.end;v++){var I=o.getItemModel(v),S=e.getLineCoords(v,u),M=[];if(r)for(var k=0;k<S;k++)M.push(t.dataToPoint(u[k]));else{M[0]=t.dataToPoint(u[0]),M[1]=t.dataToPoint(u[1]);var L=I.get(["lineStyle","curveness"]);+L&&(M[2]=[(M[0][0]+M[1][0])/2-(M[0][1]-M[1][1])*L,(M[0][1]+M[1][1])/2-(M[1][0]-M[0][0])*L])}o.setItemLayout(v,M)}}}}}};const ok=WX;var ZX=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),u=this._updateLineDraw(o,r),a=r.get("zlevel"),f=r.get(["effect","trailLength"]),p=i.getZr(),v=p.painter.getType()==="svg";v||p.painter.getLayer(a).clear(!0),this._lastZlevel!=null&&!v&&p.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&f>0&&(v||p.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(f/10+.9,1),0)})),u.updateData(o);var _=r.get("clip",!0)&&VZ(r.coordinateSystem,!1,r);_?this.group.setClipPath(_):this.group.removeClipPath(),this._lastZlevel=a,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),u=this._updateLineDraw(o,r);u.incrementalPrepareUpdate(o),this._clearLayer(i),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._lineDraw.incrementalUpdate(r,n.getData()),this._finished=r.end===n.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,n,i){var o=r.getData(),u=r.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var a=ok.reset(r,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._lineDraw.updateLayout(),this._clearLayer(i)},t.prototype._updateLineDraw=function(r,n){var i=this._lineDraw,o=this._showEffect(n),u=!!n.get("polyline"),a=n.pipelineContext,f=a.large;return(!i||o!==this._hasEffet||u!==this._isPolyline||f!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=f?new qX:new FX(u?o?$X:ak:o?ik:Kb),this._hasEffet=o,this._isPolyline=u,this._isLargeDraw=f),this.group.add(i.group),i},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var n=r.getZr(),i=n.painter.getType()==="svg";!i&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},t.prototype.dispose=function(r,n){this.remove(r,n)},t.type="lines",t}(pu);const XX=ZX;var YX=typeof Uint32Array>"u"?Array:Uint32Array,KX=typeof Float64Array>"u"?Array:Float64Array;function DA(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=Bt(t,function(r){var n=[r[0].coord,r[1].coord],i={coords:n};return r[0].name&&(i.fromName=r[0].name),r[1].name&&(i.toName=r[1].name),AN([i,r[0],r[1]])}))}var JX=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],DA(r);var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(DA(r),r.data){var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var n=this._processFlatCoordsArray(r.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=r1(this._flatCoords,n.flatCoords),this._flatCoordsOffset=r1(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),r.data=new Float32Array(n.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var n=this.getData().getItemModel(r),i=n.option instanceof Array?n.option:n.getShallow("coords");return i},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,n){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[r*2],o=this._flatCoordsOffset[r*2+1],u=0;u<o;u++)n[u]=n[u]||[],n[u][0]=this._flatCoords[i+u*2],n[u][1]=this._flatCoords[i+u*2+1];return o}else{for(var a=this._getCoordsFromItemModel(r),u=0;u<a.length;u++)n[u]=n[u]||[],n[u][0]=a[u][0],n[u][1]=a[u][1];return a.length}},t.prototype._processFlatCoordsArray=function(r){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),gn(r[0])){for(var i=r.length,o=new YX(i),u=new KX(i),a=0,f=0,p=0,v=0;v<i;){p++;var _=r[v++];o[f++]=a+n,o[f++]=_;for(var y=0;y<_;y++){var S=r[v++],A=r[v++];u[a++]=S,u[a++]=A}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,f),flatCoords:u,count:p}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,n){var i=new Nb(["value"],this);return i.hasItemOption=!1,i.initData(r.data,[],function(o,u,a,f){if(o instanceof Array)return NaN;i.hasItemOption=!0;var p=o.value;if(p!=null)return p instanceof Array?p[f]:p}),i},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),u=o.getItemModel(r),a=u.get("name");if(a)return a;var f=u.get("fromName"),p=u.get("toName"),v=[];return f!=null&&v.push(f),p!=null&&v.push(p),nl("nameValue",{name:v.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),n=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&n>0?n+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(Hc);const QX=JX;function jm(e){return e instanceof Array||(e=[e,e]),e}var eY={seriesType:"lines",reset:function(e){var t=jm(e.get("symbol")),r=jm(e.get("symbolSize")),n=e.getData();n.setVisual("fromSymbol",t&&t[0]),n.setVisual("toSymbol",t&&t[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]);function i(o,u){var a=o.getItemModel(u),f=jm(a.getShallow("symbol",!0)),p=jm(a.getShallow("symbolSize",!0));f[0]&&o.setItemVisual(u,"fromSymbol",f[0]),f[1]&&o.setItemVisual(u,"toSymbol",f[1]),p[0]&&o.setItemVisual(u,"fromSymbolSize",p[0]),p[1]&&o.setItemVisual(u,"toSymbolSize",p[1])}return{dataEach:n.hasItemOption?i:null}}};const tY=eY;function rY(e){e.registerChartView(XX),e.registerSeriesModel(QX),e.registerLayout(ok),e.registerVisual(tY)}var lu=En(),kA=mr,S0=vn,nY=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),u=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===u)){this._lastValue=o,this._lastStatus=u;var a=this._group,f=this._handle;if(!u||u==="hide"){a&&a.hide(),f&&f.hide();return}a&&a.show(),f&&f.show();var p={};this.makeElOption(p,o,t,r,n);var v=p.graphicKey;v!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=v;var _=this._moveAnimation=this.determineAnimation(t,r);if(!a)a=this._group=new ri,this.createPointerEl(a,p,t,r),this.createLabelEl(a,p,t,r),n.getZr().add(a);else{var y=Wn(LA,r,_);this.updatePointerEl(a,p,y),this.updateLabelEl(a,p,y,r)}RA(a,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",u=r.get("snap");if(!u&&!o)return!1;if(n==="auto"||n==null){var a=this.animationThreshold;if(o&&i.getBandWidth()>a)return!0;if(u){var f=Yb(t).seriesDataCount,p=i.getExtent();return Math.abs(p[0]-p[1])/f>a}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var u=lu(t).pointerEl=new U$[o.type](kA(r.pointer));t.add(u)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=lu(t).labelEl=new Ya(kA(r.label));t.add(o),OA(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=lu(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=lu(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),OA(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),u=r.get("status");if(!o.get("show")||!u||u==="hide"){i&&n.remove(i),this._handle=null;return}var a;this._handle||(a=!0,i=this._handle=FD(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(p){iP(p.event)},onmousedown:S0(this._onHandleDragMove,this,0,0),drift:S0(this._onHandleDragMove,this),ondragend:S0(this._onHandleDragEnd,this)}),n.add(i)),RA(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var f=o.get("size");wt(f)||(f=[f,f]),i.scaleX=f[0]/2,i.scaleY=f[1]/2,k5(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,a)}},e.prototype._moveHandleToValue=function(t,r){LA(this._axisPointerModel,!r&&this._moveAnimation,this._handle,T0(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(T0(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(T0(i)),lu(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),R1(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function LA(e,t,r,n){sk(lu(r).lastProp,n)||(lu(r).lastProp=n,t?wu(r,n,e):(r.stopAnimation(),r.attr(n)))}function sk(e,t){if(Vt(e)&&Vt(t)){var r=!0;return we(t,function(n,i){r=r&&sk(e[i],n)}),!!r}else return e===t}function OA(e,t){e[t.get(["label","show"])?"show":"hide"]()}function T0(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function RA(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const iY=nY;function aY(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function oY(e,t,r,n,i){var o=r.get("value"),u=lk(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),a=r.getModel("label"),f=yb(a.get("padding")||0),p=a.getFont(),v=Wx(u,p),_=i.position,y=v.width+f[1]+f[3],S=v.height+f[0]+f[2],A=i.align;A==="right"&&(_[0]-=y),A==="center"&&(_[0]-=y/2);var I=i.verticalAlign;I==="bottom"&&(_[1]-=S),I==="middle"&&(_[1]-=S/2),sY(_,y,S,n);var M=a.get("backgroundColor");(!M||M==="auto")&&(M=t.get(["axisLine","lineStyle","color"])),e.label={x:_[0],y:_[1],style:xu(a,{text:u,font:p,fill:a.getTextColor(),padding:f,backgroundColor:M}),z2:10}}function sY(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function lk(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),u=i.formatter;if(u){var a={value:Ub(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};we(n,function(f){var p=r.getSeriesByIndex(f.seriesIndex),v=f.dataIndexInside,_=p&&p.getDataParams(v);_&&a.seriesData.push(_)}),Rt(u)?o=u.replace("{value}",o):Zt(u)&&(o=u(a))}return o}function uk(e,t,r){var n=sd();return Ux(n,n,r.rotation),s1(n,n,r.position),db([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function lY(e,t,r,n,i,o){var u=J3.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),oY(t,n,i,o,{position:uk(n.axis,e,r),align:u.textAlign,verticalAlign:u.textVerticalAlign})}function uY(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function cY(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var hY=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,u){var a=i.axis,f=a.grid,p=o.get("type"),v=zA(f,a).getOtherAxis(a).getGlobalExtent(),_=a.toGlobalCoord(a.dataToCoord(n,!0));if(p&&p!=="none"){var y=aY(o),S=fY[p](a,_,v);S.style=y,r.graphicKey=S.type,r.pointer=S}var A=K1(f.model,i);lY(n,r,A,i,o,u)},t.prototype.getHandleTransform=function(r,n,i){var o=K1(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var u=uk(n.axis,r,o);return{x:u[0],y:u[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var u=i.axis,a=u.grid,f=u.getGlobalExtent(!0),p=zA(a,u).getOtherAxis(u).getGlobalExtent(),v=u.dim==="x"?0:1,_=[r.x,r.y];_[v]+=n[v],_[v]=Math.min(f[1],_[v]),_[v]=Math.max(f[0],_[v]);var y=(p[1]+p[0])/2,S=[y,y];S[v]=_[v];var A=[{verticalAlign:"middle"},{align:"center"}];return{x:_[0],y:_[1],rotation:r.rotation,cursorPoint:S,tooltipOption:A[v]}},t}(iY);function zA(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var fY={line:function(e,t,r){var n=uY([t,r[0]],[t,r[1]],BA(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:cY([t-n/2,r[0]],[n,i],BA(e))}}};function BA(e){return e.dim==="x"?0:1}const dY=hY;var pY=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(ln);const mY=pY;var ts=En(),vY=we;function ck(e,t,r){if(!ar.node){var n=t.getZr();ts(n).records||(ts(n).records={}),gY(n,t);var i=ts(n).records[e]||(ts(n).records[e]={});i.handler=r}}function gY(e,t){if(ts(e).initialized)return;ts(e).initialized=!0,r("click",Wn(FA,"click")),r("mousemove",Wn(FA,"mousemove")),r("globalout",yY);function r(n,i){e.on(n,function(o){var u=xY(t);vY(ts(e).records,function(a){a&&i(a,o,u.dispatchAction)}),_Y(u.pendings,t)})}}function _Y(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function yY(e,t,r){e.handler("leave",null,r)}function FA(e,t,r,n){t.handler(e,r,n)}function xY(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function tx(e,t){if(!ar.node){var r=t.getZr(),n=(ts(r).records||{})[e];n&&(ts(r).records[e]=null)}}var bY=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),u=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";ck("axisPointer",i,function(a,f,p){u!=="none"&&(a==="leave"||u.indexOf(a)>=0)&&p({type:"updateAxisPointer",currTrigger:a,x:f&&f.offsetX,y:f&&f.offsetY})})},t.prototype.remove=function(r,n){tx("axisPointer",n)},t.prototype.dispose=function(r,n){tx("axisPointer",n)},t.type="axisPointer",t}(ls);const wY=bY;function hk(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),u=Bd(o,e);if(u==null||u<0||wt(u))return{point:[]};var a=o.getItemGraphicEl(u),f=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(u)||[];else if(f&&f.dataToPoint)if(e.isStacked){var p=f.getBaseAxis(),v=f.getOtherAxis(p),_=v.dim,y=p.dim,S=_==="x"||_==="radius"?1:0,A=o.mapDimension(y),I=[];I[S]=o.get(A,u),I[1-S]=o.get(o.getCalculationInfo("stackResultDimension"),u),r=f.dataToPoint(I)||[]}else r=f.dataToPoint(o.getValues(Bt(f.dimensions,function(k){return o.mapDimension(k)}),u))||[];else if(a){var M=a.getBoundingRect().clone();M.applyTransform(a.transform),r=[M.x+M.width/2,M.y+M.height/2]}return{point:r,el:a}}var NA=En();function SY(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,u=e.dispatchAction||vn(r.dispatchAction,r),a=t.getComponent("axisPointer").coordSysAxesInfo;if(a){yv(i)&&(i=hk({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var f=yv(i),p=o.axesInfo,v=a.axesInfo,_=n==="leave"||yv(i),y={},S={},A={list:[],map:{}},I={showPointer:Wn(EY,S),showTooltip:Wn(CY,A)};we(a.coordSysMap,function(k,L){var z=f||k.containPoint(i);we(a.coordSysAxesInfo[L],function(V,H){var Z=V.axis,ee=PY(p,V);if(!_&&z&&(!p||ee)){var Y=ee&&ee.value;Y==null&&!f&&(Y=Z.pointToData(i)),Y!=null&&VA(V,Y,I,!1,y)}})});var M={};return we(v,function(k,L){var z=k.linkGroup;z&&!S[L]&&we(z.axesInfo,function(V,H){var Z=S[H];if(V!==k&&Z){var ee=Z.value;z.mapper&&(ee=k.axis.scale.parse(z.mapper(ee,UA(V),UA(k)))),M[k.key]=ee}})}),we(M,function(k,L){VA(v[L],k,I,!0,y)}),AY(S,v,y),IY(A,i,e,u),MY(v,u,r),y}}function VA(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var u=TY(t,e),a=u.payloadBatch,f=u.snapToValue;a[0]&&i.seriesIndex==null&&lt(i,a[0]),!n&&e.snap&&o.containData(f)&&f!=null&&(t=f),r.showPointer(e,t,a),r.showTooltip(e,u,f)}}function TY(e,t){var r=t.axis,n=r.dim,i=e,o=[],u=Number.MAX_VALUE,a=-1;return we(t.seriesModels,function(f,p){var v=f.getData().mapDimensionsAll(n),_,y;if(f.getAxisTooltipData){var S=f.getAxisTooltipData(v,e,r);y=S.dataIndices,_=S.nestestValue}else{if(y=f.getData().indicesOfNearest(v[0],e,r.type==="category"?.5:null),!y.length)return;_=f.getData().get(v[0],y[0])}if(!(_==null||!isFinite(_))){var A=e-_,I=Math.abs(A);I<=u&&((I<u||A>=0&&a<0)&&(u=I,a=A,i=_,o.length=0),we(y,function(M){o.push({seriesIndex:f.seriesIndex,dataIndexInside:M,dataIndex:f.getData().getRawIndex(M)})}))}}),{payloadBatch:o,snapToValue:i}}function EY(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function CY(e,t,r,n){var i=r.payloadBatch,o=t.axis,u=o.model,a=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var f=t.coordSys.model,p=Cd(f),v=e.map[p];v||(v=e.map[p]={coordSysId:f.id,coordSysIndex:f.componentIndex,coordSysType:f.type,coordSysMainType:f.mainType,dataByAxis:[]},e.list.push(v)),v.dataByAxis.push({axisDim:o.dim,axisIndex:u.componentIndex,axisType:u.type,axisId:u.id,value:n,valueLabelOpt:{precision:a.get(["label","precision"]),formatter:a.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function AY(e,t,r){var n=r.axesInfo=[];we(t,function(i,o){var u=i.axisPointerModel.option,a=e[o];a?(!i.useHandle&&(u.status="show"),u.value=a.value,u.seriesDataIndices=(a.payloadBatch||[]).slice()):!i.useHandle&&(u.status="hide"),u.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:u.value})})}function IY(e,t,r,n){if(yv(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function MY(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=NA(n)[i]||{},u=NA(n)[i]={};we(e,function(p,v){var _=p.axisPointerModel.option;_.status==="show"&&we(_.seriesDataIndices,function(y){var S=y.seriesIndex+" | "+y.dataIndex;u[S]=y})});var a=[],f=[];we(o,function(p,v){!u[v]&&f.push(p)}),we(u,function(p,v){!o[v]&&a.push(p)}),f.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:f}),a.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:a})}function PY(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function UA(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function yv(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function fk(e){Q3.registerAxisPointerClass("CartesianAxisPointer",dY),e.registerComponentModel(mY),e.registerComponentView(wY),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!wt(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=vX(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},SY)}function DY(e){qc(rk),qc(fk)}var kY=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(ln);const LY=kY;function dk(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function pk(e){if(ar.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var mk=pk(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),OY=pk(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function vk(e,t){if(!e)return t;t=t5(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function RY(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var zY=vk(OY,"transition"),Jb=vk(mk,"transform"),BY="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(ar.transform3dSupported?"will-change:transform;":"");function FY(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function NY(e,t,r){if(!Rt(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=gd(t);var o=FY(r),u=Math.max(Math.round(i)*1.5,6),a="",f=Jb+":",p;qr(["left","right"],o)>-1?(a+="top:50%",f+="translateY(-50%) rotate("+(p=o==="left"?-225:-45)+"deg)"):(a+="left:50%",f+="translateX(-50%) rotate("+(p=o==="top"?225:45)+"deg)");var v=p*Math.PI/180,_=u+i,y=_*Math.abs(Math.cos(v))+_*Math.abs(Math.sin(v)),S=Math.round(((y-Math.SQRT2*i)/2+Math.SQRT2*i-(y-_)/2)*100)/100;a+=";"+o+":-"+S+"px";var A=t+" solid "+i+"px;",I=["position:absolute;width:"+u+"px;height:"+u+"px;z-index:-1;",a+";"+f+";","border-bottom:"+A,"border-right:"+A,"background-color:"+n+";"];return'<div style="'+I.join("")+'"></div>'}function VY(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=ar.transformSupported?","+Jb+n:",left"+n+",top"+n),zY+":"+i}function $A(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!ar.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=ar.transform3dSupported,u="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+Jb+":"+u+";":[["top",0],["left",0],[mk,u]]}function UY(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,u=e.get("textShadowOffsetX")||0,a=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+u+"px "+a+"px "+o+"px "+i),we(["decoration","align"],function(f){var p=e.get(f);p&&t.push("text-"+f+":"+p)}),t.join(";")}function $Y(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),u=e.get("shadowBlur"),a=e.get("shadowColor"),f=e.get("shadowOffsetX"),p=e.get("shadowOffsetY"),v=e.getModel("textStyle"),_=P5(e,"html"),y=f+"px "+p+"px "+u+"px "+a;return n.push("box-shadow:"+y),t&&i&&n.push(VY(i,r)),o&&n.push("background-color:"+o),we(["width","color","radius"],function(S){var A="border-"+S,I=t5(A),M=e.get(I);M!=null&&n.push(A+":"+M+(S==="color"?"":"px"))}),n.push(UY(v)),_!=null&&n.push("padding:"+yb(_).join("px ")+"px"),n.join(";")+";"}function jA(e,t,r,n,i){var o=t&&t.painter;if(r){var u=o&&o.getViewportRoot();u&&UN(e,u,document.body,n,i)}else{e[0]=n,e[1]=i;var a=o&&o.getViewportRootOffset();a&&(e[0]+=a.offsetLeft,e[1]+=a.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var jY=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,ar.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),u=this._appendToBody=n&&n.appendToBody;jA(this._styleCoord,o,u,r.getWidth()/2,r.getHeight()/2),u?document.body.appendChild(i):t.appendChild(i),this._container=t;var a=this;i.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},i.onmousemove=function(f){if(f=f||window.event,!a._enterable){var p=o.handler,v=o.painter.getViewportRoot();ba(v,f,!0),p.dispatch("mousemove",f)}},i.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=RY(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=BY+$Y(t,!this._firstShow,this._longHide)+$A(o[0],o[1],!0)+("border-color:"+gd(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var u=this.el;if(t==null){u.innerHTML="";return}var a="";if(Rt(o)&&n.get("trigger")==="item"&&!dk(n)&&(a=NY(n,i,o)),Rt(t))u.innerHTML=t+a;else if(t){u.innerHTML="",wt(t)||(t=[t]);for(var f=0;f<t.length;f++)zv(t[f])&&t[f].parentNode!==u&&u.appendChild(t[f]);if(a&&u.childNodes.length){var p=document.createElement("div");p.innerHTML=a,u.appendChild(p)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(jA(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=$A(n[0],n[1]);we(o,function(u){i[u[0]]=u[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",ar.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(vn(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const GY=jY;var HY=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),HA(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var u=this;Vt(t)&&Gi(""),this.el&&this._zr.remove(this.el);var a=n.getModel("textStyle");this.el=new Ya({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:a.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:P5(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),we(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(p){u.el.style[p]=n.get(p)}),we(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(p){u.el.style[p]=a.get(p)||0}),this._zr.add(this.el);var f=this;this.el.on("mouseover",function(){f._enterable&&(clearTimeout(f._hideTimeout),f._show=!0),f._inContent=!0}),this.el.on("mouseout",function(){f._enterable&&f._show&&f.hideLater(f._hideDelay),f._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=GA(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;HA(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,u=Gs(o.borderWidth||0),a=GA(o);n.x=t+u+a.left,n.y=r+u+a.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(vn(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function Gs(e){return Math.max(0,e)}function GA(e){var t=Gs(e.shadowBlur||0),r=Gs(e.shadowOffsetX||0),n=Gs(e.shadowOffsetY||0);return{left:Gs(t-r),right:Gs(t+r),top:Gs(t-n),bottom:Gs(t+n)}}function HA(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const qY=HY;var WY=new qi({shape:{x:-1,y:-1,width:2,height:2}}),ZY=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(ar.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=TV(i.get("renderMode"));this._tooltipContent=o==="richText"?new qY(n):new GY(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(ar.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?k5(this,"_updatePosition",50,"fixRate"):R1(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");ck("itemTooltip",this._api,vn(function(i,o,u){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,u):i==="leave"&&this._hide(u))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var u=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&u.manuallyShowTip(r,n,i,{x:u._lastX,y:u._lastY,dataByCoordSys:u._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||ar.node||!i.getDom())){var u=qA(o,i);this._ticket="";var a=o.dataByCoordSys,f=JY(o,n,i);if(f){var p=f.el.getBoundingRect().clone();p.applyTransform(f.el.transform),this._tryShow({offsetX:p.x+p.width/2,offsetY:p.y+p.height/2,target:f.el,position:o.position,positionDefault:"bottom"},u)}else if(o.tooltip&&o.x!=null&&o.y!=null){var v=WY;v.x=o.x,v.y=o.y,v.update(),nn(v).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:v},u)}else if(a)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:a,tooltipOption:o.tooltipOption},u);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var _=hk(o,n),y=_.point[0],S=_.point[1];y!=null&&S!=null&&this._tryShow({offsetX:y,offsetY:S,target:_.el,position:o.position,positionDefault:"bottom"},u)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},u))}},t.prototype.manuallyHideTip=function(r,n,i,o){var u=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(qA(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var u=o.seriesIndex,a=o.dataIndex,f=n.getComponent("axisPointer").coordSysAxesInfo;if(!(u==null||a==null||f==null)){var p=n.getSeriesByIndex(u);if(p){var v=p.getData(),_=Af([v.getItemModel(a),p,(p.coordinateSystem||{}).model],this._tooltipModel);if(_.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:a,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(o){this._lastX=r.offsetX,this._lastY=r.offsetY;var u=r.dataByCoordSys;if(u&&u.length)this._showAxisTooltip(u,r);else if(i){this._lastDataByCoordSys=null;var a,f;zf(i,function(p){if(nn(p).dataIndex!=null)return a=p,!0;if(nn(p).tooltipConfig!=null)return f=p,!0},!0),a?this._showSeriesItemTooltip(r,a,n):f?this._showComponentItemTooltip(r,f,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=vn(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,u=[n.offsetX,n.offsetY],a=Af([n.tooltipOption],o),f=this._renderMode,p=[],v=nl("section",{blocks:[],noHeader:!0}),_=[],y=new Ky;we(r,function(L){we(L.dataByAxis,function(z){var V=i.getComponent(z.axisDim+"Axis",z.axisIndex),H=z.value;if(!(!V||H==null)){var Z=lk(H,V.axis,i,z.seriesDataIndices,z.valueLabelOpt),ee=nl("section",{header:Z,noHeader:!So(Z),sortBlocks:!0,blocks:[]});v.blocks.push(ee),we(z.seriesDataIndices,function(Y){var ae=i.getSeriesByIndex(Y.seriesIndex),le=Y.dataIndexInside,pe=ae.getDataParams(le);if(!(pe.dataIndex<0)){pe.axisDim=z.axisDim,pe.axisIndex=z.axisIndex,pe.axisType=z.axisType,pe.axisId=z.axisId,pe.axisValue=Ub(V.axis,{value:H}),pe.axisValueLabel=Z,pe.marker=y.makeTooltipMarker("item",gd(pe.color),f);var ye=eC(ae.formatTooltip(le,!0,null)),ve=ye.frag;if(ve){var Pe=Af([ae],o).get("valueFormatter");ee.blocks.push(Pe?lt({valueFormatter:Pe},ve):ve)}ye.text&&_.push(ye.text),p.push(pe)}})}})}),v.blocks.reverse(),_.reverse();var S=n.position,A=a.get("order"),I=aC(v,y,f,A,i.get("useUTC"),a.get("textStyle"));I&&_.unshift(I);var M=f==="richText"?`

`:"<br/>",k=_.join(M);this._showOrMove(a,function(){this._updateContentNotChangedOnAxis(r,p)?this._updatePosition(a,S,u[0],u[1],this._tooltipContent,p):this._showTooltipContent(a,k,p,Math.random()+"",u[0],u[1],S,null,y)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,u=nn(n),a=u.seriesIndex,f=o.getSeriesByIndex(a),p=u.dataModel||f,v=u.dataIndex,_=u.dataType,y=p.getData(_),S=this._renderMode,A=r.positionDefault,I=Af([y.getItemModel(v),p,f&&(f.coordinateSystem||{}).model],this._tooltipModel,A?{position:A}:null),M=I.get("trigger");if(!(M!=null&&M!=="item")){var k=p.getDataParams(v,_),L=new Ky;k.marker=L.makeTooltipMarker("item",gd(k.color),S);var z=eC(p.formatTooltip(v,!1,_)),V=I.get("order"),H=I.get("valueFormatter"),Z=z.frag,ee=Z?aC(H?lt({valueFormatter:H},Z):Z,L,S,V,o.get("useUTC"),I.get("textStyle")):z.text,Y="item_"+p.name+"_"+v;this._showOrMove(I,function(){this._showTooltipContent(I,ee,k,Y,r.offsetX,r.offsetY,r.position,r.target,L)}),i({type:"showTip",dataIndexInside:v,dataIndex:y.getRawIndex(v),seriesIndex:a,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=nn(n),u=o.tooltipConfig,a=u.option||{};if(Rt(a)){var f=a;a={content:f,formatter:f}}var p=[a],v=this._ecModel.getComponent(o.componentMainType,o.componentIndex);v&&p.push(v),p.push({formatter:a.content});var _=r.positionDefault,y=Af(p,this._tooltipModel,_?{position:_}:null),S=y.get("content"),A=Math.random()+"",I=new Ky;this._showOrMove(y,function(){var M=mr(y.get("formatterParams")||{});this._showTooltipContent(y,S,M,A,r.offsetX,r.offsetY,r.position,n,I)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,u,a,f,p,v){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var _=this._tooltipContent;_.setEnterable(r.get("enterable"));var y=r.get("formatter");f=f||r.get("position");var S=n,A=this._getNearestPoint([u,a],i,r.get("trigger"),r.get("borderColor")),I=A.color;if(y)if(Rt(y)){var M=r.ecModel.get("useUTC"),k=wt(i)?i[0]:i,L=k&&k.axisType&&k.axisType.indexOf("time")>=0;S=y,L&&(S=Pg(k.axisValue,S,M)),S=r5(S,i,!0)}else if(Zt(y)){var z=vn(function(V,H){V===this._ticket&&(_.setContent(H,v,r,I,f),this._updatePosition(r,f,u,a,_,i,p))},this);this._ticket=o,S=y(i,o,z)}else S=y;_.setContent(S,v,r,I,f),_.show(r,I),this._updatePosition(r,f,u,a,_,i,p)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||wt(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!wt(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,u,a,f){var p=this._api.getWidth(),v=this._api.getHeight();n=n||r.get("position");var _=u.getSize(),y=r.get("align"),S=r.get("verticalAlign"),A=f&&f.getBoundingRect().clone();if(f&&A.applyTransform(f.transform),Zt(n)&&(n=n([i,o],a,u.el,A,{viewSize:[p,v],contentSize:_.slice()})),wt(n))i=ti(n[0],p),o=ti(n[1],v);else if(Vt(n)){var I=n;I.width=_[0],I.height=_[1];var M=xb(I,{width:p,height:v});i=M.x,o=M.y,y=null,S=null}else if(Rt(n)&&f){var k=KY(n,A,_,r.get("borderWidth"));i=k[0],o=k[1]}else{var k=XY(i,o,u,p,v,y?null:20,S?null:20);i=k[0],o=k[1]}if(y&&(i-=WA(y)?_[0]/2:y==="right"?_[0]:0),S&&(o-=WA(S)?_[1]/2:S==="bottom"?_[1]:0),dk(r)){var k=YY(i,o,u,p,v);i=k[0],o=k[1]}u.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,u=!!i&&i.length===r.length;return u&&we(i,function(a,f){var p=a.dataByAxis||[],v=r[f]||{},_=v.dataByAxis||[];u=u&&p.length===_.length,u&&we(p,function(y,S){var A=_[S]||{},I=y.seriesDataIndices||[],M=A.seriesDataIndices||[];u=u&&y.value===A.value&&y.axisType===A.axisType&&y.axisId===A.axisId&&I.length===M.length,u&&we(I,function(k,L){var z=M[L];u=u&&k.seriesIndex===z.seriesIndex&&k.dataIndex===z.dataIndex}),o&&we(y.seriesDataIndices,function(k){var L=k.seriesIndex,z=n[L],V=o[L];z&&V&&V.data!==z.data&&(u=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!u},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){ar.node||!n.getDom()||(R1(this,"_updatePosition"),this._tooltipContent.dispose(),tx("itemTooltip",n))},t.type="tooltip",t}(ls);function Af(e,t,r){var n=t.ecModel,i;r?(i=new Pi(r,n,n),i=new Pi(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var u=e[o];u&&(u instanceof Pi&&(u=u.get("tooltip",!0)),Rt(u)&&(u={formatter:u}),u&&(i=new Pi(u,i,n)))}return i}function qA(e,t){return e.dispatchAction||vn(t.dispatchAction,t)}function XY(e,t,r,n,i,o,u){var a=r.getSize(),f=a[0],p=a[1];return o!=null&&(e+f+o+2>n?e-=f+o:e+=o),u!=null&&(t+p+u>i?t-=p+u:t+=u),[e,t]}function YY(e,t,r,n,i){var o=r.getSize(),u=o[0],a=o[1];return e=Math.min(e+u,n)-u,t=Math.min(t+a,i)-a,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function KY(e,t,r,n){var i=r[0],o=r[1],u=Math.ceil(Math.SQRT2*n)+8,a=0,f=0,p=t.width,v=t.height;switch(e){case"inside":a=t.x+p/2-i/2,f=t.y+v/2-o/2;break;case"top":a=t.x+p/2-i/2,f=t.y-o-u;break;case"bottom":a=t.x+p/2-i/2,f=t.y+v+u;break;case"left":a=t.x-i-u,f=t.y+v/2-o/2;break;case"right":a=t.x+p+u,f=t.y+v/2-o/2}return[a,f]}function WA(e){return e==="center"||e==="middle"}function JY(e,t,r){var n=Yx(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=Fd(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),u=o.models[0];if(u){var a=r.getViewOfComponentModel(u),f;if(a.group.traverse(function(p){var v=nn(p).tooltipConfig;if(v&&v.name===e.name)return f=p,!0}),f)return{componentMainType:i,componentIndex:u.componentIndex,el:f}}}}const QY=ZY;function eK(e){qc(fk),e.registerComponentModel(LY),e.registerComponentView(QY),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ki),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ki)}var tK=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(ln),rK=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,u=r.getModel("textStyle"),a=r.getModel("subtextStyle"),f=r.get("textAlign"),p=or(r.get("textBaseline"),r.get("textVerticalAlign")),v=new Ya({style:xu(u,{text:r.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),_=v.getBoundingRect(),y=r.get("subtext"),S=new Ya({style:xu(a,{text:y,fill:a.getTextColor(),y:_.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),A=r.get("link"),I=r.get("sublink"),M=r.get("triggerEvent",!0);v.silent=!A&&!M,S.silent=!I&&!M,A&&v.on("click",function(){zE(A,"_"+r.get("target"))}),I&&S.on("click",function(){zE(I,"_"+r.get("subtarget"))}),nn(v).eventData=nn(S).eventData=M?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(v),y&&o.add(S);var k=o.getBoundingRect(),L=r.getBoxLayoutParams();L.width=k.width,L.height=k.height;var z=xb(L,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));f||(f=r.get("left")||r.get("right"),f==="middle"&&(f="center"),f==="right"?z.x+=z.width:f==="center"&&(z.x+=z.width/2)),p||(p=r.get("top")||r.get("bottom"),p==="center"&&(p="middle"),p==="bottom"?z.y+=z.height:p==="middle"&&(z.y+=z.height/2),p=p||"top"),o.x=z.x,o.y=z.y,o.markRedraw();var V={align:f,verticalAlign:p};v.setStyle(V),S.setStyle(V),k=o.getBoundingRect();var H=z.margin,Z=r.getItemStyle(["color","opacity"]);Z.fill=r.get("backgroundColor");var ee=new qi({shape:{x:k.x-H[3],y:k.y-H[0],width:k.width+H[1]+H[3],height:k.height+H[0]+H[2],r:r.get("borderRadius")},style:Z,subPixelOptimize:!0,silent:!0});o.add(ee)}},t.type="title",t}(ls);function nK(e){e.registerComponentModel(tK),e.registerComponentView(rK)}function iK(e,t){if(!e)return!1;for(var r=wt(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function Gm(e){y1(e,"label",["show"])}var Hm=En(),gk=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(ar.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var u=this.mainType;i||n.eachSeries(function(a){var f=a.get(this.mainType,!0),p=Hm(a)[u];if(!f||!f.data){Hm(a)[u]=null;return}p?p._mergeOption(f,n,!0):(o&&Gm(f),we(f.data,function(v){v instanceof Array?(Gm(v[0]),Gm(v[1])):Gm(v)}),p=this.createMarkerModelFromSeries(f,this,n),lt(p,{mainType:this.mainType,seriesIndex:a.seriesIndex,name:a.name,createdBySelf:!0}),p.__hostSeries=a),Hm(a)[u]=p},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),u=this.getRawValue(r),a=o.getName(r);return nl("section",{header:this.name,blocks:[nl("nameValue",{name:a,value:u,noName:!a,noValue:u==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return Hm(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(ln);Ja(gk,b5.prototype);const sg=gk;var aK=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(sg);const oK=aK;function sK(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function lK(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function qm(e,t,r,n,i,o){var u=[],a=ig(t,n),f=a?t.getCalculationInfo("stackResultDimension"):n,p=_k(t,f,e),v=t.indicesOfNearest(f,p)[0];u[i]=t.get(r,v),u[o]=t.get(f,v);var _=t.get(n,v),y=jc(t.get(n,v));return y=Math.min(y,20),y>=0&&(u[o]=+u[o].toFixed(y)),[u,_]}var E0={min:Wn(qm,"min"),max:Wn(qm,"max"),average:Wn(qm,"average"),median:Wn(qm,"median")};function uK(e,t){if(t){var r=e.getData(),n=e.coordinateSystem,i=n.dimensions;if(!lK(t)&&!wt(t.coord)&&n){var o=cK(t,r,n,e);if(t=mr(t),t.type&&E0[t.type]&&o.baseAxis&&o.valueAxis){var u=qr(i,o.baseAxis.dim),a=qr(i,o.valueAxis.dim),f=E0[t.type](r,o.baseDataDim,o.valueDataDim,u,a);t.coord=f[0],t.value=f[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null)t.coord=[];else for(var p=t.coord,v=0;v<2;v++)E0[p[v]]&&(p[v]=_k(r,r.mapDimension(i[v]),p[v]));return t}}function cK(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(hK(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function hK(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function fK(e,t){return e&&e.containData&&t.coord&&!sK(t)?e.containData(t.coord):!0}function dK(e,t){return e?function(r,n,i,o){var u=o<2?r.coord&&r.coord[o]:r.value;return zc(u,t[o])}:function(r,n,i,o){return zc(r.value,t[o])}}function _k(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,u){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var C0=En(),pK=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=sr()},t.prototype.render=function(r,n,i){var o=this,u=this.markerGroupMap;u.each(function(a){C0(a).keep=!1}),n.eachSeries(function(a){var f=sg.getMarkerModelFromSeries(a,o.type);f&&o.renderSeries(a,f,n,i)}),u.each(function(a){!C0(a).keep&&o.group.remove(a.group)})},t.prototype.markKeep=function(r){C0(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;we(r,function(o){var u=sg.getMarkerModelFromSeries(o,i.type);if(u){var a=u.getData();a.eachItemGraphicEl(function(f){f&&(n?uD(f):nb(f))})}})},t.type="marker",t}(ls);const mK=pK;function ZA(e,t,r){var n=t.coordinateSystem;e.each(function(i){var o=e.getItemModel(i),u,a=ti(o.get("x"),r.getWidth()),f=ti(o.get("y"),r.getHeight());if(!isNaN(a)&&!isNaN(f))u=[a,f];else if(t.getMarkerPosition)u=t.getMarkerPosition(e.getValues(e.dimensions,i));else if(n){var p=e.get(n.dimensions[0],i),v=e.get(n.dimensions[1],i);u=n.dataToPoint([p,v])}isNaN(a)||(u[0]=a),isNaN(f)||(u[1]=f),e.setItemLayout(i,u)})}var vK=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var u=sg.getMarkerModelFromSeries(o,"markPoint");u&&(ZA(u.getData(),o,i),this.markerGroupMap.get(o.id).updateLayout())},this)},t.prototype.renderSeries=function(r,n,i,o){var u=r.coordinateSystem,a=r.id,f=r.getData(),p=this.markerGroupMap,v=p.get(a)||p.set(a,new W3),_=gK(u,r,n);n.setData(_),ZA(n.getData(),r,o),_.each(function(y){var S=_.getItemModel(y),A=S.getShallow("symbol"),I=S.getShallow("symbolSize"),M=S.getShallow("symbolRotate"),k=S.getShallow("symbolOffset"),L=S.getShallow("symbolKeepAspect");if(Zt(A)||Zt(I)||Zt(M)||Zt(k)){var z=n.getRawValue(y),V=n.getDataParams(y);Zt(A)&&(A=A(z,V)),Zt(I)&&(I=I(z,V)),Zt(M)&&(M=M(z,V)),Zt(k)&&(k=k(z,V))}var H=S.getModel("itemStyle").getItemStyle(),Z=V5(f,"color");H.fill||(H.fill=Z),_.setItemVisual(y,{symbol:A,symbolSize:I,symbolRotate:M,symbolOffset:k,symbolKeepAspect:L,style:H})}),v.updateData(_),this.group.add(v.group),_.eachItemGraphicEl(function(y){y.traverse(function(S){nn(S).dataModel=n})}),this.markKeep(v),v.group.silent=n.get("silent")||r.get("silent")},t.type="markPoint",t}(mK);function gK(e,t,r){var n;e?n=Bt(e&&e.dimensions,function(a){var f=t.getData().getDimensionInfo(t.getData().mapDimension(a))||{};return lt(lt({},f),{name:a,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Nb(n,r),o=Bt(r.get("data"),Wn(uK,t));e&&(o=di(o,Wn(fK,e)));var u=dK(!!e,n);return i.initData(o,null,u),i}const _K=vK;function yK(e){e.registerComponentModel(oK),e.registerComponentView(_K),e.registerPreprocessor(function(t){iK(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}qc([kZ,nK,eK,yK,DY,DX,rY]);const xK={name:"BusChartVue",components:{"v-chart":JW},data:()=>({bus_plate_hash:{8371:{plate:"粤BDF371",route:1},8421:{plate:"粤BDF421",route:1},8471:{plate:"粤BDF471",route:1},8147:{plate:"粤BDF147",route:1},8335:{plate:"粤BDF335",route:1},8345:{plate:"粤BDF345",route:1},8365:{plate:"粤BDF365",route:1},8411:{plate:"粤BDF411",route:1},8447:{plate:"粤BDE447",route:1},18447:{plate:"粤BDF447",route:1},8458:{plate:"粤BDF458",route:1},8267:{plate:"粤BDF267",route:1},8338:{plate:"粤BDF338",route:1},8330:{plate:"粤BDF330",route:1},298:{plate:"粤BDF298",route:1},363:{plate:"粤BDF363",route:1},8040:{plate:"粤BDF040",route:1},8430:{plate:"粤BDF430",route:1},8470:{plate:"粤BDF470",route:1}},lines:[],stops1:[],stops2:[],historyBusData:[],echartsOption:{tooltip:{show:!1},title:[{subtext:`By bilibili@交通数据小旭学长
GitHub@ni1o1`,sublink:"https://github.com/ni1o1/nikebus",textAlign:"right",bottom:"2%",left:"98%"}],grid:[{top:"10%",bottom:"0%",left:"26px",right:"14px"}],yAxis:[{inverse:!0,min:-100,max:4500,type:"value",boundaryGap:!1,show:!1,splitLine:{show:!1}}],xAxis:[{position:"top",verticalAlign:"top",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0},type:"category",data:[`1号线
工学院方向`,`1号线
欣园方向`,`2号线
科研楼方向`,`2号线
欣园方向`],splitLine:{show:!1}}],series:[{type:"scatter",label:{fontSize:10,show:!0,color:"#999",position:"right",formatter:"{b}"},data:[]},{type:"lines",coordinateSystem:"cartesian2d",data:[]},{label:{fontSize:11,show:!0,color:"#000",textBorderColor:"#fff",textBorderWidth:2,fontWeight:"bold",position:"right",distance:-5,formatter:"{b}"},type:"scatter",name:"bus",data:[]}],stateAnimation:{duration:500}},timer:{},second:0}),methods:{setEchartsOption(e){this.echartsOption=e},load_data(){ji.all([ji.get("/bus_echart/line1.json"),ji.get("/bus_echart/line1_dir2.json"),ji.get("/bus_echart/line2.json"),ji.get("/bus_echart/stop1.json"),ji.get("/bus_echart/stop2.json")]).then(ji.spread((e,t,r,n,i)=>{const o=e.data,u=t.data,a=r.data,f=n.data,p=i.data;this.lines=[o,a,u],this.stops1=f,this.stops2=p;const v=f.features.map(I=>({value:[1,fo(o.features[0],I).properties.location*1e3],name:I.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),_=f.features.map(I=>({value:[0,ga(u.features[0])*1e3-fo(u.features[0],I).properties.location*1e3],name:I.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),y=p.features.map(I=>({value:[3,fo(a.features[0],I).properties.location*1e3],name:I.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),S=p.features.map(I=>({value:[2,ga(a.features[0])*1e3-fo(a.features[0],I).properties.location*1e3],name:I.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),A={series:[{data:[...v,..._,...y,...S]},{data:[{coords:[[0,0],[0,ga(u.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[1,0],[1,ga(o.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[2,0],[2,ga(a.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}},{coords:[[3,0],[3,ga(a.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}}]}]};this.setEchartsOption(A)}))},updateBusPos(){this.lines.length>0&&ji.get("https://bus.sustcra.com/api/v2/monitor_osm/").then(e=>{const r=e.data.filter(i=>i.it==0).map(i=>{let o=0;i.route_code==202&&(o=1);const u=qn([i.lng,i.lat]);let a=this.lines[o].features[0],f=fo(a,u),p=f.properties.location;const v=dN(a,p+1e-4);let _=pN(f,v);_<0&&(_+=360);let y=2;const S=parseInt(i.course)-parseInt(_);if(S<20&&S>-20)return y=1,{value:[y+o*2,p*1e3],name:this.bus_plate_hash[i.id].plate,itemStyle:{color:"#222"},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:i.speed};if(S<-160||S>160){y=0;let A=ga(a)*1e3-p*1e3;return o==0&&(a=this.lines[2].features[0],f=fo(a,u),p=f.properties.location,A=ga(a)*1e3-p*1e3),{value:[y+o*2,A],name:this.bus_plate_hash[i.id].plate,itemStyle:{color:"#222"},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:i.speed}}else if(this.historyBusData.length>0){const A=this.historyBusData.filter(I=>{if(typeof I<"u")return I.name==this.bus_plate_hash[i.id].plate});if(A.length>0)return A[0]}});this.historyBusData=r.filter(i=>typeof i<"u");const n={series:[{},{},{data:r}]};this.setEchartsOption(n)})},refresh(){if(this.second+=1,this.second%10===0)this.updateBusPos();else{const e=this.historyBusData.map(t=>{if(typeof t<"u"){let r=2;t.value[0]==1&&(r=0),t.value[0]==2&&(r=1),t.value[0]==3&&(r=1),t.value[0]==0&&(r=2);let n=t.value[1]+t.speed*.5*1e3/7200;return n>ga(this.lines[r].features[0])*1e3&&(n=ga(this.lines[r].features[0])*1e3),{...t,value:[t.value[0],n]}}});this.historyBusData=e.filter(t=>typeof t<"u"),this.setEchartsOption({series:[{},{},{data:e}]}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{let r=t.coords.latitude,n=t.coords.longitude;const i=qn([n,r]),o=iT(i,this.stops1),u=fo(this.lines[0].features[0],o).properties.location*1e3,a=ga(this.lines[2].features[0])*1e3-fo(this.lines[2].features[0],o).properties.location*1e3,f=iT(i,this.stops2),p=fo(this.lines[1].features[0],f).properties.location*1e3,v=ga(this.lines[1].features[0])*1e3-fo(this.lines[1].features[0],f).properties.location*1e3,_=this.historyBusData.filter(H=>H.value[0]===0&&H.value[1]<=a).map(H=>parseInt((a-H.value[1])/250)),y=this.historyBusData.filter(H=>H.value[0]===1&&H.value[1]<=u).map(H=>parseInt((u-H.value[1])/250)),S=this.historyBusData.filter(H=>H.value[0]===2&&H.value[1]<=v).map(H=>parseInt((v-H.value[1])/250)),A=this.historyBusData.filter(H=>H.value[0]===3&&H.value[1]<=p).map(H=>parseInt((p-H.value[1])/250)),I=_.length>0?`
 约`+Math.min(..._)+"分钟":"",M=y.length>0?`
  约`+Math.min(...y)+"分钟":"",k=S.length>0?`
   约`+Math.min(...S)+"分钟":"",L=A.length>0?`
    约`+Math.min(...A)+"分钟":"";let z=[],V=[];z=[{name:"最近"+M,itemStyle:{color:"#ff881b"},coord:[1,u]},{name:"最近"+I,itemStyle:{color:"#ff881b"},coord:[0,a]}],V=[{name:"最近"+L,itemStyle:{color:"#379ff4"},coord:[3,p]},{name:"最近"+k,itemStyle:{color:"#379ff4"},coord:[2,v]}],this.setEchartsOption({series:[{markPoint:{symbol:"arrow",symbolRotate:-90,symbolOffset:["-50%",0],symbolSize:10,label:{fontSize:10,show:!0,color:"#666",position:"left",formatter:"{b}"},data:[...z,...V]}},{},{}]})})}}},watch:{lines:"updateBusPos"},mounted(){this.load_data(),this.timer=setInterval(()=>{this.refresh()},500)},unmounted(){clearInterval(this.timer)}},bK=e=>(rI("data-v-a6cec6da"),e=e(),nI(),e),wK=bK(()=>Wt("img",{src:"https://visitor-badge.laobi.icu/badge?page_id=nikebus",alt:"visitor badge",class:"visitor-badge"},null,-1));function SK(e,t,r,n,i,o){const u=Ai("v-chart");return Ze(),yt(Zn,null,[Wr(u,{class:"chart",option:e.echartsOption,autoresize:!0},null,8,["option"]),wK],64)}const TK=Dr(xK,[["render",SK],["__scopeId","data-v-a6cec6da"],["__file","BusChartVue.vue"]]),EK=Ka({enhance({app:e}){e.component("BusTable",gF),e.component("Realtimemap",wF),e.component("WeatherSpan",AF),e.component("BusChartVue",TK)}}),Wm=[G4,W4,K4,uO,dO,yO,uz,xB,TB,IB,EK],CK=[["v-8daa1a0e","/",{title:"📚南科手册"},["/index.html","/README.md"]],["v-74bc627b","/about/",{title:"帮助我们完善"},["/about/index.html","/about/README.md"]],["v-08ae5eba","/calendar/2018-2019.html",{title:"校历 - 2018-2019 学年"},["/calendar/2018-2019","/calendar/2018-2019.md"]],["v-93cfbde4","/calendar/2019-2020.html",{title:"校历 - 2019-2020 学年"},["/calendar/2019-2020","/calendar/2019-2020.md"]],["v-f917537a","/calendar/2020-2021.html",{title:"校历 - 2020-2021 学年"},["/calendar/2020-2021","/calendar/2020-2021.md"]],["v-1a0de1a3","/calendar/2021-2022.html",{title:"校历 - 2021-2022 学年"},["/calendar/2021-2022","/calendar/2021-2022.md"]],["v-190ab309","/calendar/2021fall.html",{title:""},["/calendar/2021fall","/calendar/2021fall.md"]],["v-9eb125fa","/calendar/2022-2023.html",{title:"校历 - 2022-2023 学年"},["/calendar/2022-2023","/calendar/2022-2023.md"]],["v-96167c50","/calendar/",{title:"📅校历"},["/calendar/index.html","/calendar/README.md"]],["v-96536bf0","/contact/",{title:"📇黄页"},["/contact/index.html","/contact/README.md"]],["v-dbd38712","/emergency/",{title:"应急处理"},["/emergency/index.html","/emergency/README.md"]],["v-c73889da","/facility/",{title:"🏫建筑与设施"},["/facility/index.html","/facility/README.md"]],["v-2c5c0e04","/facility/building-11-elevator.html",{title:"如何“破解”11栋电梯"},["/facility/building-11-elevator","/facility/building-11-elevator.md"]],["v-104cfa63","/if-you-are-a-freshman/2021.html",{title:"如果你是新生..."},["/if-you-are-a-freshman/2021","/if-you-are-a-freshman/2021.md"]],["v-780207b9","/if-you-are-a-freshman/",{title:"如果你是新生..."},["/if-you-are-a-freshman/index.html","/if-you-are-a-freshman/README.md"]],["v-14e6315a","/life/",{title:"👨‍🎓生活在南科"},["/life/index.html","/life/README.md"]],["v-42f2be94","/life/vehicle-charger.html",{title:"充电桩分布"},["/life/vehicle-charger","/life/vehicle-charger.md"]],["v-ed48bdf8","/media/",{title:"📺媒体与网站"},["/media/index.html","/media/README.md"]],["v-f4bc5604","/miniapp/",{title:"南科手册-微信小程序"},["/miniapp/index.html","/miniapp/README.md"]],["v-1500d063","/news/",{title:"更新日志"},["/news/index.html","/news/README.md"]],["v-014445c8","/organizations/",{title:"🎡社团活动"},["/organizations/index.html","/organizations/README.md"]],["v-461d4a7c","/organizations/registered-organization-2019.html",{title:"注册社团列表（2018-2019年度）"},["/organizations/registered-organization-2019","/organizations/registered-organization-2019.md"]],["v-6ba7e826","/organizations/registered-organization-2020.html",{title:"注册社团列表（2019-2020年度）"},["/organizations/registered-organization-2020","/organizations/registered-organization-2020.md"]],["v-6d5cc0c5","/organizations/registered-organization-2021.html",{title:"注册社团列表（2020-2021年度）"},["/organizations/registered-organization-2021","/organizations/registered-organization-2021.md"]],["v-28ddfa13","/service/",{title:"🖥服务与技巧"},["/service/index.html","/service/README.md"]],["v-be92ea7e","/site-help/",{title:"❓站点帮助"},["/site-help/index.html","/site-help/README.md"]],["v-d7188082","/study/",{title:"🎓学在南科"},["/study/index.html","/study/README.md"]],["v-d1061704","/study/paper-tools.html",{title:"几个赶 ddl 的好用工具🔧"},["/study/paper-tools","/study/paper-tools.md"]],["v-4322d0a7","/surroundings/",{title:"🛍周边"},["/surroundings/index.html","/surroundings/README.md"]],["v-69b23ddf","/transport/",{title:"🚄交通"},["/transport/index.html","/transport/README.md"]],["v-1678dd6f","/transport/bustimer-wx.html",{title:"🚌校园巴士时刻表 SUSTech Campus Bus Info"},["/transport/bustimer-wx","/transport/bustimer-wx.md"]],["v-1630dfb5","/transport/bustimer.html",{title:"🚌校园巴士时刻表 SUSTech Campus Bus Info"},["/transport/bustimer","/transport/bustimer.md"]],["v-6a28f6e0","/transport/holiday.html",{title:"🚌校园巴士 - 节假日 (2021年6月18日更新)"},["/transport/holiday","/transport/holiday.md"]],["v-48975204","/transport/redirect.html",{title:"🚌校园巴士 - 自动跳转"},["/transport/redirect","/transport/redirect.md"]],["v-8059a7a6","/transport/workday.html",{title:"🚌校园巴士 - 工作日 (2021年6月18日更新)"},["/transport/workday","/transport/workday.md"]],["v-22cd7d0c","/facility/panolens/",{title:"全景看校园"},["/facility/panolens/index.html","/facility/panolens/README.md"]],["v-0e92d420","/if-you-are-a-freshman/preview/",{title:"蓢村拾遗：南科大冷知识2021"},["/if-you-are-a-freshman/preview/index.html","/if-you-are-a-freshman/preview/README.md"]],["v-2b8cac58","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.html",{title:"新生攻略之宿舍生活篇"},["/life/by-zhicheng-college/新生攻略之宿舍生活篇.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87","/life/by-zhicheng-college/新生攻略之宿舍生活篇.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.md"]],["v-66965350","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.html",{title:"新生攻略之校内介绍篇"},["/life/by-zhicheng-college/新生攻略之校内介绍篇.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87","/life/by-zhicheng-college/新生攻略之校内介绍篇.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.md"]],["v-66317da4","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.html",{title:"新生攻略之社团篇"},["/life/by-zhicheng-college/新生攻略之社团篇.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87","/life/by-zhicheng-college/新生攻略之社团篇.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.md"]],["v-5c3fcdf6","/life/catering/",{title:"☕️餐饮"},["/life/catering/index.html","/life/catering/README.md"]],["v-04710004","/life/dormitory/",{title:"🏠住在南科"},["/life/dormitory/index.html","/life/dormitory/README.md"]],["v-5589dd0c","/life/dormitory/dorm-floor-plan.html",{title:"宿舍平面图"},["/life/dormitory/dorm-floor-plan","/life/dormitory/dorm-floor-plan.md"]],["v-d42194b6","/life/freshman-register/",{title:"新生报到"},["/life/freshman-register/index.html","/life/freshman-register/README.md"]],["v-20383a78","/life/sports-facility/",{title:"🏊‍♀️运动设施"},["/life/sports-facility/index.html","/life/sports-facility/README.md"]],["v-42c1fa44","/service/campus-card/",{title:"💳校园卡"},["/service/campus-card/index.html","/service/campus-card/README.md"]],["v-76cff034","/service/email/",{title:"电子邮件服务"},["/service/email/index.html","/service/email/README.md"]],["v-ac3449b2","/service/email/send-receive-email-by-proxy.html",{title:"解决邮箱容量不足的问题"},["/service/email/send-receive-email-by-proxy","/service/email/send-receive-email-by-proxy.md"]],["v-29860ed0","/service/mail-and-express/",{title:"📦邮件与快递收发"},["/service/mail-and-express/index.html","/service/mail-and-express/README.md"]],["v-622da02f","/service/matlab/",{title:"MATLAB 激活"},["/service/matlab/index.html","/service/matlab/README.md"]],["v-5e590ec6","/service/medical-treatment/",{title:"🏥就医指南"},["/service/medical-treatment/index.html","/service/medical-treatment/README.md"]],["v-1fa222d4","/service/network/",{title:"🌐网络与信息中心 (its@sustech.edu.cn)"},["/service/network/index.html","/service/network/README.md"]],["v-48519846","/service/sakai/",{title:"Sakai | 文件分享"},["/service/sakai/index.html","/service/sakai/README.md"]],["v-369295b4","/service/sid/",{title:"学号（SID）"},["/service/sid/index.html","/service/sid/README.md"]],["v-3692bb1f","/service/ssc/",{title:""},["/service/ssc/index.html","/service/ssc/README.md"]],["v-425958ce","/service/student-train-ticket/",{title:"火车票学生优惠使用指南"},["/service/student-train-ticket/index.html","/service/student-train-ticket/README.md"]],["v-3692ee77","/service/tax/",{title:"如何申报退税？-- 年度个人所得税年度汇算"},["/service/tax/index.html","/service/tax/README.md"]],["v-2686552a","/service/unifound/",{title:"🖨️联创打印系统"},["/service/unifound/index.html","/service/unifound/README.md"]],["v-45d74ec0","/service/work-wechat/",{title:"企业微信"},["/service/work-wechat/index.html","/service/work-wechat/README.md"]],["v-772a5784","/study/borrow-books/",{title:"📗教材与图书借还"},["/study/borrow-books/index.html","/study/borrow-books/README.md"]],["v-8460eeb8","/study/by-shude-college/advice-on-study.html",{title:"📖学习建议"},["/study/by-shude-college/advice-on-study","/study/by-shude-college/advice-on-study.md"]],["v-435bd49a","/study/by-shude-college/info-on-study.html",{title:"📖学习制度与信息"},["/study/by-shude-college/info-on-study","/study/by-shude-college/info-on-study.md"]],["v-6323734e","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.html",{title:"新生攻略之学习篇"},["/study/by-zhicheng-college/新生攻略之学习篇.html","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87","/study/by-zhicheng-college/新生攻略之学习篇.md","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.md"]],["v-5eb748bf","/study/cse/innovative-project.html",{title:"南方科技大学计算机系创新实践项目汇总"},["/study/cse/innovative-project","/study/cse/innovative-project.md"]],["v-2a23f022","/service/blackboard/retrive-ics-url/",{title:"BB | 将Blackboard中作业，DDL等日程添加到系统日历"},["/service/blackboard/retrive-ics-url/index.html","/service/blackboard/retrive-ics-url/README.md"]],["v-66061b92","/service/network/apply-for-vpn/",{title:"申请回校VPN"},["/service/network/apply-for-vpn/index.html","/service/network/apply-for-vpn/README.md"]],["v-89ac2bec","/service/network/choose-a-pad/",{title:"选择一台合适的平板电脑"},["/service/network/choose-a-pad/index.html","/service/network/choose-a-pad/README.md"]],["v-1549b190","/service/network/choose-a-router/",{title:"📶选择一台合适的路由器"},["/service/network/choose-a-router/index.html","/service/network/choose-a-router/README.md"]],["v-9e1961f8","/service/network/eduroam/",{title:"eduroam（学术网路漫游）"},["/service/network/eduroam/index.html","/service/network/eduroam/README.md"]],["v-6bba5e58","/service/network/ipv6/",{title:"校内 IPv6 设置教程"},["/service/network/ipv6/index.html","/service/network/ipv6/README.md"]],["v-83a77034","/service/network/remote-desktop/",{title:"校内远程桌面使用指北"},["/service/network/remote-desktop/index.html","/service/network/remote-desktop/README.md"]],["v-296d1d15","/service/network/use-vpn/",{title:"使用 SSL VPN 说明"},["/service/network/use-vpn/index.html","/service/network/use-vpn/README.md"]],["v-fb711be8","/study/book-list-by-prof-yuan/2018/",{title:"袁长庚老师为新生推荐的书单（2018）"},["/study/book-list-by-prof-yuan/2018/index.html","/study/book-list-by-prof-yuan/2018/README.md"]],["v-3706649a","/404.html",{title:""},["/404"]]];var XA=Cr({name:"Vuepress",setup(){const e=L4();return()=>Er(e.value)}}),AK=()=>CK.reduce((e,[t,r,n,i])=>(e.push({name:t,path:r,component:XA,meta:n},...i.map(o=>({path:o,redirect:r}))),e),[{name:"404",path:"/:catchAll(.*)",component:XA}]),IK=T4,MK=()=>{const e=w4({history:IK(tI("/")),routes:AK(),scrollBehavior:(t,r,n)=>n||(t.hash?{el:t.hash}:{top:0})});return e.beforeResolve(async(t,r)=>{var n;(t.path!==r.path||r===S4)&&([Hs.value]=await Promise.all([Yo.resolvePageData(t.name),(n=iI[t.name])==null?void 0:n.__asyncLoader()]))}),e},PK=e=>{e.component("ClientOnly",sx),e.component("Content",F4)},DK=(e,t,r)=>{const n=bt(()=>Yo.resolveLayouts(r)),i=bt(()=>Yo.resolveRouteLocale(wc.value.locales,t.currentRoute.value.path)),o=bt(()=>Yo.resolveSiteLocaleData(wc.value,i.value)),u=bt(()=>Yo.resolvePageFrontmatter(Hs.value)),a=bt(()=>Yo.resolvePageHeadTitle(Hs.value,o.value)),f=bt(()=>Yo.resolvePageHead(a.value,u.value,o.value)),p=bt(()=>Yo.resolvePageLang(Hs.value)),v=bt(()=>Yo.resolvePageLayout(Hs.value,n.value));return e.provide(M4,n),e.provide(oI,u),e.provide(k4,a),e.provide(sI,f),e.provide(lI,p),e.provide(cI,v),e.provide(ax,i),e.provide(hI,o),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get:()=>u.value},$head:{get:()=>f.value},$headTitle:{get:()=>a.value},$lang:{get:()=>p.value},$page:{get:()=>Hs.value},$routeLocale:{get:()=>i.value},$site:{get:()=>wc.value},$siteLocale:{get:()=>o.value},$withBase:{get:()=>cg}}),{layouts:n,pageData:Hs,pageFrontmatter:u,pageHead:f,pageHeadTitle:a,pageLang:p,pageLayout:v,routeLocale:i,siteData:wc,siteLocaleData:o}},kK=()=>{const e=us(),t=D4(),r=uI(),n=Tn([]),i=()=>{t.value.forEach(u=>{const a=LK(u);a&&n.value.push(a)})},o=()=>{document.documentElement.lang=r.value,n.value.forEach(u=>{u.parentNode===document.head&&document.head.removeChild(u)}),n.value.splice(0,n.value.length),t.value.forEach(u=>{const a=OK(u);a!==null&&(document.head.appendChild(a),n.value.push(a))})};ug(R4,o),Xi(()=>{i(),o(),Ia(()=>e.path,()=>o())})},LK=([e,t,r=""])=>{const n=Object.entries(t).map(([a,f])=>Eo(f)?`[${a}=${JSON.stringify(f)}]`:f===!0?`[${a}]`:"").join(""),i=`head > ${e}${n}`;return Array.from(document.querySelectorAll(i)).find(a=>a.innerText===r)||null},OK=([e,t,r])=>{if(!Eo(e))return null;const n=document.createElement(e);return ix(t)&&Object.entries(t).forEach(([i,o])=>{Eo(o)?n.setAttribute(i,o):o===!0&&n.setAttribute(i,"")}),Eo(r)&&n.appendChild(document.createTextNode(r)),n},RK=x4,zK=async()=>{var r;const e=RK({name:"VuepressApp",setup(){var n;kK();for(const i of Wm)(n=i.setup)==null||n.call(i);return()=>[Er(b4),...Wm.flatMap(({rootComponents:i=[]})=>i.map(o=>Er(o)))]}}),t=MK();PK(e),DK(e,t,Wm);for(const n of Wm)await((r=n.enhance)==null?void 0:r.call(n,{app:e,router:t,siteData:wc}));return e.use(t),{app:e,router:t}};zK().then(({app:e,router:t})=>{t.isReady().then(()=>{e.mount("#app")})});export{zK as createVueApp};
